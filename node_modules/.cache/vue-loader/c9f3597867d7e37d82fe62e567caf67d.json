{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab2-left.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab2-left.vue","mtime":1663479653290},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCAnb2wvb2wuY3NzJw0KaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAnDQppbXBvcnQgKiBhcyBvbENvbnRyb2wgZnJvbSAnb2wvY29udHJvbCcNCmltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnDQppbXBvcnQgeyBnZXRXaWR0aCwgZ2V0Q2VudGVyIH0gZnJvbSAnb2wvZXh0ZW50Jw0KaW1wb3J0IFRpbGVMYXllciBmcm9tICdvbC9sYXllci9UaWxlJw0KaW1wb3J0IFdNVFMgZnJvbSAnb2wvc291cmNlL1dNVFMnDQppbXBvcnQgWFlaIGZyb20gJ29sL3NvdXJjZS9YWVonDQppbXBvcnQgV01UU1RpbGVHcmlkIGZyb20gJ29sL3RpbGVncmlkL1dNVFMnDQppbXBvcnQgUHJvamVjdGlvbiBmcm9tICdvbC9wcm9qL1Byb2plY3Rpb24nDQppbXBvcnQgcHJvajQgZnJvbSAncHJvajQnDQppbXBvcnQgeyByZWdpc3RlciB9IGZyb20gJ29sL3Byb2ovcHJvajQnOw0KaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yJw0KaW1wb3J0IHsgVGlsZVdNUyB9IGZyb20gJ29sL3NvdXJjZScNCmltcG9ydCBWZWN0b3JMYXllciBmcm9tICdvbC9sYXllci9WZWN0b3InDQppbXBvcnQgRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlJw0KaW1wb3J0IHsgRHJhdyB9IGZyb20gJ29sL2ludGVyYWN0aW9uJw0KaW1wb3J0IHsgU3R5bGUsIENpcmNsZSwgU3Ryb2tlLCBGaWxsLCBJY29uLCBJY29uSW1hZ2UsIEltYWdlLCBUZXh0IH0gZnJvbSAnb2wvc3JjL3N0eWxlJw0KaW1wb3J0IFdLVCBmcm9tICdvbC9mb3JtYXQvV0tUJw0KaW1wb3J0IEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04nDQppbXBvcnQgT3ZlcmxheSBmcm9tICdvbC9PdmVybGF5Jw0KaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICJlY2hhcnRzIjsNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycNCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcNCmltcG9ydCB0YWIyUmlnaHRWdWUgZnJvbSAnLi90YWIyLXJpZ2h0LnZ1ZScNCmltcG9ydCB7IGZvcm1hdEZpeE51bSwgY29udmVydEZlYXR1cmUgfSBmcm9tICJAL2FwaS9jb21tb24vY29tbW9uIjsNCmltcG9ydCB7IGZlYXR1cmVDb21wYWlyZSB9IGZyb20gIkAvYXBpL2RlY2lzaW9uL3BsYW5lIjsNCmltcG9ydCAqIGFzIHR1cmYgZnJvbSAnQHR1cmYvdHVyZic7DQppbXBvcnQgUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludCc7DQppbXBvcnQgeyBmcm9tTG9uTGF0LCB0b0xvbkxhdCwgdHJhbnNmb3JtRXh0ZW50LCB0cmFuc2Zvcm0gfSBmcm9tICdvbC9wcm9qJw0KaW1wb3J0IExpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nJzsNCmltcG9ydCBNdWx0aUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcnOw0KaW1wb3J0IHsgZmluZENvbXBvbmVudEluZm8gfSBmcm9tICJAL2FwaS9jb25maWcvY29tcG9uZW50IjsNCmltcG9ydCB7IGdldFVybEtleSB9IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcNCmltcG9ydCB7IGdldEFyZWEsIGdldExlbmd0aCB9IGZyb20gJ29sL3NwaGVyZSc7DQppbXBvcnQgeyBpbml0VHJlZUxpc3QgfSBmcm9tICJAL2FwaS9kZWNpc2lvbi1tYW5hZ2UvZGVjaXNpb24iOw0KDQoNCg0KLy/kuK3lv4PlnZDmoIcNCmNvbnN0IGNlbnRlckNvcmRpbmF0ZSA9IFs2NTY4MTMuNDQyNTYsIDM1NjA0MzIuOTgyNDVdDQovL+WdkOagh+WumuS5iQ0KcHJvajQuZGVmcygiRVBTRzo0NTQ4IiwgIitwcm9qPXRtZXJjICtsYXRfMD0wICtsb25fMD0xMTcgK2s9MSAreF8wPTUwMDAwMCAreV8wPTAgK2VsbHBzPUdSUzgwICt1bml0cz1tICtub19kZWZzIik7DQpyZWdpc3Rlcihwcm9qNCk7DQpsZXQgbmV3TGlzdCA9IFtdDQpsZXQgcGFyZW50VmFsPScnDQovL+WcsOWbvuWIneWni+WMlg0KY29uc3QgdmlldyA9IG5ldyBWaWV3KHsNCiAgY2VudGVyOiB0cmFuc2Zvcm0oY2VudGVyQ29yZGluYXRlLCAnRVBTRzo0NTQ4JywgJ0VQU0c6Mzg1NycpLA0KICBtaW5ab29tOiAxMCwNCiAgbWF4Wm9vbTogMTgsDQogIHpvb206IDEzLjUvLyDlnLDlm77liJ3lp4vljJbnmoTnvKnmlL7nuqfliKsNCn0pDQoNCg0KLy/pq5jlvrflnLDlm77lm77lsYINCmNvbnN0IGdhb2RlTWFwTGF5ZXIgPSBuZXcgVGlsZUxheWVyKHsNCiAgc291cmNlOiBuZXcgWFlaKHsNCiAgICB1cmw6ICdodHRwOi8vd2Vic3QwezEtNH0uaXMuYXV0b25hdmkuY29tL2FwcG1hcHRpbGU/bGFuZz16aF9jbiZzaXplPTEmc2NsPTImc3R5bGU9NyZ4PXt4fSZ5PXt5fSZ6PXt6fScNCiAgfSkNCn0pOw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxlZnRQbGFuZUxpc3Q6IFtdLA0KICAgICAgcG9wVHJhbnNMaXN0OiBbDQogICAgICAgIHsgbGFiZWw6ICdBQuS6pOmAmumHjycsIHByb3BlcnRpZTogJ2FiX2Zsb3cnLCB1bml0OiAncGN1L2gnLCB0eXBlOiAnaW50JyB9LA0KICAgICAgICB7IGxhYmVsOiAnQkHkuqTpgJrph48nLCBwcm9wZXJ0aWU6ICdiYV9mbG93JywgdW5pdDogJ3BjdS9oJywgdHlwZTogJ2ludCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ+aAu+S6pOmAmumHjycsIHByb3BlcnRpZTogJ3RvdF9mbG93JywgdW5pdDogJ3BjdS9oJywgdHlwZTogJ2ludCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ0FC6aWx5ZKM5bqmJywgcHJvcGVydGllOiAnYWJfdm9jJywgbWF4bGVuZ3RoOiAyLCB0eXBlOiAnZmxvYXQnIH0sDQogICAgICAgIHsgbGFiZWw6ICdCQemlseWSjOW6picsIHByb3BlcnRpZTogJ2JhX3ZvYycsIG1heGxlbmd0aDogMiwgdHlwZTogJ2Zsb2F0JyB9LA0KICAgICAgICB7IGxhYmVsOiAn5pyA5aSn6aWx5ZKM5bqmJywgcHJvcGVydGllOiAnbWF4X3ZvYycsIG1heGxlbmd0aDogMiwgdHlwZTogJ2Zsb2F0JyB9LA0KICAgICAgXSwNCiAgICAgIGxlZnRQbGFuZTogJycsDQogICAgICByaWdodFNlbGVjdGVkUGxhbmU6IG51bGwsDQogICAgICB2ZWN0b3JMYXllcjogbnVsbCwNCiAgICAgIHpvb21UaHJlc2hvbGQ6IDE1LjcsDQogICAgICBpbml0U3R5bGVGbGFnOiBmYWxzZSwNCiAgICAgIHN0eWxlOiB7DQogICAgICAgIGxpbmVfd2lkdGg6IDMsDQogICAgICAgIGxpbmVfc3Ryb2tlOiAnIzQ1OWM1MCcsDQogICAgICAgIGludGVydmFsOiA0MA0KICAgICAgfSwNCiAgICAgIG1hcDogbnVsbA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQoNCiAgICAvL+iOt+WPluiPnOWNlUlEDQogICAgdGhpcy5tZW51SWQgPSBnZXRVcmxLZXkoJ21lbnVJZCcpOw0KICAgIC8v5qC55o2u6I+c5Y2VSUTmn6Xor6Lnu4Tku7bkv6Hmga8NCiAgICB0aGlzLmluaXRDb21wb25lbnRJbmZvKCk7DQoNCiAgICB0aGlzLmluaXRNYXAoKTsNCg0KDQogICAgLy8g6auY5LquDQogICAgdGhpcy4kYmFzLiRvbigiYWRkTGVmdEhpZ2hMaWdodFN0eWxlIiwgKGksIGosIG51bSkgPT4gew0KICAgICAgdGhpcy5hZGRIaWdoTGlnaHRTdHlsZShpLCBqLCBudW0pDQogICAgfSkNCiAgICAvL+a4hemZpOmrmOS6rg0KICAgIHRoaXMuJGJhcy4kb24oImNsZWFySGlnaGxpZ2h0X1kiLCAoaSkgPT4gew0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpDQogICAgfSkNCg0KICAgIHRoaXMubGVmdFBsYW5lTGlzdCA9IG5ld0xpc3Q7DQogICAgdGhpcy5sZWZ0UGxhbmVMaXN0ID0gdGhpcy5sZWZ0UGxhbmVMaXN0LmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgcmV0dXJuIGl0ZW0uYml6VmFsID09IHBhcmVudFZhbA0KICAgIH0pDQoNCiAgICB0aGlzLiRiYXMuJG9uKCJyaWdodFBsYW5lQ2hhbmdlIiwgKGkpID0+IHsNCiAgICAgIHRoaXMubGVmdFBsYW5lTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3TGlzdCkpOw0KICAgICAgdGhpcy5yaWdodFNlbGVjdGVkUGxhbmUgPSBpOw0KICAgICAgZGVidWdnZXINCiAgICAgIGNvbnNvbGUubG9nKHBhcmVudFZhbCkNCiAgICAgIHRoaXMubGVmdFBsYW5lTGlzdCA9IHRoaXMubGVmdFBsYW5lTGlzdC5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWUgIT0gaSAmJiBpdGVtLmJpelZhbCA9PSBwYXJlbnRWYWwNCiAgICAgIH0pDQogICAgICBjb25zb2xlLmxvZyh0aGlzLmxlZnRQbGFuZUxpc3QpOw0KICAgICAgdGhpcy5sZWZ0UGxhbmUgPSB0aGlzLmxlZnRQbGFuZUxpc3RbMF0udmFsdWUNCiAgICAgIHRoaXMucmlnaHRTZWxlY3RlZFBsYW5lPWkNCiAgICAgIHRoaXMuaW5pdFZlY3RvckxheWVyKCkNCiAgICB9KQ0KDQogICAgLy/mi5bliqjnm5HlkKzmlrnms5UNCiAgICB0aGlzLiRiYXMuJG9uKCJyaWdodFBhbmVsRHJhZ2VDaGFuZ2UiLCAoY29yZGluYXRlLCB6b29tKSA9PiB7DQogICAgICBpZiAoY29yZGluYXRlICYmIHpvb20pIHsNCiAgICAgICAgdGhpcy5sZWZ0Q3VycmVudENvcmRpbmF0ZSA9IGNvcmRpbmF0ZTsNCiAgICAgICAgdGhpcy5sZWZ0Q3VycmVudFpvb20gPSB6b29tOw0KICAgICAgICB2aWV3LmFuaW1hdGUoew0KICAgICAgICAgIGNlbnRlcjogY29yZGluYXRlLA0KICAgICAgICAgIHpvb206IHpvb20sIC8vIOe8qeaUvue6p+WIqw0KICAgICAgICAgIHJvdGF0aW9uOiB1bmRlZmluZWQsDQogICAgICAgICAgZHVyYXRpb246IDEwDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSkNCg0KICAgIC8v57yp5pS+55uR5ZCsDQogICAgdGhpcy4kYmFzLiRvbigicmlnaHRNb3Z2ZW5kQ2hhbmdlIiwgKGNvcmRpbmF0ZSwgem9vbSkgPT4gew0KICAgICAgaWYgKGNvcmRpbmF0ZSAmJiB6b29tKSB7DQogICAgICAgIHRoaXMubGVmdEN1cnJlbnRDb3JkaW5hdGUgPSBjb3JkaW5hdGU7DQogICAgICAgIHRoaXMubGVmdEN1cnJlbnRab29tID0gem9vbTsNCiAgICAgICAgdmlldy5hbmltYXRlKHsNCiAgICAgICAgICBjZW50ZXI6IGNvcmRpbmF0ZSwNCiAgICAgICAgICB6b29tOiB6b29tLCAvLyDnvKnmlL7nuqfliKsNCiAgICAgICAgICByb3RhdGlvbjogdW5kZWZpbmVkLA0KICAgICAgICAgIGR1cmF0aW9uOiAxMA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0pDQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAvL+S6pOmAmuS/oeaBr+eCueWHu+aMiemSrg0KICAgIHdpbmRvdy5wcmV2aWV3MSA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvMicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8xJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4xJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4yJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjRDNENkRCJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvNCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8zJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4zJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG40Jykuc3R5bGUuYmFja2dyb3VuZCA9ICcjRDNENkRCJzsNCiAgICB9DQogICAgLy/ln7rmnKzkv6Hmga/ngrnlh7vmjInpkq4NCiAgICB3aW5kb3cucHJldmlldzIgPSBmdW5jdGlvbiAoKSB7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8xJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuMicpLnN0eWxlLmJhY2tncm91bmQgPSAnIzAwNEFCMyc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuMScpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRDNENkRCJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvNCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzMnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG40Jykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4zJykuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNEM0Q2REInOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KDQogICAgLy/mt7vliqDot6/mrrXmloflrZfmoIfms6gNCiAgICBhZGRNYXJrVGV4dExheWVyICgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2FxdWlyZVBvaW50TWFya0RhdGEnLCB0aGlzLm1hcERhdGEpOw0KICAgIH0sDQoNCiAgICBjaGFuZ2VDb21wYXJlSXRlbUJ5Qml6VHlwZSAocGFyZW50VmFsLCB0aGlzXykgew0KICAgICAgcGFyZW50VmFsPXBhcmVudFZhbA0KICAgICAgdGhpc18ubGVmdFBsYW5lTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobmV3TGlzdCkpOw0KICAgICAgdGhpc18ubGVmdFBsYW5lTGlzdCA9IHRoaXNfLmxlZnRQbGFuZUxpc3QuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmJpelZhbCA9PSBwYXJlbnRWYWwNCiAgICAgIH0pDQogICAgICB0aGlzXy5sZWZ0UGxhbmUgPSB0aGlzXy5sZWZ0UGxhbmVMaXN0WzBdLnZhbHVlDQogICAgICB0aGlzXy5pbml0VmVjdG9yTGF5ZXIoKQ0KICAgICAgcmV0dXJuIHRoaXNfLmxlZnRQbGFuZTsNCiAgICB9LA0KDQogICAgaW5pdENvbXBvbmVudEluZm8gKCkgew0KICAgICAgbGV0IHBhcmFtID0ge307DQogICAgICB0aGlzLm9wdGlvbnM9W10NCiAgICAgIHBhcmFtLmJpektleSA9ICdwbGFuZV9jb21wYXJlJw0KICAgICAgaW5pdFRyZWVMaXN0KHBhcmFtKS50aGVuKHJlcz0+IHsNCiAgICAgICAgbGV0IHJlc3BvbnNlRGF0YSA9IHJlcy5kYXRhWzBdLmNoaWxkcmVuOw0KICAgICAgICAvL+WIneWni+WMlumhtemdoumAieaLqem7mOiupOesrOS4gOS4qg0KICAgICAgICByZXNwb25zZURhdGFbMF0uY2hpbGRyZW4uZm9yRWFjaChzPT57DQogICAgICAgICAgdGhpcy5sZWZ0UGxhbmVMaXN0LnB1c2goew0KICAgICAgICAgICAgbGF5ZXJOYW1lOiBzLmxheWVyTmFtZSwNCiAgICAgICAgICAgIG5hbWU6cy5uYW1lLCANCiAgICAgICAgICAgIHZhbHVlOiBzLmlkLA0KICAgICAgICAgICAgYml6VmFsOiBzLnBhcmVudElkDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLy9uZXdsaXN0IOiOt+WPluWFqOmDqOeahOaVsOaNriDnrZvpgInnlKgNCiAgICAgICAgcmVzcG9uc2VEYXRhLmZvckVhY2goc3M9PnsNCiAgICAgICAgICBzcy5jaGlsZHJlbi5mb3JFYWNoKHI9PnsNCiAgICAgICAgICAgIG5ld0xpc3QucHVzaCh7DQogICAgICAgICAgICBsYXllck5hbWU6IHIubGF5ZXJOYW1lLA0KICAgICAgICAgICAgbmFtZTpyLm5hbWUsIA0KICAgICAgICAgICAgdmFsdWU6IHIuaWQsDQogICAgICAgICAgICBiaXpWYWw6IHIucGFyZW50SWQsDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgZGVidWdnZXINCiAgICAgIHBhcmVudFZhbD1yZXNwb25zZURhdGFbMF0uaWQNCiAgICAgIHRoaXMucmlnaHRTZWxlY3RlZFBsYW5lPXRoaXMubGVmdFBsYW5lTGlzdFsxXS52YWx1ZQ0KICAgICAgdGhpcy5sZWZ0UGxhbmU9dGhpcy5sZWZ0UGxhbmVMaXN0WzBdLnZhbHVlDQogICAgICAvLyDliJ3lp4vljJblm77lsYINCiAgICAgIHRoaXMuaW5pdFZlY3RvckxheWVyKCk7DQogICAgICB9KTsNCiAgICB9LA0KDQoNCiAgICAvLyBnZXRQb2ludHNCeUxpbmUgKGNvb3JkcywgZGlyKSB7DQogICAgLy8gICBsZXQgdGhpc18gPSB0aGlzOw0KICAgIC8vICAgbGV0IHN0eWxlcyA9IFtdOw0KICAgIC8vICAgbGV0IGRpc3RhbmNlXyA9IHRoaXNfLnN0eWxlLmludGVydmFsIC8gMjsvL+mmluS4queCueaUvue9ruWcqOi3neemu+i1t+eCuTEvMumXtOmalOeahOS9jee9rg0KICAgIC8vICAgbGV0IHBpeF9zdGFydCA9IHRoaXNfLm1hcERhdGEuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjb29yZHNbMF0pDQogICAgLy8gICBsZXQgcGl4X2VuZA0KICAgIC8vICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHsNCiAgICAvLyAgICAgbGV0IGNvb3JkXywgY29vcmRfcGl4Ow0KICAgIC8vICAgICBsZXQgc3R5bGVfOw0KICAgIC8vICAgICBwaXhfZW5kID0gdGhpc18ubWFwRGF0YS5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNvb3Jkc1tpXSk7DQogICAgLy8gICAgIGxldCBkaXNfc3RhcnQyZW5kID0gTWF0aC5zcXJ0KE1hdGgucG93KChwaXhfc3RhcnRbMF0gLSBwaXhfZW5kWzBdKSwgMikgKyBNYXRoLnBvdygocGl4X3N0YXJ0WzFdIC0gcGl4X2VuZFsxXSksIDIpKSAvLyDorqHnrpfmlLblsL7lnKjlsY/luZXkuIrnmoTot53nprsNCiAgICAvLyAgICAgaWYgKGRpc19zdGFydDJlbmQgPiBkaXN0YW5jZV8pIHsgLy8g6Led56a75aSn5LqO6Ze06ZqUDQogICAgLy8gICAgICAgLy8g6K6h566X6Led56a75byA5aeL54K55L2N55qE5YOP57Sg5YC8DQogICAgLy8gICAgICAgY29vcmRfcGl4ID0gWw0KICAgIC8vICAgICAgICAgKGRpc3RhbmNlXyAqIChwaXhfZW5kWzBdIC0gcGl4X3N0YXJ0WzBdKSkgLyBkaXNfc3RhcnQyZW5kICsgcGl4X3N0YXJ0WzBdLA0KICAgIC8vICAgICAgICAgKGRpc3RhbmNlXyAqIChwaXhfZW5kWzFdIC0gcGl4X3N0YXJ0WzFdKSkgLyBkaXNfc3RhcnQyZW5kICsgcGl4X3N0YXJ0WzFdDQogICAgLy8gICAgICAgXTsNCiAgICAvLyAgICAgICAvLyDorqHnrpfnu4/nuqzluqYNCiAgICAvLyAgICAgICBjb29yZF8gPSB0aGlzXy5tYXBEYXRhLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoY29vcmRfcGl4KTsNCiAgICAvLyAgICAgICB2YXIgcm90YXRpb24gPSBNYXRoLlBJIC8gMiArIE1hdGguYXRhbjIocGl4X2VuZFsxXSAtIHBpeF9zdGFydFsxXSwgcGl4X2VuZFswXSAtIHBpeF9zdGFydFswXSk7DQogICAgLy8gICAgICAgaWYgKGRpciA9PSAtMSkgew0KICAgIC8vICAgICAgICAgcm90YXRpb24gPSByb3RhdGlvbiArIE1hdGguUEkNCiAgICAvLyAgICAgICB9DQogICAgLy8gICAgICAgLy8g55Sf5oiQ5qC35byPDQogICAgLy8gICAgICAgc3R5bGVfID0gbmV3IFN0eWxlKHsNCiAgICAvLyAgICAgICAgIC8vIOeureWktOeCueeahOS9jee9rg0KICAgIC8vICAgICAgICAgZ2VvbWV0cnk6IG5ldyBQb2ludChjb29yZF8pLA0KICAgIC8vICAgICAgIH0pDQogICAgLy8gICAgICAgLy8gIGlmIChkaXIgIT0gMCkgew0KICAgIC8vICAgICAgIC8vIOeureWktOeCueeahOagt+W8jw0KICAgIC8vICAgICAgIGxldCBpbWFnZSA9IG5ldyBJY29uKHsNCiAgICAvLyAgICAgICAgIHNyYzogcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL2p1ZWNlL3VwMTAtMTAucG5nJyksDQogICAgLy8gICAgICAgICByb3RhdGVXaXRoVmlldzogdHJ1ZSwNCiAgICAvLyAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbiwNCiAgICAvLyAgICAgICAgIHNjYWxlOiB0aGlzLnN0eWxlLmxpbmVfd2lkdGggLyA1LA0KICAgIC8vICAgICAgICAgaW1nU2l6ZTogWzEwLCAxMF0NCiAgICAvLyAgICAgICB9KQ0KICAgIC8vICAgICAgIHN0eWxlXy5zZXRJbWFnZShpbWFnZSk7DQogICAgLy8gICAgICAgLy8gfQ0KDQoNCiAgICAvLyAgICAgICAvL+S4i+asoeW+queOr+W8gOWni+eCueS4uuW9k+WJjeeCuQ0KICAgIC8vICAgICAgIHBpeF9zdGFydCA9IGNvb3JkX3BpeDsNCiAgICAvLyAgICAgICBkaXN0YW5jZV8gPSB0aGlzXy5zdHlsZS5pbnRlcnZhbDsNCiAgICAvLyAgICAgICBpLS07DQogICAgLy8gICAgIH0gZWxzZSBpZiAoZGlzX3N0YXJ0MmVuZCA9PSBkaXN0YW5jZV8pIHsvLyDot53nprvnrYnkuo7pl7TpmpQNCiAgICAvLyAgICAgICB2YXIgcm90YXRpb24gPSBNYXRoLlBJIC8gMiArIE1hdGguYXRhbjIocGl4X2VuZFsxXSAtIHBpeF9zdGFydFsxXSwgcGl4X2VuZFswXSAtIHBpeF9zdGFydFswXSkNCiAgICAvLyAgICAgICBpZiAoZGlyID09IC0xKSB7DQogICAgLy8gICAgICAgICByb3RhdGlvbiA9IHJvdGF0aW9uICsgTWF0aC5QSQ0KICAgIC8vICAgICAgIH0NCiAgICAvLyAgICAgICAvLyDnlJ/miJDmoLflvI8NCiAgICAvLyAgICAgICBzdHlsZV8gPSBuZXcgU3R5bGUoew0KICAgIC8vICAgICAgICAgLy8g566t5aS054K555qE5L2N572uDQogICAgLy8gICAgICAgICBnZW9tZXRyeTogbmV3IFBvaW50KGNvb3Jkc1tpXSksDQogICAgLy8gICAgICAgICAvLyDnrq3lpLTngrnnmoTmoLflvI8NCiAgICAvLyAgICAgICAgIGltYWdlOiBuZXcgSWNvbih7DQogICAgLy8gICAgICAgICAgIHNyYzogcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL2p1ZWNlL3VwMTAtMTAucG5nJyksDQogICAgLy8gICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0cnVlLA0KICAgIC8vICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb24sDQogICAgLy8gICAgICAgICAgIHNjYWxlOiB0aGlzLnN0eWxlLmxpbmVfd2lkdGggLyA1LA0KICAgIC8vICAgICAgICAgICBpbWdTaXplOiBbMTAsIDEwXQ0KICAgIC8vICAgICAgICAgfSkNCiAgICAvLyAgICAgICB9KQ0KICAgIC8vICAgICAgIHBpeF9zdGFydCA9IHBpeF9lbmQ7DQogICAgLy8gICAgICAgZGlzdGFuY2VfID0gdGhpc18uc3R5bGUuaW50ZXJ2YWw7DQogICAgLy8gICAgIH0gZWxzZSB7Ly/ot53nprvlsI/kuo7pl7TpmpQNCiAgICAvLyAgICAgICBkaXN0YW5jZV8gPSBkaXN0YW5jZV8gLSBkaXNfc3RhcnQyZW5kOw0KICAgIC8vICAgICAgIHBpeF9zdGFydCA9IHBpeF9lbmQ7DQogICAgLy8gICAgIH0NCiAgICAvLyAgICAgc3R5bGVfICYmIHN0eWxlcy5wdXNoKHN0eWxlXykNCiAgICAvLyAgIH0NCiAgICAvLyAgIHJldHVybiBzdHlsZXMNCiAgICAvLyB9LA0KDQogICAgZ2V0UG9pbnRFeHRlbnQgKG4pIHsNCiAgICAgIG4gPSBuID8gbiA6IDEuMjsNCiAgICAgIGxldCB2aWV3ID0gdGhpcy5tYXBEYXRhLmdldFZpZXcoKTsNCiAgICAgIGxldCBtYXBzaXplID0gdGhpcy5tYXBEYXRhLmdldFNpemUoKS5tYXAoaXRfID0+IHsNCiAgICAgICAgcmV0dXJuIGl0XyAqIG4NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHZpZXcuY2FsY3VsYXRlRXh0ZW50KG1hcHNpemUpOw0KICAgIH0sDQoNCg0KICAgIGdldE1pZGRsZVBvaW50IChjb29yZHMsIGZlYXR1cmUpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGlmIChjb29yZHMgPT0gbnVsbCB8fCBjb29yZHMubGVuZ3RoID09IDAgfHwgY29vcmRzID09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmIChjb29yZHMubGVuZ3RoIDw9IDMpIHsNCiAgICAgICAgICB2YXIgcG9pbnRfZmVhdHVyZXMgPSB0dXJmLnBvaW50cyhmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKVswXSk7DQogICAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0dXJmLmNlbnRlcihwb2ludF9mZWF0dXJlcykuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpOw0KICAgICAgICB9DQogICAgICAgIGlmIChjb29yZHMubGVuZ3RoICUgMiA9PSAwKSB7DQogICAgICAgICAgcmV0dXJuIG5ldyBQb2ludChjb29yZHNbY29vcmRzLmxlbmd0aCAvIDJdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiBuZXcgUG9pbnQoY29vcmRzW01hdGguY2VpbChjb29yZHMubGVuZ3RoIC8gMildKQ0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgfQ0KDQogICAgfSwNCg0KDQogICAgaW5pRmxvd09yVm9jVGV4dCAoY29vcmRzLCBmZWF0dXJlLCB0aGlzXywgdGV4dCwgb2Zmc2V0WCwgb2Zmc2V0eSkgew0KICAgICAgbGV0IGNlbnRlclBvaW50ID0gdGhpcy5nZXRNaWRkbGVQb2ludChjb29yZHMsIGZlYXR1cmUpOw0KICAgICAgaWYgKCFjZW50ZXJQb2ludCkgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgIH0NCiAgICAgIGxldCBwaXhfc3RhcnQgPSB0aGlzXy5tYXBEYXRhLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY29vcmRzWzBdKQ0KICAgICAgbGV0IHBpeF9lbmQgPSB0aGlzXy5tYXBEYXRhLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY2VudGVyUG9pbnQuZmxhdENvb3JkaW5hdGVzKTsNCiAgICAgIHZhciByb3RhdGlvbiA9IE1hdGguUEkgKyBNYXRoLmF0YW4yKHBpeF9lbmRbMV0gLSBwaXhfc3RhcnRbMV0sIHBpeF9lbmRbMF0gLSBwaXhfc3RhcnRbMF0pOw0KICAgICAgaWYgKHBpeF9lbmRbMF0gPiBwaXhfc3RhcnRbMF0pIHsNCiAgICAgICAgcm90YXRpb24gPSByb3RhdGlvbiArIE1hdGguUEkNCiAgICAgIH0NCiAgICAgIHRleHQgPSB0ZXh0ICsgIiI7DQogICAgICBsZXQgY29sb3IgPSB0aGlzXy5nZXRDb2xvckJ5RmVhdHVyZShmZWF0dXJlKTsNCiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRleHRTdHlsZShjZW50ZXJQb2ludCwgcm90YXRpb24sIHRleHQsIG9mZnNldFgsIG9mZnNldHksIGNvbG9yKTsNCiAgICB9LA0KDQoNCg0KICAgIGluaXRGbG93T3JWb2NQb2ludCAoZmVhdHVyZSwgdGhpc18sIGlzRmxvdykgew0KICAgICAgbGV0IGNvb3JkcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpOw0KICAgICAgbGV0IHN0eWxlcyA9IFtdOw0KICAgICAgbGV0IGV4dGVudF8gPSB0aGlzXy5nZXRQb2ludEV4dGVudCgpOw0KICAgICAgbGV0IGxpbmVfID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoY29vcmRzKTsNCiAgICAgIGxldCBsaW5lX2NsaXBfYXJyID0gdHVyZi5iYm94Q2xpcChsaW5lXywgZXh0ZW50XykNCiAgICAgIGxldCBhYl90ZXh0ID0gaXNGbG93ID8gZmVhdHVyZS5nZXQoImFiX2Zsb3ciKSA6IGZlYXR1cmUuZ2V0KCJhYl92b2MiKTsNCiAgICAgIGxldCBiYV90ZXh0ID0gaXNGbG93ID8gZmVhdHVyZS5nZXQoImJhX2Zsb3ciKSA6IGZlYXR1cmUuZ2V0KCJiYV92b2MiKTsNCiAgICAgIGlmIChhYl90ZXh0ICE9IG51bGwgJiYgYWJfdGV4dCAhPSAnJykgew0KICAgICAgICBhYl90ZXh0ID0gaXNGbG93ID8gTWF0aC5mbG9vcihhYl90ZXh0KSA6IGZvcm1hdEZpeE51bShhYl90ZXh0LCAyKTsNCiAgICAgIH0NCiAgICAgIGlmIChiYV90ZXh0ICE9IG51bGwgJiYgYmFfdGV4dCAhPSAnJykgew0KICAgICAgICBiYV90ZXh0ID0gaXNGbG93ID8gTWF0aC5mbG9vcihiYV90ZXh0KSA6IGZvcm1hdEZpeE51bShiYV90ZXh0LCAyKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkudHlwZSA9PSAiTGluZVN0cmluZyIpIHsNCiAgICAgICAgaWYgKGFiX3RleHQgIT0gbnVsbCAmJiBhYl90ZXh0ICE9ICcnKSB7DQogICAgICAgICAgbGV0IG9mZnNldFggPSAxNTsNCiAgICAgICAgICBsZXQgb2Zmc2V0eSA9IDE1Ow0KICAgICAgICAgIGxldCBzdHlsZV9hYiA9IHRoaXNfLmluaUZsb3dPclZvY1RleHQobGluZV9jbGlwX2Fyci5nZW9tZXRyeS5jb29yZGluYXRlcywgZmVhdHVyZSwgdGhpc18sIGFiX3RleHQsIG9mZnNldFgsIG9mZnNldHkpOw0KICAgICAgICAgIHN0eWxlcyA9IHN0eWxlcy5jb25jYXQoc3R5bGVfYWIpDQogICAgICAgIH0NCiAgICAgICAgaWYgKGJhX3RleHQgIT0gbnVsbCAmJiBiYV90ZXh0ICE9ICcnKSB7DQogICAgICAgICAgbGV0IG9mZnNldFggPSAtMTU7DQogICAgICAgICAgbGV0IG9mZnNldHkgPSAtMTU7DQogICAgICAgICAgbGV0IHN0eWxlX2JhID0gdGhpc18uaW5pRmxvd09yVm9jVGV4dChsaW5lX2NsaXBfYXJyLmdlb21ldHJ5LmNvb3JkaW5hdGVzLCBmZWF0dXJlLCB0aGlzXywgYmFfdGV4dCwgb2Zmc2V0WCwgb2Zmc2V0eSk7DQogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChzdHlsZV9iYSkNCiAgICAgICAgfQ0KDQogICAgICB9DQogICAgICByZXR1cm4gc3R5bGVzOw0KICAgIH0sDQoNCg0KICAgIGNyZWF0ZVRleHRTdHlsZSAoY29vcmRpbmF0ZSwgcm9hdGlvbiwgdGV4dCwgb2Zmc2V0eCwgb2Zmc2V0eSwgY29sb3IpIHsNCiAgICAgIGxldCBzdHlsZXNfID0gW107DQogICAgICBsZXQgdGV4dF8gPSBuZXcgVGV4dCh7DQogICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsDQogICAgICAgIHRleHRCYXNlbGluZTogJ21pZGRsZScsDQogICAgICAgIGZvbnQ6ICdub3JtYWwgMTVweCDlvq7ova/pm4Xpu5EnLA0KICAgICAgICB0ZXh0OiB0ZXh0LA0KICAgICAgICB0ZXh0QmFzZWxpbmU6ICJtaWRkbGUiLCAvL+aWh+acrOWfuue6vw0KICAgICAgICBvZmZzZXRZOiBvZmZzZXR4LA0KICAgICAgICBvZmZzZXRYOiBvZmZzZXR5LA0KICAgICAgICBmaWxsOiBuZXcgRmlsbCh7DQogICAgICAgICAgY29sb3I6IGNvbG9yDQogICAgICAgIH0pLA0KICAgICAgICByb3RhdGlvbjogcm9hdGlvbiwNCiAgICAgIH0pDQogICAgICBsZXQgc3R5bGVfID0gbmV3IFN0eWxlKHsNCiAgICAgICAgZ2VvbWV0cnk6IGNvb3JkaW5hdGUsDQogICAgICB9KQ0KICAgICAgc3R5bGVfLnNldFRleHQodGV4dF8pDQogICAgICBzdHlsZXNfLnB1c2goc3R5bGVfKQ0KICAgICAgcmV0dXJuIHN0eWxlc187DQogICAgfSwNCg0KICAgIGdldENvbG9yQnlGZWF0dXJlIChmZWF0dXJlKSB7DQogICAgICAvLyDppbHlkozluqYNCiAgICAgIHZhciBtYXhfdm9jID0gZmVhdHVyZS5nZXQoIm1heF92b2MiKTsNCiAgICAgIHZhciBjb2xvciA9IHRoaXMuc3R5bGUubGluZV9zdHJva2U7DQogICAgICBpZiAobWF4X3ZvYyA+IDAgJiYgbWF4X3ZvYyA8PSAwLjI1KSB7DQogICAgICAgIGNvbG9yID0gJyMxODU4MTcnOw0KICAgICAgfSBlbHNlIGlmIChtYXhfdm9jID4gMC4yNSAmJiBtYXhfdm9jIDw9IDAuNSkgew0KICAgICAgICBjb2xvciA9ICcjNjFhNDNhJzsNCiAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDAuNSAmJiBtYXhfdm9jIDw9IDAuNzUpIHsNCiAgICAgICAgY29sb3IgPSAnI2NmZTA1ZCc7DQogICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAwLjc1ICYmIG1heF92b2MgPD0gMSkgew0KICAgICAgICBjb2xvciA9ICcjZDhjOTY0JzsNCiAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDEgJiYgbWF4X3ZvYyA8PSAxLjI1KSB7DQogICAgICAgIGNvbG9yID0gJyNkNzk1NTAnOw0KICAgICAgfSBlbHNlIGlmIChtYXhfdm9jID4gMS4yNSAmJiBtYXhfdm9jIDw9IDEuNSkgew0KICAgICAgICBjb2xvciA9ICcjYzc1YjQxJzsNCiAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDEuNSAmJiBtYXhfdm9jIDw9IDEuNzUpIHsNCiAgICAgICAgY29sb3IgPSAnI2M3NWI0MSc7DQogICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAxLjc1KSB7DQogICAgICAgIGNvbG9yID0gJyMwMDAwMDAnOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGNvbG9yOw0KICAgIH0sDQoNCg0KDQogICAgZ2V0UG9pbnRzU3R5bGUgKGZlYXR1cmUpIHsNCiAgICAgIGxldCBjb29yZHMgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTsNCiAgICAgIGxldCB0aGlzXyA9IHRoaXM7DQogICAgICBsZXQgc3R5bGVzID0gW107DQogICAgICAvLyDmlrnlkJHvvIgx5Y2V5ZCR77yMLTHlj43lkJHljZXlkJHvvIww5Y+M5ZCR77yJDQogICAgICB2YXIgZGlyID0gZmVhdHVyZS5nZXQoImRpciIpOw0KICAgICAgLy8g5rWB6YePDQogICAgICB2YXIgdG90X2Zsb3cgPSBmZWF0dXJlLmdldCgidG90X2Zsb3ciKTsNCiAgICAgIC8vIOminOiJsum7mOiupOWAvA0KICAgICAgdmFyIGNvbG9yID0gdGhpcy5nZXRDb2xvckJ5RmVhdHVyZShmZWF0dXJlKTsNCiAgICAgIC8vIOeyl+e7hum7mOiupOWAvA0KICAgICAgdmFyIHdpZHRoID0gdGhpc18uc3R5bGUubGluZV93aWR0aDsNCg0KICAgICAgdmFyIHBlYyA9IDI7DQogICAgICBpZiAodG90X2Zsb3cgPiAwICYmIHRvdF9mbG93IDw9IDEyNTApIHsNCiAgICAgICAgd2lkdGggPSAxICogcGVjOw0KICAgICAgfSBlbHNlIGlmICh0b3RfZmxvdyA+IDEyNTAgJiYgdG90X2Zsb3cgPD0gMjUwMCkgew0KICAgICAgICB3aWR0aCA9IDIgKiBwZWM7DQogICAgICB9IGVsc2UgaWYgKHRvdF9mbG93ID49IDI1MDApIHsNCiAgICAgICAgd2lkdGggPSA0ICogcGVjOw0KICAgICAgfQ0KICAgICAgc3R5bGVzLnB1c2goDQogICAgICAgIG5ldyBTdHlsZSh7DQogICAgICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHsNCiAgICAgICAgICAgIGNvbG9yOiBjb2xvciwNCiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCwNCiAgICAgICAgICB9KSwNCiAgICAgICAgfSkNCiAgICAgICkNCiAgICAgIC8vIGxldCBleHRlbnRfID0gdGhpcy5nZXRQb2ludEV4dGVudCgpOw0KICAgICAgLy8gbGV0IGxpbmVfID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoY29vcmRzKTsNCiAgICAgIC8vIGxldCBsaW5lX2NsaXBfYXJyID0gdHVyZi5iYm94Q2xpcChsaW5lXywgZXh0ZW50XykNCg0KICAgICAgLy8gaWYgKGxpbmVfY2xpcF9hcnIgJiYgbGluZV9jbGlwX2Fyci5nZW9tZXRyeSkgew0KICAgICAgLy8gICBpZiAobGluZV9jbGlwX2Fyci5nZW9tZXRyeS50eXBlID09ICJMaW5lU3RyaW5nIikgew0KICAgICAgLy8gICAgIGxldCBzdHlsZV8gPSB0aGlzXy5nZXRQb2ludHNCeUxpbmUobGluZV9jbGlwX2Fyci5nZW9tZXRyeS5jb29yZGluYXRlcywgZGlyKTsNCiAgICAgIC8vICAgICBpZiAoc3R5bGVfIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgIC8vICAgICAgIHN0eWxlcyA9IHN0eWxlcy5jb25jYXQoc3R5bGVfKQ0KICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAvLyAgICAgICBzdHlsZXMucHVzaChzdHlsZV8pDQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICB9IGVsc2UgaWYgKGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkudHlwZSA9PSAiTXVsdGlMaW5lU3RyaW5nIikgew0KICAgICAgLy8gICAgIGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuZm9yRWFjaChjb29yZHMgPT4gew0KICAgICAgLy8gICAgICAgbGV0IHN0eWxlXyA9IHRoaXNfLmdldFBvaW50c0J5TGluZShjb29yZHMsIGRpcikNCiAgICAgIC8vICAgICAgIGlmIChzdHlsZV8gaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgLy8gICAgICAgICBzdHlsZXMgPSBzdHlsZXMuY29uY2F0KHN0eWxlXykNCiAgICAgIC8vICAgICAgIH0gZWxzZSB7DQogICAgICAvLyAgICAgICAgIHN0eWxlcy5wdXNoKHN0eWxlXykNCiAgICAgIC8vICAgICAgIH0NCiAgICAgIC8vICAgICB9KQ0KICAgICAgLy8gICB9DQogICAgICAvLyB9DQogICAgICByZXR1cm4gc3R5bGVzDQogICAgfSwNCg0KICAgIGluaXRWZWN0b3JMYXllciAoKSB7DQogICAgICBsZXQgcGxhbmVJbmZvID0gdGhpcy5sZWZ0UGxhbmVMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09IHRoaXMubGVmdFBsYW5lKQ0KICAgICAgLy8g5Yid5aeL5YyW5ou/5Yiw5YWs5YWx5pWw5o2uDQogICAgICB2YXIgJG1hcCA9IHRoaXMubWFwRGF0YTsNCiAgICAgIHZhciAkdGhpcyA9IHRoaXM7DQogICAgICAkbWFwLnJlbW92ZUxheWVyKCR0aGlzLnZlY3RvckxheWVyKTsNCiAgICAgIC8vIOivt+axguaVsOaNrg0KICAgICAgdmFyIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy9UZXN0L293cz9zZXJ2aWNlPVdGUyZ2ZXJzaW9uPTEuMC4wJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgZW5jb2RlVVJJKHBsYW5lSW5mby5sYXllck5hbWUpICsgJyZtYXhGZWF0dXJlcz01MDAwMDAwMDAmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uJTJGanNvbic7DQogICAgICBheGlvcy5nZXQodXJsLCBudWxsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsNCiAgICAgICAgdmFyIGZlYXR1cmVzRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgZmVhdHVyZXM6IChuZXcgR2VvSlNPTih7IGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3JywgZGF0YVByb2plY3Rpb246ICdFUFNHOjQ1NDgnIH0pKS5yZWFkRmVhdHVyZXMoZmVhdHVyZXNEYXRhKQ0KICAgICAgICB9KTsNCiAgICAgICAgJHRoaXMudmVjdG9yTGF5ZXIgPSBuZXcgVmVjdG9yTGF5ZXIoew0KICAgICAgICAgIHNvdXJjZTogdmVjdG9yU291cmNlLA0KICAgICAgICAgIHN0eWxlOiAoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICAgIGxldCBzdHlsZXMgPSAkdGhpcy5nZXRQb2ludHNTdHlsZShmZWF0dXJlKTsNCiAgICAgICAgICAgIC8v5qC55o2u5paH5a2X5o6n5Yi25oyJ6ZKu5paw5aKe5paH5a2X5qC35byPDQogICAgICAgICAgICBsZXQgYWN0aXZlQnRuID0gJHRoaXMuJHBhcmVudC4kcGFyZW50LiRwYXJlbnQuYWN0aXZlQnRuOw0KICAgICAgICAgICAgaWYgKGFjdGl2ZUJ0biAhPSAnJyAmJiBhY3RpdmVCdG4gIT0gMykgew0KICAgICAgICAgICAgICBsZXQgaXNGbG93ID0gYWN0aXZlQnRuID09IDM7DQogICAgICAgICAgICAgIGxldCBmbG93U3R5bGUgPSAkdGhpcy5pbml0Rmxvd09yVm9jUG9pbnQoZmVhdHVyZSwgJHRoaXMsIGlzRmxvdykNCiAgICAgICAgICAgICAgaWYgKGZsb3dTdHlsZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChmbG93U3R5bGUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gc3R5bGVzDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQogICAgICAgICR0aGlzLm1hcERhdGEuYWRkTGF5ZXIoJHRoaXMudmVjdG9yTGF5ZXIpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGxlZnRQb2ludGVyZHJhZyAoKSB7DQogICAgICB0aGlzLmxlZnRDdXJyZW50Q29yZGluYXRlID0gdmlldy5nZXRDZW50ZXIoKTsNCiAgICAgIHRoaXMubGVmdEN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCkNCiAgICAgIHRoaXMuJGJhcy4kZW1pdCgibGVmdFBhbmVsRHJhZ2VDaGFuZ2UiLCB0aGlzLmxlZnRDdXJyZW50Q29yZGluYXRlLCB0aGlzLmxlZnRDdXJyZW50Wm9vbSkNCiAgICB9LA0KDQogICAgbGVmdE1vdnZlbmQgKCkgew0KICAgICAgdGhpcy5sZWZ0Q3VycmVudENvcmRpbmF0ZSA9IHZpZXcuZ2V0Q2VudGVyKCk7DQogICAgICB0aGlzLmxlZnRDdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpDQogICAgICB0aGlzLiRiYXMuJGVtaXQoImxlZnRNb3Z2ZW5kQ2hhbmdlIiwgdGhpcy5sZWZ0Q3VycmVudENvcmRpbmF0ZSwgdGhpcy5sZWZ0Q3VycmVudFpvb20pDQogICAgICAvL+agueaNrue8qeaUvue6p+WIq+aUueWPmOa1gemHj+aWh+Wtl+agt+W8jw0KICAgICAgLy90aGlzLmNoYW5nZUZsb3dUZXh0U3R5bGVCeUN1cnJlbnRab29tKCk7DQoNCiAgICB9LA0KDQogICAgc2hvd0Zsb3dUZXh0ICh0aGlzXywgaXNGbG93KSB7DQogICAgICB0aGlzXy52ZWN0b3JMYXllci5zZXRTdHlsZSgoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgbGV0IHN0eWxlcyA9IFtdOw0KICAgICAgICBsZXQgcG9pbnRBcnJvd1N0eWxlID0gdGhpc18uZ2V0UG9pbnRzU3R5bGUoZmVhdHVyZSk7DQogICAgICAgIGxldCBmbG93U3R5bGUgPSB0aGlzXy5pbml0Rmxvd09yVm9jUG9pbnQoZmVhdHVyZSwgdGhpc18sIGlzRmxvdykNCiAgICAgICAgaWYgKHBvaW50QXJyb3dTdHlsZSAhPSBudWxsICYmIHBvaW50QXJyb3dTdHlsZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChwb2ludEFycm93U3R5bGUpDQogICAgICAgIH0NCiAgICAgICAgaWYgKGZsb3dTdHlsZSAhPSBudWxsICYmIGZsb3dTdHlsZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChmbG93U3R5bGUpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHN0eWxlczsNCiAgICAgIH0pDQoNCiAgICB9LA0KDQogICAgaGlkZUZsb3dUZXh0ICh0aGlzXykgew0KICAgICAgaWYgKHRoaXNfLnZlY3RvckxheWVyKSB7DQogICAgICAgIHRoaXNfLnZlY3RvckxheWVyLnNldFN0eWxlKG51bGwpOw0KICAgICAgICB0aGlzXy52ZWN0b3JMYXllci5zZXRTdHlsZSgoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICBsZXQgc3R5bGVzID0gW107DQogICAgICAgICAgbGV0IHBvaW50QXJyb3dTdHlsZSA9IHRoaXNfLmdldFBvaW50c1N0eWxlKGZlYXR1cmUpOw0KICAgICAgICAgIGlmIChwb2ludEFycm93U3R5bGUgIT0gbnVsbCAmJiBwb2ludEFycm93U3R5bGUubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChwb2ludEFycm93U3R5bGUpDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBzdHlsZXM7DQogICAgICAgIH0pDQogICAgICB9DQoNCiAgICB9LA0KDQoNCiAgICBjaGFuZ2VGbG93VGV4dFN0eWxlQnlDdXJyZW50Wm9vbSAoKSB7DQogICAgICBsZXQgdGhpc18gPSB0aGlzOw0KICAgICAgLy/pmpDol4/mloflrZcNCiAgICAgIGlmICh0aGlzXy5sZWZ0Q3VycmVudFpvb20gPCB0aGlzXy56b29tVGhyZXNob2xkICYmIHRoaXNfLmluaXRTdHlsZUZsYWcpIHsNCiAgICAgICAgdGhpcy5pbml0U3R5bGVGbGFnID0gZmFsc2U7DQogICAgICAgIHRoaXMuaGlkZUZsb3dUZXh0KHRoaXNfKQ0KICAgICAgfQ0KICAgICAgLy/mmL7npLrmloflrZcNCiAgICAgIGlmICh0aGlzXy5sZWZ0Q3VycmVudFpvb20gPj0gdGhpc18uem9vbVRocmVzaG9sZCAmJiAhdGhpc18uaW5pdFN0eWxlRmxhZykgew0KICAgICAgICB0aGlzLnNob3dGbG93VGV4dCh0aGlzXykNCiAgICAgICAgdGhpcy5pbml0U3R5bGVGbGFnID0gdHJ1ZTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5Yid5aeL5YyW5Zyw5Zu+DQogICAgaW5pdE1hcCAoKSB7DQogICAgICBjb25zdCBtYXBDb250YWluZXIgPSB0aGlzLiRyZWZzLm1hcDsNCiAgICAgIC8v5bCG5Zu+5bGC5Yqg5YWlTWFwDQogICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKHsNCiAgICAgICAgbGF5ZXJzOiBbZ2FvZGVNYXBMYXllcl0sDQogICAgICAgIHRhcmdldDogbWFwQ29udGFpbmVyLA0KICAgICAgICB2aWV3OiB2aWV3DQogICAgICB9KTsNCiAgICAgIC8vIOa3u+WKoOaLluWKqOS6i+S7tg0KICAgICAgbWFwLm9uKCdwb2ludGVyZHJhZycsIHRoaXMubGVmdFBvaW50ZXJkcmFnKTsNCiAgICAgIC8vIOa3u+WKoOm8oOagh+eCueWHu+S6i+S7tg0KICAgICAgbWFwLm9uKCdjbGljaycsIHRoaXMubWFwQ2xpY2spOw0KICAgICAgLy8g57yp5pS+55uR5ZCsDQogICAgICBtYXAub24oJ21vdmVlbmQnLCB0aGlzLmxlZnRNb3Z2ZW5kKTsNCiAgICAgIC8vIOS/neWtmOWcsOWbvg0KICAgICAgdGhpcy5tYXBEYXRhID0gbWFwDQogICAgICAvL+a3u+WKoOaWh+Wtl+agh+azqA0KICAgICAgdGhpcy5hZGRNYXJrVGV4dExheWVyKCk7DQogICAgfSwNCg0KICAgIGxlZnRQbGFuZUNoYW5nZSAoKSB7DQogICAgICB0aGlzLnJlbW92ZVBvcHVwKCk7DQogICAgICB0aGlzLm1hcERhdGEucmVtb3ZlTGF5ZXIodGhpcy52ZWN0b3JMYXllcik7DQogICAgICB0aGlzLmluaXRWZWN0b3JMYXllcigpOw0KICAgICAgdGhpcy4kYmFzLiRlbWl0KCJsZWZ0UGxhbmVDaGFuZ2UiLCB0aGlzLmxlZnRQbGFuZSkNCiAgICB9LA0KDQogICAgLy/nu4Too4Xlt6bkvqfkuqTpgJrkv6Hmga/ooagNCiAgICBhc3NlYmxlTGVmdFRyYW5zUG9wQ29udGVudCAoZmVhdHVyZSwgY29tcGFpcmVGZWF0dXJlLCBsYXllcikgew0KICAgICAgbGV0IGNvbXBhaXJlUmVzdWx0ID0ge30NCiAgICAgIGlmIChjb21wYWlyZUZlYXR1cmUgIT0gbnVsbCAmJiBjb21wYWlyZUZlYXR1cmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGNvbXBhaXJlUmVzdWx0ID0gZmVhdHVyZUNvbXBhaXJlKGZlYXR1cmUucHJvcGVydGllcywgY29tcGFpcmVGZWF0dXJlLnByb3BlcnRpZXMpOw0KICAgICAgfQ0KICAgICAgbGV0IGRvd25VcmwgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbmF2L2Rvd24ucG5nJyk7DQogICAgICBsZXQgdXBVcmwgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbmF2L3VwLnBuZycpOw0KICAgICAgbGV0IGNvbnRlbnQgPSBgPGRpdiBzdHlsZT0nY29sb3I6IzEyMTkyNDtmb250LXdlaWdodDogYm9sZDt3aWR0aDoxMDAlO3otaW5kZXg6NDtoZWlnaHQ6OTVweDtwYWRkaW5nOjZweDtmb250LXNpemU6IDE1cHgnPmAgKyBsYXllciArIGANCiAgICAgICAgPGRpdiBzdHlsZSA9ICdtYXJnaW4tdG9wOjEwcHgnID48YnV0dG9uIGlkPSdidG4xJyBzdHlsZT0nbWFyZ2luLXJpZ2h0OjEwcHg7Ym9yZGVyOiBub25lO2hlaWdodDogMjhweDtsaW5lLWhlaWdodDogMjhweDtib3JkZXItcmFkaXVzOiA0cHg7d2lkdGg6IDgwcHg7YmFja2dyb3VuZDogIzAwNEFCMztjb2xvcjogI2ZmZmZmZjsnIG9uY2xpY2s9InByZXZpZXcxKCkiPuWfuuacrOS/oeaBrzwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0nYnRuMicgc3R5bGU9ImJvcmRlcjogbm9uZTtoZWlnaHQ6IDI4cHg7bGluZS1oZWlnaHQ6IDI4cHg7Ym9yZGVyLXJhZGl1czogNHB4O3dpZHRoOiA4MHB4O2JhY2tncm91bmQ6ICNEM0Q2REI7Y29sb3I6ICNmZmZmZmY7IiBvbmNsaWNrPSJwcmV2aWV3MigpIj7kuqTpgJrkv6Hmga88L2J1dHRvbj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IHN0eWxlPSdmb250LXNpemU6IDEwcHg7d2lkdGg6MTAwJScgaWQ9J2luZm8xJz5gDQogICAgICB0aGlzLnBvcFRyYW5zTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICBsZXQgcHJvcFZhbCA9IGZlYXR1cmUucHJvcGVydGllc1tlbGVtZW50LnByb3BlcnRpZV07DQogICAgICAgIGlmIChwcm9wVmFsICE9IG51bGwpIHsNCiAgICAgICAgICBsZXQgbWF4TGVuID0gZWxlbWVudC5tYXhsZW5ndGg7DQogICAgICAgICAgbGV0IHR5cGUgPSBlbGVtZW50LnR5cGU7DQogICAgICAgICAgLy/moLzlvI/ljJYNCiAgICAgICAgICBpZiAobWF4TGVuICE9IG51bGwgJiYgdHlwZSA9PSAnZmxvYXQnKSB7DQogICAgICAgICAgICBwcm9wVmFsID0gZm9ybWF0Rml4TnVtKHByb3BWYWwsIG1heExlbikNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHR5cGUgPT0gJ2ludCcpIHsNCiAgICAgICAgICAgIHByb3BWYWwgPSBNYXRoLmZsb29yKHByb3BWYWwpDQogICAgICAgICAgfQ0KICAgICAgICAgIC8v5ou85o6l5Y2V5L2NDQogICAgICAgICAgbGV0IHVuaXQgPSBlbGVtZW50LnVuaXQ7DQogICAgICAgICAgaWYgKHVuaXQgIT0gbnVsbCAmJiBwcm9wVmFsICE9IG51bGwpIHsNCiAgICAgICAgICAgIHByb3BWYWwgPSBwcm9wVmFsICsgIiZuYnNwIiArIHVuaXQ7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHByb3BWYWwgPSAnJw0KICAgICAgICB9DQogICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgYDxkaXYgc3R5bGU9ImhlaWdodDogMjZweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGVsZW1lbnQubGFiZWwgKyBgOjwvYT4NCiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBwcm9wVmFsICsgYDwvYT5gDQogICAgICAgIGlmIChjb21wYWlyZVJlc3VsdFtlbGVtZW50LnByb3BlcnRpZV0gPT0gJz4nKSB7DQogICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBgPGltZyBzcmMgPSBgICsgdXBVcmwgKyBgIHN0eWxlID0gJ3dpZHRoOjIwcHg7aGVpZ2h0OjE4cHgnIC8+YA0KICAgICAgICB9IGVsc2UgaWYgKGNvbXBhaXJlUmVzdWx0W2VsZW1lbnQucHJvcGVydGllXSA9PSAnPCcpIHsNCiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArIGA8aW1nIHNyYyA9IGAgKyBkb3duVXJsICsgYCBzdHlsZSA9ICd3aWR0aDoyMHB4O2hlaWdodDoxOHB4JyAvPmANCiAgICAgICAgfQ0KICAgICAgICBjb250ZW50ID0gY29udGVudCArIGA8L2Rpdj5gDQoNCg0KDQogICAgICB9KTsNCiAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvZGl2Pic7DQogICAgICByZXR1cm4gY29udGVudDsNCiAgICB9LA0KDQoNCg0KICAgIC8vIOW8ueWHuuahhg0KICAgIGFkZExlZnRQb3B1cCAoY29vcmRpbmF0ZSwgZmVhdHVyZSwgY29tcGFpcmVGZWF0dXJlKSB7DQogICAgICB0aGlzLnJlbW92ZVBvcHVwKCkNCiAgICAgIC8vIOiOt+WPluW8ueWHuuWxgkRPTQ0KICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpDQogICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cC1jb250ZW50JykNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOWIm+W7uk92ZXJsYXnlvLnlh7rlsYLnu5HlrppET00NCiAgICAgICAgdGhpcy5vdmVybGF5ID0gbmV3IE92ZXJsYXkoew0KICAgICAgICAgIGVsZW1lbnQ6IGNvbnRhaW5lciwNCiAgICAgICAgfSkNCiAgICAgICAgLy8g5re75Yqg5YiwbWFwDQogICAgICAgIHRoaXMubWFwRGF0YS5hZGRPdmVybGF5KHRoaXMub3ZlcmxheSkNCiAgICAgIH0NCiAgICAgIC8vIOmBk+i3r+S/oeaBrw0KICAgICAgbGV0IGxheWVyID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmxheWVyID09IG51bGwgPyAiIiA6IGZlYXR1cmUucHJvcGVydGllcy5sYXllcjsNCiAgICAgIGxldCBoYW5kbGUgPSBmZWF0dXJlLnByb3BlcnRpZXMuaGFuZGxlID09IG51bGwgPyAiIiA6IGZlYXR1cmUucHJvcGVydGllcy5oYW5kbGU7DQogICAgICBsZXQgbGVuZ3RoID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmxlbmd0aCA9PSBudWxsID8gIiIgOiBNYXRoLmZsb29yKGZlYXR1cmUucHJvcGVydGllcy5sZW5ndGgpICsgIiBtIjsNCiAgICAgIGxldCBjYXBhY2l0eSA9IGZlYXR1cmUucHJvcGVydGllcy5jYXBhY2l0eSA9PSBudWxsID8gIiIgOiBmZWF0dXJlLnByb3BlcnRpZXMuY2FwYWNpdHkgKyAnIHBjdS9oJzsNCiAgICAgIC8vIOaWueWQke+8iDHljZXlkJHvvIwtMeWPjeWQkeWNleWQke+8jDDlj4zlkJHvvIkNCiAgICAgIGxldCBkaXIgPSBmZWF0dXJlLnByb3BlcnRpZXMuZGlyID09IDEgPyAi5Y2V5ZCRIiA6IGZlYXR1cmUucHJvcGVydGllcy5kaXIgPT0gLTEgPyAi5Y+N5ZCR5Y2V5ZCRIiA6IGZlYXR1cmUucHJvcGVydGllcy5kaXIgPT0gMCA/ICLlj4zlkJEiIDogJyc7DQogICAgICAvL+S6pOmAmua1gemHjw0KICAgICAgbGV0IHRyYW5zUG9wQ29udGVudCA9IHRoaXMuYXNzZWJsZUxlZnRUcmFuc1BvcENvbnRlbnQoZmVhdHVyZSwgY29tcGFpcmVGZWF0dXJlLCBsYXllcik7DQoNCiAgICAgIHRyYW5zUG9wQ29udGVudCA9IHRyYW5zUG9wQ29udGVudCArIGA8L2Rpdj4NCiAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICA8ZGl2IHN0eWxlPSdmb250LXNpemU6IDEwcHg7d2lkdGg6MTAwJScgaWQ9J2luZm8yJz4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjZweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPumBk+i3r0lEOjwvYT4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBoYW5kbGUgKyBgPC9hPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij7nrYnnuqc6PC9hPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGxheWVyICsgYDwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAyNnB4O3dpZHRoOjEwMCUiPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+6ZW/5bqmOjwvYT4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBsZW5ndGggKyBgPC9hPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij7pgJrooYzog73lips6PC9hPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGNhcGFjaXR5ICsgYDwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjZweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPuaWueWQkTo8L2E+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+YCsgZGlyICsgYDwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgIDwvZGl2PmA7DQogICAgICBjb250ZW50LmlubmVySFRNTCA9IHRyYW5zUG9wQ29udGVudDsNCiAgICAgIC8vIOiuvue9ruW8ueWHuuWxguS9jee9ruWNs+WPr+WHuueOsA0KICAgICAgdGhpcy5vdmVybGF5LnNldFBvc2l0aW9uKGNvb3JkaW5hdGUpDQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfSwNCg0KICAgIC8vIOa4hemZpOW8ueWHuuahhg0KICAgIHJlbW92ZVBvcHVwICgpIHsNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgICAgLy8g6K6+572u5L2N572udW5kZWZpbmVk5Y+v6L6+5Yiw6ZqQ6JeP5riF6Zmk5by55Ye65qGGDQogICAgICAgIHRoaXMub3ZlcmxheS5zZXRQb3NpdGlvbih1bmRlZmluZWQpDQogICAgICB9DQogICAgfSwNCiAgICByZW1vdmVCdG4yICgpIHsNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgICAgLy8g6K6+572u5L2N572udW5kZWZpbmVk5Y+v6L6+5Yiw6ZqQ6JeP5riF6Zmk5by55Ye65qGGDQogICAgICAgIHRoaXMub3ZlcmxheS5zZXRQb3NpdGlvbih1bmRlZmluZWQpDQoNCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cDInKS5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycpIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJw0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKQ0KICAgICAgICAvL+a4hemZpOWvuemdoumrmOS6rg0KICAgICAgICB0aGlzLiRiYXMuJGVtaXQoJ2NsZWFySGlnaGxpZ2h0X0wnLCAnMScpDQogICAgICB9DQogICAgfSwNCiAgICBwYXJzZUZlYXR1cmVEZXRhaWwgKGZlYXR1cmVSZXNwLCBmZWF0dXJlKSB7DQogICAgICBpZiAoIWZlYXR1cmVSZXNwKSB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfQ0KICAgICAgdmFyIGpzb25PYmogPSBKU09OLnBhcnNlKGZlYXR1cmVSZXNwKTsNCiAgICAgIHZhciBmZWF0dXJlcyA9IGpzb25PYmouZmVhdHVyZXM7DQogICAgICBpZiAoZmVhdHVyZXMgPT0gbnVsbCB8fCBmZWF0dXJlcy5sZW5ndGggPT0gMCkgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgIH0NCiAgICAgIGxldCBjb21wYWlyZUZlYXR1cmU7DQogICAgICBmb3IgKGxldCBrID0gMDsgayA8IGZlYXR1cmVzLmxlbmd0aDsgaysrKSB7DQogICAgICAgIGxldCBwcm9wZXJ0aWVzID0gZmVhdHVyZXNba10ucHJvcGVydGllczsNCiAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gZmVhdHVyZXNba10uY29vcmRpbmF0ZXM7DQogICAgICAgIGlmIChwcm9wZXJ0aWVzLmxheWVyID09IGZlYXR1cmUucHJvcGVydGllcy5sYXllcg0KICAgICAgICAgICYmIGZlYXR1cmUucHJvcGVydGllcy5oYW5kbGUgPT0gcHJvcGVydGllcy5oYW5kbGUpIHsNCiAgICAgICAgICBjb21wYWlyZUZlYXR1cmUgPSBmZWF0dXJlc1trXTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGNvbXBhaXJlRmVhdHVyZTsNCg0KICAgIH0sDQoNCiAgICAvL+agueaNrumBk+i3r0lE5p+l6K+i5a+55q+U5pa55qGI6K+m5oOFDQogICAgYXNzZW1ibGVMZWZ0Q29tcGFpcmVQb3AgKGZlYXR1cmUsIHRoaXNPYmosIGV2dCkgew0KICAgICAgZGVidWdnZXINCiAgICAgIGxldCBzZWxlY3RlZFBsYW5lVmFsID0gdGhpc09iai5yaWdodFNlbGVjdGVkUGxhbmU7DQogICAgICAvLyBpZiAoc2VsZWN0ZWRQbGFuZVZhbCA9PSBudWxsIHx8IHNlbGVjdGVkUGxhbmVWYWwgPT0gdW5kZWZpbmVkKSB7DQogICAgICAvLyAgIHNlbGVjdGVkUGxhbmVWYWwgPSB0aGlzLmxlZnRQbGFuZSsxOw0KICAgICAgLy8gfQ0KICAgICAgbGV0IGhhbmRsZSA9IGZlYXR1cmUucHJvcGVydGllcy5oYW5kbGUNCiAgICAgIGlmIChoYW5kbGUgPT0gbnVsbCkgew0KICAgICAgICB0aGlzT2JqLmFkZExlZnRQb3B1cChldnQuY29vcmRpbmF0ZSwgZmVhdHVyZSwgbnVsbCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGxldCByaWdodExheWVyTmFtZTsNCiAgICAgIG5ld0xpc3QuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0udmFsdWUgPT0gc2VsZWN0ZWRQbGFuZVZhbCkgew0KICAgICAgICAgIHJpZ2h0TGF5ZXJOYW1lID0gaXRlbS5sYXllck5hbWUNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGlmICghcmlnaHRMYXllck5hbWUpIHsNCiAgICAgICAgdGhpc09iai5hZGRMZWZ0UG9wdXAoZXZ0LmNvb3JkaW5hdGUsIGZlYXR1cmUsIG51bGwpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgcHJvcGVydHlOYW1lID0gJ1Rlc3Q6aGFuZGxlJzsNCiAgICAgIGxldCByZXNwUHJvcGVydGllcyA9ICdsYXllcixoYW5kbGUsbGVuZ3RoLGNhcGFjaXR5LGFiX2Zsb3csYmFfZmxvdyx0b3RfZmxvdyxhYl92b2MsYmFfdm9jLG1heF92b2MsZ2VvbSc7DQogICAgICBsZXQgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9HSVNfQkFTRV9VUkwgKyAnL3dmcz9yZXF1ZXN0PUdldEZlYXR1cmUmdmVyc2lvbj0xLjEuMCZ0eXBlTmFtZT0nDQogICAgICAgICsgcmlnaHRMYXllck5hbWUgKyAnJnByb3BlcnR5TmFtZT0nICsgcmVzcFByb3BlcnRpZXMgKyAnJm91dHB1dEZvcm1hdD1KU09OJkZJTFRFUj08RmlsdGVyIHhtbG5zPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyI+PFByb3BlcnR5SXNFcXVhbFRvPjxQcm9wZXJ0eU5hbWU+Jw0KICAgICAgICArIHByb3BlcnR5TmFtZSArICc8L1Byb3BlcnR5TmFtZT48TGl0ZXJhbD4nICsgaGFuZGxlICsgJzwvTGl0ZXJhbD48L1Byb3BlcnR5SXNFcXVhbFRvPjwvRmlsdGVyPicNCiAgICAgIC8v6K+35rGCdXJs5a+55q+U5pa55qGI6YGT6Lev6K+m5oOFDQogICAgICBmZXRjaCh1cmwpDQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChpbmZvKSB7DQogICAgICAgICAgaWYgKGluZm8gIT0gbnVsbCkgew0KICAgICAgICAgICANCiAgICAgICAgICAgIGxldCBjb21wYWlyZUZlYXR1cmUgPSB0aGlzT2JqLnBhcnNlRmVhdHVyZURldGFpbChpbmZvLCBmZWF0dXJlKTsNCiAgICAgICAgICAgIHRoaXNPYmouYWRkTGVmdFBvcHVwKGV2dC5jb29yZGluYXRlLCBmZWF0dXJlLCBjb21wYWlyZUZlYXR1cmUpOw0KICAgICAgICAgICAgLy/lvLnlh7rlj7PovrnlvLnlh7rmoYYNCiAgICAgICAgICAgIHRoaXNPYmouJGVtaXQoJ2FkZFJpZ2h0UG9wdXBCeVBhcmVudCcsIGV2dC5jb29yZGluYXRlLCBjb21wYWlyZUZlYXR1cmUsIGZlYXR1cmUpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzT2JqLmFkZExlZnRQb3B1cChldnQuY29vcmRpbmF0ZSwgZmVhdHVyZSwgbnVsbCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQoNCiAgICB9LA0KDQogICAgLy8g6byg5qCH54K55Ye75Zyw5Zu+5LqL5Lu2DQogICAgbWFwQ2xpY2sgKGV2dCkgew0KICAgICAgbGV0IHBpeGVsID0gdGhpcy5tYXBEYXRhLmdldEV2ZW50UGl4ZWwoZXZ0Lm9yaWdpbmFsRXZlbnQpOw0KICAgICAgbGV0IGZlYXR1cmUgPSB0aGlzLm1hcERhdGEuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLA0KICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHsNCiAgICAgICAgICByZXR1cm4gZmVhdHVyZTsNCiAgICAgICAgfSk7DQogICAgICBpZiAoZmVhdHVyZSkgew0KICAgICAgICAvL+aNleaNieWIsOimgee0oOWQju+8jOW8ueahhg0KICAgICAgICBsZXQgZmVhdHVyZUNvbnZlcnQgPSBjb252ZXJ0RmVhdHVyZShmZWF0dXJlKTsNCiAgICAgICAgdGhpcy5hZGRIaWdoTGlnaHRTdHlsZShmZWF0dXJlLCB0aGlzLCAnJykNCiAgICAgICAgZGVidWdnZXINCiAgICAgICAgdGhpcy5hc3NlbWJsZUxlZnRDb21wYWlyZVBvcChmZWF0dXJlQ29udmVydCwgdGhpcywgZXZ0KTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5yZW1vdmVCdG4yKCk7DQogICAgICB9DQoNCiAgICB9LA0KICAgIGFkZEhpZ2hMaWdodFN0eWxlIChjbGlja0ZlYXR1cmUsIHRoaXNPYmosIG51bSkgew0KICAgICAgbGV0IGZlYXR1cmVPYmogPSBbXTsNCiAgICAgIGZlYXR1cmVPYmoucHVzaChjbGlja0ZlYXR1cmUpOw0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgbGV0IGhpZ2hMaWdodFN0eWxlID0gbmV3IFN0eWxlKHsNCiAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCIsDQogICAgICAgIH0pLA0KICAgICAgICBzdHJva2U6IG5ldyBTdHJva2Uoew0KICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCIsDQogICAgICAgICAgd2lkdGg6IDgNCiAgICAgICAgfSksDQogICAgICB9KQ0KICAgICAgdGhpc09iai5oaWdoTGlnaHRMYXllciA9IG5ldyBWZWN0b3JMYXllcih7DQogICAgICAgIG5hbWU6ICJkayIsDQogICAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVPYmosDQogICAgICAgIH0pLA0KICAgICAgICBzdHlsZTogKGZlYXR1cmUsIHNvbHV0aW9uKSA9PiB7DQogICAgICAgICAgcmV0dXJuIGhpZ2hMaWdodFN0eWxlOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpc09iai5oaWdoTGlnaHRMYXllci5zZXQoImlkIiwgImhpZ2hsaWdodExheWVyIikNCiAgICAgIHRoaXMubWFwRGF0YS5hZGRMYXllcih0aGlzT2JqLmhpZ2hMaWdodExheWVyKQ0KICAgICAgaWYgKG51bSA9PSAnJykgew0KICAgICAgICAvL+WPs+i+uemrmOS6rg0KICAgICAgICB0aGlzLiRiYXMuJGVtaXQoImFkZFJpZ2h0SGlnaExpZ2h0U3R5bGUiLCBjbGlja0ZlYXR1cmUsIHRoaXNPYmosICcxJykNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5Yig6Zmk6auY5Lqu5Zu+5bGCDQogICAgY2xlYXJIaWdobGlnaHQgKCkgew0KICAgICAgbGV0IGFyciA9IHRoaXMubWFwRGF0YS5nZXRMYXllcnMoKS5hcnJheV8NCiAgICAgIGxldCBoaWdobGlnaHRMYXllciA9IHt9DQogICAgICBhcnIuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uZ2V0KCJpZCIpID09ICJoaWdobGlnaHRMYXllciIpIHsNCiAgICAgICAgICBoaWdobGlnaHRMYXllciA9IGl0ZW0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGlmIChoaWdobGlnaHRMYXllciAmJiBoaWdobGlnaHRMYXllci5jbGFzc05hbWVfKSB7DQogICAgICAgIHRoaXMubWFwRGF0YS5yZW1vdmVMYXllcihoaWdobGlnaHRMYXllcikNCiAgICAgIH0NCiAgICB9LA0KDQoNCg0KICB9DQp9DQoNCg=="},{"version":3,"sources":["tab2-left.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA","file":"tab2-left.vue","sourceRoot":"src/views/traffic-decision/components","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <!--  -->\r\n    <div class=\"select-div\">\r\n      <div class=\"select-title\">左侧方案</div>\r\n      <div>\r\n        <el-select\r\n          v-model=\"leftPlane\"\r\n          placeholder=\"请选择\"\r\n          @change=\"leftPlaneChange\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in leftPlaneList\"\r\n            :key=\"item.key\"\r\n            :label=\"item.name\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"map\" ref=\"map\" style=\"width: 100%; height: 890px\">\r\n      <!--点击查看详情弹框-->\r\n      <div id=\"popup\" class=\"ol-popup2\">\r\n        <a\r\n          href=\"#\"\r\n          id=\"popup-closer\"\r\n          class=\"ol-popup-closer2\"\r\n          @click=\"removeBtn2\"\r\n        />\r\n        <div id=\"popup-content\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport 'ol/ol.css'\r\nimport Map from 'ol/Map'\r\nimport * as olControl from 'ol/control'\r\nimport View from 'ol/View'\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\nimport Feature from 'ol/Feature'\r\nimport { Draw } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill, Icon, IconImage, Image, Text } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport request from '@/utils/request'\r\nimport tab2RightVue from './tab2-right.vue'\r\nimport { formatFixNum, convertFeature } from \"@/api/common/common\";\r\nimport { featureCompaire } from \"@/api/decision/plane\";\r\nimport * as turf from '@turf/turf';\r\nimport Point from 'ol/geom/Point';\r\nimport { fromLonLat, toLonLat, transformExtent, transform } from 'ol/proj'\r\nimport LineString from 'ol/geom/LineString';\r\nimport MultiLineString from 'ol/geom/MultiLineString';\r\nimport { findComponentInfo } from \"@/api/config/component\";\r\nimport { getUrlKey } from '@/utils/request'\r\nimport { getArea, getLength } from 'ol/sphere';\r\nimport { initTreeList } from \"@/api/decision-manage/decision\";\r\n\r\n\r\n\r\n//中心坐标\r\nconst centerCordinate = [656813.44256, 3560432.98245]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\nlet newList = []\r\nlet parentVal=''\r\n//地图初始化\r\nconst view = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 10,\r\n  maxZoom: 18,\r\n  zoom: 13.5// 地图初始化的缩放级别\r\n})\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scl=2&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      leftPlaneList: [],\r\n      popTransList: [\r\n        { label: 'AB交通量', propertie: 'ab_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: 'BA交通量', propertie: 'ba_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: '总交通量', propertie: 'tot_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: 'AB饱和度', propertie: 'ab_voc', maxlength: 2, type: 'float' },\r\n        { label: 'BA饱和度', propertie: 'ba_voc', maxlength: 2, type: 'float' },\r\n        { label: '最大饱和度', propertie: 'max_voc', maxlength: 2, type: 'float' },\r\n      ],\r\n      leftPlane: '',\r\n      rightSelectedPlane: null,\r\n      vectorLayer: null,\r\n      zoomThreshold: 15.7,\r\n      initStyleFlag: false,\r\n      style: {\r\n        line_width: 3,\r\n        line_stroke: '#459c50',\r\n        interval: 40\r\n      },\r\n      map: null\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n    //获取菜单ID\r\n    this.menuId = getUrlKey('menuId');\r\n    //根据菜单ID查询组件信息\r\n    this.initComponentInfo();\r\n\r\n    this.initMap();\r\n\r\n\r\n    // 高亮\r\n    this.$bas.$on(\"addLeftHighLightStyle\", (i, j, num) => {\r\n      this.addHighLightStyle(i, j, num)\r\n    })\r\n    //清除高亮\r\n    this.$bas.$on(\"clearHighlight_Y\", (i) => {\r\n      this.clearHighlight()\r\n    })\r\n\r\n    this.leftPlaneList = newList;\r\n    this.leftPlaneList = this.leftPlaneList.filter((item) => {\r\n      return item.bizVal == parentVal\r\n    })\r\n\r\n    this.$bas.$on(\"rightPlaneChange\", (i) => {\r\n      this.leftPlaneList = JSON.parse(JSON.stringify(newList));\r\n      this.rightSelectedPlane = i;\r\n      debugger\r\n      console.log(parentVal)\r\n      this.leftPlaneList = this.leftPlaneList.filter((item) => {\r\n        return item.value != i && item.bizVal == parentVal\r\n      })\r\n      console.log(this.leftPlaneList);\r\n      this.leftPlane = this.leftPlaneList[0].value\r\n      this.rightSelectedPlane=i\r\n      this.initVectorLayer()\r\n    })\r\n\r\n    //拖动监听方法\r\n    this.$bas.$on(\"rightPanelDrageChange\", (cordinate, zoom) => {\r\n      if (cordinate && zoom) {\r\n        this.leftCurrentCordinate = cordinate;\r\n        this.leftCurrentZoom = zoom;\r\n        view.animate({\r\n          center: cordinate,\r\n          zoom: zoom, // 缩放级别\r\n          rotation: undefined,\r\n          duration: 10\r\n        })\r\n      }\r\n    })\r\n\r\n    //缩放监听\r\n    this.$bas.$on(\"rightMovvendChange\", (cordinate, zoom) => {\r\n      if (cordinate && zoom) {\r\n        this.leftCurrentCordinate = cordinate;\r\n        this.leftCurrentZoom = zoom;\r\n        view.animate({\r\n          center: cordinate,\r\n          zoom: zoom, // 缩放级别\r\n          rotation: undefined,\r\n          duration: 10\r\n        })\r\n      }\r\n    })\r\n    document.getElementById('popup').style.display = 'none';\r\n    //交通信息点击按钮\r\n    window.preview1 = function () {\r\n      document.getElementById('info2').style.display = 'block';\r\n      document.getElementById('info1').style.display = 'none';\r\n      document.getElementById('btn1').style.background = '#004AB3';\r\n      document.getElementById('btn2').style.background = '#D3D6DB';\r\n      document.getElementById('info4').style.display = 'block';\r\n      document.getElementById('info3').style.display = 'none';\r\n      document.getElementById('btn3').style.background = '#004AB3';\r\n      document.getElementById('btn4').style.background = '#D3D6DB';\r\n    }\r\n    //基本信息点击按钮\r\n    window.preview2 = function () {\r\n      document.getElementById('info2').style.display = 'none';\r\n      document.getElementById('info1').style.display = 'block';\r\n      document.getElementById('btn2').style.background = '#004AB3';\r\n      document.getElementById('btn1').style.backgroundColor = '#D3D6DB';\r\n      document.getElementById('info4').style.display = 'none';\r\n      document.getElementById('info3').style.display = 'block';\r\n      document.getElementById('btn4').style.background = '#004AB3';\r\n      document.getElementById('btn3').style.backgroundColor = '#D3D6DB';\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    //添加路段文字标注\r\n    addMarkTextLayer () {\r\n      this.$emit('aquirePointMarkData', this.mapData);\r\n    },\r\n\r\n    changeCompareItemByBizType (parentVal, this_) {\r\n      parentVal=parentVal\r\n      this_.leftPlaneList = JSON.parse(JSON.stringify(newList));\r\n      this_.leftPlaneList = this_.leftPlaneList.filter((item) => {\r\n        return item.bizVal == parentVal\r\n      })\r\n      this_.leftPlane = this_.leftPlaneList[0].value\r\n      this_.initVectorLayer()\r\n      return this_.leftPlane;\r\n    },\r\n\r\n    initComponentInfo () {\r\n      let param = {};\r\n      this.options=[]\r\n      param.bizKey = 'plane_compare'\r\n      initTreeList(param).then(res=> {\r\n        let responseData = res.data[0].children;\r\n        //初始化页面选择默认第一个\r\n        responseData[0].children.forEach(s=>{\r\n          this.leftPlaneList.push({\r\n            layerName: s.layerName,\r\n            name:s.name, \r\n            value: s.id,\r\n            bizVal: s.parentId\r\n          })\r\n        })\r\n        //newlist 获取全部的数据 筛选用\r\n        responseData.forEach(ss=>{\r\n          ss.children.forEach(r=>{\r\n            newList.push({\r\n            layerName: r.layerName,\r\n            name:r.name, \r\n            value: r.id,\r\n            bizVal: r.parentId,\r\n          })\r\n        })\r\n        })\r\n        debugger\r\n      parentVal=responseData[0].id\r\n      this.rightSelectedPlane=this.leftPlaneList[1].value\r\n      this.leftPlane=this.leftPlaneList[0].value\r\n      // 初始化图层\r\n      this.initVectorLayer();\r\n      });\r\n    },\r\n\r\n\r\n    // getPointsByLine (coords, dir) {\r\n    //   let this_ = this;\r\n    //   let styles = [];\r\n    //   let distance_ = this_.style.interval / 2;//首个点放置在距离起点1/2间隔的位置\r\n    //   let pix_start = this_.mapData.getPixelFromCoordinate(coords[0])\r\n    //   let pix_end\r\n    //   for (let i = 1; i < coords.length; i++) {\r\n    //     let coord_, coord_pix;\r\n    //     let style_;\r\n    //     pix_end = this_.mapData.getPixelFromCoordinate(coords[i]);\r\n    //     let dis_start2end = Math.sqrt(Math.pow((pix_start[0] - pix_end[0]), 2) + Math.pow((pix_start[1] - pix_end[1]), 2)) // 计算收尾在屏幕上的距离\r\n    //     if (dis_start2end > distance_) { // 距离大于间隔\r\n    //       // 计算距离开始点位的像素值\r\n    //       coord_pix = [\r\n    //         (distance_ * (pix_end[0] - pix_start[0])) / dis_start2end + pix_start[0],\r\n    //         (distance_ * (pix_end[1] - pix_start[1])) / dis_start2end + pix_start[1]\r\n    //       ];\r\n    //       // 计算经纬度\r\n    //       coord_ = this_.mapData.getCoordinateFromPixel(coord_pix);\r\n    //       var rotation = Math.PI / 2 + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0]);\r\n    //       if (dir == -1) {\r\n    //         rotation = rotation + Math.PI\r\n    //       }\r\n    //       // 生成样式\r\n    //       style_ = new Style({\r\n    //         // 箭头点的位置\r\n    //         geometry: new Point(coord_),\r\n    //       })\r\n    //       //  if (dir != 0) {\r\n    //       // 箭头点的样式\r\n    //       let image = new Icon({\r\n    //         src: require('@/assets/images/juece/up10-10.png'),\r\n    //         rotateWithView: true,\r\n    //         rotation: rotation,\r\n    //         scale: this.style.line_width / 5,\r\n    //         imgSize: [10, 10]\r\n    //       })\r\n    //       style_.setImage(image);\r\n    //       // }\r\n\r\n\r\n    //       //下次循环开始点为当前点\r\n    //       pix_start = coord_pix;\r\n    //       distance_ = this_.style.interval;\r\n    //       i--;\r\n    //     } else if (dis_start2end == distance_) {// 距离等于间隔\r\n    //       var rotation = Math.PI / 2 + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0])\r\n    //       if (dir == -1) {\r\n    //         rotation = rotation + Math.PI\r\n    //       }\r\n    //       // 生成样式\r\n    //       style_ = new Style({\r\n    //         // 箭头点的位置\r\n    //         geometry: new Point(coords[i]),\r\n    //         // 箭头点的样式\r\n    //         image: new Icon({\r\n    //           src: require('@/assets/images/juece/up10-10.png'),\r\n    //           rotateWithView: true,\r\n    //           rotation: rotation,\r\n    //           scale: this.style.line_width / 5,\r\n    //           imgSize: [10, 10]\r\n    //         })\r\n    //       })\r\n    //       pix_start = pix_end;\r\n    //       distance_ = this_.style.interval;\r\n    //     } else {//距离小于间隔\r\n    //       distance_ = distance_ - dis_start2end;\r\n    //       pix_start = pix_end;\r\n    //     }\r\n    //     style_ && styles.push(style_)\r\n    //   }\r\n    //   return styles\r\n    // },\r\n\r\n    getPointExtent (n) {\r\n      n = n ? n : 1.2;\r\n      let view = this.mapData.getView();\r\n      let mapsize = this.mapData.getSize().map(it_ => {\r\n        return it_ * n\r\n      });\r\n      return view.calculateExtent(mapsize);\r\n    },\r\n\r\n\r\n    getMiddlePoint (coords, feature) {\r\n      try {\r\n        if (coords == null || coords.length == 0 || coords == undefined) {\r\n          return null;\r\n        }\r\n        if (coords.length <= 3) {\r\n          var point_features = turf.points(feature.getGeometry().getCoordinates()[0]);\r\n          return new Point(turf.center(point_features).geometry.coordinates);\r\n        }\r\n        if (coords.length % 2 == 0) {\r\n          return new Point(coords[coords.length / 2])\r\n        } else {\r\n          return new Point(coords[Math.ceil(coords.length / 2)])\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n\r\n    },\r\n\r\n\r\n    iniFlowOrVocText (coords, feature, this_, text, offsetX, offsety) {\r\n      let centerPoint = this.getMiddlePoint(coords, feature);\r\n      if (!centerPoint) {\r\n        return null;\r\n      }\r\n      let pix_start = this_.mapData.getPixelFromCoordinate(coords[0])\r\n      let pix_end = this_.mapData.getPixelFromCoordinate(centerPoint.flatCoordinates);\r\n      var rotation = Math.PI + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0]);\r\n      if (pix_end[0] > pix_start[0]) {\r\n        rotation = rotation + Math.PI\r\n      }\r\n      text = text + \"\";\r\n      let color = this_.getColorByFeature(feature);\r\n      return this.createTextStyle(centerPoint, rotation, text, offsetX, offsety, color);\r\n    },\r\n\r\n\r\n\r\n    initFlowOrVocPoint (feature, this_, isFlow) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let styles = [];\r\n      let extent_ = this_.getPointExtent();\r\n      let line_ = turf.multiLineString(coords);\r\n      let line_clip_arr = turf.bboxClip(line_, extent_)\r\n      let ab_text = isFlow ? feature.get(\"ab_flow\") : feature.get(\"ab_voc\");\r\n      let ba_text = isFlow ? feature.get(\"ba_flow\") : feature.get(\"ba_voc\");\r\n      if (ab_text != null && ab_text != '') {\r\n        ab_text = isFlow ? Math.floor(ab_text) : formatFixNum(ab_text, 2);\r\n      }\r\n      if (ba_text != null && ba_text != '') {\r\n        ba_text = isFlow ? Math.floor(ba_text) : formatFixNum(ba_text, 2);\r\n      }\r\n\r\n      if (line_clip_arr.geometry.type == \"LineString\") {\r\n        if (ab_text != null && ab_text != '') {\r\n          let offsetX = 15;\r\n          let offsety = 15;\r\n          let style_ab = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ab_text, offsetX, offsety);\r\n          styles = styles.concat(style_ab)\r\n        }\r\n        if (ba_text != null && ba_text != '') {\r\n          let offsetX = -15;\r\n          let offsety = -15;\r\n          let style_ba = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ba_text, offsetX, offsety);\r\n          styles = styles.concat(style_ba)\r\n        }\r\n\r\n      }\r\n      return styles;\r\n    },\r\n\r\n\r\n    createTextStyle (coordinate, roation, text, offsetx, offsety, color) {\r\n      let styles_ = [];\r\n      let text_ = new Text({\r\n        textAlign: 'center',\r\n        textBaseline: 'middle',\r\n        font: 'normal 15px 微软雅黑',\r\n        text: text,\r\n        textBaseline: \"middle\", //文本基线\r\n        offsetY: offsetx,\r\n        offsetX: offsety,\r\n        fill: new Fill({\r\n          color: color\r\n        }),\r\n        rotation: roation,\r\n      })\r\n      let style_ = new Style({\r\n        geometry: coordinate,\r\n      })\r\n      style_.setText(text_)\r\n      styles_.push(style_)\r\n      return styles_;\r\n    },\r\n\r\n    getColorByFeature (feature) {\r\n      // 饱和度\r\n      var max_voc = feature.get(\"max_voc\");\r\n      var color = this.style.line_stroke;\r\n      if (max_voc > 0 && max_voc <= 0.25) {\r\n        color = '#185817';\r\n      } else if (max_voc > 0.25 && max_voc <= 0.5) {\r\n        color = '#61a43a';\r\n      } else if (max_voc > 0.5 && max_voc <= 0.75) {\r\n        color = '#cfe05d';\r\n      } else if (max_voc > 0.75 && max_voc <= 1) {\r\n        color = '#d8c964';\r\n      } else if (max_voc > 1 && max_voc <= 1.25) {\r\n        color = '#d79550';\r\n      } else if (max_voc > 1.25 && max_voc <= 1.5) {\r\n        color = '#c75b41';\r\n      } else if (max_voc > 1.5 && max_voc <= 1.75) {\r\n        color = '#c75b41';\r\n      } else if (max_voc > 1.75) {\r\n        color = '#000000';\r\n      }\r\n      return color;\r\n    },\r\n\r\n\r\n\r\n    getPointsStyle (feature) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let this_ = this;\r\n      let styles = [];\r\n      // 方向（1单向，-1反向单向，0双向）\r\n      var dir = feature.get(\"dir\");\r\n      // 流量\r\n      var tot_flow = feature.get(\"tot_flow\");\r\n      // 颜色默认值\r\n      var color = this.getColorByFeature(feature);\r\n      // 粗细默认值\r\n      var width = this_.style.line_width;\r\n\r\n      var pec = 2;\r\n      if (tot_flow > 0 && tot_flow <= 1250) {\r\n        width = 1 * pec;\r\n      } else if (tot_flow > 1250 && tot_flow <= 2500) {\r\n        width = 2 * pec;\r\n      } else if (tot_flow >= 2500) {\r\n        width = 4 * pec;\r\n      }\r\n      styles.push(\r\n        new Style({\r\n          stroke: new Stroke({\r\n            color: color,\r\n            width: width,\r\n          }),\r\n        })\r\n      )\r\n      // let extent_ = this.getPointExtent();\r\n      // let line_ = turf.multiLineString(coords);\r\n      // let line_clip_arr = turf.bboxClip(line_, extent_)\r\n\r\n      // if (line_clip_arr && line_clip_arr.geometry) {\r\n      //   if (line_clip_arr.geometry.type == \"LineString\") {\r\n      //     let style_ = this_.getPointsByLine(line_clip_arr.geometry.coordinates, dir);\r\n      //     if (style_ instanceof Array) {\r\n      //       styles = styles.concat(style_)\r\n      //     } else {\r\n      //       styles.push(style_)\r\n      //     }\r\n      //   } else if (line_clip_arr.geometry.type == \"MultiLineString\") {\r\n      //     line_clip_arr.geometry.coordinates.forEach(coords => {\r\n      //       let style_ = this_.getPointsByLine(coords, dir)\r\n      //       if (style_ instanceof Array) {\r\n      //         styles = styles.concat(style_)\r\n      //       } else {\r\n      //         styles.push(style_)\r\n      //       }\r\n      //     })\r\n      //   }\r\n      // }\r\n      return styles\r\n    },\r\n\r\n    initVectorLayer () {\r\n      let planeInfo = this.leftPlaneList.find(item => item.value == this.leftPlane)\r\n      // 初始化拿到公共数据\r\n      var $map = this.mapData;\r\n      var $this = this;\r\n      $map.removeLayer($this.vectorLayer);\r\n      // 请求数据\r\n      var url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + encodeURI(planeInfo.layerName) + '&maxFeatures=500000000&outputFormat=application%2Fjson';\r\n      axios.get(url, null).then(function (res) {\r\n        var featuresData = res.data;\r\n        var vectorSource = new VectorSource({\r\n          features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' })).readFeatures(featuresData)\r\n        });\r\n        $this.vectorLayer = new VectorLayer({\r\n          source: vectorSource,\r\n          style: (feature, solution) => {\r\n            let styles = $this.getPointsStyle(feature);\r\n            //根据文字控制按钮新增文字样式\r\n            let activeBtn = $this.$parent.$parent.$parent.activeBtn;\r\n            if (activeBtn != '' && activeBtn != 3) {\r\n              let isFlow = activeBtn == 3;\r\n              let flowStyle = $this.initFlowOrVocPoint(feature, $this, isFlow)\r\n              if (flowStyle != null) {\r\n                styles = styles.concat(flowStyle);\r\n              }\r\n            }\r\n            return styles\r\n          }\r\n        })\r\n\r\n        $this.mapData.addLayer($this.vectorLayer);\r\n      });\r\n    },\r\n\r\n    leftPointerdrag () {\r\n      this.leftCurrentCordinate = view.getCenter();\r\n      this.leftCurrentZoom = view.getZoom()\r\n      this.$bas.$emit(\"leftPanelDrageChange\", this.leftCurrentCordinate, this.leftCurrentZoom)\r\n    },\r\n\r\n    leftMovvend () {\r\n      this.leftCurrentCordinate = view.getCenter();\r\n      this.leftCurrentZoom = view.getZoom()\r\n      this.$bas.$emit(\"leftMovvendChange\", this.leftCurrentCordinate, this.leftCurrentZoom)\r\n      //根据缩放级别改变流量文字样式\r\n      //this.changeFlowTextStyleByCurrentZoom();\r\n\r\n    },\r\n\r\n    showFlowText (this_, isFlow) {\r\n      this_.vectorLayer.setStyle((feature, solution) => {\r\n        let styles = [];\r\n        let pointArrowStyle = this_.getPointsStyle(feature);\r\n        let flowStyle = this_.initFlowOrVocPoint(feature, this_, isFlow)\r\n        if (pointArrowStyle != null && pointArrowStyle.length > 0) {\r\n          styles = styles.concat(pointArrowStyle)\r\n        }\r\n        if (flowStyle != null && flowStyle.length > 0) {\r\n          styles = styles.concat(flowStyle)\r\n        }\r\n        return styles;\r\n      })\r\n\r\n    },\r\n\r\n    hideFlowText (this_) {\r\n      if (this_.vectorLayer) {\r\n        this_.vectorLayer.setStyle(null);\r\n        this_.vectorLayer.setStyle((feature, solution) => {\r\n          let styles = [];\r\n          let pointArrowStyle = this_.getPointsStyle(feature);\r\n          if (pointArrowStyle != null && pointArrowStyle.length > 0) {\r\n            styles = styles.concat(pointArrowStyle)\r\n          }\r\n          return styles;\r\n        })\r\n      }\r\n\r\n    },\r\n\r\n\r\n    changeFlowTextStyleByCurrentZoom () {\r\n      let this_ = this;\r\n      //隐藏文字\r\n      if (this_.leftCurrentZoom < this_.zoomThreshold && this_.initStyleFlag) {\r\n        this.initStyleFlag = false;\r\n        this.hideFlowText(this_)\r\n      }\r\n      //显示文字\r\n      if (this_.leftCurrentZoom >= this_.zoomThreshold && !this_.initStyleFlag) {\r\n        this.showFlowText(this_)\r\n        this.initStyleFlag = true;\r\n      }\r\n    },\r\n\r\n    // 初始化地图\r\n    initMap () {\r\n      const mapContainer = this.$refs.map;\r\n      //将图层加入Map\r\n      const map = new Map({\r\n        layers: [gaodeMapLayer],\r\n        target: mapContainer,\r\n        view: view\r\n      });\r\n      // 添加拖动事件\r\n      map.on('pointerdrag', this.leftPointerdrag);\r\n      // 添加鼠标点击事件\r\n      map.on('click', this.mapClick);\r\n      // 缩放监听\r\n      map.on('moveend', this.leftMovvend);\r\n      // 保存地图\r\n      this.mapData = map\r\n      //添加文字标注\r\n      this.addMarkTextLayer();\r\n    },\r\n\r\n    leftPlaneChange () {\r\n      this.removePopup();\r\n      this.mapData.removeLayer(this.vectorLayer);\r\n      this.initVectorLayer();\r\n      this.$bas.$emit(\"leftPlaneChange\", this.leftPlane)\r\n    },\r\n\r\n    //组装左侧交通信息表\r\n    assebleLeftTransPopContent (feature, compaireFeature, layer) {\r\n      let compaireResult = {}\r\n      if (compaireFeature != null && compaireFeature != undefined) {\r\n        compaireResult = featureCompaire(feature.properties, compaireFeature.properties);\r\n      }\r\n      let downUrl = require('@/assets/images/nav/down.png');\r\n      let upUrl = require('@/assets/images/nav/up.png');\r\n      let content = `<div style='color:#121924;font-weight: bold;width:100%;z-index:4;height:95px;padding:6px;font-size: 15px'>` + layer + `\r\n        <div style = 'margin-top:10px' ><button id='btn1' style='margin-right:10px;border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #004AB3;color: #ffffff;' onclick=\"preview1()\">基本信息</button>\r\n            <button id='btn2' style=\"border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #D3D6DB;color: #ffffff;\" onclick=\"preview2()\">交通信息</button></div>\r\n            </div>\r\n        <div style='font-size: 10px;width:100%' id='info1'>`\r\n      this.popTransList.forEach(element => {\r\n        let propVal = feature.properties[element.propertie];\r\n        if (propVal != null) {\r\n          let maxLen = element.maxlength;\r\n          let type = element.type;\r\n          //格式化\r\n          if (maxLen != null && type == 'float') {\r\n            propVal = formatFixNum(propVal, maxLen)\r\n          }\r\n          if (type == 'int') {\r\n            propVal = Math.floor(propVal)\r\n          }\r\n          //拼接单位\r\n          let unit = element.unit;\r\n          if (unit != null && propVal != null) {\r\n            propVal = propVal + \"&nbsp\" + unit;\r\n          }\r\n        } else {\r\n          propVal = ''\r\n        }\r\n        content = content + `<div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:40%;display: inline-block;\">`+ element.label + `:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ propVal + `</a>`\r\n        if (compaireResult[element.propertie] == '>') {\r\n          content = content + `<img src = ` + upUrl + ` style = 'width:20px;height:18px' />`\r\n        } else if (compaireResult[element.propertie] == '<') {\r\n          content = content + `<img src = ` + downUrl + ` style = 'width:20px;height:18px' />`\r\n        }\r\n        content = content + `</div>`\r\n\r\n\r\n\r\n      });\r\n      content = content + '</div>';\r\n      return content;\r\n    },\r\n\r\n\r\n\r\n    // 弹出框\r\n    addLeftPopup (coordinate, feature, compaireFeature) {\r\n      this.removePopup()\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup')\r\n      let content = document.getElementById('popup-content')\r\n      if (this.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        this.overlay = new Overlay({\r\n          element: container,\r\n        })\r\n        // 添加到map\r\n        this.mapData.addOverlay(this.overlay)\r\n      }\r\n      // 道路信息\r\n      let layer = feature.properties.layer == null ? \"\" : feature.properties.layer;\r\n      let handle = feature.properties.handle == null ? \"\" : feature.properties.handle;\r\n      let length = feature.properties.length == null ? \"\" : Math.floor(feature.properties.length) + \" m\";\r\n      let capacity = feature.properties.capacity == null ? \"\" : feature.properties.capacity + ' pcu/h';\r\n      // 方向（1单向，-1反向单向，0双向）\r\n      let dir = feature.properties.dir == 1 ? \"单向\" : feature.properties.dir == -1 ? \"反向单向\" : feature.properties.dir == 0 ? \"双向\" : '';\r\n      //交通流量\r\n      let transPopContent = this.assebleLeftTransPopContent(feature, compaireFeature, layer);\r\n\r\n      transPopContent = transPopContent + `</div>\r\n          </div>\r\n          <div style='font-size: 10px;width:100%' id='info2'>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">道路ID:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ handle + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">等级:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ layer + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">长度:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ length + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">通行能力:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ capacity + `</a>\r\n            </div>\r\n             <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">方向:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ dir + `</a>\r\n            </div>\r\n          </div>`;\r\n      content.innerHTML = transPopContent;\r\n      // 设置弹出层位置即可出现\r\n      this.overlay.setPosition(coordinate)\r\n      document.getElementById('info1').style.display = 'none';\r\n      document.getElementById('popup').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n      }\r\n    },\r\n    removeBtn2 () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n\r\n        if (document.getElementById('popup2').style.display == 'block') {\r\n          document.getElementById('popup2').style.display = 'none'\r\n        }\r\n        this.clearHighlight()\r\n        //清除对面高亮\r\n        this.$bas.$emit('clearHighlight_L', '1')\r\n      }\r\n    },\r\n    parseFeatureDetail (featureResp, feature) {\r\n      if (!featureResp) {\r\n        return null;\r\n      }\r\n      var jsonObj = JSON.parse(featureResp);\r\n      var features = jsonObj.features;\r\n      if (features == null || features.length == 0) {\r\n        return null;\r\n      }\r\n      let compaireFeature;\r\n      for (let k = 0; k < features.length; k++) {\r\n        let properties = features[k].properties;\r\n        let coordinates = features[k].coordinates;\r\n        if (properties.layer == feature.properties.layer\r\n          && feature.properties.handle == properties.handle) {\r\n          compaireFeature = features[k];\r\n          break;\r\n        }\r\n      }\r\n      return compaireFeature;\r\n\r\n    },\r\n\r\n    //根据道路ID查询对比方案详情\r\n    assembleLeftCompairePop (feature, thisObj, evt) {\r\n      debugger\r\n      let selectedPlaneVal = thisObj.rightSelectedPlane;\r\n      // if (selectedPlaneVal == null || selectedPlaneVal == undefined) {\r\n      //   selectedPlaneVal = this.leftPlane+1;\r\n      // }\r\n      let handle = feature.properties.handle\r\n      if (handle == null) {\r\n        thisObj.addLeftPopup(evt.coordinate, feature, null);\r\n        return;\r\n      }\r\n      let rightLayerName;\r\n      newList.forEach(item => {\r\n        if (item.value == selectedPlaneVal) {\r\n          rightLayerName = item.layerName\r\n        }\r\n      })\r\n      if (!rightLayerName) {\r\n        thisObj.addLeftPopup(evt.coordinate, feature, null);\r\n        return;\r\n      }\r\n      let propertyName = 'Test:handle';\r\n      let respProperties = 'layer,handle,length,capacity,ab_flow,ba_flow,tot_flow,ab_voc,ba_voc,max_voc,geom';\r\n      let url = process.env.VUE_APP_GIS_BASE_URL + '/wfs?request=GetFeature&version=1.1.0&typeName='\r\n        + rightLayerName + '&propertyName=' + respProperties + '&outputFormat=JSON&FILTER=<Filter xmlns=\"http://www.opengis.net/ogc\"><PropertyIsEqualTo><PropertyName>'\r\n        + propertyName + '</PropertyName><Literal>' + handle + '</Literal></PropertyIsEqualTo></Filter>'\r\n      //请求url对比方案道路详情\r\n      fetch(url)\r\n        .then(function (response) {\r\n          return response.text();\r\n        })\r\n        .then(function (info) {\r\n          if (info != null) {\r\n           \r\n            let compaireFeature = thisObj.parseFeatureDetail(info, feature);\r\n            thisObj.addLeftPopup(evt.coordinate, feature, compaireFeature);\r\n            //弹出右边弹出框\r\n            thisObj.$emit('addRightPopupByParent', evt.coordinate, compaireFeature, feature);\r\n          } else {\r\n            thisObj.addLeftPopup(evt.coordinate, feature, null);\r\n          }\r\n        })\r\n\r\n\r\n    },\r\n\r\n    // 鼠标点击地图事件\r\n    mapClick (evt) {\r\n      let pixel = this.mapData.getEventPixel(evt.originalEvent);\r\n      let feature = this.mapData.forEachFeatureAtPixel(pixel,\r\n        function (feature, layer) {\r\n          return feature;\r\n        });\r\n      if (feature) {\r\n        //捕捉到要素后，弹框\r\n        let featureConvert = convertFeature(feature);\r\n        this.addHighLightStyle(feature, this, '')\r\n        debugger\r\n        this.assembleLeftCompairePop(featureConvert, this, evt);\r\n\r\n      } else {\r\n        this.removeBtn2();\r\n      }\r\n\r\n    },\r\n    addHighLightStyle (clickFeature, thisObj, num) {\r\n      let featureObj = [];\r\n      featureObj.push(clickFeature);\r\n      this.clearHighlight();\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\",\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n          width: 8\r\n        }),\r\n      })\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        name: \"dk\",\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          return highLightStyle;\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\")\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n      if (num == '') {\r\n        //右边高亮\r\n        this.$bas.$emit(\"addRightHighLightStyle\", clickFeature, thisObj, '1')\r\n      }\r\n    },\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let highlightLayer = {}\r\n      arr.forEach(item => {\r\n        if (item.get(\"id\") == \"highlightLayer\") {\r\n          highlightLayer = item\r\n        }\r\n      })\r\n      if (highlightLayer && highlightLayer.className_) {\r\n        this.mapData.removeLayer(highlightLayer)\r\n      }\r\n    },\r\n\r\n\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '~@/assets/styles/popup.scss';\r\n@import '~@/assets/styles/traffic.scss';\r\n.content {\r\n  position: relative;\r\n}\r\n.select-div {\r\n  right: 28px;\r\n  top: 70px;\r\n  padding: 10px 16px 0 16px;\r\n}\r\n</style>\r\n"]}]}