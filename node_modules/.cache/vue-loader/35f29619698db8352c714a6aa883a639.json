{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\information-search\\road-info3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\information-search\\road-info3.vue","mtime":1663479653281},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJ29sL29sLmNzcycNCmltcG9ydCBNYXAgZnJvbSAnb2wvTWFwJw0KaW1wb3J0ICogYXMgb2xDb250cm9sIGZyb20gJ29sL2NvbnRyb2wnDQppbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3Jw0KaW1wb3J0IHsgZ2V0V2lkdGgsIGdldENlbnRlciB9IGZyb20gJ29sL2V4dGVudCcNCmltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZScNCmltcG9ydCBXTVRTIGZyb20gJ29sL3NvdXJjZS9XTVRTJw0KaW1wb3J0IFhZWiBmcm9tICdvbC9zb3VyY2UvWFlaJw0KaW1wb3J0IFdNVFNUaWxlR3JpZCBmcm9tICdvbC90aWxlZ3JpZC9XTVRTJw0KaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnb2wvcHJvai9Qcm9qZWN0aW9uJw0KaW1wb3J0IHsgdHJhbnNmb3JtLCBmcm9tTG9uTGF0IH0gZnJvbSAnb2wvcHJvaicNCmltcG9ydCBwcm9qNCBmcm9tICdwcm9qNCcNCmltcG9ydCB7IHJlZ2lzdGVyIH0gZnJvbSAnb2wvcHJvai9wcm9qNCc7DQppbXBvcnQgVmVjdG9yU291cmNlIGZyb20gJ29sL3NvdXJjZS9WZWN0b3InDQppbXBvcnQgeyBUaWxlV01TIH0gZnJvbSAnb2wvc291cmNlJw0KaW1wb3J0IFZlY3RvckxheWVyIGZyb20gJ29sL2xheWVyL1ZlY3RvcicNCmltcG9ydCBGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUnDQppbXBvcnQgeyBEcmF3IH0gZnJvbSAnb2wvaW50ZXJhY3Rpb24nDQppbXBvcnQgeyBTdHlsZSwgQ2lyY2xlLCBTdHJva2UsIEZpbGwgfSBmcm9tICdvbC9zcmMvc3R5bGUnDQppbXBvcnQgV0tUIGZyb20gJ29sL2Zvcm1hdC9XS1QnDQppbXBvcnQgR2VvSlNPTiBmcm9tICdvbC9mb3JtYXQvR2VvSlNPTicNCmltcG9ydCBPdmVybGF5IGZyb20gJ29sL092ZXJsYXknDQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gImVjaGFydHMiOw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KaW1wb3J0IE9sR2VvbVBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQnDQppbXBvcnQgT2xTdHlsZVN0eWxlIGZyb20gJ29sL3N0eWxlL1N0eWxlJw0KaW1wb3J0IE9sU3R5bGVJY29uIGZyb20gJ29sL3N0eWxlL0ljb24nDQppbXBvcnQgVGV4dCBmcm9tICdvbC9zdHlsZS9UZXh0Jw0KaW1wb3J0IG5hdl9iYXJWdWUgZnJvbSAnLi4vY29tcG9uZW50cy9uYXZfYmFyLnZ1ZScNCmltcG9ydCB7IGZpbmRDb21wb25lbnRJbmZvIH0gZnJvbSAiQC9hcGkvY29uZmlnL2NvbXBvbmVudCI7DQppbXBvcnQgeyBnZXRVcmxLZXksIHJlcXVlc3QgfSBmcm9tICdAL3V0aWxzL3JlcXVlc3QnDQppbXBvcnQgYmFyX2NoYXJ0X3ZWdWUgZnJvbSAnLi4vdHJhZmZpYy1kZWNpc2lvbi9jb21wb25lbnRzL2Jhcl9jaGFydF92LnZ1ZScNCmltcG9ydCBwaWVfY2hhcnRWdWUgZnJvbSAnLi4vdHJhZmZpYy1kZWNpc2lvbi9jb21wb25lbnRzL3BpZV9jaGFydC52dWUnDQppbXBvcnQgc2NvbGxEaXZWdWUgZnJvbSAnLi4vdHJhZmZpYy1kZWNpc2lvbi9jb21wb25lbnRzL3Njb2xsRGl2LnZ1ZScNCmltcG9ydCBiYXJfY2hhcnRfaFZ1ZSBmcm9tICcuLi90cmFmZmljLWRlY2lzaW9uL2NvbXBvbmVudHMvYmFyX2NoYXJ0X2gudnVlJw0KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnDQovL+S4reW/g+WdkOaghw0KY29uc3QgY2VudGVyQ29yZGluYXRlID0gWzY1NjgxMy40NDI1NiwgMzU2MDQzMi45ODI0NV0NCi8v5Z2Q5qCH5a6a5LmJDQpwcm9qNC5kZWZzKCJFUFNHOjQ1NDgiLCAiK3Byb2o9dG1lcmMgK2xhdF8wPTAgK2xvbl8wPTExNyAraz0xICt4XzA9NTAwMDAwICt5XzA9MCArZWxscHM9R1JTODAgK3VuaXRzPW0gK25vX2RlZnMiKTsNCnJlZ2lzdGVyKHByb2o0KTsNCi8v5piv5ZCm5bGV56S65oC75L2T5L+h5oGv5qCH6K+GDQp2YXIgc2hvd1N1bW1yeUZsYWcgPSB0cnVlOw0KLy8g6YGT6Lev57G75Z6L5Zu+5L6L5bi46YePDQoNCmNvbnN0IGxheWVyTmFtZSA9ICJUZXN0OnBsYW5lMV92MiI7DQp2YXIgdmVjdG9yTGF5ZXI7DQovL+WcsOWbvuWIneWni+WMlg0KY29uc3QgdmlldyA9IG5ldyBWaWV3KHsNCiAgY2VudGVyOiB0cmFuc2Zvcm0oY2VudGVyQ29yZGluYXRlLCAnRVBTRzo0NTQ4JywgJ0VQU0c6Mzg1NycpLA0KICBtaW5ab29tOiA0LA0KICBtYXhab29tOiAxOCwNCiAgem9vbTogMTMuNiAvLyDlnLDlm77liJ3lp4vljJbnmoTnvKnmlL7nuqfliKsNCn0pDQoNCg0KDQovL+mrmOW+t+WcsOWbvuWbvuWxgg0KY29uc3QgZ2FvZGVNYXBMYXllciA9IG5ldyBUaWxlTGF5ZXIoew0KICBzb3VyY2U6IG5ldyBYWVooew0KICAgIHVybDogJ2h0dHA6Ly93ZWJzdDB7MS00fS5pcy5hdXRvbmF2aS5jb20vYXBwbWFwdGlsZT9sYW5nPXpoX2NuJnNpemU9MSZzY2FsZT0xJnN0eWxlPTcmeD17eH0meT17eX0mej17en0nDQogIH0pDQp9KTsNCg0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlJvYWQiLA0KICBjb21wb25lbnRzOiB7DQogICAgbmF2X2JhclZ1ZSwgYmFyX2NoYXJ0X3ZWdWUsIHNjb2xsRGl2VnVlLCBwaWVfY2hhcnRWdWUsIGJhcl9jaGFydF9oVnVlDQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBuYXZMaXN0OiBbJ+S/oeaBr+afpeivoicsICfpgZPot6/kv6Hmga8nXSwNCiAgICAgIHZhbHVlMTogJ3RydWUnLCAgIC8v5byA5YWzDQogICAgICByb2FkVHlwZVJhZGlvOiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciXSwgICAgICAgIC8v6YGT6Lev562J57qnDQogICAgICByYWRpbzI6IFsiMSIsICIyIiwgIjMiXSwgICAgICAgLy/lu7rorr7kv6Hmga8NCiAgICAgIGdlb0pzb25MaXN0OiB7fSwNCiAgICAgIHJvYWRCYXNpY0luZm86IHt9LA0KICAgICAgbWFya0xheWVyTmFtZTogJ1Rlc3QlM0Fyb2FkX3BvaW50cycsDQogICAgICBtYXJrTWluWm9vbTogMTQuNywNCiAgICAgIG1hcmtGbGFnOiBmYWxzZSwNCiAgICAgIGhpZFBvcDogZmFsc2UsDQogICAgICBzaG93UG9wOiB0cnVlLA0KICAgICAgbWFya1ZlY3RvckFycmF5OiBbXSwNCiAgICAgIHRhYmxlQXJyYXk6IFtdLA0KICAgICAgbWVudUlkOiBudWxsLA0KICAgICAgbWFya0RhdGFDYWNoZTogbnVsbCwNCiAgICAgIG15Q2hhcnQ6IHt9LA0KICAgICAgLy8gc29ydERhdGE6IFtdLCAvL+WKqOaAgeaOkuW6j+aVsOaNrg0KICAgICAgbXlDaGFydFN0eWxlOiB7DQogICAgICAgIHdpZHRoOiAiMTAwJSIsIGhlaWdodDogIjI1MHB4IiwgZGlzcGxheTogImlubGluZS1ibG9jayINCiAgICAgIH0sDQogICAgICByb2FkVHlwZUxlbmdlbmRMaXN0OiBbDQogICAgICAgIHsNCiAgICAgICAgICBsZW5nZW5kVHlwZU5hbWU6ICLpq5jpgJ/lhazot68iLA0KICAgICAgICAgIGxlbmdlbmRUeXBlVmFsdWU6ICI1IiwNCiAgICAgICAgICBmaWx0ZXJQcm9wZXJ0eTogImxheWVyIiwNCiAgICAgICAgICBzdHJva2U6ICIjMDBGRjAwIiwNCiAgICAgICAgICBzdHJva2VXaWR0aDogIjcuMiIsDQogICAgICAgICAgZW5hYmxlU2VsZWN0OiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsZW5nZW5kVHlwZU5hbWU6ICLlv6vpgJ/ot68iLA0KICAgICAgICAgIGxlbmdlbmRUeXBlVmFsdWU6ICIxIiwNCiAgICAgICAgICBmaWx0ZXJQcm9wZXJ0eTogImxheWVyIiwNCiAgICAgICAgICBzdHJva2U6ICIjZmYwMGZmIiwNCiAgICAgICAgICBzdHJva2VXaWR0aDogIjYuMyIsDQogICAgICAgICAgZW5hYmxlU2VsZWN0OiB0cnVlDQoNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxlbmdlbmRUeXBlTmFtZTogIuS4u+W5sui3ryIsDQogICAgICAgICAgbGVuZ2VuZFR5cGVWYWx1ZTogIjIiLA0KICAgICAgICAgIGZpbHRlclByb3BlcnR5OiAibGF5ZXIiLA0KICAgICAgICAgIHN0cm9rZTogIiNmZjAwMDAiLA0KICAgICAgICAgIHN0cm9rZVdpZHRoOiAiNS40IiwNCiAgICAgICAgICBlbmFibGVTZWxlY3Q6IHRydWUNCiAgICAgICAgfSwNCg0KICAgICAgICB7DQogICAgICAgICAgbGVuZ2VuZFR5cGVOYW1lOiAi5qyh5bmy6LevIiwNCiAgICAgICAgICBsZW5nZW5kVHlwZVZhbHVlOiAiMyIsDQogICAgICAgICAgZmlsdGVyUHJvcGVydHk6ICJsYXllciIsDQogICAgICAgICAgc3Ryb2tlOiAiIzAwN2ZmZiIsDQogICAgICAgICAgc3Ryb2tlV2lkdGg6ICIzLjYiLA0KICAgICAgICAgIGVuYWJsZVNlbGVjdDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGVuZ2VuZFR5cGVOYW1lOiAi5pSv6LevIiwNCiAgICAgICAgICBsZW5nZW5kVHlwZVZhbHVlOiAiNCIsDQogICAgICAgICAgZmlsdGVyUHJvcGVydHk6ICJsYXllciIsDQogICAgICAgICAgc3Ryb2tlOiAiIzAwOTk0YyIsDQogICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyLjciLA0KICAgICAgICAgIGVuYWJsZVNlbGVjdDogdHJ1ZQ0KICAgICAgICB9LA0KDQogICAgICAgIHsNCiAgICAgICAgICBsZW5nZW5kVHlwZU5hbWU6ICLkvY7nrYnnuqfpgZPot68iLA0KICAgICAgICAgIGxlbmdlbmRUeXBlVmFsdWU6ICI2IiwNCiAgICAgICAgICBmaWx0ZXJQcm9wZXJ0eTogImxheWVyIiwNCiAgICAgICAgICBzdHJva2U6ICIjOTk5OTAwIiwNCiAgICAgICAgICBzdHJva2VXaWR0aDogIjEuOCIsDQogICAgICAgICAgZW5hYmxlU2VsZWN0OiB0cnVlDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsZW5nZW5kVHlwZU5hbWU6ICLljJ3pgZMiLA0KICAgICAgICAgIGxlbmdlbmRUeXBlVmFsdWU6ICI3IiwNCiAgICAgICAgICBmaWx0ZXJQcm9wZXJ0eTogImxheWVyIiwNCiAgICAgICAgICBzdHJva2U6ICIjMDBGRkZGIiwNCiAgICAgICAgICBzdHJva2VXaWR0aDogIjEuOCIsDQogICAgICAgICAgZW5hYmxlU2VsZWN0OiB0cnVlDQogICAgICAgIH0sDQoNCiAgICAgICAgew0KICAgICAgICAgIGxlbmdlbmRUeXBlTmFtZTogIjAw6YGT6Lev57qi57q/IiwNCiAgICAgICAgICBsZW5nZW5kVHlwZVZhbHVlOiAiOCIsDQogICAgICAgICAgZmlsdGVyUHJvcGVydHk6ICJsYXllciIsDQogICAgICAgICAgc3Ryb2tlOiAiI2JiYmJiYiIsDQogICAgICAgICAgc3Ryb2tlV2lkdGg6ICIxLjYiLA0KICAgICAgICAgIGVuYWJsZVNlbGVjdDogZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxlbmdlbmRUeXBlTmFtZTogIjAw6KeE5YiS6L6555WMIiwNCiAgICAgICAgICBsZW5nZW5kVHlwZVZhbHVlOiAiOSIsDQogICAgICAgICAgZmlsdGVyUHJvcGVydHk6ICJsYXllciIsDQogICAgICAgICAgc3Ryb2tlOiAiI0ZGMDAwMCIsDQogICAgICAgICAgc3Ryb2tlV2lkdGg6ICIxLjgiLA0KICAgICAgICAgIGRhc2hPZmZzZXQ6ICIxMCIsDQogICAgICAgICAgZGFzaGFycmF5OiAiMTAgMTUiLA0KICAgICAgICAgIGVuYWJsZVNlbGVjdDogZmFsc2UNCg0KICAgICAgICB9LA0KDQogICAgICBdLA0KICAgICAgcm9hZFR5cGVEaXNwYWx5TGVuZ2VuZExpc3Q6IFtdLA0KDQogICAgICBidWlsZFN0YXR1c0xlbmdlbmRMaXN0OiBbDQogICAgICAgIHsNCiAgICAgICAgICBsZW5nZW5kVHlwZU5hbWU6ICLlu7rmiJDkvb/nlKgiLA0KICAgICAgICAgIGxlbmdlbmRUeXBlVmFsdWU6ICIxIiwNCiAgICAgICAgICBmaWx0ZXJQcm9wZXJ0eTogInN0YXR1cyIsDQogICAgICAgICAgc3Ryb2tlOiAiI2IxZGIxNiIsDQogICAgICAgICAgc3Ryb2tlV2lkdGg6ICIzIiwNCiAgICAgICAgICBlbmFibGVTZWxlY3Q6IHRydWUNCg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGVuZ2VuZFR5cGVOYW1lOiAi5pa95bel5bu66K6+5LitIiwNCiAgICAgICAgICBsZW5nZW5kVHlwZVZhbHVlOiAiMiIsDQogICAgICAgICAgZmlsdGVyUHJvcGVydHk6ICJzdGF0dXMiLA0KICAgICAgICAgIHN0cm9rZTogIiNlYmNjMGMiLA0KICAgICAgICAgIHN0cm9rZVdpZHRoOiAiNCIsDQogICAgICAgICAgZW5hYmxlU2VsZWN0OiB0cnVlDQogICAgICAgIH0sDQoNCiAgICAgICAgew0KICAgICAgICAgIGxlbmdlbmRUeXBlTmFtZTogIuinhOWIkumBk+i3ryIsDQogICAgICAgICAgbGVuZ2VuZFR5cGVWYWx1ZTogIjMiLA0KICAgICAgICAgIGZpbHRlclByb3BlcnR5OiAic3RhdHVzIiwNCiAgICAgICAgICBzdHJva2U6ICIjZWI3MzIzIiwNCiAgICAgICAgICBzdHJva2VXaWR0aDogIjUiLA0KICAgICAgICAgIGVuYWJsZVNlbGVjdDogdHJ1ZQ0KICAgICAgICB9XSwNCg0KDQogICAgICBsYXllclN0eWxlU2xkOiAiIg0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQoNCiAgICAvL+WIneWni+WMluiPnOWNlQ0KICAgIHRoaXMubWVudUlkID0gZ2V0VXJsS2V5KCdtZW51SWQnKTsNCiAgICAvL+afpeivoue7hOS7tuS/oeaBrw0KICAgIHRoaXMuaW5pdENvbXBvbmVudEluZm8oKTsNCiAgICAvL+WIneWni+WbvuS+i+WxleekuuaVsOaNrg0KICAgIHRoaXMuaW5pdERpc3BsYXlMZW5nZW5kRGF0YSgpDQogICAgLy/nu4Too4Xlm77lsYLmoLflvI/mlbDmja4NCiAgICB0aGlzLmluaXRTdHlsZSgpOw0KICAgIC8v5Yid5aeL5YyW5Zu+5bGCDQogICAgdGhpcy5pbml0TWFwKCk7DQogICAgdGhpcy5zaG93UG9wID0gZmFsc2UNCiAgICB0aGlzLmhpZFBvcCA9IHRydWUNCiAgICAvL+WKoOi9vemBk+i3r+aVtOS9k+S/oeaBrw0KICAgIC8vdGhpcy5nZXRSb2FkSW5mbyh0aGlzKQ0KICAgIHZhciBwb3BTdW1tcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wLXN1bW1yeScpDQogICAgcG9wU3VtbXJ5LmFkZEV2ZW50TGlzdGVuZXIoIndlYmtpdEFuaW1hdGlvbkVuZCIsIGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICghc2hvd1N1bW1yeUZsYWcpIHsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcC1zdW1tcnnigJRjb2xsYXBzZScpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgfQ0KICAgIH0pDQoNCiAgICBwb3BTdW1tcnkuYWRkRXZlbnRMaXN0ZW5lcigiYW5pbWF0aW9uZW5kIiwgZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKCFzaG93U3VtbXJ5RmxhZykgew0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wLXN1bW1yeeKAlGNvbGxhcHNlJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICB9DQogICAgfSkNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdvbC1wb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogIH0sDQoNCg0KDQogIG1ldGhvZHM6IHsNCiAgICBpbml0TGVnZW5kSW5mbyAobGVnZW5kTGlzdCwgX3RoaXMpIHsNCiAgICAgIGlmIChsZWdlbmRMaXN0ICYmIGxlZ2VuZExpc3QubGVuZ3RoID4gMCkgew0KICAgICAgICAvL+iuvue9ruagkeiKgueCueaVsOaNrg0KICAgICAgICBsZXQgdHJlZURhdGFfID0gbGVnZW5kTGlzdFswXTsNCiAgICAgICAgX3RoaXMudHJlZURhdGEgPSB0cmVlRGF0YV87DQogICAgICAgIC8v6K6+572u6aG257qn6I+c5Y2V6YCJ5LitDQogICAgICAgIGxldCBjaGVja2VkSWRzXyA9IFtdOw0KICAgICAgICBsZXQgZXhwYW5kSWRzID0gW107DQogICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdHJlZURhdGFfLmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgbGV0IGl0ZW0gPSB0cmVlRGF0YV9ba107DQogICAgICAgICAgaWYgKGl0ZW0ucGFyZW50SWQgPT0gbnVsbCkgew0KICAgICAgICAgICAgY2hlY2tlZElkc18ucHVzaChpdGVtLmlkKTsNCiAgICAgICAgICAgIGxldCBjaGlsZHJlbl8gPSBpdGVtLmNoaWxkcmVuOw0KICAgICAgICAgICAgaWYgKGNoaWxkcmVuXyAhPSBudWxsICYmIGNoaWxkcmVuXy5sZW5ndGggIT0gMCkgew0KICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkcmVuXy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgIGV4cGFuZElkcy5wdXNoKGNoaWxkcmVuX1tqXS5pZCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGV4cGFuZElkcy5wdXNoKGl0ZW0uaWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvL+m7mOiupOWxleWxleW8gOS6jOe6p+iPnOWNlQ0KICAgICAgICBfdGhpcy5kZWZhdWx0RXhwYW5kSWRzID0gZXhwYW5kSWRzOw0KICAgICAgICBfdGhpcy5kZWZhdWx0Q2hlY2tlZElkcyA9IGNoZWNrZWRJZHNfOw0KICAgICAgfQ0KDQogICAgfSwNCg0KICAgIGluaXRDb21wb25lbnRJbmZvICgpIHsNCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICBmaW5kQ29tcG9uZW50SW5mbyh0aGlzLm1lbnVJZCwgbnVsbCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIC8v5Zu+5L6LDQogICAgICAgIGxldCBsZWdlbmRDb25maWdEYXRhID0gcmVzcG9uc2UuZGF0YS5kZWNMZWdlbmRDb25maWdMaXN0Ow0KICAgICAgICBpZiAobGVnZW5kQ29uZmlnRGF0YSAmJiBsZWdlbmRDb25maWdEYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAvL+iuvue9ruagkeiKgueCueaVsOaNrg0KICAgICAgICAgIGxldCB0cmVlRGF0YV8gPSBsZWdlbmRDb25maWdEYXRhWzBdOw0KICAgICAgICAgIGxldCB0cmVlRGF0YTJfID0gbGVnZW5kQ29uZmlnRGF0YVsxXTsNCiAgICAgICAgICAvL+makOiXj+iuvue9rueahOiKgueCuQ0KICAgICAgICAgIF90aGlzLnRyZWVEYXRhID0gdHJlZURhdGFfOw0KICAgICAgICAgIF90aGlzLnRyZWVEYXRhMiA9IHRyZWVEYXRhMl87DQogICAgICAgICAgZGVidWdnZXINCiAgICAgICAgICAvL+iuvue9rumhtue6p+iPnOWNlemAieS4rQ0KICAgICAgICAgIGxldCBleHBhbmRJZHMgPSBbXTsNCiAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRyZWVEYXRhXy5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgbGV0IGl0ZW0gPSB0cmVlRGF0YV9ba107DQogICAgICAgICAgICBpZiAoaXRlbS5wYXJlbnRJZCA9PSBudWxsKSB7DQogICAgICAgICAgICAgIGxldCBjaGlsZHJlbl8gPSBpdGVtLmNoaWxkcmVuOw0KICAgICAgICAgICAgICBpZiAoY2hpbGRyZW5fICE9IG51bGwgJiYgY2hpbGRyZW5fLmxlbmd0aCAhPSAwKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjaGlsZHJlbl8ubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgIGV4cGFuZElkcy5wdXNoKGNoaWxkcmVuX1tqXS5pZCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGV4cGFuZElkcy5wdXNoKGl0ZW0uaWQpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIC8v6buY6K6k5bGV5bGV5byA5LqM57qn6I+c5Y2VDQogICAgICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kSWRzID0gZXhwYW5kSWRzOw0KICAgICAgICAgIHRoaXMuZGVmYXVsdENoZWNrZWRJZHMgPSBfdGhpcy5nZXRUcmVlY2hlY2tlZElkKHRyZWVEYXRhXyk7DQogICAgICAgIH0NCiAgICAgICAgLy/ooajmoLwNCiAgICAgICAgbGV0IHRhYmxlTGlzdCA9IHJlc3BvbnNlLmRhdGEudGFibGVMaXN0Ow0KICAgICAgICBfdGhpcy50YWJsZUFycmF5ID0gdGFibGVMaXN0Ow0KDQoNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/pgJLlvZLojrfoioLngrnkv6Hmga8NCiAgICBnZXRDaGVja2VkSWRzUmVjdXIgKGl0ZW0sIGlkc18pIHsNCiAgICAgIGlmIChpdGVtLmlkICYmIGl0ZW0uY2hlY2tTdGF0dXMgPT0gJ1knKSB7DQogICAgICAgIGlkc18gPSAoaWRzXyA9PSBudWxsID8gW10gOiBpZHNfKTsNCiAgICAgICAgaWRzXy5wdXNoKGl0ZW0uaWQpOw0KICAgICAgfQ0KICAgICAgLy/lpoLmnpzlrZDoioLngrnpgInkuK3vvIzpnIDopoHlsIbniLboioLljYrpgInkuK3nirbmgIHoioLngrnliqDlhaUNCiAgICAgIGxldCBjdXJyZW50TGVuID0gaWRzXy5sZW5ndGg7DQogICAgICBpZiAoaXRlbS5jaGlsZHJlbiAhPSBudWxsKSB7DQogICAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICB0aGlzLmdldENoZWNrZWRJZHNSZWN1cihpdGVtLCBpZHNfKQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAoY3VycmVudExlbiA8IGlkc18ubGVuZ3RoICYmIGlkc18uaW5kZXhPZihpdGVtLmlkKSA9PSAtMSkgew0KICAgICAgICAgIGlkc18ucHVzaChpdGVtLmlkKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/ojrflj5bmoJHmiYDmnInnmoToioLngrnkv6Hmga8NCiAgICBnZXRUcmVlY2hlY2tlZElkICh0cmVlRGF0YSkgew0KICAgICAgbGV0IGlkcyA9IFtdOw0KICAgICAgdHJlZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgdGhpcy5nZXRDaGVja2VkSWRzUmVjdXIoaXRlbSwgaWRzKTsNCiAgICAgIH0pDQogICAgICByZXR1cm4gaWRzOw0KICAgIH0sDQogICAgaW5pdERpc3BsYXlMZW5nZW5kRGF0YSAoKSB7DQogICAgICB0aGlzLnJvYWRUeXBlRGlzcGFseUxlbmdlbmRMaXN0ID0gdGhpcy5yb2FkVHlwZUxlbmdlbmRMaXN0LmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5lbmFibGVTZWxlY3QgPT0gdHJ1ZTsNCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIC8v5Yid5aeL5YyW5qC35byPDQogICAgaW5pdFN0eWxlICgpIHsNCiAgICAgIHZhciBpbml0U2xkID0gJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IkdCSyI/PjxTdHlsZWRMYXllckRlc2NyaXB0b3IgdmVyc2lvbj0iMS4wLjAiIHhtbG5zPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3NsZCIgeG1sbnM6b2djPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zOmdtbD0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvc2xkLzEuMC4wL1N0eWxlZExheWVyRGVzY3JpcHRvci54c2QiPjxOYW1lZExheWVyPjxOYW1lPicgKyBsYXllck5hbWUgKyAnPC9OYW1lPjxVc2VyU3R5bGU+PE5hbWU+cm9hZFR5cGU8L05hbWU+PFRpdGxlPnJvYWRUeXBlPC9UaXRsZT48QWJzdHJhY3Q+cm9hZFR5cGU8L0Fic3RyYWN0PjxGZWF0dXJlVHlwZVN0eWxlPic7DQogICAgICB0aGlzLnJvYWRUeXBlTGVuZ2VuZExpc3QuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICB2YXIgdHlwZU5hbWUgPSBpdGVtLmxlbmdlbmRUeXBlTmFtZTsNCiAgICAgICAgdmFyIGZpbHRlclByb3BlcnR5ID0gaXRlbS5maWx0ZXJQcm9wZXJ0eTsNCiAgICAgICAgdmFyIHN0cm9rZSA9IGl0ZW0uc3Ryb2tlOw0KICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSBpdGVtLnN0cm9rZVdpZHRoOw0KICAgICAgICB2YXIgZGFzaE9mZnNldCA9IGl0ZW0uZGFzaE9mZnNldDsNCiAgICAgICAgdmFyIGRhc2hhcnJheSA9IGl0ZW0uZGFzaGFycmF5Ow0KICAgICAgICBpbml0U2xkID0gaW5pdFNsZCArICc8UnVsZT48VGl0bGU+JyArIHR5cGVOYW1lICsgJzwvVGl0bGU+PG9nYzpGaWx0ZXI+PG9nYzpQcm9wZXJ0eUlzRXF1YWxUbz48b2djOlByb3BlcnR5TmFtZT4nICsgZmlsdGVyUHJvcGVydHkgKyAnPC9vZ2M6UHJvcGVydHlOYW1lPjxvZ2M6TGl0ZXJhbD4nICsgdHlwZU5hbWUgKyAnPC9vZ2M6TGl0ZXJhbD48L29nYzpQcm9wZXJ0eUlzRXF1YWxUbz48L29nYzpGaWx0ZXI+JyArICc8UG9seWdvblN5bWJvbGl6ZXI+PFN0cm9rZT48Q3NzUGFyYW1ldGVyIG5hbWU9InN0cm9rZSI+JyArIHN0cm9rZSArICc8L0Nzc1BhcmFtZXRlcj48Q3NzUGFyYW1ldGVyIG5hbWU9InN0cm9rZS13aWR0aCI+JyArIHN0cm9rZVdpZHRoICsgJzwvQ3NzUGFyYW1ldGVyPic7DQogICAgICAgIGlmIChkYXNoT2Zmc2V0KSB7DQogICAgICAgICAgaW5pdFNsZCA9IGluaXRTbGQgKyAnPENzc1BhcmFtZXRlciBuYW1lPSJzdHJva2UtZGFzaG9mZnNldCI+JyArIGRhc2hPZmZzZXQgKyAnPC9Dc3NQYXJhbWV0ZXI+Jw0KICAgICAgICB9DQogICAgICAgIGlmIChkYXNoYXJyYXkpIHsNCiAgICAgICAgICBpbml0U2xkID0gaW5pdFNsZCArICc8Q3NzUGFyYW1ldGVyIG5hbWU9InN0cm9rZS1kYXNoYXJyYXkiPicgKyBkYXNoYXJyYXkgKyAnPC9Dc3NQYXJhbWV0ZXI+Jw0KICAgICAgICB9DQogICAgICAgIGluaXRTbGQgPSBpbml0U2xkICsgJzwvU3Ryb2tlPjwvUG9seWdvblN5bWJvbGl6ZXI+PC9SdWxlPicNCg0KICAgICAgfSk7DQogICAgICBpbml0U2xkID0gaW5pdFNsZCArICc8L0ZlYXR1cmVUeXBlU3R5bGU+PC9Vc2VyU3R5bGU+PC9OYW1lZExheWVyPjwvU3R5bGVkTGF5ZXJEZXNjcmlwdG9yPic7DQogICAgICB0aGlzLmxheWVyU3R5bGVTbGQgPSBpbml0U2xkOw0KICAgIH0sDQoNCiAgICAvLyDliJ3lp4vljJblnLDlm74NCiAgICBpbml0TWFwICgpIHsNCiAgICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IHRoaXMuJHJlZnMubWFwDQogICAgICAvL+mAmui/h3dtc+WKoOi9veaVsOaNrg0KICAgICAgY29uc3Qgd21zU291cmNlID0gbmV3IFRpbGVXTVMoew0KICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy93bXMnLA0KICAgICAgICBwcm9qZWN0aW9uOiAnRVBTRzo0NTQ4JywNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgJ0xBWUVSUyc6IGxheWVyTmFtZSwNCiAgICAgICAgICAnVkVSU0lPTic6ICcxLjEuMCcsDQogICAgICAgICAgJ1NUWUxFUyc6IHVuZGVmaW5lZCwNCiAgICAgICAgICAnU0xEX0JPRFknOiB0aGlzLmxheWVyU3R5bGVTbGQNCiAgICAgICAgfSwNCiAgICAgICAgc2VydmVyVHlwZTogJ2dlb3NlcnZlcicNCiAgICAgIH0pOw0KICAgICAgLy/oh6rlrprkuYnlm77lsYINCiAgICAgIHZlY3RvckxheWVyID0gbmV3IFRpbGVMYXllcih7DQogICAgICAgIHNvdXJjZTogd21zU291cmNlDQogICAgICB9KTsNCg0KICAgICAgLy/lsIblm77lsYLliqDlhaVNYXANCiAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoew0KICAgICAgICBsYXllcnM6IFtnYW9kZU1hcExheWVyLCB2ZWN0b3JMYXllcl0sDQogICAgICAgIHRhcmdldDogbWFwQ29udGFpbmVyLA0KICAgICAgICB2aWV3OiB2aWV3DQogICAgICB9KTsNCg0KICAgICAgLy8g5re75Yqg6byg5qCH54K55Ye75LqL5Lu2DQogICAgICBtYXAub24oJ2NsaWNrJywgdGhpcy5tYXBDbGljayk7DQogICAgICBtYXAub24oJ21vdmVlbmQnLCB0aGlzLm1hcE1vdmVlbmQpOw0KICAgICAgLy8g5L+d5a2Y5Zyw5Zu+DQogICAgICB0aGlzLm1hcERhdGEgPSBtYXANCiAgICB9LA0KICAgIGNyZWF0ZU1hcmtTdHlsZSAoZmVhdHVyZSwgZm9udEFuZ2xlKSB7DQogICAgICAvL+i/lOWbnuS4gOS4quagt+W8jw0KICAgICAgcmV0dXJuIG5ldyBPbFN0eWxlU3R5bGUoew0KICAgICAgICAvL+aWh+acrOagt+W8jw0KICAgICAgICB0ZXh0OiBuZXcgVGV4dCh7DQogICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJywNCiAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnLA0KICAgICAgICAgIGZvbnQ6ICdub3JtYWwgMTJweCDlvq7ova/pm4Xpu5EnLA0KICAgICAgICAgIHRleHQ6IGZlYXR1cmUuZ2V0KCduYW1lJyksDQogICAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgICAgY29sb3I6ICcjYmJiYmJiJw0KICAgICAgICAgIH0pLA0KICAgICAgICAgIHJvdGF0aW9uOiBmb250QW5nbGUgKiBNYXRoLlBJIC8gMTgwLA0KICAgICAgICAgIHBhZGRpbmc6IFsyLCA1LCAyLCA1XSwNCiAgICAgICAgfSksDQogICAgICAgIC8vIOiuvue9ruWxgue6pw0KICAgICAgICB6SW5kZXg6IDE5OTk5OTk5OTkNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBjcmVhdGVNYXJrRmVhdHVyZSAoZmVhdHVyZVBhcmFtKSB7DQogICAgICAvLyDliJ3lp4vljJbmoIfnrb7opoHntKANCiAgICAgIGxldCBjb3JkaW5hdGUgPSB0cmFuc2Zvcm0oDQogICAgICAgIGZlYXR1cmVQYXJhbS5nZW9tZXRyeS5jb29yZGluYXRlcywNCiAgICAgICAgIkVQU0c6NDU0OCIsDQogICAgICAgICJFUFNHOjM4NTciDQogICAgICApDQogICAgICBsZXQgZm9udEFuZ2xlID0gZmVhdHVyZVBhcmFtLnByb3BlcnRpZXMuZm9udF9hbmdsZTsNCiAgICAgIGxldCBmZWF0dXJlID0gbmV3IEZlYXR1cmUoew0KICAgICAgICBnZW9tZXRyeTogbmV3IE9sR2VvbVBvaW50KGNvcmRpbmF0ZSksDQogICAgICAgIG5hbWU6IGZlYXR1cmVQYXJhbS5wcm9wZXJ0aWVzLm5hbWUsDQogICAgICAgIC8vIGltZzogcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9tYXJrLnBuZycpLA0KICAgICAgfSkNCiAgICAgIGZlYXR1cmUuc2V0SWQoZmVhdHVyZVBhcmFtLmlkKQ0KICAgICAgZmVhdHVyZS5zZXRTdHlsZSh0aGlzLmNyZWF0ZU1hcmtTdHlsZShmZWF0dXJlLCBmb250QW5nbGUpKQ0KICAgICAgbGV0IHNvdXJjZSA9IG5ldyBWZWN0b3JTb3VyY2Uoe30pDQogICAgICBzb3VyY2UuYWRkRmVhdHVyZShmZWF0dXJlKQ0KICAgICAgbGV0IGxheWVyID0gbmV3IFZlY3RvckxheWVyKHsNCiAgICAgICAgc291cmNlOiBzb3VyY2UNCiAgICAgIH0pDQogICAgICB0aGlzLm1hcmtWZWN0b3JBcnJheS5wdXNoKGxheWVyKTsNCiAgICAgIHRoaXMubWFwRGF0YS5hZGRMYXllcihsYXllcik7DQogICAgfSwNCg0KICAgIGFkZFJvYWRNYXJrICh2aWV3T2JqKSB7DQogICAgICB0cnkgew0KICAgICAgICBpZiAodmlld09iai5tYXJrRGF0YUNhY2hlICE9IG51bGwpIHsNCiAgICAgICAgICBsZXQgZmVhdHVyZUFycmF5ID0gdmlld09iai5tYXJrRGF0YUNhY2hlLmZlYXR1cmVzOw0KICAgICAgICAgIGZlYXR1cmVBcnJheS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgdmlld09iai5jcmVhdGVNYXJrRmVhdHVyZShpdGVtKTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9HSVNfQkFTRV9VUkwgKyAnL1Rlc3Qvb3dzP3NlcnZpY2U9V0ZTJnZlcnNpb249MS4wLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyB0aGlzLm1hcmtMYXllck5hbWUgKyAnJm1heEZlYXR1cmVzPTUwMDAwMDAwMCZvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24lMkZqc29uJzsNCiAgICAgICAgYXhpb3MuZ2V0KHVybCwgbnVsbCkudGhlbihmdW5jdGlvbiAocmVzKSB7DQogICAgICAgICAgbGV0IG1hcmtSZXNwRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICAgIHZpZXdPYmoubWFya0RhdGFDYWNoZSA9IHJlcy5kYXRhOw0KICAgICAgICAgIGlmIChtYXJrUmVzcERhdGEpIHsNCiAgICAgICAgICAgIGxldCBmZWF0dXJlQXJyYXkgPSBtYXJrUmVzcERhdGEuZmVhdHVyZXM7DQogICAgICAgICAgICBmZWF0dXJlQXJyYXkuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgdmlld09iai5jcmVhdGVNYXJrRmVhdHVyZShpdGVtKTsNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICB9DQoNCiAgICAgICAgfSk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g5by55Ye65qGGDQogICAgYWRkUG9wdXAgKGNvb3JkaW5hdGUsIGZlYXR1cmUpIHsNCiAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKQ0KICAgICAgLy8g6I635Y+W5by55Ye65bGCRE9NDQogICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykNCiAgICAgIGxldCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwLWNvbnRlbnQnKQ0KICAgICAgaWYgKHRoaXMub3ZlcmxheSkgew0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5Yib5bu6T3ZlcmxheeW8ueWHuuWxgue7keWumkRPTQ0KICAgICAgICB0aGlzLm92ZXJsYXkgPSBuZXcgT3ZlcmxheSh7DQogICAgICAgICAgZWxlbWVudDogY29udGFpbmVyLA0KICAgICAgICAgIGF1dG9QYW46IHsNCiAgICAgICAgICAgIGFuaW1hdGlvbjogew0KICAgICAgICAgICAgICBkdXJhdGlvbjogMjUwDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAvLyDmt7vliqDliLBtYXANCiAgICAgICAgdGhpcy5tYXBEYXRhLmFkZE92ZXJsYXkodGhpcy5vdmVybGF5KQ0KICAgICAgfQ0KICAgICAgLy8g5by55Ye65bGC5YaF5a65DQogICAgICBsZXQgZmVhdHVyZVZhbCA9IGZlYXR1cmUucHJvcGVydGllczsNCiAgICAgIGxldCBsYXllciA9IGZlYXR1cmVWYWwubGF5ZXIgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbC5sYXllcjsNCiAgICAgIGxldCBoYW5kbGUgPSBmZWF0dXJlVmFsLmhhbmRsZSA9PSBudWxsID8gIiIgOiBmZWF0dXJlVmFsLmhhbmRsZTsNCiAgICAgIGxldCBsZW5ndGggPSBmZWF0dXJlVmFsLmxlbmd0aCA9PSBudWxsID8gIiIgOiBNYXRoLmZsb29yKGZlYXR1cmVWYWwubGVuZ3RoKSArICIgbSI7DQogICAgICBsZXQgY2FwYWNpdHkgPSBmZWF0dXJlVmFsLmNhcGFjaXR5ID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWwuY2FwYWNpdHkgKyAnIHBjdS9oJzsNCiAgICAgIGxldCBkaXIgPSBmZWF0dXJlVmFsLmRpciA9PSAxID8gIuWNleWQkSIgOiBmZWF0dXJlVmFsLmRpciA9PSAtMSA/ICLlj43lkJHljZXlkJEiIDogZmVhdHVyZVZhbC5kaXIgPT0gMCA/ICLlj4zlkJEiIDogJyc7DQogICAgICBsZXQgc3BlZWQgPSBmZWF0dXJlVmFsLnNwZWVkID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWwuc3BlZWQgKyAnIG0vaCc7DQoNCg0KICAgICAgbGV0IHBvcEh0bWwgPSBgDQogICAgICAgICAgICA8ZGl2IHN0eWxlPSdjb2xvcjojMTIxOTI0O2ZvbnQtd2VpZ2h0OiBib2xkO3dpZHRoOjEwMCU7ei1pbmRleDo0O2hlaWdodDo1MHB4O3BhZGRpbmc6NnB4O2ZvbnQtc2l6ZTogMTVweCc+YCsgbGF5ZXIgKyBgPC9kaXY+DQogIA0KICAgICAgICAgICAgPGRpdiBzdHlsZT0nZm9udC1zaXplOiAxMHB4O3dpZHRoOjEwMCUnIGlkPSdpbmZvMSc+DQpgDQogICAgICBpZiAoaGFuZGxlICE9ICcnKSB7DQogICAgICAgIHBvcEh0bWwgPSBwb3BIdG1sICsgYA0KICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI4cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPumBk+i3r0lEOjwvYT4NCiAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGhhbmRsZSArIGA8L2E+DQogICAgICAgIDwvZGl2PiBgDQogICAgICB9DQogICAgICBpZiAobGF5ZXIgIT0gJycpIHsNCiAgICAgICAgcG9wSHRtbCA9IHBvcEh0bWwgKyBgDQogICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjhweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+6YGT6Lev562J57qnOjwvYT4NCiAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGxheWVyICsgYDwvYT4NCiAgICAgICAgPC9kaXY+IGANCiAgICAgIH0NCiAgICAgIGlmIChsZW5ndGggIT0gJycpIHsNCiAgICAgICAgcG9wSHRtbCA9IHBvcEh0bWwgKyBgDQogICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjhweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+6YGT6Lev6ZW/5bqmOjwvYT4NCiAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGxlbmd0aCArIGA8L2E+DQogICAgICAgIDwvZGl2PiBgDQogICAgICB9DQogICAgICBpZiAoZGlyICE9ICcnKSB7DQogICAgICAgIHBvcEh0bWwgPSBwb3BIdG1sICsgYA0KICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI4cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPuaWueWQkTo8L2E+DQogICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBkaXIgKyBgPC9hPg0KICAgICAgICA8L2Rpdj4gYA0KICAgICAgfQ0KICAgICAgaWYgKGNhcGFjaXR5ICE9ICcnKSB7DQogICAgICAgIHBvcEh0bWwgPSBwb3BIdG1sICsgYA0KICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI4cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPumAmuihjOiDveWKmzo8L2E+DQogICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBjYXBhY2l0eSArIGA8L2E+DQogICAgICAgIDwvZGl2PiBgDQogICAgICB9DQogICAgICBpZiAoc3BlZWQgIT0gJycpIHsNCiAgICAgICAgcG9wSHRtbCA9IHBvcEh0bWwgKyBgDQogICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjhweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+6K6+6K6h6L2m6YCfOjwvYT4NCiAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIHNwZWVkICsgYDwvYT4NCiAgICAgICAgPC9kaXY+IGANCiAgICAgIH0NCg0KICAgICAgcG9wSHRtbCA9IHBvcEh0bWwgKyBgDQogICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjhweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+5bu66K6+5L+h5oGvOjwvYT4NCiAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPuinhOWIkumBk+i3rzwvYT4NCiAgICAgICAgPC9kaXY+IDwvZGl2ID4gYA0KICAgICAgY29udGVudC5pbm5lckhUTUwgPSBwb3BIdG1sOw0KICAgICAgLy8g6K6+572u5by55Ye65bGC5L2N572u5Y2z5Y+v5Ye6546wDQogICAgICB0aGlzLm92ZXJsYXkuc2V0UG9zaXRpb24oY29vcmRpbmF0ZSkNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29sLXBvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfSwNCg0KICAgIC8vIOa4hemZpOW8ueWHuuahhg0KICAgIHJlbW92ZVBvcHVwICgpIHsNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgICAgLy8g6K6+572u5L2N572udW5kZWZpbmVk5Y+v6L6+5Yiw6ZqQ6JeP5riF6Zmk5by55Ye65qGGDQogICAgICAgIHRoaXMub3ZlcmxheS5zZXRQb3NpdGlvbih1bmRlZmluZWQpDQogICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd1N1bW1yeVBvcCAoKSB7DQogICAgICB0aGlzLnNob3dQb3AgPSBmYWxzZQ0KICAgICAgdGhpcy5oaWRQb3AgPSB0cnVlDQogICAgfSwNCg0KICAgIGhpZGVTdW1tcnlQb3AgKCkgew0KICAgICAgdGhpcy5zaG93UG9wID0gdHJ1ZQ0KICAgICAgdGhpcy5oaWRQb3AgPSBmYWxzZQ0KICAgIH0sDQogICAgY2hhbmdlU3R5bGUgKGxlbmdlbmRMaXN0LCBjaGVja2VkTGlzdCkgew0KICAgICAgaWYgKGNoZWNrZWRMaXN0ID09IG51bGwgfHwgY2hlY2tlZExpc3QubGVuZ3RoID09IDApIHsNCiAgICAgICAgdmVjdG9yTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHZlY3RvckxheWVyLnNldFZpc2libGUodHJ1ZSk7DQogICAgICB2YXIgY2hhbmdlU3R5bGUgPSBmYWxzZTsNCiAgICAgIHZhciBpbml0U2xkID0gJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IkdCSyI/PjxTdHlsZWRMYXllckRlc2NyaXB0b3IgdmVyc2lvbj0iMS4wLjAiIHhtbG5zPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3NsZCIgeG1sbnM6b2djPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiIHhtbG5zOmdtbD0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwiIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9zbGQgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvc2xkLzEuMC4wL1N0eWxlZExheWVyRGVzY3JpcHRvci54c2QiPjxOYW1lZExheWVyPjxOYW1lPicgKyBsYXllck5hbWUgKyAnPC9OYW1lPjxVc2VyU3R5bGU+PE5hbWU+cm9hZFR5cGU8L05hbWU+PFRpdGxlPnJvYWRUeXBlPC9UaXRsZT48QWJzdHJhY3Q+cm9hZFR5cGU8L0Fic3RyYWN0PjxGZWF0dXJlVHlwZVN0eWxlPic7DQogICAgICBsZW5nZW5kTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgIHZhciB0eXBlTmFtZSA9IGl0ZW0ubGVuZ2VuZFR5cGVOYW1lOw0KICAgICAgICB2YXIgbGVuZ2VuZFR5cGVWYWx1ZSA9IGl0ZW0ubGVuZ2VuZFR5cGVWYWx1ZTsNCiAgICAgICAgdmFyIGZpbHRlclByb3BlcnR5ID0gaXRlbS5maWx0ZXJQcm9wZXJ0eTsNCiAgICAgICAgdmFyIHN0cm9rZSA9IGl0ZW0uc3Ryb2tlOw0KICAgICAgICB2YXIgc3Ryb2tlV2lkdGggPSBpdGVtLnN0cm9rZVdpZHRoOw0KICAgICAgICB2YXIgZGFzaE9mZnNldCA9IGl0ZW0uZGFzaE9mZnNldDsNCiAgICAgICAgdmFyIGRhc2hhcnJheSA9IGl0ZW0uZGFzaGFycmF5Ow0KICAgICAgICAvLw0KICAgICAgICB2YXIgaW5kZXggPSBjaGVja2VkTGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7DQogICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGxlbmdlbmRUeXBlVmFsdWU7DQogICAgICAgIH0pDQogICAgICAgIHZhciBlbmFibGVTZWxlY3QgPSBpdGVtLmVuYWJsZVNlbGVjdA0KICAgICAgICBpZiAoIWVuYWJsZVNlbGVjdCB8fCBpbmRleCAhPSAtMSkgew0KICAgICAgICAgIGNoYW5nZVN0eWxlID0gdHJ1ZTsNCiAgICAgICAgICBpbml0U2xkID0gaW5pdFNsZCArICc8UnVsZT48VGl0bGU+JyArIHR5cGVOYW1lICsgJzwvVGl0bGU+PG9nYzpGaWx0ZXI+PG9nYzpQcm9wZXJ0eUlzRXF1YWxUbz48b2djOlByb3BlcnR5TmFtZT4nICsgZmlsdGVyUHJvcGVydHkgKyAnPC9vZ2M6UHJvcGVydHlOYW1lPjxvZ2M6TGl0ZXJhbD4nICsgdHlwZU5hbWUgKyAnPC9vZ2M6TGl0ZXJhbD48L29nYzpQcm9wZXJ0eUlzRXF1YWxUbz48L29nYzpGaWx0ZXI+JyArICc8UG9seWdvblN5bWJvbGl6ZXI+PFN0cm9rZT48Q3NzUGFyYW1ldGVyIG5hbWU9InN0cm9rZSI+JyArIHN0cm9rZSArICc8L0Nzc1BhcmFtZXRlcj48Q3NzUGFyYW1ldGVyIG5hbWU9InN0cm9rZS13aWR0aCI+JyArIHN0cm9rZVdpZHRoICsgJzwvQ3NzUGFyYW1ldGVyPic7DQogICAgICAgICAgaWYgKGRhc2hPZmZzZXQpIHsNCiAgICAgICAgICAgIGluaXRTbGQgPSBpbml0U2xkICsgJzxDc3NQYXJhbWV0ZXIgbmFtZT0ic3Ryb2tlLWRhc2hvZmZzZXQiPicgKyBkYXNoT2Zmc2V0ICsgJzwvQ3NzUGFyYW1ldGVyPicNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGRhc2hhcnJheSkgew0KICAgICAgICAgICAgaW5pdFNsZCA9IGluaXRTbGQgKyAnPENzc1BhcmFtZXRlciBuYW1lPSJzdHJva2UtZGFzaGFycmF5Ij4nICsgZGFzaGFycmF5ICsgJzwvQ3NzUGFyYW1ldGVyPicNCiAgICAgICAgICB9DQogICAgICAgICAgaW5pdFNsZCA9IGluaXRTbGQgKyAnPC9TdHJva2U+PC9Qb2x5Z29uU3ltYm9saXplcj48L1J1bGU+Jw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIGluaXRTbGQgPSBpbml0U2xkICsgJzwvRmVhdHVyZVR5cGVTdHlsZT48L1VzZXJTdHlsZT48L05hbWVkTGF5ZXI+PC9TdHlsZWRMYXllckRlc2NyaXB0b3I+JzsNCiAgICAgIGlmIChjaGFuZ2VTdHlsZSkgew0KICAgICAgICB2ZWN0b3JMYXllci5nZXRTb3VyY2UoKS51cGRhdGVQYXJhbXMoeyAnU1RZTEVTJzogdW5kZWZpbmVkLCAnU0xEX0JPRFknOiBpbml0U2xkIH0pOw0KICAgICAgfQ0KDQogICAgfSwNCg0KDQoNCg0KICAgIC8v6YGT6Lev57G75Z6L5qC35byP5pS55Y+YDQogICAgcm9hZFR5cGVDaGFuZ2UgKCkgew0KICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgdGhpcy5jaGFuZ2VTdHlsZSh0aGlzLnJvYWRUeXBlTGVuZ2VuZExpc3QsIHRoaXMucm9hZFR5cGVSYWRpbyk7DQogICAgfSwNCg0KICAgIC8v5bu66K6+54q25oCB5qC35byPDQogICAgYnVpbGRTdGF0dXNDaGFuZ2UgKCkgew0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgdGhpcy5jaGFuZ2VTdHlsZSh0aGlzLmJ1aWxkU3RhdHVzTGVuZ2VuZExpc3QsIHRoaXMucmFkaW8yKTsNCiAgICB9LA0KDQogICAgc3dpdGNoQ2hhbmdlICgpIHsNCiAgICAgIHZhciBjaGFuZ2VWYWwgPSB0aGlzLnZhbHVlMTsNCiAgICAgIGNoYW5nZVZhbCA/IHRoaXMuYnVpbGRTdGF0dXNDaGFuZ2UoKSA6IHRoaXMucm9hZFR5cGVDaGFuZ2UoKTsNCiAgICB9LA0KDQogICAgLy/liKDpmaTpq5jkuq7lm77lsYINCiAgICBjbGVhckhpZ2hsaWdodCAoKSB7DQogICAgICBsZXQgYXJyID0gdGhpcy5tYXBEYXRhLmdldExheWVycygpLmFycmF5Xw0KICAgICAgbGV0IGhpZ2hsaWdodExheWVyID0ge30NCiAgICAgIGFyci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5nZXQoImlkIikgPT0gImhpZ2hsaWdodExheWVyIikgew0KICAgICAgICAgIGhpZ2hsaWdodExheWVyID0gaXRlbQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgaWYgKGhpZ2hsaWdodExheWVyICYmIGhpZ2hsaWdodExheWVyLmNsYXNzTmFtZV8pIHsNCiAgICAgICAgdGhpcy5tYXBEYXRhLnJlbW92ZUxheWVyKGhpZ2hsaWdodExheWVyKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvL+aWsOWinumrmOS6ruWbvuWxgg0KICAgIGFkZEhpZ2hMaWdodFN0eWxlIChjbGlja0ZlYXR1cmUsIHRoaXNPYmosIGNsaWNrTGF5ZXIpIHsNCiAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKTsNCiAgICAgIGxldCBmZWF0dXJlT2JqID0gbmV3IEdlb0pTT04oeyBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NycsIGRhdGFQcm9qZWN0aW9uOiAnRVBTRzo0NTQ4JyB9KS5yZWFkRmVhdHVyZXMoY2xpY2tGZWF0dXJlKQ0KICAgICAgbGV0IGhpZ2hMaWdodFN0eWxlID0gbmV3IFN0eWxlKHsNCiAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCINCiAgICAgICAgfSksDQogICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7DQogICAgICAgICAgY29sb3I6ICIjZmZmZjAwIiwNCg0KICAgICAgICAgIHdpZHRoOiA2DQogICAgICAgIH0pLA0KDQogICAgICB9KQ0KICAgICAgZmVhdHVyZU9ialswXS5zZXRTdHlsZShoaWdoTGlnaHRTdHlsZSk7DQogICAgICB0aGlzT2JqLmhpZ2hMaWdodExheWVyID0gbmV3IFZlY3RvckxheWVyKHsNCiAgICAgICAgbmFtZTogImhpZ2hsaWdodExheWVyIiwNCiAgICAgICAgc291cmNlOiBuZXcgVmVjdG9yU291cmNlKHsNCiAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZU9iaiwNCiAgICAgICAgfSksDQogICAgICAgIHN0eWxlOiAoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICBsZXQgY3VycmVudFN0eWxlID0gZmVhdHVyZS5nZXRTb3VyY2UoKS5nZXRSZXNvbHV0aW9uKCkuc3R5bGU7DQogICAgICAgICAgcmV0dXJuIGhpZ2hMaWdodFN0eWxlOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpc09iai5oaWdoTGlnaHRMYXllci5zZXQoImlkIiwgImhpZ2hsaWdodExheWVyIikNCiAgICAgIHRoaXMubWFwRGF0YS5hZGRMYXllcih0aGlzT2JqLmhpZ2hMaWdodExheWVyKQ0KDQoNCiAgICB9LA0KDQoNCiAgICAvL+WcsOWbvueCueWHu+S6i+S7tg0KICAgIG1hcENsaWNrIChldnQpIHsNCiAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKTsNCiAgICAgIGxldCB0aGlzT2JqID0gdGhpczsNCiAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpOw0KICAgICAgdmFyIGZlYXR1cmVVcmwgPSB2ZWN0b3JMYXllci5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlSW5mb1VybCgNCiAgICAgICAgZXZ0Wydjb29yZGluYXRlJ10sDQogICAgICAgIHZpZXdSZXNvbHV0aW9uLA0KICAgICAgICAnRVBTRzozODU3JywNCiAgICAgICAgeyAnSU5GT19GT1JNQVQnOiAnYXBwbGljYXRpb24vanNvbicgfQ0KICAgICAgKTsNCiAgICAgIGlmIChmZWF0dXJlVXJsKSB7DQogICAgICAgIGZldGNoKGZlYXR1cmVVcmwpDQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGluZm8pIHsNCiAgICAgICAgICAgIHZhciBvYmpEYXRhID0gSlNPTi5wYXJzZShpbmZvKTsNCiAgICAgICAgICAgIGlmIChvYmpEYXRhICYmIG9iakRhdGEuZmVhdHVyZXNbMF0pIHsNCiAgICAgICAgICAgICAgdGhpc09iai5hZGRQb3B1cChldnQuY29vcmRpbmF0ZSwgb2JqRGF0YS5mZWF0dXJlc1swXSk7DQogICAgICAgICAgICAgIHRoaXNPYmouYWRkSGlnaExpZ2h0U3R5bGUob2JqRGF0YS5mZWF0dXJlc1swXSwgdGhpc09iaiwgdmVjdG9yTGF5ZXIpDQoNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXNPYmoucmVtb3ZlUG9wdXAoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBtYXBNb3ZlZW5kIChldnQpIHsNCiAgICAgIHZhciB6b29tID0gdGhpcy5tYXBEYXRhLmdldFZpZXcoKS5nZXRab29tKCk7DQogICAgICBpZiAoem9vbSA+IHRoaXMubWFya01pblpvb20gJiYgdGhpcy5tYXJrRmxhZyA9PSBmYWxzZSkgew0KICAgICAgICB0aGlzLm1hcmtGbGFnID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5hZGRSb2FkTWFyayh0aGlzKTsNCiAgICAgIH0gZWxzZSBpZiAoem9vbSA8PSB0aGlzLm1hcmtNaW5ab29tICYmIHRoaXMubWFya0ZsYWcgPT0gdHJ1ZSkgew0KICAgICAgICB0aGlzLm1hcmtGbGFnID0gZmFsc2U7DQogICAgICAgIHRoaXMubWFya1ZlY3RvckFycmF5LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgdGhpcy5tYXBEYXRhLnJlbW92ZUxheWVyKGl0ZW0pOw0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLm1hcmtWZWN0b3JBcnJheSA9IFtdOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlQ2hlY2tDaGFuZ2UgKGRhdGFfKSB7DQogICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0KCk7DQogICAgICB0aGlzLnJlbW92ZVBvcHVwKCk7DQogICAgICBsZXQgaGFsZkNoZWNrTm9kZSA9IHRoaXMuJHJlZnMudHJlZS5nZXRIYWxmQ2hlY2tlZE5vZGVzKCk7DQogICAgICBsZXQgaGFsZkNoZWNrSWRzID0gW107DQogICAgICBoYWxmQ2hlY2tOb2RlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGhhbGZDaGVja0lkcy5wdXNoKGl0ZW0uaWQpDQogICAgICB9KTsNCiAgICAgIC8v6I635Y+W6YCJ5Lit5Lul5Y+K5Y2K6YCJ5Lit6IqC54K5DQogICAgICB2YXIgY2hlY2tlZEFycmF5ID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKGZhbHNlKTsNCiAgICAgIGNoZWNrZWRBcnJheSA9IGNoZWNrZWRBcnJheS5jb25jYXQoaGFsZkNoZWNrSWRzKTsNCiAgICAgIGxldCBjaGVja2VkTGF5ZXJBcnJheSA9IHRoaXMuZ2V0TGF5ZXJNYXAoY2hlY2tlZEFycmF5KTsNCiAgICAgIGxldCBjdXJyZW50TGF5ZXJzID0gdGhpcy5sYXllckFycmF5Ow0KICAgICAgLy/lpoLmnpzlvZPliY3pgInkuK3mlbDnu4TkuLrnqbrvvIzlvZPliY3miYDmnInlm77lsYLpmpDol48NCiAgICAgIGlmIChjaGVja2VkTGF5ZXJBcnJheSA9PSBudWxsIHx8IGNoZWNrZWRMYXllckFycmF5Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIGN1cnJlbnRMYXllcnMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBpdGVtLnNldFZpc2libGUoZmFsc2UpDQogICAgICAgIH0pDQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8v6I635Y+W5b6F5re75Yqg55qE5Zu+5bGCKOWbvuS+i+agkeWIneWni+WMlumDqOWIhumAieS4rSkNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hlY2tlZExheWVyQXJyYXkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKCFjaGVja2VkTGF5ZXJBcnJheVtpXS5sYXllck5hbWUpIHsNCiAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBsZXQgdHJlZURhdGFJdGVtID0gY2hlY2tlZExheWVyQXJyYXlbaV0udHJlZURhdGFJdGVtOw0KICAgICAgICBpZiAoIXRyZWVEYXRhSXRlbSkgew0KICAgICAgICAgIGN1cnJlbnRMYXllcnMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlc18ubmFtZSA9PSBjaGVja2VkTGF5ZXJBcnJheVtpXS5sYXllck5hbWUpIHsNCiAgICAgICAgICAgICAgaXRlbS5zZXRWaXNpYmxlKGZhbHNlKQ0KDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRyZWVEYXRhSXRlbS5sZW5ndGg7IGorKykgew0KICAgICAgICAgIGxldCBpdGVtID0gdHJlZURhdGFJdGVtW2pdOw0KICAgICAgICAgIGxldCBleGlzdCA9IGZhbHNlOw0KICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgY3VycmVudExheWVycy5sZW5ndGg7IG4rKykgew0KICAgICAgICAgICAgbGV0IGxheWVyID0gY3VycmVudExheWVyc1tuXTsNCiAgICAgICAgICAgIGlmIChsYXllci52YWx1ZXNfLmZpbHRlclZhbCA9PSBpdGVtLmZpbHRlclZhbHVlICYmDQogICAgICAgICAgICAgIGxheWVyLnZhbHVlc18ubmFtZSA9PSBjaGVja2VkTGF5ZXJBcnJheVtpXS5sYXllck5hbWUpIHsNCiAgICAgICAgICAgICAgZXhpc3QgPSB0cnVlOw0KICAgICAgICAgICAgICBsYXllci5zZXRWaXNpYmxlKHRydWUpDQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8v6ZqQ6JeP5Y+W5raI5Yu+6YCJ55qE5Zu+5bGCDQogICAgICBpZiAoIWN1cnJlbnRMYXllcnMgfHwgY3VycmVudExheWVycy5sZW5ndGggPT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgZXhpc3RMYXllciA9IFtdOw0KICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaysrKSB7DQogICAgICAgIGxldCBleGlzdCA9IGZhbHNlOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrZWRMYXllckFycmF5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IHRlbXBJdGVtcyA9IGNoZWNrZWRMYXllckFycmF5W2ldLnRyZWVEYXRhSXRlbTsNCiAgICAgICAgICBsZXQgbGF5QXJyYXlfID0gdGhpcy5nZXRBcmVhTGluZUxheXMoY2hlY2tlZExheWVyQXJyYXlbaV0ubGF5ZXJOYW1lLCBjdXJyZW50TGF5ZXJzW2tdLnZhbHVlc18uZmlsdGVyVmFsKTsNCiAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRlbXBJdGVtcy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXllcnNba10udmFsdWVzXy5maWx0ZXJWYWwgPT0gdGVtcEl0ZW1zW21dLmZpbHRlclZhbHVlICYmDQogICAgICAgICAgICAgIGN1cnJlbnRMYXllcnNba10udmFsdWVzXy5uYW1lID09IGNoZWNrZWRMYXllckFycmF5W2ldLmxheWVyTmFtZSkgew0KICAgICAgICAgICAgICBleGlzdCA9IHRydWU7DQogICAgICAgICAgICAgIGlmIChleGlzdExheWVyLmluZGV4T2YodGVtcEl0ZW1zW21dLmZpbHRlclZhbHVlKSA9PSAtMSAmJiBsYXlBcnJheV8ubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIGV4aXN0TGF5ZXIucHVzaCh0ZW1wSXRlbXNbbV0uZmlsdGVyVmFsdWUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGN1cnJlbnRMYXllcnNba10uc2V0VmlzaWJsZSh0cnVlKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICghZXhpc3QpIHsNCiAgICAgICAgICBjdXJyZW50TGF5ZXJzW2tdLnNldFZpc2libGUoZmFsc2UpOw0KDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogIH0NCg0KfQ0KDQoNCg=="},{"version":3,"sources":["road-info3.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA","file":"road-info3.vue","sourceRoot":"src/views/information-search","sourcesContent":["<template>\r\n  <div id=\"map\" ref=\"map\">\r\n    <!--点击查看详情弹框-->\r\n    <div id=\"popup\" class=\"ol-popup\">\r\n      <a\r\n        href=\"#\"\r\n        id=\"popup-closer\"\r\n        class=\"ol-popup-closer\"\r\n        @click=\"removePopup\"\r\n      />\r\n      <div id=\"popup-content\"></div>\r\n    </div>\r\n    <!--道路选择器-->\r\n    <!-- <div id=\"pop-road-selector\" class=\"ol-layer\">\r\n      <div class=\"road-selector-pop\">\r\n        <div class=\"pop-title\">地块颜色</div>\r\n        <el-switch\r\n        class=\"div-switch\"\r\n          v-model=\"value1\"\r\n          active-color=\"#004AB3\"\r\n          inactive-color=\"#004AB3\"\r\n          active-text=\"建设信息\"\r\n          inactive-text=\"道路等级\"\r\n          @change=\"switchChange\"\r\n        >\r\n        </el-switch>\r\n        <div ref=\"roadTypeColorDiv\" class=\"road-selector-color\">\r\n          <el-tree\r\n            ref=\"tree\"\r\n            :data=\"treeData\"\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            :default-checked-keys=\"defaultCheckedIds\"\r\n            :default-expanded-keys=\"defaultExpandIds\"\r\n            :props=\"defaultProps\"\r\n            @check=\"handleCheckChange\"\r\n            v-show=\"value1 == false\"\r\n          >\r\n            <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n              <span>\r\n                {{ node.label }}\r\n              </span>\r\n              <span\r\n                class=\"dot\"\r\n                :style=\"{ background: data.lengendColor }\"\r\n              ></span>\r\n            </div>\r\n          </el-tree>\r\n          <el-tree\r\n            style=\"height: 200px; overflow: auto\"\r\n            ref=\"tree\"\r\n            :data=\"treeData2\"\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            default-expand-all\r\n            :default-checked-keys=\"defaultCheckedIds\"\r\n            :default-expanded-keys=\"defaultExpandIds\"\r\n            :props=\"defaultProps\"\r\n            @check=\"handleCheckChange\"\r\n            v-show=\"value1 == true\"\r\n          >\r\n            <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n              <span>\r\n                {{ node.label }}\r\n              </span>\r\n              <span\r\n                class=\"dot\"\r\n                :style=\"{ background: data.lengendColor }\"\r\n              ></span>\r\n            </div>\r\n          </el-tree>\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n    <div id=\"pop-road-selector\" class=\"ol-layer\">\r\n      <div class=\"road-selector-pop\">\r\n        <div class=\"pop-title\">道路颜色</div>\r\n        <el-switch\r\n          class=\"div-switch\"\r\n          v-model=\"value1\"\r\n          active-color=\"#004AB3\"\r\n          inactive-color=\"#004AB3\"\r\n          active-text=\"建设信息\"\r\n          inactive-text=\"道路等级\"\r\n          @change=\"switchChange\"\r\n        >\r\n        </el-switch>\r\n        <div ref=\"roadTypeColorDiv\" class=\"road-selector-color\">\r\n          <el-checkbox-group v-model=\"roadTypeRadio\" v-show=\"value1 == false\">\r\n            <el-checkbox\r\n              v-for=\"(item, index) in roadTypeDispalyLengendList\"\r\n              :label=\"item.lengendTypeValue\"\r\n              @change=\"roadTypeChange\"\r\n              :key=\"index\"\r\n              >{{ item.lengendTypeName\r\n              }}<span\r\n                class=\"colorBox\"\r\n                :style=\"{ background: item.stroke }\"\r\n              ></span\r\n            ></el-checkbox>\r\n          </el-checkbox-group>\r\n\r\n          <el-checkbox-group v-model=\"radio2\" v-show=\"value1 == true\">\r\n            <el-checkbox\r\n              v-for=\"(item, index) in buildStatusLengendList\"\r\n              :label=\"item.lengendTypeValue\"\r\n              @change=\"buildStatusChange\"\r\n              :key=\"index\"\r\n              >{{ item.lengendTypeName\r\n              }}<span\r\n                class=\"colorBox\"\r\n                :style=\"{ background: item.stroke }\"\r\n              ></span\r\n            ></el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--总体信息折叠控制层-->\r\n    <transition name=\"move\">\r\n      <!--总体信息浮动框-->\r\n      <div id=\"pop-summry\" class=\"ol-layer\" v-if=\"hidPop\">\r\n        <div class=\"mbg\"></div>\r\n        <!--总体信息控制图层(上)-->\r\n        <div class=\"pop-summry-control\" @click=\"hideSummryPop\">\r\n          <div>\r\n            <div class=\"pop-summry-control-title\">\r\n              <span>总体信息</span>\r\n              <img src=\"~@/assets/images/arrow-down.png\" class=\"jt-icon\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <scoll-div-vue style=\"padding: 25px\">\r\n          <!--总体信息表格-->\r\n          <div class=\"div-bg\" v-for=\"(item, index) in tableArray\" :key=\"index\">\r\n            <table\r\n              class=\"ol-popsummry-detail-table\"\r\n              v-if=\"item.cptType == 'TABLE'\"\r\n            >\r\n              <span class=\"table-title\">{{ item.title }}</span>\r\n              <tr v-for=\"(item2, index2) in item.tableData\" :key=\"index2\">\r\n                <th>{{ item2.label }}</th>\r\n                <td>{{ item2.value }}</td>\r\n              </tr>\r\n            </table>\r\n            <bar_chart_vVue\r\n              :barData=\"item\"\r\n              v-if=\"item.cptType == 'BAR' && item.tableDirection == 'H'\"\r\n            ></bar_chart_vVue>\r\n            <pie_chartVue\r\n              :pieData=\"item\"\r\n              v-if=\"item.cptType == 'PIE'\"\r\n            ></pie_chartVue>\r\n            <bar_chart_hVue\r\n              :barData=\"item\"\r\n              v-if=\"item.cptType == 'BAR' && item.tableDirection == 'V'\"\r\n            ></bar_chart_hVue>\r\n          </div>\r\n        </scoll-div-vue>\r\n      </div>\r\n    </transition>\r\n    <!--总体信息折叠控制层-->\r\n    <transition name=\"move\">\r\n      <div id=\"pop-summry—collapse\" class=\"ol-layer\" v-show=\"showPop\">\r\n        <div class=\"pop-summry-control\" @click=\"showSummryPop\">\r\n          <div>\r\n            <div class=\"pop-summry-control-title blue-title\">\r\n              <span>总体信息</span>\r\n              <img src=\"~@/assets/images/arrow-up.png\" class=\"jt-icon\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <nav_barVue :navList=\"navList\"></nav_barVue>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport Map from 'ol/Map'\r\nimport * as olControl from 'ol/control'\r\nimport View from 'ol/View'\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport { transform, fromLonLat } from 'ol/proj'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\nimport Feature from 'ol/Feature'\r\nimport { Draw } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport OlGeomPoint from 'ol/geom/Point'\r\nimport OlStyleStyle from 'ol/style/Style'\r\nimport OlStyleIcon from 'ol/style/Icon'\r\nimport Text from 'ol/style/Text'\r\nimport nav_barVue from '../components/nav_bar.vue'\r\nimport { findComponentInfo } from \"@/api/config/component\";\r\nimport { getUrlKey, request } from '@/utils/request'\r\nimport bar_chart_vVue from '../traffic-decision/components/bar_chart_v.vue'\r\nimport pie_chartVue from '../traffic-decision/components/pie_chart.vue'\r\nimport scollDivVue from '../traffic-decision/components/scollDiv.vue'\r\nimport bar_chart_hVue from '../traffic-decision/components/bar_chart_h.vue'\r\nimport Vue from 'vue'\r\n//中心坐标\r\nconst centerCordinate = [656813.44256, 3560432.98245]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\n//是否展示总体信息标识\r\nvar showSummryFlag = true;\r\n// 道路类型图例常量\r\n\r\nconst layerName = \"Test:plane1_v2\";\r\nvar vectorLayer;\r\n//地图初始化\r\nconst view = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 4,\r\n  maxZoom: 18,\r\n  zoom: 13.6 // 地图初始化的缩放级别\r\n})\r\n\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n\r\n\r\nexport default {\r\n  name: \"Road\",\r\n  components: {\r\n    nav_barVue, bar_chart_vVue, scollDivVue, pie_chartVue, bar_chart_hVue\r\n  },\r\n  data () {\r\n    return {\r\n      navList: ['信息查询', '道路信息'],\r\n      value1: 'true',   //开关\r\n      roadTypeRadio: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"],        //道路等级\r\n      radio2: [\"1\", \"2\", \"3\"],       //建设信息\r\n      geoJsonList: {},\r\n      roadBasicInfo: {},\r\n      markLayerName: 'Test%3Aroad_points',\r\n      markMinZoom: 14.7,\r\n      markFlag: false,\r\n      hidPop: false,\r\n      showPop: true,\r\n      markVectorArray: [],\r\n      tableArray: [],\r\n      menuId: null,\r\n      markDataCache: null,\r\n      myChart: {},\r\n      // sortData: [], //动态排序数据\r\n      myChartStyle: {\r\n        width: \"100%\", height: \"250px\", display: \"inline-block\"\r\n      },\r\n      roadTypeLengendList: [\r\n        {\r\n          lengendTypeName: \"高速公路\",\r\n          lengendTypeValue: \"5\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#00FF00\",\r\n          strokeWidth: \"7.2\",\r\n          enableSelect: true\r\n        },\r\n        {\r\n          lengendTypeName: \"快速路\",\r\n          lengendTypeValue: \"1\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#ff00ff\",\r\n          strokeWidth: \"6.3\",\r\n          enableSelect: true\r\n\r\n        },\r\n        {\r\n          lengendTypeName: \"主干路\",\r\n          lengendTypeValue: \"2\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#ff0000\",\r\n          strokeWidth: \"5.4\",\r\n          enableSelect: true\r\n        },\r\n\r\n        {\r\n          lengendTypeName: \"次干路\",\r\n          lengendTypeValue: \"3\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#007fff\",\r\n          strokeWidth: \"3.6\",\r\n          enableSelect: true\r\n        },\r\n        {\r\n          lengendTypeName: \"支路\",\r\n          lengendTypeValue: \"4\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#00994c\",\r\n          strokeWidth: \"2.7\",\r\n          enableSelect: true\r\n        },\r\n\r\n        {\r\n          lengendTypeName: \"低等级道路\",\r\n          lengendTypeValue: \"6\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#999900\",\r\n          strokeWidth: \"1.8\",\r\n          enableSelect: true\r\n        },\r\n        {\r\n          lengendTypeName: \"匝道\",\r\n          lengendTypeValue: \"7\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#00FFFF\",\r\n          strokeWidth: \"1.8\",\r\n          enableSelect: true\r\n        },\r\n\r\n        {\r\n          lengendTypeName: \"00道路红线\",\r\n          lengendTypeValue: \"8\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#bbbbbb\",\r\n          strokeWidth: \"1.6\",\r\n          enableSelect: false\r\n        },\r\n        {\r\n          lengendTypeName: \"00规划边界\",\r\n          lengendTypeValue: \"9\",\r\n          filterProperty: \"layer\",\r\n          stroke: \"#FF0000\",\r\n          strokeWidth: \"1.8\",\r\n          dashOffset: \"10\",\r\n          dasharray: \"10 15\",\r\n          enableSelect: false\r\n\r\n        },\r\n\r\n      ],\r\n      roadTypeDispalyLengendList: [],\r\n\r\n      buildStatusLengendList: [\r\n        {\r\n          lengendTypeName: \"建成使用\",\r\n          lengendTypeValue: \"1\",\r\n          filterProperty: \"status\",\r\n          stroke: \"#b1db16\",\r\n          strokeWidth: \"3\",\r\n          enableSelect: true\r\n\r\n        },\r\n        {\r\n          lengendTypeName: \"施工建设中\",\r\n          lengendTypeValue: \"2\",\r\n          filterProperty: \"status\",\r\n          stroke: \"#ebcc0c\",\r\n          strokeWidth: \"4\",\r\n          enableSelect: true\r\n        },\r\n\r\n        {\r\n          lengendTypeName: \"规划道路\",\r\n          lengendTypeValue: \"3\",\r\n          filterProperty: \"status\",\r\n          stroke: \"#eb7323\",\r\n          strokeWidth: \"5\",\r\n          enableSelect: true\r\n        }],\r\n\r\n\r\n      layerStyleSld: \"\"\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n    //初始化菜单\r\n    this.menuId = getUrlKey('menuId');\r\n    //查询组件信息\r\n    this.initComponentInfo();\r\n    //初始图例展示数据\r\n    this.initDisplayLengendData()\r\n    //组装图层样式数据\r\n    this.initStyle();\r\n    //初始化图层\r\n    this.initMap();\r\n    this.showPop = false\r\n    this.hidPop = true\r\n    //加载道路整体信息\r\n    //this.getRoadInfo(this)\r\n    var popSummry = document.getElementById('pop-summry')\r\n    popSummry.addEventListener(\"webkitAnimationEnd\", function () {\r\n      if (!showSummryFlag) {\r\n        document.getElementById('pop-summry—collapse').style.display = 'block';\r\n      }\r\n    })\r\n\r\n    popSummry.addEventListener(\"animationend\", function () {\r\n      if (!showSummryFlag) {\r\n        document.getElementById('pop-summry—collapse').style.display = 'block';\r\n      }\r\n    })\r\n    document.getElementsByClassName('ol-popup').style.display = 'none';\r\n  },\r\n\r\n\r\n\r\n  methods: {\r\n    initLegendInfo (legendList, _this) {\r\n      if (legendList && legendList.length > 0) {\r\n        //设置树节点数据\r\n        let treeData_ = legendList[0];\r\n        _this.treeData = treeData_;\r\n        //设置顶级菜单选中\r\n        let checkedIds_ = [];\r\n        let expandIds = [];\r\n        for (let k = 0; k < treeData_.length; k++) {\r\n          let item = treeData_[k];\r\n          if (item.parentId == null) {\r\n            checkedIds_.push(item.id);\r\n            let children_ = item.children;\r\n            if (children_ != null && children_.length != 0) {\r\n              for (let j = 0; j < children_.length; j++) {\r\n                expandIds.push(children_[j].id);\r\n              }\r\n            } else {\r\n              expandIds.push(item.id);\r\n            }\r\n          }\r\n        }\r\n        //默认展展开二级菜单\r\n        _this.defaultExpandIds = expandIds;\r\n        _this.defaultCheckedIds = checkedIds_;\r\n      }\r\n\r\n    },\r\n\r\n    initComponentInfo () {\r\n      let _this = this;\r\n      findComponentInfo(this.menuId, null).then(response => {\r\n        //图例\r\n        let legendConfigData = response.data.decLegendConfigList;\r\n        if (legendConfigData && legendConfigData.length > 0) {\r\n          //设置树节点数据\r\n          let treeData_ = legendConfigData[0];\r\n          let treeData2_ = legendConfigData[1];\r\n          //隐藏设置的节点\r\n          _this.treeData = treeData_;\r\n          _this.treeData2 = treeData2_;\r\n          debugger\r\n          //设置顶级菜单选中\r\n          let expandIds = [];\r\n          for (let k = 0; k < treeData_.length; k++) {\r\n            let item = treeData_[k];\r\n            if (item.parentId == null) {\r\n              let children_ = item.children;\r\n              if (children_ != null && children_.length != 0) {\r\n                for (let j = 0; j < children_.length; j++) {\r\n                  expandIds.push(children_[j].id);\r\n                }\r\n              } else {\r\n                expandIds.push(item.id);\r\n              }\r\n            }\r\n          }\r\n          //默认展展开二级菜单\r\n          this.defaultExpandIds = expandIds;\r\n          this.defaultCheckedIds = _this.getTreecheckedId(treeData_);\r\n        }\r\n        //表格\r\n        let tableList = response.data.tableList;\r\n        _this.tableArray = tableList;\r\n\r\n\r\n      });\r\n    },\r\n    //递归获节点信息\r\n    getCheckedIdsRecur (item, ids_) {\r\n      if (item.id && item.checkStatus == 'Y') {\r\n        ids_ = (ids_ == null ? [] : ids_);\r\n        ids_.push(item.id);\r\n      }\r\n      //如果子节点选中，需要将父节半选中状态节点加入\r\n      let currentLen = ids_.length;\r\n      if (item.children != null) {\r\n        item.children.forEach(item => {\r\n          this.getCheckedIdsRecur(item, ids_)\r\n        })\r\n        if (currentLen < ids_.length && ids_.indexOf(item.id) == -1) {\r\n          ids_.push(item.id);\r\n        }\r\n      }\r\n    },\r\n    //获取树所有的节点信息\r\n    getTreecheckedId (treeData) {\r\n      let ids = [];\r\n      treeData.forEach(item => {\r\n        this.getCheckedIdsRecur(item, ids);\r\n      })\r\n      return ids;\r\n    },\r\n    initDisplayLengendData () {\r\n      this.roadTypeDispalyLengendList = this.roadTypeLengendList.filter((item) => {\r\n        return item.enableSelect == true;\r\n      })\r\n\r\n    },\r\n    //初始化样式\r\n    initStyle () {\r\n      var initSld = '<?xml version=\"1.0\" encoding=\"GBK\"?><StyledLayerDescriptor version=\"1.0.0\" xmlns=\"http://www.opengis.net/sld\" xmlns:ogc=\"http://www.opengis.net/ogc\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:gml=\"http://www.opengis.net/gml\" xsi:schemaLocation=\"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd\"><NamedLayer><Name>' + layerName + '</Name><UserStyle><Name>roadType</Name><Title>roadType</Title><Abstract>roadType</Abstract><FeatureTypeStyle>';\r\n      this.roadTypeLengendList.forEach((item) => {\r\n        var typeName = item.lengendTypeName;\r\n        var filterProperty = item.filterProperty;\r\n        var stroke = item.stroke;\r\n        var strokeWidth = item.strokeWidth;\r\n        var dashOffset = item.dashOffset;\r\n        var dasharray = item.dasharray;\r\n        initSld = initSld + '<Rule><Title>' + typeName + '</Title><ogc:Filter><ogc:PropertyIsEqualTo><ogc:PropertyName>' + filterProperty + '</ogc:PropertyName><ogc:Literal>' + typeName + '</ogc:Literal></ogc:PropertyIsEqualTo></ogc:Filter>' + '<PolygonSymbolizer><Stroke><CssParameter name=\"stroke\">' + stroke + '</CssParameter><CssParameter name=\"stroke-width\">' + strokeWidth + '</CssParameter>';\r\n        if (dashOffset) {\r\n          initSld = initSld + '<CssParameter name=\"stroke-dashoffset\">' + dashOffset + '</CssParameter>'\r\n        }\r\n        if (dasharray) {\r\n          initSld = initSld + '<CssParameter name=\"stroke-dasharray\">' + dasharray + '</CssParameter>'\r\n        }\r\n        initSld = initSld + '</Stroke></PolygonSymbolizer></Rule>'\r\n\r\n      });\r\n      initSld = initSld + '</FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>';\r\n      this.layerStyleSld = initSld;\r\n    },\r\n\r\n    // 初始化地图\r\n    initMap () {\r\n      const mapContainer = this.$refs.map\r\n      //通过wms加载数据\r\n      const wmsSource = new TileWMS({\r\n        url: process.env.VUE_APP_GIS_BASE_URL + '/wms',\r\n        projection: 'EPSG:4548',\r\n        params: {\r\n          'LAYERS': layerName,\r\n          'VERSION': '1.1.0',\r\n          'STYLES': undefined,\r\n          'SLD_BODY': this.layerStyleSld\r\n        },\r\n        serverType: 'geoserver'\r\n      });\r\n      //自定义图层\r\n      vectorLayer = new TileLayer({\r\n        source: wmsSource\r\n      });\r\n\r\n      //将图层加入Map\r\n      const map = new Map({\r\n        layers: [gaodeMapLayer, vectorLayer],\r\n        target: mapContainer,\r\n        view: view\r\n      });\r\n\r\n      // 添加鼠标点击事件\r\n      map.on('click', this.mapClick);\r\n      map.on('moveend', this.mapMoveend);\r\n      // 保存地图\r\n      this.mapData = map\r\n    },\r\n    createMarkStyle (feature, fontAngle) {\r\n      //返回一个样式\r\n      return new OlStyleStyle({\r\n        //文本样式\r\n        text: new Text({\r\n          textAlign: 'center',\r\n          textBaseline: 'middle',\r\n          font: 'normal 12px 微软雅黑',\r\n          text: feature.get('name'),\r\n          fill: new Fill({\r\n            color: '#bbbbbb'\r\n          }),\r\n          rotation: fontAngle * Math.PI / 180,\r\n          padding: [2, 5, 2, 5],\r\n        }),\r\n        // 设置层级\r\n        zIndex: 1999999999\r\n      });\r\n    },\r\n\r\n    createMarkFeature (featureParam) {\r\n      // 初始化标签要素\r\n      let cordinate = transform(\r\n        featureParam.geometry.coordinates,\r\n        \"EPSG:4548\",\r\n        \"EPSG:3857\"\r\n      )\r\n      let fontAngle = featureParam.properties.font_angle;\r\n      let feature = new Feature({\r\n        geometry: new OlGeomPoint(cordinate),\r\n        name: featureParam.properties.name,\r\n        // img: require('../../assets/images/mark.png'),\r\n      })\r\n      feature.setId(featureParam.id)\r\n      feature.setStyle(this.createMarkStyle(feature, fontAngle))\r\n      let source = new VectorSource({})\r\n      source.addFeature(feature)\r\n      let layer = new VectorLayer({\r\n        source: source\r\n      })\r\n      this.markVectorArray.push(layer);\r\n      this.mapData.addLayer(layer);\r\n    },\r\n\r\n    addRoadMark (viewObj) {\r\n      try {\r\n        if (viewObj.markDataCache != null) {\r\n          let featureArray = viewObj.markDataCache.features;\r\n          featureArray.forEach(item => {\r\n            viewObj.createMarkFeature(item);\r\n          })\r\n          return;\r\n        }\r\n        let url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + this.markLayerName + '&maxFeatures=500000000&outputFormat=application%2Fjson';\r\n        axios.get(url, null).then(function (res) {\r\n          let markRespData = res.data;\r\n          viewObj.markDataCache = res.data;\r\n          if (markRespData) {\r\n            let featureArray = markRespData.features;\r\n            featureArray.forEach(item => {\r\n              viewObj.createMarkFeature(item);\r\n            })\r\n\r\n          }\r\n\r\n        });\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    // 弹出框\r\n    addPopup (coordinate, feature) {\r\n      this.removePopup()\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup')\r\n      let content = document.getElementById('popup-content')\r\n      if (this.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        this.overlay = new Overlay({\r\n          element: container,\r\n          autoPan: {\r\n            animation: {\r\n              duration: 250\r\n            }\r\n          }\r\n        })\r\n        // 添加到map\r\n        this.mapData.addOverlay(this.overlay)\r\n      }\r\n      // 弹出层内容\r\n      let featureVal = feature.properties;\r\n      let layer = featureVal.layer == null ? \"\" : featureVal.layer;\r\n      let handle = featureVal.handle == null ? \"\" : featureVal.handle;\r\n      let length = featureVal.length == null ? \"\" : Math.floor(featureVal.length) + \" m\";\r\n      let capacity = featureVal.capacity == null ? \"\" : featureVal.capacity + ' pcu/h';\r\n      let dir = featureVal.dir == 1 ? \"单向\" : featureVal.dir == -1 ? \"反向单向\" : featureVal.dir == 0 ? \"双向\" : '';\r\n      let speed = featureVal.speed == null ? \"\" : featureVal.speed + ' m/h';\r\n\r\n\r\n      let popHtml = `\r\n            <div style='color:#121924;font-weight: bold;width:100%;z-index:4;height:50px;padding:6px;font-size: 15px'>`+ layer + `</div>\r\n  \r\n            <div style='font-size: 10px;width:100%' id='info1'>\r\n`\r\n      if (handle != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">道路ID:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ handle + `</a>\r\n        </div> `\r\n      }\r\n      if (layer != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">道路等级:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ layer + `</a>\r\n        </div> `\r\n      }\r\n      if (length != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">道路长度:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ length + `</a>\r\n        </div> `\r\n      }\r\n      if (dir != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">方向:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ dir + `</a>\r\n        </div> `\r\n      }\r\n      if (capacity != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">通行能力:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ capacity + `</a>\r\n        </div> `\r\n      }\r\n      if (speed != '') {\r\n        popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">设计车速:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ speed + `</a>\r\n        </div> `\r\n      }\r\n\r\n      popHtml = popHtml + `\r\n        <div style=\"height: 28px;width:100%\">\r\n          <a style=\"color:#646566;width:45%;display: inline-block;\">建设信息:</a>\r\n          <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">规划道路</a>\r\n        </div> </div > `\r\n      content.innerHTML = popHtml;\r\n      // 设置弹出层位置即可出现\r\n      this.overlay.setPosition(coordinate)\r\n      document.getElementsByClassName('ol-popup').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n        this.clearHighlight()\r\n      }\r\n    },\r\n    showSummryPop () {\r\n      this.showPop = false\r\n      this.hidPop = true\r\n    },\r\n\r\n    hideSummryPop () {\r\n      this.showPop = true\r\n      this.hidPop = false\r\n    },\r\n    changeStyle (lengendList, checkedList) {\r\n      if (checkedList == null || checkedList.length == 0) {\r\n        vectorLayer.setVisible(false);\r\n        return;\r\n      }\r\n      vectorLayer.setVisible(true);\r\n      var changeStyle = false;\r\n      var initSld = '<?xml version=\"1.0\" encoding=\"GBK\"?><StyledLayerDescriptor version=\"1.0.0\" xmlns=\"http://www.opengis.net/sld\" xmlns:ogc=\"http://www.opengis.net/ogc\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:gml=\"http://www.opengis.net/gml\" xsi:schemaLocation=\"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd\"><NamedLayer><Name>' + layerName + '</Name><UserStyle><Name>roadType</Name><Title>roadType</Title><Abstract>roadType</Abstract><FeatureTypeStyle>';\r\n      lengendList.forEach((item) => {\r\n        var typeName = item.lengendTypeName;\r\n        var lengendTypeValue = item.lengendTypeValue;\r\n        var filterProperty = item.filterProperty;\r\n        var stroke = item.stroke;\r\n        var strokeWidth = item.strokeWidth;\r\n        var dashOffset = item.dashOffset;\r\n        var dasharray = item.dasharray;\r\n        //\r\n        var index = checkedList.findIndex(item => {\r\n          return item === lengendTypeValue;\r\n        })\r\n        var enableSelect = item.enableSelect\r\n        if (!enableSelect || index != -1) {\r\n          changeStyle = true;\r\n          initSld = initSld + '<Rule><Title>' + typeName + '</Title><ogc:Filter><ogc:PropertyIsEqualTo><ogc:PropertyName>' + filterProperty + '</ogc:PropertyName><ogc:Literal>' + typeName + '</ogc:Literal></ogc:PropertyIsEqualTo></ogc:Filter>' + '<PolygonSymbolizer><Stroke><CssParameter name=\"stroke\">' + stroke + '</CssParameter><CssParameter name=\"stroke-width\">' + strokeWidth + '</CssParameter>';\r\n          if (dashOffset) {\r\n            initSld = initSld + '<CssParameter name=\"stroke-dashoffset\">' + dashOffset + '</CssParameter>'\r\n          }\r\n          if (dasharray) {\r\n            initSld = initSld + '<CssParameter name=\"stroke-dasharray\">' + dasharray + '</CssParameter>'\r\n          }\r\n          initSld = initSld + '</Stroke></PolygonSymbolizer></Rule>'\r\n        }\r\n      });\r\n      initSld = initSld + '</FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>';\r\n      if (changeStyle) {\r\n        vectorLayer.getSource().updateParams({ 'STYLES': undefined, 'SLD_BODY': initSld });\r\n      }\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    //道路类型样式改变\r\n    roadTypeChange () {\r\n      this.removePopup();\r\n      this.clearHighlight();\r\n      this.changeStyle(this.roadTypeLengendList, this.roadTypeRadio);\r\n    },\r\n\r\n    //建设状态样式\r\n    buildStatusChange () {\r\n      this.clearHighlight();\r\n      this.removePopup();\r\n      this.changeStyle(this.buildStatusLengendList, this.radio2);\r\n    },\r\n\r\n    switchChange () {\r\n      var changeVal = this.value1;\r\n      changeVal ? this.buildStatusChange() : this.roadTypeChange();\r\n    },\r\n\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let highlightLayer = {}\r\n      arr.forEach(item => {\r\n        if (item.get(\"id\") == \"highlightLayer\") {\r\n          highlightLayer = item\r\n        }\r\n      })\r\n      if (highlightLayer && highlightLayer.className_) {\r\n        this.mapData.removeLayer(highlightLayer)\r\n      }\r\n    },\r\n\r\n    //新增高亮图层\r\n    addHighLightStyle (clickFeature, thisObj, clickLayer) {\r\n      this.clearHighlight();\r\n      let featureObj = new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' }).readFeatures(clickFeature)\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\"\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n\r\n          width: 6\r\n        }),\r\n\r\n      })\r\n      featureObj[0].setStyle(highLightStyle);\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        name: \"highlightLayer\",\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          let currentStyle = feature.getSource().getResolution().style;\r\n          return highLightStyle;\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\")\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n\r\n\r\n    },\r\n\r\n\r\n    //地图点击事件\r\n    mapClick (evt) {\r\n      this.removePopup();\r\n      let thisObj = this;\r\n      var viewResolution = view.getResolution();\r\n      var featureUrl = vectorLayer.getSource().getFeatureInfoUrl(\r\n        evt['coordinate'],\r\n        viewResolution,\r\n        'EPSG:3857',\r\n        { 'INFO_FORMAT': 'application/json' }\r\n      );\r\n      if (featureUrl) {\r\n        fetch(featureUrl)\r\n          .then(function (response) {\r\n            return response.text();\r\n          })\r\n          .then(function (info) {\r\n            var objData = JSON.parse(info);\r\n            if (objData && objData.features[0]) {\r\n              thisObj.addPopup(evt.coordinate, objData.features[0]);\r\n              thisObj.addHighLightStyle(objData.features[0], thisObj, vectorLayer)\r\n\r\n            } else {\r\n              thisObj.removePopup();\r\n            }\r\n\r\n          });\r\n      } else {\r\n        this.removePopup();\r\n      }\r\n    },\r\n\r\n    mapMoveend (evt) {\r\n      var zoom = this.mapData.getView().getZoom();\r\n      if (zoom > this.markMinZoom && this.markFlag == false) {\r\n        this.markFlag = true;\r\n        this.addRoadMark(this);\r\n      } else if (zoom <= this.markMinZoom && this.markFlag == true) {\r\n        this.markFlag = false;\r\n        this.markVectorArray.forEach(item => {\r\n          this.mapData.removeLayer(item);\r\n        })\r\n        this.markVectorArray = [];\r\n      }\r\n    },\r\n    handleCheckChange (data_) {\r\n      this.clearHighlight();\r\n      this.removePopup();\r\n      let halfCheckNode = this.$refs.tree.getHalfCheckedNodes();\r\n      let halfCheckIds = [];\r\n      halfCheckNode.forEach(item => {\r\n        halfCheckIds.push(item.id)\r\n      });\r\n      //获取选中以及半选中节点\r\n      var checkedArray = this.$refs.tree.getCheckedKeys(false);\r\n      checkedArray = checkedArray.concat(halfCheckIds);\r\n      let checkedLayerArray = this.getLayerMap(checkedArray);\r\n      let currentLayers = this.layerArray;\r\n      //如果当前选中数组为空，当前所有图层隐藏\r\n      if (checkedLayerArray == null || checkedLayerArray.length == 0) {\r\n        currentLayers.forEach(item => {\r\n          item.setVisible(false)\r\n        })\r\n        return;\r\n      }\r\n      //获取待添加的图层(图例树初始化部分选中)\r\n      for (let i = 0; i < checkedLayerArray.length; i++) {\r\n        if (!checkedLayerArray[i].layerName) {\r\n          continue;\r\n        }\r\n        let treeDataItem = checkedLayerArray[i].treeDataItem;\r\n        if (!treeDataItem) {\r\n          currentLayers.forEach(item => {\r\n            if (item.values_.name == checkedLayerArray[i].layerName) {\r\n              item.setVisible(false)\r\n\r\n            }\r\n          })\r\n          continue;\r\n        }\r\n        for (let j = 0; j < treeDataItem.length; j++) {\r\n          let item = treeDataItem[j];\r\n          let exist = false;\r\n          for (let n = 0; n < currentLayers.length; n++) {\r\n            let layer = currentLayers[n];\r\n            if (layer.values_.filterVal == item.filterValue &&\r\n              layer.values_.name == checkedLayerArray[i].layerName) {\r\n              exist = true;\r\n              layer.setVisible(true)\r\n              continue;\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n\r\n      //隐藏取消勾选的图层\r\n      if (!currentLayers || currentLayers.length == 0) {\r\n        return;\r\n      }\r\n      let existLayer = [];\r\n      for (let k = 0; k < currentLayers.length; k++) {\r\n        let exist = false;\r\n        for (let i = 0; i < checkedLayerArray.length; i++) {\r\n          let tempItems = checkedLayerArray[i].treeDataItem;\r\n          let layArray_ = this.getAreaLineLays(checkedLayerArray[i].layerName, currentLayers[k].values_.filterVal);\r\n          for (let m = 0; m < tempItems.length; m++) {\r\n            if (currentLayers[k].values_.filterVal == tempItems[m].filterValue &&\r\n              currentLayers[k].values_.name == checkedLayerArray[i].layerName) {\r\n              exist = true;\r\n              if (existLayer.indexOf(tempItems[m].filterValue) == -1 && layArray_.length > 1) {\r\n                existLayer.push(tempItems[m].filterValue);\r\n              }\r\n              currentLayers[k].setVisible(true);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (!exist) {\r\n          currentLayers[k].setVisible(false);\r\n\r\n        }\r\n      }\r\n    },\r\n\r\n  }\r\n\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '~@/assets/styles/draws.scss';\r\n@import '~@/assets/styles/popup.scss';\r\n@import '~@/assets/styles/switch.scss';\r\n.el-checkbox-group {\r\n  width: 100%;\r\n}\r\n.colorBox {\r\n  width: 48px;\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 6px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(1) .colorBox {\r\n  height: 12px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(2) .colorBox {\r\n  height: 11px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(3) .colorBox {\r\n  height: 10px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(4) .colorBox {\r\n  height: 9px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(5) .colorBox {\r\n  height: 8px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(6) .colorBox {\r\n  height: 7px;\r\n}\r\n.el-checkbox-group .el-checkbox:nth-child(7) .colorBox {\r\n  height: 6px;\r\n}\r\n.road-selector-color {\r\n  width: 100%;\r\n}\r\n::v-deep .el-checkbox {\r\n  position: relative;\r\n  display: block;\r\n  height: 26px;\r\n  // line-height: 26px;\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}