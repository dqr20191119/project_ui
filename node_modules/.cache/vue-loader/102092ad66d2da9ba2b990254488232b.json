{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\index.vue","mtime":1663479653279},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJ29sL29sLmNzcycNCg0KaW1wb3J0ICogYXMgb2xDb250cm9sIGZyb20gJ29sL2NvbnRyb2wnDQoNCmltcG9ydCB7IE1hcCwgVmlldywgRmVhdHVyZSwgQ29sbGVjdGlvbiB9IGZyb20gIm9sIjsNCg0KaW1wb3J0IHsgZ2V0V2lkdGgsIGdldENlbnRlciB9IGZyb20gJ29sL2V4dGVudCcNCmltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZScNCmltcG9ydCBXTVRTIGZyb20gJ29sL3NvdXJjZS9XTVRTJw0KaW1wb3J0IFhZWiBmcm9tICdvbC9zb3VyY2UvWFlaJw0KaW1wb3J0IFdNVFNUaWxlR3JpZCBmcm9tICdvbC90aWxlZ3JpZC9XTVRTJw0KaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnb2wvcHJvai9Qcm9qZWN0aW9uJw0KaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnb2wvcHJvaicNCmltcG9ydCBwcm9qNCBmcm9tICdwcm9qNCcNCmltcG9ydCB7IHJlZ2lzdGVyIH0gZnJvbSAnb2wvcHJvai9wcm9qNCc7DQppbXBvcnQgVmVjdG9yU291cmNlIGZyb20gJ29sL3NvdXJjZS9WZWN0b3InDQppbXBvcnQgeyBUaWxlV01TIH0gZnJvbSAnb2wvc291cmNlJw0KaW1wb3J0IFZlY3RvckxheWVyIGZyb20gJ29sL2xheWVyL1ZlY3RvcicNCg0KaW1wb3J0IHsgRHJhdywgVHJhbnNsYXRlLCBEcmFnUGFuIH0gZnJvbSAnb2wvaW50ZXJhY3Rpb24nDQppbXBvcnQgeyBTdHlsZSwgQ2lyY2xlLCBTdHJva2UsIEZpbGwgfSBmcm9tICdvbC9zcmMvc3R5bGUnDQppbXBvcnQgV0tUIGZyb20gJ29sL2Zvcm1hdC9XS1QnDQppbXBvcnQgR2VvSlNPTiBmcm9tICdvbC9mb3JtYXQvR2VvSlNPTicNCmltcG9ydCBPdmVybGF5IGZyb20gJ29sL092ZXJsYXknDQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gImVjaGFydHMiOw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KaW1wb3J0IExpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nJzsNCmltcG9ydCBNdWx0aUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcnOw0KaW1wb3J0IE11bHRpUG9seWdvbiBmcm9tICdvbC9nZW9tL011bHRpUG9seWdvbic7DQppbXBvcnQgVnVlIGZyb20gJ3Z1ZScNCmltcG9ydCB7IGNsb25lIH0gZnJvbSAiQC91dGlscy9ydW95aSI7DQppbXBvcnQgT2xHZW9tUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludCcNCmltcG9ydCBPbFN0eWxlU3R5bGUgZnJvbSAnb2wvc3R5bGUvU3R5bGUnDQppbXBvcnQgT2xTdHlsZUljb24gZnJvbSAnb2wvc3R5bGUvSWNvbicNCmltcG9ydCBpbmRleCBmcm9tICJAL2FwaS9pbmRleCI7DQppbXBvcnQgUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludCc7DQppbXBvcnQgVGV4dCBmcm9tICdvbC9zdHlsZS9UZXh0Jw0KaW1wb3J0IHsgZmluZENvbXBvbmVudEluZm8gfSBmcm9tICJAL2FwaS9jb25maWcvY29tcG9uZW50IjsNCmltcG9ydCB7IGluaXRUcmVlIH0gZnJvbSAiQC9hcGkvdHJlZS90cmVlIjsNCmltcG9ydCB7IGdldEhpZ2hMaWdodE1vZGUgfSBmcm9tICJAL2FwaS9jb25maWcvbGVnZW5kIjsNCg0KaW1wb3J0IHsgZ2V0VXJsS2V5IH0gZnJvbSAnQC91dGlscy9yZXF1ZXN0Jw0KDQoNCg0KDQovL+S4reW/g+WdkOaghw0KY29uc3QgY2VudGVyQ29yZGluYXRlID0gWzY1Njk1MS4yMjM3OTg5NCwgMzU2MDk1OS4yNjYyNjM2OV0NCi8v5Z2Q5qCH5a6a5LmJDQpwcm9qNC5kZWZzKCJFUFNHOjQ1NDgiLCAiK3Byb2o9dG1lcmMgK2xhdF8wPTAgK2xvbl8wPTExNyAraz0xICt4XzA9NTAwMDAwICt5XzA9MCArZWxscHM9R1JTODAgK3VuaXRzPW0gK25vX2RlZnMiKTsNCnJlZ2lzdGVyKHByb2o0KTsNCg0KLy/lnLDlm77liJ3lp4vljJYNCmNvbnN0IHZpZXcgPSBuZXcgVmlldyh7DQogIGNlbnRlcjogdHJhbnNmb3JtKGNlbnRlckNvcmRpbmF0ZSwgJ0VQU0c6NDU0OCcsICdFUFNHOjM4NTcnKSwNCiAgbWluWm9vbTogNCwNCiAgbWF4Wm9vbTogMTgsDQogIHpvb206IDE0LjUgLy8g5Zyw5Zu+5Yid5aeL5YyW55qE57yp5pS+57qn5YirDQp9KQ0KDQoNCi8v6auY5b635Zyw5Zu+5Zu+5bGCDQpjb25zdCBnYW9kZU1hcExheWVyID0gbmV3IFRpbGVMYXllcih7DQogIHNvdXJjZTogbmV3IFhZWih7DQogICAgekluZGV4OiAxLA0KICAgIHVybDogJ2h0dHA6Ly93ZWJzdDB7MS00fS5pcy5hdXRvbmF2aS5jb20vYXBwbWFwdGlsZT9sYW5nPXpoX2NuJnNpemU9MSZzY2w9MiZzdHlsZT03Jng9e3h9Jnk9e3l9Jno9e3p9Jw0KICB9KQ0KfSk7DQoNCi8v5Y2r5pif5Zyw5Zu+DQovLyBjb25zdCB3eE1hcExheWVyID0gbmV3IFRpbGVMYXllcih7DQovLyAgIHNvdXJjZTogbmV3IFhZWih7DQovLyAgICAgY3Jvc3NPcmlnaW46ICJhbm9ueW1vdXMiLA0KLy8gICAgIHVybDogJ2h0dHA6Ly90MC50aWFuZGl0dS5nb3YuY24vaW1nX3cvd210cz90az0xMjkzNjQxNjg1ODBlN2YwZTNmZjViZDc1OWQ0MWE3NSZTRVJWSUNFPVdNVFMmUkVRVUVTVD1HZXRUaWxlJlZFUlNJT049MS4wLjAmTEFZRVI9aW1nJlNUWUxFPWRlZmF1bHQmVElMRU1BVFJJWFNFVD13JlRJTEVNQVRSSVg9e3p9JlRJTEVST1c9e3l9JlRJTEVDT0w9e3h9JkZPUk1BVD10aWxlcycNCi8vICAgfSkNCi8vIH0pOw0KDQpjb25zdCB3eE1hcExheWVyID0gbmV3IFRpbGVMYXllcih7DQogIHNvdXJjZTogbmV3IFhZWih7DQogICAgdXJsOiAnaHR0cDovL3dlYnN0MHsxLTR9LmlzLmF1dG9uYXZpLmNvbS9hcHBtYXB0aWxlP2xhbmc9emhfY24mc2l6ZT0xJnNjYWxlPTEmc3R5bGU9NiZ4PXt4fSZ5PXt5fSZ6PXt6fScNCiAgfSkNCn0pOw0KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicHJvamVjdCIsDQogIG1peGluczogW2luZGV4XSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjOiAnMScsDQogICAgICB2YWx1ZTE6ICd0cnVlJywNCiAgICAgIHJhZGlvMjogW10sDQogICAgICBhZGRGb3JtOiB7DQogICAgICAgIHNEZXB0TmFtZTogJycsDQogICAgICAgIHNEZXB0SWQ6ICcnDQogICAgICB9LA0KICAgICAgLy/lm77lsYLlr7nosaHmlbDnu4QNCiAgICAgIGxheWVyQXJyYXk6IFtdLA0KICAgICAgLy/moJHnu5PmnoTmlbDmja4NCiAgICAgIHRyZWVEYXRhMjogW10sDQogICAgICAvL+m7mOiupOmAieS4reiKgueCuQ0KICAgICAgZGVmYXVsdENoZWNrZWRJZHM6IFtdLA0KICAgICAgLy/pu5jorqTmianlsZXoioLngrkNCiAgICAgIGRlZmF1bHRFeHBhbmRJZHM6IFtdLA0KICAgICAgLy/kuLTml7blm77niYflvLnmoYbmlbDnu4QNCiAgICAgIGltZ1BvcERpdkFycmF5OiBbXSwNCiAgICAgIG1hcmtMYXllckFycmF5OiBbXSwNCiAgICAgIGRlZmF1bHRQcm9wczogew0KICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywNCiAgICAgICAgbGFiZWw6ICdsYWJlbCcNCiAgICAgIH0sDQoNCiAgICAgIGltYWdlUG9wQXJyYXk6IFtdLA0KICAgICAgaW1hZ2VPdmVyTGF5QXJyYXk6IFtdLA0KICAgICAgdGV4dE1hcmtMYXllck5tQXJyYXk6IFtdLA0KDQogICAgICBtYXJrTWluWm9vbTogMTQuNSwNCiAgICAgIG1hcmtGbGFnOiBmYWxzZSwNCiAgICAgIG1hcmtWZWN0b3JBcnJheTogW10sDQogICAgICBzaG93R2s6IGZhbHNlLA0KICAgICAgc2hvd0J6OiBmYWxzZSwNCiAgICAgIHByb2plY3ROYW1lOiAnJywNCiAgICAgIHN0YXJ0OiAnJywNCiAgICAgIGVuZDogJycsDQogICAgICBwcm9qZWN0RGVzYzogJycsDQogICAgICBsZW5ndGg6ICcnLA0KICAgICAgenR6OiAnJywNCiAgICAgIHN0YXR1czogJycsDQogICAgICBiejogJycsDQogICAgICBrY3NqZmZoOiAnJywNCiAgICAgIGlzRHJhZ2FibGU6IGZhbHNlLC8v5piv5ZCm5Y+v5Lul5ouW5YqoDQogICAgICBjdXJyZW50WDogJycsIC8v54K55Ye75pe26byg5qCH6Led5bem6L6555qE6Led56a7DQogICAgICBjdXJyZW50WTogJycsLy/ngrnlh7vml7bpvKDmoIfot53pobbovrnnmoTot53nprsNCiAgICAgIG9ialg6ICcnLCAvL+eCueWHu+aXtuWFg+e0oOi3neW3pui+ueeahOi3neemuw0KICAgICAgb2JqWTogJycsIC8v54K55Ye75pe25YWD57Sg6Led6aG26L6555qE6Led56a7DQogICAgICBhY3RpdmVCdG46ICcyJw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQoNCg0KICAgIC8v6I635Y+W6I+c5Y2VSUQNCiAgICB0aGlzLm1lbnVJZCA9IGdldFVybEtleSgnbWVudUlkJyk7DQogICAgLy/moLnmja7oj5zljZVJROafpeivoue7hOS7tuS/oeaBrw0KICAgIHRoaXMuZmluZENvbXBvbmVudEluZm8odGhpcyk7DQogICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCg0KICB9LA0KDQogIHdhdGNoOiB7DQoNCiAgICBkZWZhdWx0Q2hlY2tlZElkczogZnVuY3Rpb24gKCkgew0KICAgICAgLy/liJ3lp4vljJblnLDlm74NCiAgICAgIHRoaXMuaW5pdExheWVyVG9NYXBXZnModGhpcyk7DQogICAgICAvL+a3u+WKoOiHquWumuS5ieWbvuWxgg0KICAgICAgbGV0IGNoZWNrZWRJZHMgPSB0aGlzLmdldFRyZWVjaGVja2VkSWQodGhpcy50cmVlRGF0YTIpOw0KICAgICAgdGhpcy5hZGRWZWN0b3JMYXllcldmcyhjaGVja2VkSWRzKTsNCiAgICB9DQogIH0sDQoNCg0KDQoNCg0KICBtZXRob2RzOiB7DQoNCg0KDQoNCiAgICBmaW5kQ29tcG9uZW50SW5mbyAoX3RoaXMpIHsNCiAgICAgIGZpbmRDb21wb25lbnRJbmZvKHRoaXMubWVudUlkLCBudWxsKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIGxldCBsZWdlbmRDb25maWdEYXRhID0gcmVzcG9uc2UuZGF0YS5kZWNMZWdlbmRDb25maWdMaXN0Ow0KICAgICAgICBpZiAobGVnZW5kQ29uZmlnRGF0YSAmJiBsZWdlbmRDb25maWdEYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAvL+iuvue9ruagkeiKgueCueaVsOaNrg0KICAgICAgICAgIGxldCB0cmVlRGF0YV8gPSBsZWdlbmRDb25maWdEYXRhWzBdOw0KICAgICAgICAgIC8v6ZqQ6JeP6K6+572u55qE6IqC54K5DQogICAgICAgICAgX3RoaXMudHJlZURhdGEyID0gdHJlZURhdGFfOw0KICAgICAgICAgIC8v6K6+572u6aG257qn6I+c5Y2V6YCJ5LitDQogICAgICAgICAgbGV0IGV4cGFuZElkcyA9IFtdOw0KICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdHJlZURhdGFfLmxlbmd0aDsgaysrKSB7DQogICAgICAgICAgICBsZXQgaXRlbSA9IHRyZWVEYXRhX1trXTsNCiAgICAgICAgICAgIGlmIChpdGVtLnBhcmVudElkID09IG51bGwpIHsNCiAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuXyA9IGl0ZW0uY2hpbGRyZW47DQogICAgICAgICAgICAgIGlmIChjaGlsZHJlbl8gIT0gbnVsbCAmJiBjaGlsZHJlbl8ubGVuZ3RoICE9IDApIHsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNoaWxkcmVuXy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICAgICAgZXhwYW5kSWRzLnB1c2goY2hpbGRyZW5fW2pdLmlkKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZXhwYW5kSWRzLnB1c2goaXRlbS5pZCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgLy/pu5jorqTlsZXlsZXlvIDkuoznuqfoj5zljZUNCiAgICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRJZHMgPSBleHBhbmRJZHM7DQogICAgICAgICAgdGhpcy5kZWZhdWx0Q2hlY2tlZElkcyA9IF90aGlzLmdldFRyZWVjaGVja2VkSWQodHJlZURhdGFfKTsNCiAgICAgICAgfQ0KDQogICAgICB9KTsNCiAgICB9LA0KDQoNCg0KICAgIC8vIOWIneWni+WMluWcsOWbvg0KICAgIGluaXRMYXllclRvTWFwV2ZzIChfdGhpcykgew0KDQogICAgICBjb25zdCBtYXBDb250YWluZXIgPSBfdGhpcy4kcmVmcy5tYXANCiAgICAgIHd4TWFwTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSkNCiAgICAgIGxldCBsYXllcnMgPSBbZ2FvZGVNYXBMYXllciwgd3hNYXBMYXllcl07DQogICAgICAvL+WwhuWbvuWxguWKoOWFpU1hcA0KICAgICAgY29uc3QgbWFwID0gbmV3IE1hcCh7DQogICAgICAgIGxheWVyczogbGF5ZXJzLA0KICAgICAgICB0YXJnZXQ6IG1hcENvbnRhaW5lciwNCiAgICAgICAgdmlldzogdmlldw0KICAgICAgfSk7DQogICAgICAvLyDmt7vliqDpvKDmoIfngrnlh7vkuovku7YNCiAgICAgIG1hcC5vbignY2xpY2snLCBfdGhpcy5tYXBDbGljayk7DQogICAgICBtYXAub24oJ21vdmVlbmQnLCB0aGlzLm1hcE1vdmVlbmQpOw0KICAgICAgLy8g5L+d5a2Y5Zyw5Zu+DQogICAgICBfdGhpcy5tYXBEYXRhID0gbWFwDQogICAgfSwNCg0KICAgIGFzc2VtYmxlTGF5ZXJJdGVtcyAoaXRlbSwgYXJyLCBtLCBjaGVja2VkQXJyYXkpIHsNCiAgICAgIHZhciBuZXdJdGVtID0gbnVsbDsNCiAgICAgIGlmIChpdGVtLmxheWVyTmFtZSAhPSBudWxsKSB7DQogICAgICAgIHZhciBuZWVkQWRkID0gaXRlbS5maWx0ZXJWYWx1ZSB8fCAoaXRlbS5jaGlsZHJlbiAhPSBudWxsICYmIGl0ZW0uY2hpbGRyZW4gIT0gdW5kZWZpbmVkKTsNCiAgICAgICAgaWYgKCFuZWVkQWRkKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IGV4aXN0SXRlbTsNCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgaWYgKG1bal0ubGF5ZXJOYW1lID09IGl0ZW0ubGF5ZXJOYW1lKSB7DQogICAgICAgICAgICBleGlzdEl0ZW0gPSBtW2pdOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGV4aXN0SXRlbSAhPSBudWxsKSB7DQogICAgICAgICAgYXJyID0gZXhpc3RJdGVtLnRyZWVEYXRhSXRlbTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBhcnIgPSBbXTsNCiAgICAgICAgICBuZXdJdGVtID0ge307DQogICAgICAgICAgbmV3SXRlbS50cmVlRGF0YUl0ZW0gPSBhcnI7DQogICAgICAgICAgbmV3SXRlbS5sYXllck5hbWUgPSBpdGVtLmxheWVyTmFtZTsNCiAgICAgICAgICBuZXdJdGVtLmZpbHRlcktleSA9IGl0ZW0uZmlsdGVyS2V5Ow0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8v6YCJ5Lit54q25oCBDQogICAgICB2YXIgaWRJbmRleCA9IGNoZWNrZWRBcnJheS5maW5kSW5kZXgoaXRlbTIgPT4gew0KICAgICAgICByZXR1cm4gaXRlbTIgPT0gaXRlbS5pZDsNCiAgICAgIH0pOw0KDQogICAgICBpZiAoaWRJbmRleCAhPSAtMSkgew0KICAgICAgICBpZiAobmV3SXRlbSAhPSBudWxsKSB7DQogICAgICAgICAgbS5wdXNoKG5ld0l0ZW0pOw0KICAgICAgICB9DQogICAgICAgIGlmIChpdGVtLmZpbHRlclZhbHVlICE9IG51bGwpIHsNCiAgICAgICAgICBhcnIucHVzaChpdGVtKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbiAhPSBudWxsICYmIGl0ZW0uY2hpbGRyZW4gIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGkgPT4gew0KICAgICAgICAgICAgdGhpcy5hc3NlbWJsZUxheWVySXRlbXMoaSwgYXJyLCBtLCBjaGVja2VkQXJyYXkpOw0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy/pgJLlvZLojrfoioLngrnkv6Hmga8NCiAgICBnZXRDaGVja2VkSWRzUmVjdXIgKGl0ZW0sIGlkc18pIHsNCiAgICAgIGlmIChpdGVtLmlkICYmIGl0ZW0uY2hlY2tTdGF0dXMgPT0gJ1knKSB7DQogICAgICAgIGlkc18gPSAoaWRzXyA9PSBudWxsID8gW10gOiBpZHNfKTsNCiAgICAgICAgaWRzXy5wdXNoKGl0ZW0uaWQpOw0KICAgICAgfQ0KICAgICAgLy/lpoLmnpzlrZDoioLngrnpgInkuK3vvIzpnIDopoHlsIbniLboioLljYrpgInkuK3nirbmgIHoioLngrnliqDlhaUNCiAgICAgIGxldCBjdXJyZW50TGVuID0gaWRzXy5sZW5ndGg7DQogICAgICBpZiAoaXRlbS5jaGlsZHJlbiAhPSBudWxsKSB7DQogICAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICB0aGlzLmdldENoZWNrZWRJZHNSZWN1cihpdGVtLCBpZHNfKQ0KICAgICAgICB9KQ0KICAgICAgICBpZiAoY3VycmVudExlbiA8IGlkc18ubGVuZ3RoICYmIGlkc18uaW5kZXhPZihpdGVtLmlkKSA9PSAtMSkgew0KICAgICAgICAgIGlkc18ucHVzaChpdGVtLmlkKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvL+iOt+WPluagkeaJgOacieeahOiKgueCueS/oeaBrw0KICAgIGdldFRyZWVjaGVja2VkSWQgKHRyZWVEYXRhKSB7DQogICAgICBsZXQgaWRzID0gW107DQogICAgICB0cmVlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICB0aGlzLmdldENoZWNrZWRJZHNSZWN1cihpdGVtLCBpZHMpOw0KICAgICAgfSkNCiAgICAgIHJldHVybiBpZHM7DQogICAgfSwNCg0KDQoNCiAgICBpbml0U2luZ2xlTGF5ZXIgKGZlYXR1cmVzRGF0YSwgcGFyYW0sIGRhdGFJdGVtLCBfdGhpcykgew0KICAgICAgbGV0IGxheWVyTmFtZSA9IHBhcmFtLmxheWVyTmFtZTsNCiAgICAgIGxldCB2ZWN0b3JTb3VyY2VUbXA7DQogICAgICBpZiAobGF5ZXJOYW1lID09ICdUZXN0Onh6eHcnIHx8IGxheWVyTmFtZSA9PSAnVGVzdDpqcXh3JyB8fCBsYXllck5hbWUgPT0gJ1Rlc3Q6eXF4dycpIHsNCiAgICAgICAgdmVjdG9yU291cmNlVG1wID0gbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgZmVhdHVyZXM6IChuZXcgR2VvSlNPTih7IGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3JywgZGF0YVByb2plY3Rpb246ICdFUFNHOjQzMjYnIH0pKS5yZWFkRmVhdHVyZXMoZmVhdHVyZXNEYXRhKQ0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHZlY3RvclNvdXJjZVRtcCA9IG5ldyBWZWN0b3JTb3VyY2Uoew0KICAgICAgICAgIGZlYXR1cmVzOiAobmV3IEdlb0pTT04oeyBmZWF0dXJlUHJvamVjdGlvbjogJ0VQU0c6Mzg1NycsIGRhdGFQcm9qZWN0aW9uOiAnRVBTRzo0NTQ4JyB9KSkucmVhZEZlYXR1cmVzKGZlYXR1cmVzRGF0YSkNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBsZXQgdmVjdG9yTGF5ZXJUbXAgPSBuZXcgVmVjdG9yTGF5ZXIoew0KICAgICAgICBzb3VyY2U6IHZlY3RvclNvdXJjZVRtcCwNCiAgICAgICAgbmFtZTogbGF5ZXJOYW1lLA0KICAgICAgICBmaWx0ZXJWYWw6IHBhcmFtLmZpbHRlclZhbCwNCiAgICAgICAgc3R5bGU6IChmZWF0dXJlLCBzb2x1dGlvbikgPT4gew0KICAgICAgICAgIHJldHVybiBfdGhpcy5pbml0TGF5ZXJTdHlsZShmZWF0dXJlLCBkYXRhSXRlbSwgdmVjdG9yTGF5ZXJUbXApOw0KICAgICAgICB9DQogICAgICB9KQ0KDQogICAgICBjb25zb2xlLmxvZyhwYXJhbS5sYXllck5hbWUgKyAiOiIgKyBwYXJhbS5maWx0ZXJWYWwpOw0KICAgICAgX3RoaXMubWFwRGF0YS5hZGRMYXllcih2ZWN0b3JMYXllclRtcCk7DQogICAgICBfdGhpcy5sYXllckFycmF5LnB1c2godmVjdG9yTGF5ZXJUbXApOw0KDQogICAgfSwNCg0KDQoNCiAgICAvL+a3u+WKoOWNleS4quWbvuWxguS/oeaBrw0KICAgIGFkZFNpbmdsZUxheWVyIChfdGhpcywgbGF5ZXJOYW1lLCBkYXRhSXRlbSkgew0KICAgICAgbGV0IGZpbHRlcktleSA9IGRhdGFJdGVtLmZpbHRlcktleTsNCiAgICAgIGxldCBmaWx0ZXJWYWwgPSBkYXRhSXRlbS5maWx0ZXJWYWx1ZTsNCiAgICAgIGlmICghbGF5ZXJOYW1lIHx8ICFmaWx0ZXJWYWwpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdmFyIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy9UZXN0L293cz9zZXJ2aWNlPVdGUyZ2ZXJzaW9uPTEuMC4wJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGxheWVyTmFtZSkNCiAgICAgICAgKyAnJm1heEZlYXR1cmVzPTUwMDAwMDAwMCZvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24lMkZqc29uJmNxbF9maWx0ZXI9JyArIGVuY29kZVVSSUNvbXBvbmVudChmaWx0ZXJLZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KCInIiArIGZpbHRlclZhbCArICInIik7DQogICAgICBsZXQgcGFyYW0gPSB7DQogICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLA0KICAgICAgICBmaWx0ZXJWYWw6IGZpbHRlclZhbA0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2coZGVjb2RlVVJJQ29tcG9uZW50KHVybCkpDQogICAgICBheGlvcy5nZXQodXJsLCBwYXJhbSwgeyB0aW1lb3V0OiAxMjAwMDAwIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgew0KICAgICAgICB2YXIgZmVhdHVyZXNEYXRhID0gcmVzLmRhdGE7DQogICAgICAgIGlmIChmZWF0dXJlc0RhdGEpIHsNCg0KICAgICAgICAgIF90aGlzLmluaXRTaW5nbGVMYXllcihmZWF0dXJlc0RhdGEsIHBhcmFtLCBkYXRhSXRlbSwgX3RoaXMpDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KDQogICAgLy/moLnmja7lm77lsYLlkI3lrZfku6Xlj4rov4fmu6TlsZ7mgKflgLzojrflj5blm77lsYLkv6Hmga8o57q/5ZKM6Z2i5paH5Lu25ZCM5pe25p+l6K+i5aSE55CGKQ0KICAgIGdldEFyZWFMaW5lTGF5cyAobGF5ZXJOYW1lLCBmaWx0ZXJWYWwpIHsNCiAgICAgIGxldCBhcnJheXNfID0gW107DQogICAgICBsZXQgaXNFcXVhbCA9IGZhbHNlOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFyZWFMaW5lRmlsdGVyVmFscy5sZW5ndGg7IGkrKykgew0KICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5hcmVhTGluZUZpbHRlclZhbHNbaV0pIHsNCiAgICAgICAgICBpZiAoYXJyYXlzXy5pbmRleE9mKGtleSkgPT0gLTEpIHsNCiAgICAgICAgICAgIGFycmF5c18ucHVzaChrZXkpDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChrZXkgPT0gbGF5ZXJOYW1lICYmIHRoaXMuYXJlYUxpbmVGaWx0ZXJWYWxzW2ldW2xheWVyTmFtZV0gPT0gZmlsdGVyVmFsKSB7DQogICAgICAgICAgICBpc0VxdWFsID0gdHJ1ZTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGlzRXF1YWwpIHsNCiAgICAgICAgcmV0dXJuIGFycmF5c187DQogICAgICB9IGVsc2Ugew0KICAgICAgICBhcnJheXNfID0gW107DQogICAgICAgIGFycmF5c18ucHVzaChsYXllck5hbWUpDQogICAgICAgIHJldHVybiBhcnJheXNfOw0KICAgICAgfQ0KICAgIH0sDQoNCg0KICAgIGFkZFZlY3RvckxheWVyV2ZzIChjaGVja2VkQXJyYXkpIHsNCiAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgICBsZXQgY2hlY2tlZExheWVyTWFwID0gdGhpcy5nZXRMYXllck1hcChjaGVja2VkQXJyYXkpOw0KICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjaGVja2VkTGF5ZXJNYXAubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgbGV0IGl0ZW0gPSBjaGVja2VkTGF5ZXJNYXBba107DQogICAgICAgIGxldCB0cmVlRGF0YUl0ZW1zXyA9IGl0ZW0udHJlZURhdGFJdGVtOw0KICAgICAgICBsZXQgbGF5ZXJOYW1lXyA9IGl0ZW0ubGF5ZXJOYW1lOw0KICAgICAgICBpZiAoIXRyZWVEYXRhSXRlbXNfIHx8IHRyZWVEYXRhSXRlbXNfLmxlbmd0aCA9PSAwIHx8ICFsYXllck5hbWVfKSB7DQogICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlRGF0YUl0ZW1zXy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHZhciBmaWx0ZXJWYWwgPSB0cmVlRGF0YUl0ZW1zX1tpXS5maWx0ZXJWYWx1ZTsNCiAgICAgICAgICB2YXIgZmlsdGVyS2V5ID0gdHJlZURhdGFJdGVtc19baV0uZmlsdGVyS2V5Ow0KICAgICAgICAgIGlmICghZmlsdGVyS2V5IHx8ICFmaWx0ZXJWYWwpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgLy/lpITnkIbnur/lkozpnaLkuKTovrnpg73lrZjlnKjmlbDmja7nmoTmg4XlhrUNCiAgICAgICAgICAgIGxldCBsYXllckZpbGVBcnJheSA9IHRoaXMuZ2V0QXJlYUxpbmVMYXlzKGxheWVyTmFtZV8sIGZpbHRlclZhbCk7DQogICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IGxheWVyRmlsZUFycmF5Lmxlbmd0aDsgbSsrKSB7DQogICAgICAgICAgICAgIHRoaXMuYWRkU2luZ2xlTGF5ZXIodGhpcywgbGF5ZXJGaWxlQXJyYXlbbV0sIHRyZWVEYXRhSXRlbXNfW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLlm77lsYLvvJoiICsgbGF5ZXJOYW1lXyArICLov4fmu6TlgLzvvJoiICsgZmlsdGVyVmFsICsgIuivt+axguW8guW4uO+8miIsIGVycik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICAvL30pDQogICAgfSwNCg0KDQoNCiAgICBnZXRMYXllck1hcCAoY2hlY2tlZEFycmF5KSB7DQogICAgICBpZiAoY2hlY2tlZEFycmF5ID09IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgICB2YXIgbGF5ZXJNYXAgPSBbXTsNCiAgICAgIHRoaXMudHJlZURhdGEyLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIHRoaXMuYXNzZW1ibGVMYXllckl0ZW1zKGl0ZW0sIG51bGwsIGxheWVyTWFwLCBjaGVja2VkQXJyYXkpOw0KICAgICAgfSkNCg0KICAgICAgbGF5ZXJNYXAgPSBsYXllck1hcC5maWx0ZXIoaXRlbSA9PiAoaXRlbS5sYXllck5hbWUgJiYgaXRlbS5maWx0ZXJLZXkpKQ0KDQogICAgICByZXR1cm4gbGF5ZXJNYXA7DQogICAgfSwNCg0KDQogICAgY3JlYXRlUG9pbnRTdHlsZSAoZmVhdHVyZSwgaXRlbSkgew0KICAgICAgaWYgKCFpdGVtKSB7DQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgICB9DQogICAgICBsZXQgc3R5bGVzID0gW107DQoNCiAgICAgIGxldCBzdHlsZSA9IG5ldyBPbFN0eWxlU3R5bGUoew0KICAgICAgICAvL+Wbvuagh+agt+W8jw0KICAgICAgICAvLyBpbWFnZTogbmV3IE9sU3R5bGVJY29uKHsNCiAgICAgICAgLy8gICBhbmNob3I6IFsxMCwgMThdLA0KICAgICAgICAvLyAgIHNjYWxlOiAxLA0KICAgICAgICAvLyAgIGFuY2hvck9yaWdpbjogJ3RvcC1yaWdodCcsDQogICAgICAgIC8vICAgYW5jaG9yWFVuaXRzOiAncGl4ZWxzJywNCiAgICAgICAgLy8gICBhbmNob3JZVW5pdHM6ICdwaXhlbHMnLA0KICAgICAgICAvLyAgIG9mZnNldE9yaWdpbjogJ2JvdHRvbS1sZWZ0JywNCiAgICAgICAgLy8gICBvcGFjaXR5OiAxLA0KICAgICAgICAvLyAgIHNyYzogcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9tYXJrLnBuZycpLA0KICAgICAgICAvLyB9KSwNCiAgICAgICAgLy/mlofmnKzmoLflvI8NCiAgICAgICAgdGV4dDogbmV3IFRleHQoew0KICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsDQogICAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJywNCiAgICAgICAgICBmb250OiAnbm9ybWFsIDAuMTVyZW0g5b6u6L2v6ZuF6buRJywNCiAgICAgICAgICB0ZXh0OiBmZWF0dXJlLnZhbHVlc18ubmFtZSwNCiAgICAgICAgICBvZmZzZXRZOiAtMjUsDQogICAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgICAgY29sb3I6IGZlYXR1cmUudmFsdWVzXy5mb250X2NvbG9yDQogICAgICAgICAgfSksDQogICAgICAgICAgcm90YXRpb246IGZlYXR1cmUudmFsdWVzXy5mb250X2FuZ2xlICogTWF0aC5QSSAvIDE4MCwNCiAgICAgICAgICBwYWRkaW5nOiBbMiwgNSwgMiwgNV0sDQogICAgICAgIH0pLA0KICAgICAgICAvLyDorr7nva7lsYLnuqcNCiAgICAgICAgekluZGV4OiAxOTk5OTk5OTk5DQogICAgICB9KTsNCiAgICAgIHN0eWxlcy5wdXNoKHN0eWxlKTsNCiAgICAgIHJldHVybiBzdHlsZXM7DQogICAgfSwNCg0KDQogICAgLy/liJ3lp4vopoHntKDmoLflvI8NCiAgICBpbml0TGF5ZXJTdHlsZSAoZmVhdHVyZSwgaXRlbSwgdmVjdG9yTGF5ZXJUbXApIHsNCiAgICAgIGxldCBmaWxlVHlwZSA9IGZlYXR1cmUudmFsdWVzXy5maWxlX3R5cGU7DQogICAgICBpZiAoZmVhdHVyZS52YWx1ZXNfLmdlb21ldHJ5IGluc3RhbmNlb2YgUG9pbnQpIHsNCiAgICAgICAgaWYgKGZpbGVUeXBlICYmIGZpbGVUeXBlID09ICdpbWFnZScpIHsNCiAgICAgICAgICAvL+WbvueJh+W8ueahhuagt+W8jw0KICAgICAgICAgIGZlYXR1cmUudmFsdWVzXy5zcmMgPSByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvaW1nX21hcmsucG5nIik7DQogICAgICAgICAgaWYgKHRoaXMuaW1hZ2VQb3BBcnJheS5pbmRleE9mKGZlYXR1cmUudmFsdWVzXy5uYW1lKSA9PSAtMSkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZmVhdHVyZS52YWx1ZXNfLm5hbWUpOw0KICAgICAgICAgICAgdGhpcy5pbWFnZVBvcEFycmF5LnB1c2goZmVhdHVyZS52YWx1ZXNfLm5hbWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVJbWFnZU1hcmtTdHlsZShmZWF0dXJlLCB2ZWN0b3JMYXllclRtcCk7DQoNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsZXQgbGF5ZXJOYW1lID0gdmVjdG9yTGF5ZXJUbXAudmFsdWVzXy5uYW1lOw0KICAgICAgICAgIGlmICh0aGlzLnRleHRNYXJrTGF5ZXJObUFycmF5LmluZGV4T2YobGF5ZXJOYW1lKSA9PSAtMSkgew0KICAgICAgICAgICAgdmVjdG9yTGF5ZXJUbXAuc2V0VmlzaWJsZShmYWxzZSkNCiAgICAgICAgICAgIHZlY3RvckxheWVyVG1wLnNldCgnaW5pdEhpZGUnLCB0cnVlKQ0KICAgICAgICAgICAgdGhpcy50ZXh0TWFya0xheWVyTm1BcnJheS5wdXNoKGxheWVyTmFtZSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHZlY3RvckxheWVyVG1wLnZhbHVlc18uekluZGV4ID0gOTk5OTk5OTk5OTk5OTkNCiAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVQb2ludFN0eWxlKGZlYXR1cmUsIGl0ZW0pOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdGhpcy5pbml0R3JhcGhTdHlsZShmZWF0dXJlLCBpdGVtKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgZ2V0U3R5bGVTZXR0aW5nIChmZWF0dXJlLCBpdGVtKSB7DQogICAgICBsZXQgc3R5bGUgPSB7fTsNCiAgICAgIGxldCBzdHJva2VDb2xvciA9IGl0ZW0uc3Ryb2tlQ29sb3IgPyBpdGVtLnN0cm9rZUNvbG9yIDogKGZlYXR1cmUuZ2V0KCdib3JkZXJfY29sJykgPyBmZWF0dXJlLmdldCgnYm9yZGVyX2NvbCcpIDogZmVhdHVyZS5nZXQoJ2xpbmVfY29sb3InKSkNCiAgICAgIGxldCBmaWxsQ29sb3IgPSBpdGVtLmZpbGxDb2xvciA/IGl0ZW0uZmlsbENvbG9yIDogZmVhdHVyZS5nZXQoJ2ZpbGxfY29sb3InKQ0KICAgICAgbGV0IHN0cm9rZVdpZHRoID0gaXRlbS53aWR0aCA/IGl0ZW0ud2lkdGggOiAoZmVhdHVyZS5nZXQoJ2JvcmRlcl93aWQnKSA/IGZlYXR1cmUuZ2V0KCdib3JkZXJfd2lkJykgOiBmZWF0dXJlLmdldCgnbGluZV93aWR0aCcpKQ0KICAgICAgc3R5bGUuc3Ryb2tlQ29sb3IgPSBzdHJva2VDb2xvcjsNCiAgICAgIHN0eWxlLmZpbGxDb2xvciA9IGZpbGxDb2xvcjsNCiAgICAgIHN0eWxlLnN0cm9rZVdpZHRoID0gc3Ryb2tlV2lkdGg7DQogICAgICByZXR1cm4gc3R5bGU7DQogICAgfSwNCg0KDQoNCg0KICAgIGluaXRHcmFwaFN0eWxlIChmZWF0dXJlLCBpdGVtKSB7DQogICAgICBsZXQgc3R5bGVzID0gW107DQogICAgICB2YXIgZmlsbF9zdHlsZSA9IGZlYXR1cmUuZ2V0KCJmaWxsX3N0eWxlIik7DQogICAgICBpZiAoIWl0ZW0pIHsNCiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgIH0NCiAgICAgIGxldCBzdHlsZVNldHRpbmcgPSB0aGlzLmdldFN0eWxlU2V0dGluZyhmZWF0dXJlLCBpdGVtKTsNCiAgICAgIHZhciBkYXNoT2Zmc2V0ID0gaXRlbS5kYXNoT2Zmc2V0Ow0KICAgICAgdmFyIGRhc2hhcnJheSA9IGl0ZW0uZGFzaEFycmF5Ow0KICAgICAgdmFyIGxpbmVDb2xvciA9IHN0eWxlU2V0dGluZy5zdHJva2VDb2xvcjsNCiAgICAgIHZhciBmaWxsQ29sb3IgPSBzdHlsZVNldHRpbmcuZmlsbENvbG9yOw0KICAgICAgbGV0IHN0cm9rZVdpZHRoID0gc3R5bGVTZXR0aW5nLnN0cm9rZVdpZHRoOw0KICAgICAgbGV0IHN0eWxlID0gbmV3IFN0eWxlKCk7DQogICAgICAvLyAvL+e6v+adoeminOiJsg0KICAgICAgLy8gbGV0IHN0cm9rZUNvbG9yID0gaXRlbS5zdHJva2VDb2xvcjsNCiAgICAgIC8vIGxldCBzdHJva2VXaWR0aCA9IGl0ZW0ud2lkdGg7DQogICAgICBsZXQgc3Ryb2tlID0gbnVsbDsNCiAgICAgIGlmIChsaW5lQ29sb3IpIHsNCiAgICAgICAgc3Ryb2tlID0gbmV3IFN0cm9rZSh7DQogICAgICAgICAgY29sb3I6IGxpbmVDb2xvciwNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIC8vIGlmIChzdHJva2UgPT0gbnVsbCAmJiBzdHJva2VDb2xvciAhPSBudWxsKSB7DQogICAgICAvLyAgIHN0cm9rZSA9IG5ldyBTdHJva2Uoew0KICAgICAgLy8gICAgIGNvbG9yOiBzdHJva2VDb2xvciwNCiAgICAgIC8vICAgfSkNCiAgICAgIC8vIH0NCiAgICAgIGlmIChzdHJva2VXaWR0aCkgew0KICAgICAgICBpZiAoc3Ryb2tlID09IG51bGwpIHsNCiAgICAgICAgICBzdHJva2UgPSBuZXcgU3Ryb2tlKHsNCiAgICAgICAgICAgIHdpZHRoOiBzdHJva2VXaWR0aCwNCiAgICAgICAgICB9KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHN0cm9rZS53aWR0aF8gPSBzdHJva2VXaWR0aDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGRhc2hPZmZzZXQpIHsNCg0KICAgICAgICBzdHJva2UubGluZURhc2hPZmZzZXRfID0gZGFzaE9mZnNldDsNCiAgICAgIH0NCiAgICAgIGlmIChkYXNoYXJyYXkpIHsNCg0KICAgICAgICBzdHJva2UubGluZURhc2hfID0gZGFzaGFycmF5LnNwbGl0KCIsIik7DQogICAgICB9DQogICAgICBzdHlsZS5zdHJva2VfID0gc3Ryb2tlOw0KICAgICAgLy/loavlhYXpopzoibINCiAgICAgIGlmIChmaWxsQ29sb3IgJiYgZmlsbF9zdHlsZSAhPSAnJyAmJiBmaWxsX3N0eWxlICE9ICdObyBGaWxsJykgew0KICAgICAgICBsZXQgZmlsbCA9IG5ldyBGaWxsKHsNCiAgICAgICAgICBjb2xvcjogZmlsbENvbG9yDQogICAgICAgIH0pDQogICAgICAgIHN0eWxlLmZpbGxfID0gZmlsbDsNCiAgICAgIH0NCg0KICAgICAgc3R5bGVzLnB1c2goc3R5bGUpOw0KICAgICAgcmV0dXJuIHN0eWxlczsNCiAgICB9LA0KDQoNCg0KICAgIGhhbmRsZUNoZWNrQ2hhbmdlIChkYXRhXykgew0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgbGV0IGhhbGZDaGVja05vZGUgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0SGFsZkNoZWNrZWROb2RlcygpOw0KICAgICAgbGV0IGhhbGZDaGVja0lkcyA9IFtdOw0KICAgICAgaGFsZkNoZWNrTm9kZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBoYWxmQ2hlY2tJZHMucHVzaChpdGVtLmlkKQ0KICAgICAgfSk7DQogICAgICAvL+iOt+WPlumAieS4reS7peWPiuWNiumAieS4reiKgueCuQ0KICAgICAgdmFyIGNoZWNrZWRBcnJheSA9IHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cyhmYWxzZSk7DQogICAgICBjaGVja2VkQXJyYXkgPSBjaGVja2VkQXJyYXkuY29uY2F0KGhhbGZDaGVja0lkcyk7DQogICAgICBsZXQgY2hlY2tlZExheWVyQXJyYXkgPSB0aGlzLmdldExheWVyTWFwKGNoZWNrZWRBcnJheSk7DQogICAgICBsZXQgY3VycmVudExheWVycyA9IHRoaXMubGF5ZXJBcnJheTsNCiAgICAgIC8v5aaC5p6c5b2T5YmN6YCJ5Lit5pWw57uE5Li656m677yM5b2T5YmN5omA5pyJ5Zu+5bGC6ZqQ6JePDQogICAgICBpZiAoY2hlY2tlZExheWVyQXJyYXkgPT0gbnVsbCB8fCBjaGVja2VkTGF5ZXJBcnJheS5sZW5ndGggPT0gMCkgew0KICAgICAgICBjdXJyZW50TGF5ZXJzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaXRlbS5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICAgIC8vdGhpcy5zZXRMYXllclZpc2libGUoaXRlbSwgZmFsc2UpOw0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICAvL+iOt+WPluW+hea3u+WKoOeahOWbvuWxgijlm77kvovmoJHliJ3lp4vljJbpg6jliIbpgInkuK0pDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrZWRMYXllckFycmF5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICghY2hlY2tlZExheWVyQXJyYXlbaV0ubGF5ZXJOYW1lKSB7DQogICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgbGV0IHRyZWVEYXRhSXRlbSA9IGNoZWNrZWRMYXllckFycmF5W2ldLnRyZWVEYXRhSXRlbTsNCiAgICAgICAgaWYgKCF0cmVlRGF0YUl0ZW0pIHsNCiAgICAgICAgICBjdXJyZW50TGF5ZXJzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBpZiAoaXRlbS52YWx1ZXNfLm5hbWUgPT0gY2hlY2tlZExheWVyQXJyYXlbaV0ubGF5ZXJOYW1lKSB7DQogICAgICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZShmYWxzZSkNCg0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0cmVlRGF0YUl0ZW0ubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBsZXQgaXRlbSA9IHRyZWVEYXRhSXRlbVtqXTsNCiAgICAgICAgICBsZXQgZXhpc3QgPSBmYWxzZTsNCiAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBuKyspIHsNCiAgICAgICAgICAgIGxldCBsYXllciA9IGN1cnJlbnRMYXllcnNbbl07DQogICAgICAgICAgICBpZiAobGF5ZXIudmFsdWVzXy5maWx0ZXJWYWwgPT0gaXRlbS5maWx0ZXJWYWx1ZSAmJg0KICAgICAgICAgICAgICBsYXllci52YWx1ZXNfLm5hbWUgPT0gY2hlY2tlZExheWVyQXJyYXlbaV0ubGF5ZXJOYW1lKSB7DQogICAgICAgICAgICAgIGV4aXN0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh0cnVlKQ0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8v5paw5aKe5Zu+5bGCDQogICAgICAgICAgaWYgKCFleGlzdCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coIuaWsOWinuWbvuWxgj09PT09PT09PT09PT09PT09PT09PT09Iik7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGVja2VkTGF5ZXJBcnJheVtpXS5sYXllck5hbWUpOw0KICAgICAgICAgICAgLy/lpITnkIbnur/lkozpnaLkuKTovrnpg73lrZjlnKjmlbDmja7nmoTmg4XlhrUNCiAgICAgICAgICAgIGxldCBsYXllckZpbGVBcnJheSA9IHRoaXMuZ2V0QXJlYUxpbmVMYXlzKGNoZWNrZWRMYXllckFycmF5W2ldLmxheWVyTmFtZSwgaXRlbS5maWx0ZXJWYWx1ZSk7DQogICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IGxheWVyRmlsZUFycmF5Lmxlbmd0aDsgbSsrKSB7DQogICAgICAgICAgICAgIHRoaXMuYWRkU2luZ2xlTGF5ZXIodGhpcywgbGF5ZXJGaWxlQXJyYXlbbV0sIGl0ZW0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8v6ZqQ6JeP5Y+W5raI5Yu+6YCJ55qE5Zu+5bGCDQogICAgICBpZiAoIWN1cnJlbnRMYXllcnMgfHwgY3VycmVudExheWVycy5sZW5ndGggPT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgZXhpc3RMYXllciA9IFtdOw0KICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaysrKSB7DQogICAgICAgIGxldCBleGlzdCA9IGZhbHNlOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoZWNrZWRMYXllckFycmF5Lmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgbGV0IHRlbXBJdGVtcyA9IGNoZWNrZWRMYXllckFycmF5W2ldLnRyZWVEYXRhSXRlbTsNCiAgICAgICAgICBsZXQgbGF5QXJyYXlfID0gdGhpcy5nZXRBcmVhTGluZUxheXMoY2hlY2tlZExheWVyQXJyYXlbaV0ubGF5ZXJOYW1lLCBjdXJyZW50TGF5ZXJzW2tdLnZhbHVlc18uZmlsdGVyVmFsKTsNCiAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRlbXBJdGVtcy5sZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXllcnNba10udmFsdWVzXy5maWx0ZXJWYWwgPT0gdGVtcEl0ZW1zW21dLmZpbHRlclZhbHVlICYmDQogICAgICAgICAgICAgIGN1cnJlbnRMYXllcnNba10udmFsdWVzXy5uYW1lID09IGNoZWNrZWRMYXllckFycmF5W2ldLmxheWVyTmFtZSkgew0KICAgICAgICAgICAgICBleGlzdCA9IHRydWU7DQogICAgICAgICAgICAgIGlmIChleGlzdExheWVyLmluZGV4T2YodGVtcEl0ZW1zW21dLmZpbHRlclZhbHVlKSA9PSAtMSAmJiBsYXlBcnJheV8ubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgIGV4aXN0TGF5ZXIucHVzaCh0ZW1wSXRlbXNbbV0uZmlsdGVyVmFsdWUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGN1cnJlbnRMYXllcnNba10uc2V0VmlzaWJsZSh0cnVlKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICghZXhpc3QpIHsNCiAgICAgICAgICBjdXJyZW50TGF5ZXJzW2tdLnNldFZpc2libGUoZmFsc2UpOw0KDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy/nur/lkozpnaLlkIzml7bmn6Xor6LmmL7npLrpmpDol4/mjqfliLblpITnkIYNCiAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgY3VycmVudExheWVycy5sZW5ndGg7IG4rKykgew0KICAgICAgICBsZXQgZXhpc3QgPSBmYWxzZTsNCiAgICAgICAgbGV0IGFyZWFMaW5lQ29uZmlnID0gdGhpcy5nZXRBcmVhTGluZUxheXMoY3VycmVudExheWVyc1tuXS52YWx1ZXNfLm5hbWUsIGN1cnJlbnRMYXllcnNbbl0udmFsdWVzXy5maWx0ZXJWYWwpOw0KICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IGV4aXN0TGF5ZXIubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICBpZiAoY3VycmVudExheWVyc1tuXS52YWx1ZXNfLmZpbHRlclZhbCA9PSBleGlzdExheWVyW21dICYmIGFyZWFMaW5lQ29uZmlnLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgIGV4aXN0ID0gdHJ1ZTsNCiAgICAgICAgICAgIGN1cnJlbnRMYXllcnNbbl0uc2V0VmlzaWJsZSh0cnVlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFleGlzdCkgew0KICAgICAgICAgIGlmIChhcmVhTGluZUNvbmZpZy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICBjdXJyZW50TGF5ZXJzW25dLnNldFZpc2libGUoZmFsc2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICB9DQoNCg0KDQogICAgICAvLyDlm77niYfmoIfms6jlhbPpl63lvIDlkK/ml7bmjqfliLbmmL7npLrpmpDol48NCiAgICAgIHRoaXMuaW1hZ2VPdmVyTGF5QXJyYXkuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaWQgPT0gZmlsdGVyVmFsKSB7DQogICAgICAgICAgaWYgKCF2aXNpYmxlKSB7DQogICAgICAgICAgICB0aGlzLnJlbW92ZUltZ1BvcHVwKGl0ZW0uaWQpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiY2NjY2MiKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0pOw0KICAgICAgICAgICAgLy90aGlzLnNob3dJbWdQb3B1cChpdGVtLmlkLCBpdGVtLnZhbHVlc18ucG9zaXRpb24pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KDQoNCg0KICAgIH0sDQoNCg0KDQogICAgLy8g5by55Ye65qGGDQogICAgYWRkUG9wdXAgKGNvb3JkaW5hdGUsIGZlYXR1cmUpIHsNCiAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKQ0KICAgICAgbGV0IGZlYXR1cmVWYWx1ZXMgPSBmZWF0dXJlLnZhbHVlc187DQogICAgICB0aGlzLnByb2plY3ROYW1lID0gZmVhdHVyZVZhbHVlcy5sYXllciA9PSBudWxsID8gJycgOiBmZWF0dXJlVmFsdWVzLmxheWVyOw0KICAgICAgdGhpcy5wcm9qZWN0RGVzYyA9IGZlYXR1cmVWYWx1ZXMu6aG555uu5qaCID09IG51bGwgfHwgZmVhdHVyZVZhbHVlcy7pobnnm67mpoIgPT0gdW5kZWZpbmVkID8gJycgOiBmZWF0dXJlVmFsdWVzLumhueebruamgjsNCiAgICAgIHRoaXMuc3RhcnQgPSBmZWF0dXJlVmFsdWVzLui1t+eCuSA9PSBudWxsID8gJycgOiBmZWF0dXJlVmFsdWVzLui1t+eCuTsNCiAgICAgIHRoaXMuZW5kID0gZmVhdHVyZVZhbHVlcy7nu4jngrkgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbHVlcy7nu4jngrk7DQogICAgICB0aGlzLmxlbmd0aCA9IGZlYXR1cmVWYWx1ZXMu6ZW/5bqmID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWx1ZXMu6ZW/5bqmOw0KICAgICAgdGhpcy56dHogPSBmZWF0dXJlVmFsdWVzLuaAu+aKlei1hCA9PSBudWxsID8gIiIgOiBmZWF0dXJlVmFsdWVzLuaAu+aKlei1hDsNCiAgICAgIHRoaXMua2NzamZmaCA9IGZlYXR1cmVWYWx1ZXMu5YuY5a+fXzEgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbHVlcy7li5jlr59fMTsNCiAgICAgIHRoaXMuc3RhdHVzID0gZmVhdHVyZVZhbHVlcy7nm67liY3lt6UgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbHVlcy7nm67liY3lt6U7DQogICAgICB0aGlzLmJ6ID0gZmVhdHVyZVZhbHVlcy7lpIfms6ggPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbHVlcy7lpIfms6g7DQoNCiAgICAgIC8vIOiOt+WPluW8ueWHuuWxgkRPTQ0KICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpDQogICAgICBpZiAodGhpcy5wcm9qZWN0TmFtZSA9PT0gIjAiKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMub3ZlcmxheSkgew0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5Yib5bu6T3ZlcmxheeW8ueWHuuWxgue7keWumkRPTQ0KICAgICAgICB0aGlzLm92ZXJsYXkgPSBuZXcgT3ZlcmxheSh7DQogICAgICAgICAgZWxlbWVudDogY29udGFpbmVyLA0KDQogICAgICAgICAgYXV0b1Bhbjogew0KICAgICAgICAgICAgYW5pbWF0aW9uOiB7DQogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTANCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQoNCiAgICAgICAgLy8g5re75Yqg5YiwbWFwDQogICAgICAgIHRoaXMubWFwRGF0YS5hZGRPdmVybGF5KHRoaXMub3ZlcmxheSkNCiAgICAgIH0NCiAgICAgIC8vIOiuvue9ruW8ueWHuuWxguS9jee9ruWNs+WPr+WHuueOsA0KICAgICAgdGhpcy5vdmVybGF5LnNldFBvc2l0aW9uKGNvb3JkaW5hdGUpDQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9LA0KDQogICAgLy8g5riF6Zmk5by55Ye65qGGDQogICAgcmVtb3ZlUG9wdXAgKCkgew0KICAgICAgaWYgKHRoaXMub3ZlcmxheSkgew0KICAgICAgICB0aGlzLm92ZXJsYXkuc2V0UG9zaXRpb24odW5kZWZpbmVkKQ0KICAgICAgICB0aGlzLnNob3dHayA9IGZhbHNlLA0KICAgICAgICAgIHRoaXMuc2hvd0J6ID0gZmFsc2UNCiAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpDQogICAgICB9DQoNCiAgICB9LA0KDQogICAgLy/pmpDol4/lm77niYflvLnmoYYNCiAgICByZW1vdmVJbWdQb3B1cCAoaWQpIHsNCiAgICAgIGxldCByZXN1bHQgPSBmYWxzZTsNCiAgICAgIGlmICghaWQpIHsNCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgIH0NCiAgICAgIGxldCBsYXllckFycmF5ID0gdGhpcy5pbWFnZU92ZXJMYXlBcnJheTsNCiAgICAgIGlmIChsYXllckFycmF5Lmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICB9DQogICAgICBsYXllckFycmF5LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLmlkID09IGlkKSB7DQoNCiAgICAgICAgICBpZiAoaXRlbS52YWx1ZXNfLnBvc2l0aW9uICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaXRlbS5zZXRQb3NpdGlvbih1bmRlZmluZWQpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0sDQoNCiAgICAvL+aYvuekuuWbvueJh+W8ueahhg0KICAgIHNob3dJbWdQb3B1cCAoaWQsIGNvb3JkaW5hdGUpIHsNCiAgICAgIGlmICghaWQpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgbGV0IGxheWVyQXJyYXkgPSB0aGlzLmltYWdlT3ZlckxheUFycmF5Ow0KICAgICAgaWYgKGxheWVyQXJyYXkubGVuZ3RoID09IDApIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgbGF5ZXJBcnJheS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5pZCA9PSBpZCkgew0KICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VQb3B1cCcgKyBpZCk7DQogICAgICAgICAgaWYgKGNvbnRhaW5lcikgew0KICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgaXRlbS5zZXRQb3NpdGlvbihjb29yZGluYXRlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQoNCiAgICAvL+WIoOmZpOmrmOS6ruWbvuWxgg0KICAgIGNsZWFySGlnaGxpZ2h0ICgpIHsNCiAgICAgIGxldCBhcnIgPSB0aGlzLm1hcERhdGEuZ2V0TGF5ZXJzKCkuYXJyYXlfDQogICAgICBsZXQgYXJyYXlMZW4gPSBhcnIubGVuZ3RoOw0KICAgICAgbGV0IHJlbW92ZSA9IDA7DQogICAgICBmb3IgKGxldCBrID0gMDsgayA8IGFycmF5TGVuOyBrKyspIHsNCiAgICAgICAgbGV0IGl0ZW0gPSBhcnJbayAtIHJlbW92ZV0NCiAgICAgICAgbGV0IGxheWVySWQgPSBpdGVtLnZhbHVlc18uaWQNCiAgICAgICAgaWYgKGxheWVySWQgIT0gbnVsbCAmJiBsYXllcklkICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgIGlmIChsYXllcklkLmluZGV4T2YoImhpZ2hsaWdodExheWVyIikgIT0gLTEpIHsNCiAgICAgICAgICAgIHRoaXMubWFwRGF0YS5yZW1vdmVMYXllcihpdGVtKTsNCiAgICAgICAgICAgIHJlbW92ZSsrOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQoNCiAgICB9LA0KDQogICAgLy/moLnmja7lm77lsYLlkI3lrZfpq5jkuq4NCiAgICBhZGRIaWdoTGlnaHRCeUxheWVyTmFtZSAodGhpc18sIGxheWVyTmFtZSwgZmlsdGVyVmFsKSB7DQogICAgICBsZXQgbGF5ZXJGaWxlQXJyYXkgPSB0aGlzXy5nZXRBcmVhTGluZUxheXMobGF5ZXJOYW1lLCBmaWx0ZXJWYWwpOw0KICAgICAgbGV0IGZlYXR1cmVBcnJheSA9IFtdOw0KICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBsYXllckZpbGVBcnJheS5sZW5ndGg7IG0rKykgew0KICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXNfLmxheWVyQXJyYXkubGVuZ3RoOyBuKyspIHsNCiAgICAgICAgICBpZiAobGF5ZXJGaWxlQXJyYXlbbV0gIT0gdGhpc18ubGF5ZXJBcnJheVtuXS52YWx1ZXNfLm5hbWUgfHwgdGhpc18ubGF5ZXJBcnJheVtuXS52YWx1ZXNfLmZpbHRlclZhbCAhPSBmaWx0ZXJWYWwpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICBsZXQgdmVjdG9yeVJlc291Y2UgPSB0aGlzXy5sYXllckFycmF5W25dLmdldFNvdXJjZSgpOw0KICAgICAgICAgIGZlYXR1cmVBcnJheSA9IHZlY3RvcnlSZXNvdWNlLmZlYXR1cmVzUnRyZWVfLmdldEFsbCgpOw0KICAgICAgICAgIHRoaXNfLmFkZEhpZ2hMaWdodFN0eWxlKGZlYXR1cmVBcnJheSwgdGhpc18sIGxheWVyRmlsZUFycmF5W21dKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQoNCg0KDQoNCiAgICBhZGRIaWdodExpZ3RoQnlMYXllciAoZmVhdHVyZSwgbGF5ZXIsIHRoaXNfKSB7DQogICAgICBsZXQgbGF5ZXJOYW1lID0gbGF5ZXIudmFsdWVzXy5uYW1lOw0KICAgICAgbGV0IGZpbHRlclZhbCA9IGZlYXR1cmUudmFsdWVzXy5sYXllcjsNCiAgICAgIGxldCBsYXllckZpbGVBcnJheSA9IHRoaXNfLmdldEFyZWFMaW5lTGF5cyhsYXllck5hbWUsIGZpbHRlclZhbCk7DQogICAgICBsZXQgcXVlcnlQYXJhbSA9IHt9Ow0KICAgICAgcXVlcnlQYXJhbS5sYXllck5hbWVBcnJheSA9IGxheWVyRmlsZUFycmF5Ow0KICAgICAgcXVlcnlQYXJhbS5maWx0ZXJWYWx1ZSA9IGZpbHRlclZhbDsNCiAgICAgIHRoaXNfLmNsZWFySGlnaGxpZ2h0KCk7DQogICAgICBnZXRIaWdoTGlnaHRNb2RlKHF1ZXJ5UGFyYW0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBsZXQgcmVzcERhdGEgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzXy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgICBpZiAocmVzcERhdGEgPT0gbnVsbCB8fCByZXNwRGF0YSA9PSAnTicpIHsNCiAgICAgICAgICBsZXQgZmVhdHVyZUFycmF5ID0gW107DQogICAgICAgICAgZmVhdHVyZUFycmF5LnB1c2goZmVhdHVyZSk7DQogICAgICAgICAgdGhpc18uYWRkSGlnaExpZ2h0U3R5bGUoZmVhdHVyZUFycmF5LCB0aGlzXywgbGF5ZXJOYW1lKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzXy5hZGRIaWdoTGlnaHRCeUxheWVyTmFtZSh0aGlzXywgbGF5ZXJOYW1lLCBmaWx0ZXJWYWwpOw0KICAgICAgICB9DQoNCg0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGNyZWF0ZUhpZ2hMaWdodFN0eWxlICgpIHsNCiAgICAgIGxldCBoaWdoTGlnaHRTdHlsZSA9IG5ldyBTdHlsZSh7DQogICAgICAgIGZpbGw6IG5ldyBGaWxsKHsNCiAgICAgICAgICBjb2xvcjogIiNmZmZmMDAiLA0KICAgICAgICB9KSwNCiAgICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHsNCiAgICAgICAgICBjb2xvcjogIiNmZmZmMDAiLA0KICAgICAgICAgIHdpZHRoOiAzLjUNCiAgICAgICAgfSksDQogICAgICB9KQ0KICAgICAgcmV0dXJuIGhpZ2hMaWdodFN0eWxlOw0KICAgIH0sDQoNCg0KICAgIGFkZEhpZ2hMaWdodFN0eWxlIChmZWF0dXJlT2JqLCB0aGlzT2JqLCBsYXllck5hbWUpIHsNCiAgICAgIGlmICghZmVhdHVyZU9iaikgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzT2JqLmhpZ2hMaWdodExheWVyID0gbmV3IFZlY3RvckxheWVyKHsNCiAgICAgICAgekluZGV4OiA5OTk5OTk5OTk5OTk5LA0KICAgICAgICBuYW1lOiBsYXllck5hbWUsDQogICAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgZmVhdHVyZXM6IGZlYXR1cmVPYmosDQogICAgICAgIH0pLA0KICAgICAgICBzdHlsZTogKGZlYXR1cmUsIHNvbHV0aW9uKSA9PiB7DQogICAgICAgICAgcmV0dXJuIHRoaXNPYmouY3JlYXRlSGlnaExpZ2h0U3R5bGUoKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXNPYmouaGlnaExpZ2h0TGF5ZXIuc2V0KCJpZCIsICJoaWdobGlnaHRMYXllciIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwKSkNCiAgICAgIHRoaXMubWFwRGF0YS5hZGRMYXllcih0aGlzT2JqLmhpZ2hMaWdodExheWVyKQ0KDQogICAgfSwNCg0KICAgIGNoYW5nZU1hcCAobnVtKSB7DQogICAgICB0aGlzLmFjdGl2ZUJ0biA9IG51bQ0KICAgICAgaWYgKHRoaXMuYWN0aXZlQnRuID09IDEpIHsNCiAgICAgICAgZ2FvZGVNYXBMYXllci5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICB3eE1hcExheWVyLnNldFZpc2libGUodHJ1ZSkNCiAgICAgICAgLy/kv67mlLnmloflrZfmoIfms6jmoLflvI8NCiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0U3R5bGUodGhpcy5hY3RpdmVCdG4pDQogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlQnRuID09IDIpIHsNCiAgICAgICAgZ2FvZGVNYXBMYXllci5zZXRWaXNpYmxlKHRydWUpDQogICAgICAgIHd4TWFwTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSkNCiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0U3R5bGUodGhpcy5hY3RpdmVCdG4pDQogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlQnRuID09IDMpIHsNCiAgICAgICAgZ2FvZGVNYXBMYXllci5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgICB3eE1hcExheWVyLnNldFZpc2libGUoZmFsc2UpDQogICAgICAgIHRoaXMuY2hhbmdlVGV4dFN0eWxlKHRoaXMuYWN0aXZlQnRuKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBjcmVhdGVQb2ludFN0eWxlQnlDb2xvciAoZmVhdHVyZSwgY29sb3IpIHsNCiAgICAgIGxldCBzdHlsZXMgPSBbXTsNCiAgICAgIGxldCBzdHlsZSA9IG5ldyBPbFN0eWxlU3R5bGUoew0KICAgICAgICAvLyAvL+Wbvuagh+agt+W8jw0KICAgICAgICAvLyBpbWFnZTogbmV3IE9sU3R5bGVJY29uKHsNCiAgICAgICAgLy8gICBhbmNob3I6IFsxMCwgMThdLA0KICAgICAgICAvLyAgIHNjYWxlOiAxLA0KICAgICAgICAvLyAgIGFuY2hvck9yaWdpbjogJ3RvcC1yaWdodCcsDQogICAgICAgIC8vICAgYW5jaG9yWFVuaXRzOiAncGl4ZWxzJywNCiAgICAgICAgLy8gICBhbmNob3JZVW5pdHM6ICdwaXhlbHMnLA0KICAgICAgICAvLyAgIG9mZnNldE9yaWdpbjogJ2JvdHRvbS1sZWZ0JywNCiAgICAgICAgLy8gICBvcGFjaXR5OiAxLA0KICAgICAgICAvLyAgIHNyYzogcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ltYWdlcy9tYXJrLnBuZycpLA0KICAgICAgICAvLyB9KSwNCiAgICAgICAgLy/mlofmnKzmoLflvI8NCiAgICAgICAgdGV4dDogbmV3IFRleHQoew0KICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsDQogICAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJywNCiAgICAgICAgICBmb250OiAnbm9ybWFsIDAuMTVyZW0g5b6u6L2v6ZuF6buRJywNCiAgICAgICAgICB0ZXh0OiBmZWF0dXJlLnZhbHVlc18ubmFtZSwNCiAgICAgICAgICBvZmZzZXRZOiAtMjUsDQogICAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgICAgY29sb3I6IGNvbG9yDQogICAgICAgICAgfSksDQogICAgICAgICAgcm90YXRpb246IGZlYXR1cmUudmFsdWVzXy5mb250X2FuZ2xlICogTWF0aC5QSSAvIDE4MCwNCiAgICAgICAgICBwYWRkaW5nOiBbMiwgNSwgMiwgNV0sDQogICAgICAgIH0pLA0KICAgICAgICAvLyDorr7nva7lsYLnuqcNCiAgICAgICAgekluZGV4OiAxOTk5OTk5OTk5DQogICAgICB9KTsNCiAgICAgIHN0eWxlcy5wdXNoKHN0eWxlKTsNCiAgICAgIHJldHVybiBzdHlsZXM7DQogICAgfSwNCg0KDQogICAgY2hhbmdlVGV4dFN0eWxlIChjaGVja1ZhbCkgew0KICAgICAgbGV0IHRleHRMYXllciA9IHRoaXMudGV4dE1hcmtMYXllck5tQXJyYXk7DQogICAgICB0aGlzLmxheWVyQXJyYXkuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgbGV0IGxheWVyTmFtZSA9IGl0ZW0udmFsdWVzXy5uYW1lDQogICAgICAgIGlmICh0ZXh0TGF5ZXIuaW5kZXhPZihsYXllck5hbWUpICE9IC0xKSB7DQogICAgICAgICAgbGV0IHZlY3RvcnlSZXNvdWNlID0gaXRlbS5nZXRTb3VyY2UoKTsNCiAgICAgICAgICBsZXQgZmVhdHVyZUFycmF5ID0gdmVjdG9yeVJlc291Y2UuZmVhdHVyZXNSdHJlZV8uZ2V0QWxsKCk7DQogICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBmZWF0dXJlQXJyYXkubGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgIGxldCBmb250Y29sb3IgPSBmZWF0dXJlQXJyYXlbbV0udmFsdWVzXy5mb250X2NvbG9yOw0KICAgICAgICAgICAgbGV0IGNoYW5nZUNvbG9yOw0KICAgICAgICAgICAgaWYgKGNoZWNrVmFsID09IDEpIHsNCiAgICAgICAgICAgICAgY2hhbmdlQ29sb3IgPSAnI2ZmZmYwMCcNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGNoYW5nZUNvbG9yID0gJyMwMDAwMDAnDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmZWF0dXJlQXJyYXlbbV0uc2V0U3R5bGUodGhpcy5jcmVhdGVQb2ludFN0eWxlQnlDb2xvcihmZWF0dXJlQXJyYXlbbV0sIGNoYW5nZUNvbG9yKSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQoNCiAgICAvL+WNq+aYn+WcsOWbvuWIh+aNog0KICAgIHN3aXRjaENoYW5nZSAoKSB7DQogICAgICBsZXQgbGF5ZXJUeXBlU2VsZWN0ID0gdGhpcy52YWx1ZTE7DQogICAgICBpZiAobGF5ZXJUeXBlU2VsZWN0KSB7DQogICAgICAgIGdhb2RlTWFwTGF5ZXIuc2V0VmlzaWJsZShmYWxzZSkNCiAgICAgICAgd3hNYXBMYXllci5zZXRWaXNpYmxlKHRydWUpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBnYW9kZU1hcExheWVyLnNldFZpc2libGUodHJ1ZSkNCiAgICAgICAgd3hNYXBMYXllci5zZXRWaXNpYmxlKGZhbHNlKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvL+WIm+W7uuWbvueJh+W8ueahhg0KICAgIGNyZWF0ZUltYWdlT3ZlckxheWVyIChmZWF0dXJlLCBldnQsIGxheWVyKSB7DQogICAgICBsZXQgaWQgPSBmZWF0dXJlLnZhbHVlc18ubmFtZTsNCiAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW1hZ2VQb3B1cCIgKyBpZCkNCiAgICAgIGNvbnNvbGUubG9nKCLlvLnnqpflrrnlmajkuLrnqboiKTsNCiAgICAgIGlmIChjb250YWluZXIgPT0gbnVsbCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZUNvbnRlbnQnICsgaWQpDQogICAgICBsZXQgaW1hZ2VGaWxlTmFtZSA9IGZlYXR1cmUudmFsdWVzXy5uYW1lICsgIi5wbmciOw0KICAgICAgbGV0IHNyYyA9IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy8iICsgaW1hZ2VGaWxlTmFtZSk7DQogICAgICB2YXIgem9vbSA9IHRoaXMubWFwRGF0YS5nZXRWaWV3KCkuZ2V0Wm9vbSgpOw0KICAgICAgbGV0IHdpZHRoID0gKHpvb20gLSB0aGlzLm1hcmtNaW5ab29tKSAqIDI1MCArIDEwMDsNCiAgICAgIGxldCBoZWlnaHQgPSB3aWR0aCAqIDAuNTU4Mg0KICAgICAgY29udGVudC5zdHlsZS53aWR0aCA9IHdpZHRoOw0KICAgICAgY29udGVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7DQogICAgICBjb250ZW50LmlubmVySFRNTCA9IGA8aW1nIHNyYyA9IGAgKyBzcmMgKyBgIHN0eWxlID0gJ3dpZHRoOjEwMCVgICsgYDtoZWlnaHQ6MTAwJWAgKyBgJy8+YDsNCiAgICAgIGxldCBvdmVybGF5VGVtcCA9IG51bGw7DQogICAgICB0aGlzLmltYWdlT3ZlckxheUFycmF5LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLmlkID09IGlkKSB7DQogICAgICAgICAgb3ZlcmxheVRlbXAgPSBpdGVtOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgaWYgKG92ZXJsYXlUZW1wID09IG51bGwpIHsNCiAgICAgICAgb3ZlcmxheVRlbXAgPSBuZXcgT3ZlcmxheSh7DQogICAgICAgICAgZWxlbWVudDogY29udGFpbmVyLA0KICAgICAgICAgIGlkOiBpZCwNCiAgICAgICAgICBzdG9wRXZlbnQ6IHRydWUsDQogICAgICAgICAgaW5zZXJ0Rmlyc3Q6IGZhbHNlDQoNCg0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmltYWdlT3ZlckxheUFycmF5LnB1c2gob3ZlcmxheVRlbXApOw0KICAgICAgfQ0KICAgICAgdGhpcy5tYXBEYXRhLmFkZE92ZXJsYXkob3ZlcmxheVRlbXApDQogICAgICBvdmVybGF5VGVtcC5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSkNCiAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9LA0KDQoNCiAgICAvL+iuvue9ruagh+iusOWbvueJh+agt+W8jw0KICAgIGNyZWF0ZUltYWdlTWFya1N0eWxlIChmZWF0dXJlLCB2ZWN0b3JMYXllclRtcCkgew0KICAgICAgbGV0IHRoaXNfID0gdGhpczsNCiAgICAgIHZlY3RvckxheWVyVG1wLnZhbHVlc18uekluZGV4ID0gOTk5OTk5OTk5OTk5OTkNCiAgICAgIHZhciB6b29tID0gdGhpcy5tYXBEYXRhLmdldFZpZXcoKS5nZXRab29tKCk7DQogICAgICBsZXQgc2NhbGVDaGFuZ2UgPSAoem9vbSAtIHRoaXMubWFya01pblpvb20pICogMC4yICsgMC41Ow0KICAgICAgLy/orr7nva7lj6/mi5bliqgNCiAgICAgIHZhciB0cmFuc2xhdGUgPSBuZXcgVHJhbnNsYXRlKHsNCiAgICAgICAgaGl0VG9sZXJhbmNlOiAyMCwNCiAgICAgICAgbGF5ZXJzOiBbdmVjdG9yTGF5ZXJUbXBdDQogICAgICB9KTsNCiAgICAgIC8v5Zu+54mH5qCH5rOo5ouW5Yqo77yM5Zu+54mH5by556qX5YWz6ZetDQogICAgICB0cmFuc2xhdGUub24oJ3RyYW5zbGF0aW5nJywgZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXNfLnJlbW92ZUltZ1BvcHVwKGZlYXR1cmUudmFsdWVzXy5uYW1lKTsNCiAgICAgICAgdHJhbnNsYXRlLnZhbHVlc18ub3BlblN0YXR1cyA9IHJlc3VsdDsNCg0KICAgICAgfSkNCg0KICAgICAgdHJhbnNsYXRlLm9uKFsndHJhbnNsYXRlZW5kJ10sIGZ1bmN0aW9uIChlKSB7DQogICAgICAgIGxldCBvcGVuU3RhdHVzID0gdHJhbnNsYXRlLnZhbHVlc18ub3BlblN0YXR1czsNCiAgICAgICAgY29uc29sZS5sb2coJ+aLluWKqOe7k+adnycgKyBvcGVuU3RhdHVzKQ0KICAgICAgICBpZiAob3BlblN0YXR1cykgew0KICAgICAgICAgIGxldCBjb29yZGluYXRlID0gZS5jb29yZGluYXRlOw0KICAgICAgICAgIHRoaXNfLnNob3dJbWdQb3B1cChmZWF0dXJlLnZhbHVlc18ubmFtZSwgY29vcmRpbmF0ZSk7DQogICAgICAgIH0NCiAgICAgICAgLy/ph43nva7nirbmgIENCiAgICAgICAgdHJhbnNsYXRlLnZhbHVlc18ub3BlblN0YXR1cyA9IG51bGw7DQogICAgICB9KQ0KDQogICAgICB0aGlzLm1hcERhdGEuYWRkSW50ZXJhY3Rpb24odHJhbnNsYXRlKTsNCiAgICAgIHJldHVybiBuZXcgT2xTdHlsZVN0eWxlKHsNCiAgICAgICAgLy/lm77moIfmoLflvI8NCiAgICAgICAgaW1hZ2U6IG5ldyBPbFN0eWxlSWNvbih7DQogICAgICAgICAgYW5jaG9yOiBbMTAsIDE4XSwNCiAgICAgICAgICBzY2FsZTogc2NhbGVDaGFuZ2UsDQogICAgICAgICAgYW5jaG9yT3JpZ2luOiAndG9wLXJpZ2h0JywNCiAgICAgICAgICBhbmNob3JYVW5pdHM6ICdwaXhlbHMnLA0KICAgICAgICAgIGFuY2hvcllVbml0czogJ3BpeGVscycsDQogICAgICAgICAgb2Zmc2V0T3JpZ2luOiAnYm90dG9tLWxlZnQnLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgc3JjOiBmZWF0dXJlLnZhbHVlc18uc3JjDQogICAgICAgIH0pLA0KICAgICAgfSk7DQogICAgfSwNCg0KDQogICAgLy8g6byg5qCH54K55Ye75Zyw5Zu+5LqL5Lu2DQogICAgbWFwQ2xpY2sgKGV2dCkgew0KICAgICAgbGV0IHBpeGVsID0gdGhpcy5tYXBEYXRhLmdldEV2ZW50UGl4ZWwoZXZ0Lm9yaWdpbmFsRXZlbnQpOw0KICAgICAgbGV0IGZlYXR1cmVJbmZvID0ge307DQogICAgICB0aGlzLm1hcERhdGEuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLA0KICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHsNCiAgICAgICAgICBmZWF0dXJlSW5mby5mZWF0dXJlID0gZmVhdHVyZTsNCiAgICAgICAgICBmZWF0dXJlSW5mby5sYXllciA9IGxheWVyOw0KICAgICAgICAgIHJldHVybiBmZWF0dXJlSW5mbzsNCiAgICAgICAgfSk7DQogICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVJbmZvLmZlYXR1cmU7DQogICAgICBsZXQgbGF5ZXIgPSBmZWF0dXJlSW5mby5sYXllcjsNCiAgICAgIGlmIChmZWF0dXJlSW5mby5mZWF0dXJlKSB7DQogICAgICAgIC8v5o2V5o2J5Yiw6KaB57Sg5ZCO77yM5by55qGGDQogICAgICAgIGxldCBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGUNCiAgICAgICAgdGhpcy5hZGRQb3B1cChjb29yZGluYXRlLCBmZWF0dXJlKQ0KICAgICAgICB0aGlzLmFkZEhpZ2h0TGlndGhCeUxheWVyKGZlYXR1cmUsIGxheWVyLCB0aGlzKQ0KICAgICAgICAvL+WvueS6juWbvueJh+WbvuWxguWxleekuuWbvueJh+W8ueahhg0KICAgICAgICB0aGlzLnBvcEltYWdlKGZlYXR1cmUsIGxheWVyLCBldnQpOw0KICAgICAgfSBlbHNlIHsNCg0KICAgICAgICB0aGlzLnJlbW92ZVBvcHVwKCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGNyZWF0ZUltYWdlU3R5bGUgKGZlYXR1cmUsIGltYWdlKSB7DQogICAgICB2YXIgem9vbSA9IHRoaXMubWFwRGF0YS5nZXRWaWV3KCkuZ2V0Wm9vbSgpOw0KICAgICAgbGV0IHNjYWxlQ2hhbmdlID0gKHpvb20gLSB0aGlzLm1hcmtNaW5ab29tKSAqIDAuMiArIDAuMTsNCiAgICAgIHJldHVybiBuZXcgT2xTdHlsZVN0eWxlKHsNCiAgICAgICAgLy/lm77moIfmoLflvI8NCiAgICAgICAgaW1hZ2U6IG5ldyBPbFN0eWxlSWNvbih7DQogICAgICAgICAgYW5jaG9yOiBbMTAsIDE4XSwNCiAgICAgICAgICBzY2FsZTogc2NhbGVDaGFuZ2UsDQogICAgICAgICAgYW5jaG9yT3JpZ2luOiAndG9wLXJpZ2h0JywNCiAgICAgICAgICBhbmNob3JYVW5pdHM6ICdwaXhlbHMnLA0KICAgICAgICAgIGFuY2hvcllVbml0czogJ3BpeGVscycsDQogICAgICAgICAgb2Zmc2V0T3JpZ2luOiAnYm90dG9tLWxlZnQnLA0KICAgICAgICAgIG9wYWNpdHk6IDEsDQogICAgICAgICAgc3JjOiBpbWFnZQ0KICAgICAgICB9KSwNCiAgICAgIH0pOw0KICAgIH0sDQoNCg0KDQogICAgcG9wSW1hZ2UgKGZlYXR1cmUsIGxheWVyLCBldnQpIHsNCiAgICAgIGlmICghZmVhdHVyZS52YWx1ZXNfLmZpbGVfdHlwZSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAoZmVhdHVyZS52YWx1ZXNfLmZpbGVfdHlwZSAhPSAnaW1hZ2UnKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgdGhpcy5jcmVhdGVJbWFnZU92ZXJMYXllcihmZWF0dXJlLCBldnQsIGxheWVyKTsNCiAgICB9LA0KDQoNCg0KICAgIG1hcE1vdmVlbmQgKCkgew0KICAgICAgdmFyIHpvb20gPSB0aGlzLm1hcERhdGEuZ2V0VmlldygpLmdldFpvb20oKTsNCiAgICAgIGlmICh6b29tID4gdGhpcy5tYXJrTWluWm9vbSkgew0KDQogICAgICAgIC8v5pi+56S65paH5a2X5qCH5rOoDQogICAgICAgIHRoaXMubGF5ZXJBcnJheS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGlmIChpdGVtLnZhbHVlc18ubW92ZWVIaWRlIHx8IGl0ZW0udmFsdWVzXy5pbml0SGlkZSkgew0KICAgICAgICAgICAgaXRlbS5zZXRWaXNpYmxlKHRydWUpOw0KICAgICAgICAgICAgaXRlbS5zZXQoJ21vdmVlSGlkZScsIGZhbHNlKTsNCiAgICAgICAgICAgIGl0ZW0uc2V0KCdpbml0SGlkZScsIGZhbHNlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQoNCiAgICAgIH0gZWxzZSBpZiAoem9vbSA8PSB0aGlzLm1hcmtNaW5ab29tKSB7DQogICAgICAgIHRoaXMubWFya0ZsYWcgPSBmYWxzZTsNCiAgICAgICAgLy/pmpDol4/lm77niYflvLnmoYYNCiAgICAgICAgdGhpcy5pbWFnZU92ZXJMYXlBcnJheS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VQb3B1cCcgKyBpdGVtLmlkKTsNCiAgICAgICAgICBpZiAoY29udGFpbmVyICE9IG51bGwpIHsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy/pmpDol4/mloflrZfmoIfms6gNCiAgICAgICAgdGhpcy5sYXllckFycmF5LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKHRoaXMudGV4dE1hcmtMYXllck5tQXJyYXkuaW5kZXhPZihpdGVtLnZhbHVlc18ubmFtZSkgIT0gLTEpIHsNCiAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlc18udmlzaWJsZSkgew0KICAgICAgICAgICAgICAvL+e8qeaUvumakOiXj+agh+ivhg0KICAgICAgICAgICAgICBpdGVtLnNldCgnbW92ZWVIaWRlJywgdHJ1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZShmYWxzZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQoNCg0KICAgICAgfQ0KDQogICAgICAvL+agueaNrue8qeaUvuS6i+S7tuiwg+aVtOW8ueahhuWkp+Wwjw0KICAgICAgdGhpcy5pbWFnZU92ZXJMYXlBcnJheS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlUG9wdXAnICsgaXRlbS5pZCkNCiAgICAgICAgaWYgKGNvbnRhaW5lciAhPSBudWxsKSB7DQogICAgICAgICAgbGV0IHdpZHRoID0gKHpvb20gLSB0aGlzLm1hcmtNaW5ab29tKSAqIDI1MCArIDEwMDsNCiAgICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSB3aWR0aCArICJweCINCiAgICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gd2lkdGggKiAwLjU1ODIgKyAicHgiDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIGRvd24gKGUsIGkpIHsNCiAgICAgIGxldCBkcmFnT2JqID0gZS5jdXJyZW50VGFyZ2V0DQogICAgICB0aGlzLmlzTW91c2VEb3duID0gdHJ1ZQ0KICAgICAgdGhpc1snY3VycmVudFgnICsgaV0gPSBlLmNsaWVudFgNCiAgICAgIHRoaXNbJ2N1cnJlbnRZJyArIGldID0gZS5jbGllbnRZDQogICAgICB0aGlzWydvYmpYJyArIGldID0gZHJhZ09iai5vZmZzZXRMZWZ0DQogICAgICB0aGlzWydvYmpZJyArIGldID0gZHJhZ09iai5vZmZzZXRUb3ANCiAgICAgIGRvY3VtZW50Lm9ubW91c2V1cCA9IGUgPT4gew0KDQogICAgICAgIHRoaXMuaXNNb3VzZURvd24gPSBmYWxzZSAvL+m8oOagh+aKrOi1t+aXtuWAmeS4jeimgeWcqOi3n+maj+m8oOagh+enu+WKqA0KICAgICAgICBpZiAoIXRoaXMuaXNNb3VzZURvd24pIHsNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2UgLy/pvKDmoIfmiqzotbfml7blgJnkuI3opoHlnKjot5/pmo/pvKDmoIfnp7vliqgNCiAgICAgICAgZHJhZ09iai5zdHlsZS56SW5kZXggPSAxDQogICAgICB9DQogICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGUgPT4gew0KICAgICAgICBpZiAodGhpcy5pc01vdXNlRG93biA9PSBmYWxzZSkgew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICAgIGxldCBtb3ZlWCA9IGUuY2xpZW50WCAtIHRoaXNbJ2N1cnJlbnRYJyArIGldDQogICAgICAgIGxldCBtb3ZlWSA9IGUuY2xpZW50WSAtIHRoaXNbJ2N1cnJlbnRZJyArIGldDQogICAgICAgIGRyYWdPYmouc3R5bGUubGVmdCA9IHRoaXNbJ29ialgnICsgaV0gKyBtb3ZlWCArICdweCcNCiAgICAgICAgZHJhZ09iai5zdHlsZS50b3AgPSB0aGlzWydvYmpZJyArIGldICsgbW92ZVkgKyAncHgnDQogICAgICAgIGRyYWdPYmouc3R5bGUuekluZGV4ID0gOTk5IC8v6K6p5ouW5Yqo55qEZGl25p2D6YeN5pyA5aSnDQogICAgICB9DQoNCiAgICB9LA0KICAgIHNjYWxlRG9tIChlKSB7DQoNCiAgICAgIGxldCBkaXYgPSBlLmN1cnJlbnRUYXJnZXQNCiAgICAgIGxldCB6b29tID0gcGFyc2VJbnQoZGl2LnN0eWxlLnpvb20sIDEwKSB8fCAxMDA7DQogICAgICB6b29tICs9IGUud2hlZWxEZWx0YSAvIDEyOw0KICAgICAgaWYgKHpvb20gPiAwKSB7IGRpdi5zdHlsZS56b29tID0gYCR7em9vbX0lYCB9DQogICAgfQ0KDQoNCiAgfQ0KfQ0KDQoNCg0KDQoNCg0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"map\" ref=\"map\">\r\n    <!--点击查看详情弹框-->\r\n    <div id=\"popup\" class=\"ol-popup\">\r\n      <div class=\"popup-nav-title\">\r\n        <span>{{ this.projectName }}</span>\r\n        <span>{{ this.status }}</span>\r\n      </div>\r\n      <el-divider></el-divider>\r\n      <div v-show=\"this.projectDesc != ''\">\r\n        <el-row class=\"popup-item\">\r\n          <el-col :span=\"12\">\r\n            <img src=\"../assets/images/fly_pre.png\" class=\"popup-nav-icon\" />\r\n            <span>{{ this.start }}</span>\r\n            <img\r\n              src=\"../assets/images/right.png\"\r\n              style=\"width: 16px; float: right; margin-right: 0.125rem\"\r\n            />\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <img src=\"../assets/images/fly_nor.png\" class=\"popup-nav-icon\" />\r\n            <span>{{ this.end }}</span>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row class=\"popup-item\">\r\n          <el-col :span=\"12\">\r\n            <img src=\"../assets/images/cd.png\" class=\"popup-nav-icon\" />\r\n            <span>长度（KM）:{{ this.length }}</span>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <img src=\"../assets/images/tz.png\" class=\"popup-nav-icon\" />\r\n            <span>总投资（亿元）:{{ this.ztz }}</span>\r\n          </el-col>\r\n        </el-row>\r\n        <div class=\"popup-item\">\r\n          <span>项目概况</span>\r\n          <i\r\n            class=\"el-icon-caret-right\"\r\n            v-show=\"this.projectDesc != '' && showGk === false\"\r\n            @click=\"showGk = true\"\r\n          ></i>\r\n          <i\r\n            class=\"el-icon-caret-bottom\"\r\n            @click=\"showGk = false\"\r\n            v-show=\"showGk === true\"\r\n          ></i>\r\n          <span v-show=\"this.showGk === true\">{{ this.projectDesc }}</span>\r\n        </div>\r\n        <div class=\"popup-item\">\r\n          <span>勘察设计费复核:</span>\r\n          <span>{{ this.kcsjffh }}</span>\r\n        </div>\r\n        <div class=\"popup-item\">\r\n          <span>备注</span>\r\n          <i\r\n            class=\"el-icon-caret-right\"\r\n            v-show=\"this.bz != '' && showBz === false\"\r\n            @click=\"showBz = true\"\r\n          ></i>\r\n          <i\r\n            class=\"el-icon-caret-bottom\"\r\n            @click=\"showBz = false\"\r\n            v-show=\"showBz === true\"\r\n          ></i>\r\n          <span v-show=\"this.showBz === true\">{{ this.bz }}</span>\r\n        </div>\r\n      </div>\r\n      <img src=\"../assets/images/bg_down.png\" class=\"jt-icon\" />\r\n    </div>\r\n\r\n    <!--图片弹窗-->\r\n    <div v-for=\"(item, index) in imagePopArray\" :key=\"index\">\r\n      <div\r\n        :id=\"'imagePopup' + item\"\r\n        @mousedown.prevent=\"down($event, index + 1)\"\r\n        @mousewheel.prevent=\"scaleDom($event)\"\r\n        style=\"position: relative; width: 250px; height: 250px; display: none\"\r\n      >\r\n        <i\r\n          class=\"el-icon-close ol-popup-closer\"\r\n          @click=\"removeImgPopup(item)\"\r\n        ></i>\r\n        <div :id=\"'imageContent' + item\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--道路选择器-->\r\n    <div id=\"pop-road-selector\" class=\"ol-layer\">\r\n      <div class=\"change-div\">\r\n        <div\r\n          class=\"switch-btn left-btn\"\r\n          @click=\"changeMap('1')\"\r\n          :class=\"{ 'btn-active': activeBtn == 1 }\"\r\n        >\r\n          卫星图\r\n        </div>\r\n        <div\r\n          class=\"switch-btn\"\r\n          @click=\"changeMap('2')\"\r\n          :class=\"{ 'btn-active': activeBtn == 2 }\"\r\n        >\r\n          电子地图\r\n        </div>\r\n        <div\r\n          class=\"switch-btn right-btn\"\r\n          @click=\"changeMap('3')\"\r\n          :class=\"{ 'btn-active': activeBtn == 3 }\"\r\n        >\r\n          隐藏底图\r\n        </div>\r\n      </div>\r\n      <div class=\"road-selector-pop\">\r\n        <el-collapse accordion class=\"nav-select\" v-model=\"ac\">\r\n          <el-collapse-item name=\"1\">\r\n            <template slot=\"title\"> 显示图层 </template>\r\n            <el-tree\r\n              class=\"tree-div\"\r\n              ref=\"tree\"\r\n              :data=\"treeData2\"\r\n              show-checkbox\r\n              node-key=\"id\"\r\n              :default-checked-keys=\"defaultCheckedIds\"\r\n              :default-expanded-keys=\"defaultExpandIds\"\r\n              :props=\"defaultProps\"\r\n              @check=\"handleCheckChange\"\r\n            >\r\n              <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n                <span>\r\n                  {{ node.label }}\r\n                </span>\r\n                <span\r\n                  v-if=\"data.fillColor != null\"\r\n                  class=\"dot\"\r\n                  :style=\"{ background: data.fillColor }\"\r\n                ></span>\r\n                <span\r\n                  v-else\r\n                  class=\"dot\"\r\n                  :style=\"{ background: data.strokeColor }\"\r\n                ></span>\r\n              </div>\r\n            </el-tree>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\n\r\nimport * as olControl from 'ol/control'\r\n\r\nimport { Map, View, Feature, Collection } from \"ol\";\r\n\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport { transform } from 'ol/proj'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\n\r\nimport { Draw, Translate, DragPan } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport LineString from 'ol/geom/LineString';\r\nimport MultiLineString from 'ol/geom/MultiLineString';\r\nimport MultiPolygon from 'ol/geom/MultiPolygon';\r\nimport Vue from 'vue'\r\nimport { clone } from \"@/utils/ruoyi\";\r\nimport OlGeomPoint from 'ol/geom/Point'\r\nimport OlStyleStyle from 'ol/style/Style'\r\nimport OlStyleIcon from 'ol/style/Icon'\r\nimport index from \"@/api/index\";\r\nimport Point from 'ol/geom/Point';\r\nimport Text from 'ol/style/Text'\r\nimport { findComponentInfo } from \"@/api/config/component\";\r\nimport { initTree } from \"@/api/tree/tree\";\r\nimport { getHighLightMode } from \"@/api/config/legend\";\r\n\r\nimport { getUrlKey } from '@/utils/request'\r\n\r\n\r\n\r\n\r\n//中心坐标\r\nconst centerCordinate = [656951.22379894, 3560959.26626369]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\n\r\n//地图初始化\r\nconst view = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 4,\r\n  maxZoom: 18,\r\n  zoom: 14.5 // 地图初始化的缩放级别\r\n})\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    zIndex: 1,\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scl=2&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n//卫星地图\r\n// const wxMapLayer = new TileLayer({\r\n//   source: new XYZ({\r\n//     crossOrigin: \"anonymous\",\r\n//     url: 'http://t0.tianditu.gov.cn/img_w/wmts?tk=129364168580e7f0e3ff5bd759d41a75&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=tiles'\r\n//   })\r\n// });\r\n\r\nconst wxMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=6&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n\r\n\r\nexport default {\r\n  name: \"project\",\r\n  mixins: [index],\r\n  data () {\r\n    return {\r\n      ac: '1',\r\n      value1: 'true',\r\n      radio2: [],\r\n      addForm: {\r\n        sDeptName: '',\r\n        sDeptId: ''\r\n      },\r\n      //图层对象数组\r\n      layerArray: [],\r\n      //树结构数据\r\n      treeData2: [],\r\n      //默认选中节点\r\n      defaultCheckedIds: [],\r\n      //默认扩展节点\r\n      defaultExpandIds: [],\r\n      //临时图片弹框数组\r\n      imgPopDivArray: [],\r\n      markLayerArray: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n\r\n      imagePopArray: [],\r\n      imageOverLayArray: [],\r\n      textMarkLayerNmArray: [],\r\n\r\n      markMinZoom: 14.5,\r\n      markFlag: false,\r\n      markVectorArray: [],\r\n      showGk: false,\r\n      showBz: false,\r\n      projectName: '',\r\n      start: '',\r\n      end: '',\r\n      projectDesc: '',\r\n      length: '',\r\n      ztz: '',\r\n      status: '',\r\n      bz: '',\r\n      kcsjffh: '',\r\n      isDragable: false,//是否可以拖动\r\n      currentX: '', //点击时鼠标距左边的距离\r\n      currentY: '',//点击时鼠标距顶边的距离\r\n      objX: '', //点击时元素距左边的距离\r\n      objY: '', //点击时元素距顶边的距离\r\n      activeBtn: '2'\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n\r\n    //获取菜单ID\r\n    this.menuId = getUrlKey('menuId');\r\n    //根据菜单ID查询组件信息\r\n    this.findComponentInfo(this);\r\n    this.removePopup();\r\n    document.getElementById('popup').style.display = 'none';\r\n\r\n\r\n  },\r\n\r\n  watch: {\r\n\r\n    defaultCheckedIds: function () {\r\n      //初始化地图\r\n      this.initLayerToMapWfs(this);\r\n      //添加自定义图层\r\n      let checkedIds = this.getTreecheckedId(this.treeData2);\r\n      this.addVectorLayerWfs(checkedIds);\r\n    }\r\n  },\r\n\r\n\r\n\r\n\r\n\r\n  methods: {\r\n\r\n\r\n\r\n\r\n    findComponentInfo (_this) {\r\n      findComponentInfo(this.menuId, null).then(response => {\r\n        if (!response.data) {\r\n          return;\r\n        }\r\n        let legendConfigData = response.data.decLegendConfigList;\r\n        if (legendConfigData && legendConfigData.length > 0) {\r\n          //设置树节点数据\r\n          let treeData_ = legendConfigData[0];\r\n          //隐藏设置的节点\r\n          _this.treeData2 = treeData_;\r\n          //设置顶级菜单选中\r\n          let expandIds = [];\r\n          for (let k = 0; k < treeData_.length; k++) {\r\n            let item = treeData_[k];\r\n            if (item.parentId == null) {\r\n              let children_ = item.children;\r\n              if (children_ != null && children_.length != 0) {\r\n                for (let j = 0; j < children_.length; j++) {\r\n                  expandIds.push(children_[j].id);\r\n                }\r\n              } else {\r\n                expandIds.push(item.id);\r\n              }\r\n            }\r\n          }\r\n          //默认展展开二级菜单\r\n          this.defaultExpandIds = expandIds;\r\n          this.defaultCheckedIds = _this.getTreecheckedId(treeData_);\r\n        }\r\n\r\n      });\r\n    },\r\n\r\n\r\n\r\n    // 初始化地图\r\n    initLayerToMapWfs (_this) {\r\n\r\n      const mapContainer = _this.$refs.map\r\n      wxMapLayer.setVisible(false)\r\n      let layers = [gaodeMapLayer, wxMapLayer];\r\n      //将图层加入Map\r\n      const map = new Map({\r\n        layers: layers,\r\n        target: mapContainer,\r\n        view: view\r\n      });\r\n      // 添加鼠标点击事件\r\n      map.on('click', _this.mapClick);\r\n      map.on('moveend', this.mapMoveend);\r\n      // 保存地图\r\n      _this.mapData = map\r\n    },\r\n\r\n    assembleLayerItems (item, arr, m, checkedArray) {\r\n      var newItem = null;\r\n      if (item.layerName != null) {\r\n        var needAdd = item.filterValue || (item.children != null && item.children != undefined);\r\n        if (!needAdd) {\r\n          return;\r\n        }\r\n\r\n        let existItem;\r\n        for (let j = 0; j < m.length; j++) {\r\n          if (m[j].layerName == item.layerName) {\r\n            existItem = m[j];\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (existItem != null) {\r\n          arr = existItem.treeDataItem;\r\n        } else {\r\n          arr = [];\r\n          newItem = {};\r\n          newItem.treeDataItem = arr;\r\n          newItem.layerName = item.layerName;\r\n          newItem.filterKey = item.filterKey;\r\n        }\r\n      }\r\n\r\n      //选中状态\r\n      var idIndex = checkedArray.findIndex(item2 => {\r\n        return item2 == item.id;\r\n      });\r\n\r\n      if (idIndex != -1) {\r\n        if (newItem != null) {\r\n          m.push(newItem);\r\n        }\r\n        if (item.filterValue != null) {\r\n          arr.push(item);\r\n        }\r\n        if (item.children != null && item.children != undefined) {\r\n          item.children.forEach(i => {\r\n            this.assembleLayerItems(i, arr, m, checkedArray);\r\n          })\r\n        }\r\n      }\r\n    },\r\n\r\n    //递归获节点信息\r\n    getCheckedIdsRecur (item, ids_) {\r\n      if (item.id && item.checkStatus == 'Y') {\r\n        ids_ = (ids_ == null ? [] : ids_);\r\n        ids_.push(item.id);\r\n      }\r\n      //如果子节点选中，需要将父节半选中状态节点加入\r\n      let currentLen = ids_.length;\r\n      if (item.children != null) {\r\n        item.children.forEach(item => {\r\n          this.getCheckedIdsRecur(item, ids_)\r\n        })\r\n        if (currentLen < ids_.length && ids_.indexOf(item.id) == -1) {\r\n          ids_.push(item.id);\r\n        }\r\n      }\r\n    },\r\n\r\n    //获取树所有的节点信息\r\n    getTreecheckedId (treeData) {\r\n      let ids = [];\r\n      treeData.forEach(item => {\r\n        this.getCheckedIdsRecur(item, ids);\r\n      })\r\n      return ids;\r\n    },\r\n\r\n\r\n\r\n    initSingleLayer (featuresData, param, dataItem, _this) {\r\n      let layerName = param.layerName;\r\n      let vectorSourceTmp;\r\n      if (layerName == 'Test:xzxw' || layerName == 'Test:jqxw' || layerName == 'Test:yqxw') {\r\n        vectorSourceTmp = new VectorSource({\r\n          features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4326' })).readFeatures(featuresData)\r\n        });\r\n      } else {\r\n        vectorSourceTmp = new VectorSource({\r\n          features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' })).readFeatures(featuresData)\r\n        });\r\n      }\r\n      let vectorLayerTmp = new VectorLayer({\r\n        source: vectorSourceTmp,\r\n        name: layerName,\r\n        filterVal: param.filterVal,\r\n        style: (feature, solution) => {\r\n          return _this.initLayerStyle(feature, dataItem, vectorLayerTmp);\r\n        }\r\n      })\r\n\r\n      console.log(param.layerName + \":\" + param.filterVal);\r\n      _this.mapData.addLayer(vectorLayerTmp);\r\n      _this.layerArray.push(vectorLayerTmp);\r\n\r\n    },\r\n\r\n\r\n\r\n    //添加单个图层信息\r\n    addSingleLayer (_this, layerName, dataItem) {\r\n      let filterKey = dataItem.filterKey;\r\n      let filterVal = dataItem.filterValue;\r\n      if (!layerName || !filterVal) {\r\n        return;\r\n      }\r\n      var url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + encodeURIComponent(layerName)\r\n        + '&maxFeatures=500000000&outputFormat=application%2Fjson&cql_filter=' + encodeURIComponent(filterKey) + '=' + encodeURIComponent(\"'\" + filterVal + \"'\");\r\n      let param = {\r\n        layerName: layerName,\r\n        filterVal: filterVal\r\n      }\r\n      console.log(decodeURIComponent(url))\r\n      axios.get(url, param, { timeout: 1200000 }).then(function (res) {\r\n        var featuresData = res.data;\r\n        if (featuresData) {\r\n\r\n          _this.initSingleLayer(featuresData, param, dataItem, _this)\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    //根据图层名字以及过滤属性值获取图层信息(线和面文件同时查询处理)\r\n    getAreaLineLays (layerName, filterVal) {\r\n      let arrays_ = [];\r\n      let isEqual = false;\r\n      for (let i = 0; i < this.areaLineFilterVals.length; i++) {\r\n        for (let key in this.areaLineFilterVals[i]) {\r\n          if (arrays_.indexOf(key) == -1) {\r\n            arrays_.push(key)\r\n          }\r\n          if (key == layerName && this.areaLineFilterVals[i][layerName] == filterVal) {\r\n            isEqual = true;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      if (isEqual) {\r\n        return arrays_;\r\n      } else {\r\n        arrays_ = [];\r\n        arrays_.push(layerName)\r\n        return arrays_;\r\n      }\r\n    },\r\n\r\n\r\n    addVectorLayerWfs (checkedArray) {\r\n      let _this = this;\r\n      let checkedLayerMap = this.getLayerMap(checkedArray);\r\n      for (let k = 0; k < checkedLayerMap.length; k++) {\r\n        let item = checkedLayerMap[k];\r\n        let treeDataItems_ = item.treeDataItem;\r\n        let layerName_ = item.layerName;\r\n        if (!treeDataItems_ || treeDataItems_.length == 0 || !layerName_) {\r\n          continue;\r\n        }\r\n        for (let i = 0; i < treeDataItems_.length; i++) {\r\n          var filterVal = treeDataItems_[i].filterValue;\r\n          var filterKey = treeDataItems_[i].filterKey;\r\n          if (!filterKey || !filterVal) {\r\n            continue;\r\n          }\r\n          try {\r\n            //处理线和面两边都存在数据的情况\r\n            let layerFileArray = this.getAreaLineLays(layerName_, filterVal);\r\n            for (let m = 0; m < layerFileArray.length; m++) {\r\n              this.addSingleLayer(this, layerFileArray[m], treeDataItems_[i]);\r\n            }\r\n          } catch (err) {\r\n            console.log(\"图层：\" + layerName_ + \"过滤值：\" + filterVal + \"请求异常：\", err);\r\n          }\r\n        }\r\n      }\r\n      //})\r\n    },\r\n\r\n\r\n\r\n    getLayerMap (checkedArray) {\r\n      if (checkedArray == null) {\r\n        return null;\r\n      }\r\n      var layerMap = [];\r\n      this.treeData2.forEach(item => {\r\n        this.assembleLayerItems(item, null, layerMap, checkedArray);\r\n      })\r\n\r\n      layerMap = layerMap.filter(item => (item.layerName && item.filterKey))\r\n\r\n      return layerMap;\r\n    },\r\n\r\n\r\n    createPointStyle (feature, item) {\r\n      if (!item) {\r\n        return undefined;\r\n      }\r\n      let styles = [];\r\n\r\n      let style = new OlStyleStyle({\r\n        //图标样式\r\n        // image: new OlStyleIcon({\r\n        //   anchor: [10, 18],\r\n        //   scale: 1,\r\n        //   anchorOrigin: 'top-right',\r\n        //   anchorXUnits: 'pixels',\r\n        //   anchorYUnits: 'pixels',\r\n        //   offsetOrigin: 'bottom-left',\r\n        //   opacity: 1,\r\n        //   src: require('../../assets/images/mark.png'),\r\n        // }),\r\n        //文本样式\r\n        text: new Text({\r\n          textAlign: 'center',\r\n          textBaseline: 'middle',\r\n          font: 'normal 0.15rem 微软雅黑',\r\n          text: feature.values_.name,\r\n          offsetY: -25,\r\n          fill: new Fill({\r\n            color: feature.values_.font_color\r\n          }),\r\n          rotation: feature.values_.font_angle * Math.PI / 180,\r\n          padding: [2, 5, 2, 5],\r\n        }),\r\n        // 设置层级\r\n        zIndex: 1999999999\r\n      });\r\n      styles.push(style);\r\n      return styles;\r\n    },\r\n\r\n\r\n    //初始要素样式\r\n    initLayerStyle (feature, item, vectorLayerTmp) {\r\n      let fileType = feature.values_.file_type;\r\n      if (feature.values_.geometry instanceof Point) {\r\n        if (fileType && fileType == 'image') {\r\n          //图片弹框样式\r\n          feature.values_.src = require(\"@/assets/images/img_mark.png\");\r\n          if (this.imagePopArray.indexOf(feature.values_.name) == -1) {\r\n            console.log(feature.values_.name);\r\n            this.imagePopArray.push(feature.values_.name);\r\n          }\r\n          return this.createImageMarkStyle(feature, vectorLayerTmp);\r\n\r\n        } else {\r\n          let layerName = vectorLayerTmp.values_.name;\r\n          if (this.textMarkLayerNmArray.indexOf(layerName) == -1) {\r\n            vectorLayerTmp.setVisible(false)\r\n            vectorLayerTmp.set('initHide', true)\r\n            this.textMarkLayerNmArray.push(layerName);\r\n          }\r\n          vectorLayerTmp.values_.zIndex = 99999999999999\r\n          return this.createPointStyle(feature, item);\r\n        }\r\n      } else {\r\n        return this.initGraphStyle(feature, item);\r\n      }\r\n    },\r\n\r\n    getStyleSetting (feature, item) {\r\n      let style = {};\r\n      let strokeColor = item.strokeColor ? item.strokeColor : (feature.get('border_col') ? feature.get('border_col') : feature.get('line_color'))\r\n      let fillColor = item.fillColor ? item.fillColor : feature.get('fill_color')\r\n      let strokeWidth = item.width ? item.width : (feature.get('border_wid') ? feature.get('border_wid') : feature.get('line_width'))\r\n      style.strokeColor = strokeColor;\r\n      style.fillColor = fillColor;\r\n      style.strokeWidth = strokeWidth;\r\n      return style;\r\n    },\r\n\r\n\r\n\r\n\r\n    initGraphStyle (feature, item) {\r\n      let styles = [];\r\n      var fill_style = feature.get(\"fill_style\");\r\n      if (!item) {\r\n        return undefined;\r\n      }\r\n      let styleSetting = this.getStyleSetting(feature, item);\r\n      var dashOffset = item.dashOffset;\r\n      var dasharray = item.dashArray;\r\n      var lineColor = styleSetting.strokeColor;\r\n      var fillColor = styleSetting.fillColor;\r\n      let strokeWidth = styleSetting.strokeWidth;\r\n      let style = new Style();\r\n      // //线条颜色\r\n      // let strokeColor = item.strokeColor;\r\n      // let strokeWidth = item.width;\r\n      let stroke = null;\r\n      if (lineColor) {\r\n        stroke = new Stroke({\r\n          color: lineColor,\r\n        })\r\n      }\r\n      // if (stroke == null && strokeColor != null) {\r\n      //   stroke = new Stroke({\r\n      //     color: strokeColor,\r\n      //   })\r\n      // }\r\n      if (strokeWidth) {\r\n        if (stroke == null) {\r\n          stroke = new Stroke({\r\n            width: strokeWidth,\r\n          })\r\n        } else {\r\n          stroke.width_ = strokeWidth;\r\n        }\r\n      }\r\n      if (dashOffset) {\r\n\r\n        stroke.lineDashOffset_ = dashOffset;\r\n      }\r\n      if (dasharray) {\r\n\r\n        stroke.lineDash_ = dasharray.split(\",\");\r\n      }\r\n      style.stroke_ = stroke;\r\n      //填充颜色\r\n      if (fillColor && fill_style != '' && fill_style != 'No Fill') {\r\n        let fill = new Fill({\r\n          color: fillColor\r\n        })\r\n        style.fill_ = fill;\r\n      }\r\n\r\n      styles.push(style);\r\n      return styles;\r\n    },\r\n\r\n\r\n\r\n    handleCheckChange (data_) {\r\n      this.clearHighlight();\r\n      this.removePopup();\r\n      let halfCheckNode = this.$refs.tree.getHalfCheckedNodes();\r\n      let halfCheckIds = [];\r\n      halfCheckNode.forEach(item => {\r\n        halfCheckIds.push(item.id)\r\n      });\r\n      //获取选中以及半选中节点\r\n      var checkedArray = this.$refs.tree.getCheckedKeys(false);\r\n      checkedArray = checkedArray.concat(halfCheckIds);\r\n      let checkedLayerArray = this.getLayerMap(checkedArray);\r\n      let currentLayers = this.layerArray;\r\n      //如果当前选中数组为空，当前所有图层隐藏\r\n      if (checkedLayerArray == null || checkedLayerArray.length == 0) {\r\n        currentLayers.forEach(item => {\r\n          item.setVisible(false)\r\n          //this.setLayerVisible(item, false);\r\n        })\r\n        return;\r\n      }\r\n      //获取待添加的图层(图例树初始化部分选中)\r\n      for (let i = 0; i < checkedLayerArray.length; i++) {\r\n        if (!checkedLayerArray[i].layerName) {\r\n          continue;\r\n        }\r\n        let treeDataItem = checkedLayerArray[i].treeDataItem;\r\n        if (!treeDataItem) {\r\n          currentLayers.forEach(item => {\r\n            if (item.values_.name == checkedLayerArray[i].layerName) {\r\n              item.setVisible(false)\r\n\r\n            }\r\n          })\r\n          continue;\r\n        }\r\n        for (let j = 0; j < treeDataItem.length; j++) {\r\n          let item = treeDataItem[j];\r\n          let exist = false;\r\n          for (let n = 0; n < currentLayers.length; n++) {\r\n            let layer = currentLayers[n];\r\n            if (layer.values_.filterVal == item.filterValue &&\r\n              layer.values_.name == checkedLayerArray[i].layerName) {\r\n              exist = true;\r\n              layer.setVisible(true)\r\n              continue;\r\n            }\r\n\r\n          }\r\n\r\n          //新增图层\r\n          if (!exist) {\r\n            console.log(\"新增图层=======================\");\r\n            console.log(checkedLayerArray[i].layerName);\r\n            //处理线和面两边都存在数据的情况\r\n            let layerFileArray = this.getAreaLineLays(checkedLayerArray[i].layerName, item.filterValue);\r\n            for (let m = 0; m < layerFileArray.length; m++) {\r\n              this.addSingleLayer(this, layerFileArray[m], item);\r\n            }\r\n            continue;\r\n          }\r\n        }\r\n      }\r\n\r\n      //隐藏取消勾选的图层\r\n      if (!currentLayers || currentLayers.length == 0) {\r\n        return;\r\n      }\r\n      let existLayer = [];\r\n      for (let k = 0; k < currentLayers.length; k++) {\r\n        let exist = false;\r\n        for (let i = 0; i < checkedLayerArray.length; i++) {\r\n          let tempItems = checkedLayerArray[i].treeDataItem;\r\n          let layArray_ = this.getAreaLineLays(checkedLayerArray[i].layerName, currentLayers[k].values_.filterVal);\r\n          for (let m = 0; m < tempItems.length; m++) {\r\n            if (currentLayers[k].values_.filterVal == tempItems[m].filterValue &&\r\n              currentLayers[k].values_.name == checkedLayerArray[i].layerName) {\r\n              exist = true;\r\n              if (existLayer.indexOf(tempItems[m].filterValue) == -1 && layArray_.length > 1) {\r\n                existLayer.push(tempItems[m].filterValue);\r\n              }\r\n              currentLayers[k].setVisible(true);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (!exist) {\r\n          currentLayers[k].setVisible(false);\r\n\r\n        }\r\n      }\r\n\r\n      //线和面同时查询显示隐藏控制处理\r\n      for (let n = 0; n < currentLayers.length; n++) {\r\n        let exist = false;\r\n        let areaLineConfig = this.getAreaLineLays(currentLayers[n].values_.name, currentLayers[n].values_.filterVal);\r\n        for (let m = 0; m < existLayer.length; m++) {\r\n          if (currentLayers[n].values_.filterVal == existLayer[m] && areaLineConfig.length > 1) {\r\n            exist = true;\r\n            currentLayers[n].setVisible(true);\r\n          }\r\n        }\r\n        if (!exist) {\r\n          if (areaLineConfig.length > 1) {\r\n            currentLayers[n].setVisible(false);\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n\r\n\r\n      // 图片标注关闭开启时控制显示隐藏\r\n      this.imageOverLayArray.forEach(item => {\r\n        if (item.id == filterVal) {\r\n          if (!visible) {\r\n            this.removeImgPopup(item.id);\r\n          } else {\r\n            // console.log(\"ccccc\");\r\n            // console.log(item);\r\n            //this.showImgPopup(item.id, item.values_.position)\r\n          }\r\n        }\r\n      })\r\n\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    // 弹出框\r\n    addPopup (coordinate, feature) {\r\n      this.removePopup()\r\n      let featureValues = feature.values_;\r\n      this.projectName = featureValues.layer == null ? '' : featureValues.layer;\r\n      this.projectDesc = featureValues.项目概 == null || featureValues.项目概 == undefined ? '' : featureValues.项目概;\r\n      this.start = featureValues.起点 == null ? '' : featureValues.起点;\r\n      this.end = featureValues.终点 == null ? \"\" : featureValues.终点;\r\n      this.length = featureValues.长度 == null ? \"\" : featureValues.长度;\r\n      this.ztz = featureValues.总投资 == null ? \"\" : featureValues.总投资;\r\n      this.kcsjffh = featureValues.勘察_1 == null ? \"\" : featureValues.勘察_1;\r\n      this.status = featureValues.目前工 == null ? \"\" : featureValues.目前工;\r\n      this.bz = featureValues.备注 == null ? \"\" : featureValues.备注;\r\n\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup')\r\n      if (this.projectName === \"0\") {\r\n        return\r\n      }\r\n      if (this.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        this.overlay = new Overlay({\r\n          element: container,\r\n\r\n          autoPan: {\r\n            animation: {\r\n              duration: 250\r\n            }\r\n          }\r\n        })\r\n\r\n        // 添加到map\r\n        this.mapData.addOverlay(this.overlay)\r\n      }\r\n      // 设置弹出层位置即可出现\r\n      this.overlay.setPosition(coordinate)\r\n      document.getElementById('popup').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        this.overlay.setPosition(undefined)\r\n        this.showGk = false,\r\n          this.showBz = false\r\n        this.clearHighlight()\r\n      }\r\n\r\n    },\r\n\r\n    //隐藏图片弹框\r\n    removeImgPopup (id) {\r\n      let result = false;\r\n      if (!id) {\r\n        return result;\r\n      }\r\n      let layerArray = this.imageOverLayArray;\r\n      if (layerArray.length == 0) {\r\n        return result;\r\n      }\r\n      layerArray.forEach(item => {\r\n        if (item.id == id) {\r\n\r\n          if (item.values_.position != undefined) {\r\n            result = true;\r\n          }\r\n          item.setPosition(undefined)\r\n        }\r\n      })\r\n      return result;\r\n    },\r\n\r\n    //显示图片弹框\r\n    showImgPopup (id, coordinate) {\r\n      if (!id) {\r\n        return;\r\n      }\r\n      let layerArray = this.imageOverLayArray;\r\n      if (layerArray.length == 0) {\r\n        return;\r\n      }\r\n      layerArray.forEach(item => {\r\n        if (item.id == id) {\r\n          let container = document.getElementById('imagePopup' + id);\r\n          if (container) {\r\n            container.style.display = 'block';\r\n            item.setPosition(coordinate)\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let arrayLen = arr.length;\r\n      let remove = 0;\r\n      for (let k = 0; k < arrayLen; k++) {\r\n        let item = arr[k - remove]\r\n        let layerId = item.values_.id\r\n        if (layerId != null && layerId != undefined) {\r\n          if (layerId.indexOf(\"highlightLayer\") != -1) {\r\n            this.mapData.removeLayer(item);\r\n            remove++;\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n    },\r\n\r\n    //根据图层名字高亮\r\n    addHighLightByLayerName (this_, layerName, filterVal) {\r\n      let layerFileArray = this_.getAreaLineLays(layerName, filterVal);\r\n      let featureArray = [];\r\n      for (let m = 0; m < layerFileArray.length; m++) {\r\n        for (let n = 0; n < this_.layerArray.length; n++) {\r\n          if (layerFileArray[m] != this_.layerArray[n].values_.name || this_.layerArray[n].values_.filterVal != filterVal) {\r\n            continue;\r\n          }\r\n          let vectoryResouce = this_.layerArray[n].getSource();\r\n          featureArray = vectoryResouce.featuresRtree_.getAll();\r\n          this_.addHighLightStyle(featureArray, this_, layerFileArray[m]);\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n    addHightLigthByLayer (feature, layer, this_) {\r\n      let layerName = layer.values_.name;\r\n      let filterVal = feature.values_.layer;\r\n      let layerFileArray = this_.getAreaLineLays(layerName, filterVal);\r\n      let queryParam = {};\r\n      queryParam.layerNameArray = layerFileArray;\r\n      queryParam.filterValue = filterVal;\r\n      this_.clearHighlight();\r\n      getHighLightMode(queryParam).then(response => {\r\n        let respData = response.data;\r\n        this_.clearHighlight();\r\n        if (respData == null || respData == 'N') {\r\n          let featureArray = [];\r\n          featureArray.push(feature);\r\n          this_.addHighLightStyle(featureArray, this_, layerName);\r\n        } else {\r\n          this_.addHighLightByLayerName(this_, layerName, filterVal);\r\n        }\r\n\r\n\r\n      });\r\n    },\r\n\r\n    createHighLightStyle () {\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\",\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n          width: 3.5\r\n        }),\r\n      })\r\n      return highLightStyle;\r\n    },\r\n\r\n\r\n    addHighLightStyle (featureObj, thisObj, layerName) {\r\n      if (!featureObj) {\r\n        return;\r\n      }\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        zIndex: 9999999999999,\r\n        name: layerName,\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          return thisObj.createHighLightStyle();\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\" + Math.round(Math.random() * 1000))\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n\r\n    },\r\n\r\n    changeMap (num) {\r\n      this.activeBtn = num\r\n      if (this.activeBtn == 1) {\r\n        gaodeMapLayer.setVisible(false)\r\n        wxMapLayer.setVisible(true)\r\n        //修改文字标注样式\r\n        this.changeTextStyle(this.activeBtn)\r\n      } else if (this.activeBtn == 2) {\r\n        gaodeMapLayer.setVisible(true)\r\n        wxMapLayer.setVisible(false)\r\n        this.changeTextStyle(this.activeBtn)\r\n      } else if (this.activeBtn == 3) {\r\n        gaodeMapLayer.setVisible(false)\r\n        wxMapLayer.setVisible(false)\r\n        this.changeTextStyle(this.activeBtn)\r\n      }\r\n    },\r\n\r\n    createPointStyleByColor (feature, color) {\r\n      let styles = [];\r\n      let style = new OlStyleStyle({\r\n        // //图标样式\r\n        // image: new OlStyleIcon({\r\n        //   anchor: [10, 18],\r\n        //   scale: 1,\r\n        //   anchorOrigin: 'top-right',\r\n        //   anchorXUnits: 'pixels',\r\n        //   anchorYUnits: 'pixels',\r\n        //   offsetOrigin: 'bottom-left',\r\n        //   opacity: 1,\r\n        //   src: require('../../assets/images/mark.png'),\r\n        // }),\r\n        //文本样式\r\n        text: new Text({\r\n          textAlign: 'center',\r\n          textBaseline: 'middle',\r\n          font: 'normal 0.15rem 微软雅黑',\r\n          text: feature.values_.name,\r\n          offsetY: -25,\r\n          fill: new Fill({\r\n            color: color\r\n          }),\r\n          rotation: feature.values_.font_angle * Math.PI / 180,\r\n          padding: [2, 5, 2, 5],\r\n        }),\r\n        // 设置层级\r\n        zIndex: 1999999999\r\n      });\r\n      styles.push(style);\r\n      return styles;\r\n    },\r\n\r\n\r\n    changeTextStyle (checkVal) {\r\n      let textLayer = this.textMarkLayerNmArray;\r\n      this.layerArray.forEach(item => {\r\n        let layerName = item.values_.name\r\n        if (textLayer.indexOf(layerName) != -1) {\r\n          let vectoryResouce = item.getSource();\r\n          let featureArray = vectoryResouce.featuresRtree_.getAll();\r\n          for (let m = 0; m < featureArray.length; m++) {\r\n            let fontcolor = featureArray[m].values_.font_color;\r\n            let changeColor;\r\n            if (checkVal == 1) {\r\n              changeColor = '#ffff00'\r\n            } else {\r\n              changeColor = '#000000'\r\n            }\r\n            featureArray[m].setStyle(this.createPointStyleByColor(featureArray[m], changeColor))\r\n          }\r\n\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    //卫星地图切换\r\n    switchChange () {\r\n      let layerTypeSelect = this.value1;\r\n      if (layerTypeSelect) {\r\n        gaodeMapLayer.setVisible(false)\r\n        wxMapLayer.setVisible(true)\r\n      } else {\r\n        gaodeMapLayer.setVisible(true)\r\n        wxMapLayer.setVisible(false)\r\n      }\r\n    },\r\n\r\n    //创建图片弹框\r\n    createImageOverLayer (feature, evt, layer) {\r\n      let id = feature.values_.name;\r\n      let container = document.getElementById(\"imagePopup\" + id)\r\n      console.log(\"弹窗容器为空\");\r\n      if (container == null) {\r\n        return;\r\n      }\r\n      let content = document.getElementById('imageContent' + id)\r\n      let imageFileName = feature.values_.name + \".png\";\r\n      let src = require(\"@/assets/images/\" + imageFileName);\r\n      var zoom = this.mapData.getView().getZoom();\r\n      let width = (zoom - this.markMinZoom) * 250 + 100;\r\n      let height = width * 0.5582\r\n      content.style.width = width;\r\n      content.style.height = height;\r\n      content.innerHTML = `<img src = ` + src + ` style = 'width:100%` + `;height:100%` + `'/>`;\r\n      let overlayTemp = null;\r\n      this.imageOverLayArray.forEach(item => {\r\n        if (item.id == id) {\r\n          overlayTemp = item;\r\n        }\r\n      })\r\n      if (overlayTemp == null) {\r\n        overlayTemp = new Overlay({\r\n          element: container,\r\n          id: id,\r\n          stopEvent: true,\r\n          insertFirst: false\r\n\r\n\r\n        })\r\n        this.imageOverLayArray.push(overlayTemp);\r\n      }\r\n      this.mapData.addOverlay(overlayTemp)\r\n      overlayTemp.setPosition(evt.coordinate)\r\n      container.style.display = 'block';\r\n    },\r\n\r\n\r\n    //设置标记图片样式\r\n    createImageMarkStyle (feature, vectorLayerTmp) {\r\n      let this_ = this;\r\n      vectorLayerTmp.values_.zIndex = 99999999999999\r\n      var zoom = this.mapData.getView().getZoom();\r\n      let scaleChange = (zoom - this.markMinZoom) * 0.2 + 0.5;\r\n      //设置可拖动\r\n      var translate = new Translate({\r\n        hitTolerance: 20,\r\n        layers: [vectorLayerTmp]\r\n      });\r\n      //图片标注拖动，图片弹窗关闭\r\n      translate.on('translating', function (e) {\r\n        let result = this_.removeImgPopup(feature.values_.name);\r\n        translate.values_.openStatus = result;\r\n\r\n      })\r\n\r\n      translate.on(['translateend'], function (e) {\r\n        let openStatus = translate.values_.openStatus;\r\n        console.log('拖动结束' + openStatus)\r\n        if (openStatus) {\r\n          let coordinate = e.coordinate;\r\n          this_.showImgPopup(feature.values_.name, coordinate);\r\n        }\r\n        //重置状态\r\n        translate.values_.openStatus = null;\r\n      })\r\n\r\n      this.mapData.addInteraction(translate);\r\n      return new OlStyleStyle({\r\n        //图标样式\r\n        image: new OlStyleIcon({\r\n          anchor: [10, 18],\r\n          scale: scaleChange,\r\n          anchorOrigin: 'top-right',\r\n          anchorXUnits: 'pixels',\r\n          anchorYUnits: 'pixels',\r\n          offsetOrigin: 'bottom-left',\r\n          opacity: 1,\r\n          src: feature.values_.src\r\n        }),\r\n      });\r\n    },\r\n\r\n\r\n    // 鼠标点击地图事件\r\n    mapClick (evt) {\r\n      let pixel = this.mapData.getEventPixel(evt.originalEvent);\r\n      let featureInfo = {};\r\n      this.mapData.forEachFeatureAtPixel(pixel,\r\n        function (feature, layer) {\r\n          featureInfo.feature = feature;\r\n          featureInfo.layer = layer;\r\n          return featureInfo;\r\n        });\r\n      let feature = featureInfo.feature;\r\n      let layer = featureInfo.layer;\r\n      if (featureInfo.feature) {\r\n        //捕捉到要素后，弹框\r\n        let coordinate = evt.coordinate\r\n        this.addPopup(coordinate, feature)\r\n        this.addHightLigthByLayer(feature, layer, this)\r\n        //对于图片图层展示图片弹框\r\n        this.popImage(feature, layer, evt);\r\n      } else {\r\n\r\n        this.removePopup();\r\n      }\r\n    },\r\n\r\n    createImageStyle (feature, image) {\r\n      var zoom = this.mapData.getView().getZoom();\r\n      let scaleChange = (zoom - this.markMinZoom) * 0.2 + 0.1;\r\n      return new OlStyleStyle({\r\n        //图标样式\r\n        image: new OlStyleIcon({\r\n          anchor: [10, 18],\r\n          scale: scaleChange,\r\n          anchorOrigin: 'top-right',\r\n          anchorXUnits: 'pixels',\r\n          anchorYUnits: 'pixels',\r\n          offsetOrigin: 'bottom-left',\r\n          opacity: 1,\r\n          src: image\r\n        }),\r\n      });\r\n    },\r\n\r\n\r\n\r\n    popImage (feature, layer, evt) {\r\n      if (!feature.values_.file_type) {\r\n        return;\r\n      }\r\n      if (feature.values_.file_type != 'image') {\r\n        return;\r\n      }\r\n\r\n      this.createImageOverLayer(feature, evt, layer);\r\n    },\r\n\r\n\r\n\r\n    mapMoveend () {\r\n      var zoom = this.mapData.getView().getZoom();\r\n      if (zoom > this.markMinZoom) {\r\n\r\n        //显示文字标注\r\n        this.layerArray.forEach(item => {\r\n          if (item.values_.moveeHide || item.values_.initHide) {\r\n            item.setVisible(true);\r\n            item.set('moveeHide', false);\r\n            item.set('initHide', false);\r\n          }\r\n        })\r\n\r\n      } else if (zoom <= this.markMinZoom) {\r\n        this.markFlag = false;\r\n        //隐藏图片弹框\r\n        this.imageOverLayArray.forEach(item => {\r\n          let container = document.getElementById('imagePopup' + item.id);\r\n          if (container != null) {\r\n            container.style.display = 'none';\r\n          }\r\n        });\r\n\r\n        //隐藏文字标注\r\n        this.layerArray.forEach(item => {\r\n          if (this.textMarkLayerNmArray.indexOf(item.values_.name) != -1) {\r\n            if (item.values_.visible) {\r\n              //缩放隐藏标识\r\n              item.set('moveeHide', true)\r\n            }\r\n            item.setVisible(false);\r\n          }\r\n        })\r\n\r\n\r\n\r\n      }\r\n\r\n      //根据缩放事件调整弹框大小\r\n      this.imageOverLayArray.forEach(item => {\r\n        let container = document.getElementById('imagePopup' + item.id)\r\n        if (container != null) {\r\n          let width = (zoom - this.markMinZoom) * 250 + 100;\r\n          container.style.width = width + \"px\"\r\n          container.style.height = width * 0.5582 + \"px\"\r\n        }\r\n      })\r\n\r\n    },\r\n    down (e, i) {\r\n      let dragObj = e.currentTarget\r\n      this.isMouseDown = true\r\n      this['currentX' + i] = e.clientX\r\n      this['currentY' + i] = e.clientY\r\n      this['objX' + i] = dragObj.offsetLeft\r\n      this['objY' + i] = dragObj.offsetTop\r\n      document.onmouseup = e => {\r\n\r\n        this.isMouseDown = false //鼠标抬起时候不要在跟随鼠标移动\r\n        if (!this.isMouseDown) {\r\n          return false\r\n        }\r\n        this.isMouseDown = false //鼠标抬起时候不要在跟随鼠标移动\r\n        dragObj.style.zIndex = 1\r\n      }\r\n      document.onmousemove = e => {\r\n        if (this.isMouseDown == false) {\r\n          return false\r\n        }\r\n        let moveX = e.clientX - this['currentX' + i]\r\n        let moveY = e.clientY - this['currentY' + i]\r\n        dragObj.style.left = this['objX' + i] + moveX + 'px'\r\n        dragObj.style.top = this['objY' + i] + moveY + 'px'\r\n        dragObj.style.zIndex = 999 //让拖动的div权重最大\r\n      }\r\n\r\n    },\r\n    scaleDom (e) {\r\n\r\n      let div = e.currentTarget\r\n      let zoom = parseInt(div.style.zoom, 10) || 100;\r\n      zoom += e.wheelDelta / 12;\r\n      if (zoom > 0) { div.style.zoom = `${zoom}%` }\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.ol-popup {\r\n  position: absolute;\r\n  bottom: 0.1875rem;\r\n  left: -2.1125rem;\r\n  width: 4.8875rem;\r\n  border-radius: 0.0625rem;\r\n  padding: 0.125rem 0.1875rem;\r\n  background: #ffffff;\r\n  border: 0.0125rem solid #d2e3fa;\r\n  box-shadow: 0 0.125rem 0.25rem 0.0125rem rgba(138, 144, 153, 0.4);\r\n  color: #4a4a4a;\r\n}\r\n.ol-popup-closer {\r\n  position: absolute;\r\n  top: 0.1rem;\r\n  color: #999999;\r\n  font-weight: bold;\r\n  font-size: 0.125rem;\r\n  right: 0.1rem;\r\n}\r\n.popup-nav-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.popup-nav-title span:first-child {\r\n  color: #000;\r\n}\r\n.popup-nav-title span:last-child {\r\n  color: #707070;\r\n  font-size: 0.15rem;\r\n}\r\n.el-divider--horizontal {\r\n  margin: 0.1875rem 0;\r\n}\r\n.popup-nav-item {\r\n  display: flex;\r\n  color: #4a4a4a;\r\n}\r\n.popup-nav-icon {\r\n  margin-right: 0.1rem;\r\n  width: 0.1875rem;\r\n}\r\n.popup-item {\r\n  font-size: 0.175rem;\r\n  margin-bottom: 0.1rem;\r\n}\r\n.jt-icon {\r\n  width: 0.375rem;\r\n  position: absolute;\r\n  bottom: -0.175rem;\r\n  left: 1.925rem;\r\n}\r\n::v-deep .el-checkbox {\r\n  position: relative;\r\n  display: block;\r\n  height: 0.325rem;\r\n}\r\n.el-checkbox-group {\r\n  width: 100%;\r\n}\r\n.colorBox {\r\n  width: 0.6rem;\r\n  height: 0.15rem;\r\n  display: inline-block;\r\n  border-radius: 0.025rem;\r\n  position: absolute;\r\n  right: 0.125rem;\r\n}\r\n.road-selector-pop {\r\n  width: 1.5rem;\r\n  height: 2.5rem;\r\n  z-index: 200000;\r\n  position: fixed;\r\n  margin-left: 0.875rem;\r\n  margin-top: 0.6875rem;\r\n  .pop-title {\r\n    font-weight: bold;\r\n    font-size: 0.175rem;\r\n  }\r\n}\r\n.el-collapse-item {\r\n  width: 3.25rem;\r\n  height: 0.55rem;\r\n  opacity: 1;\r\n\r\n  ::v-deep .el-collapse-item__header {\r\n    height: 0.55rem;\r\n    padding-left: 0.125rem;\r\n    background: #ffffff;\r\n    box-shadow: 0 0.125rem 0.25rem 0.0125rem rgba(138, 144, 153, 0.4);\r\n    border-radius: 0.1rem;\r\n  }\r\n}\r\n::v-deep .el-collapse {\r\n  border: none;\r\n  box-shadow: 0 0.125rem 0.25rem 0.0125rem rgba(138, 144, 153, 0.4);\r\n}\r\n::v-deep .el-collapse-item__wrap {\r\n  border-radius: 0 0 0.1rem 0.1rem;\r\n  margin-top: -0.0625rem;\r\n  box-shadow: 0 0.125rem 0.25rem 0.0125rem rgba(138, 144, 153, 0.4);\r\n}\r\n.dot {\r\n  width: 0.3rem;\r\n  height: 0.125rem;\r\n  border-radius: 0.025rem;\r\n  display: inline-block;\r\n  margin-left: 0.1rem;\r\n}\r\n::v-deep .el-tree-node__children {\r\n  overflow: initial !important;\r\n}\r\n.change-div {\r\n  position: absolute;\r\n  right: 0.25rem;\r\n  top: 0.375rem;\r\n  z-index: 999;\r\n  .switch-btn {\r\n    display: inline-block;\r\n    width: 1.2875rem;\r\n    height: 0.475rem;\r\n    text-align: center;\r\n    background: #001d40;\r\n    box-sizing: border-box;\r\n    border: 0.025rem solid #336bb4;\r\n    font-size: 0.175rem;\r\n    font-weight: bold;\r\n    line-height: 0.4375rem;\r\n    color: #ffffff;\r\n    cursor: pointer;\r\n  }\r\n  .left-btn {\r\n    border-radius: 0.2375rem 0 0 0.2375rem;\r\n    margin-right: 0.1rem;\r\n  }\r\n  .right-btn {\r\n    border-radius: 0 0.2375rem 0.2375rem 0;\r\n    margin-left: 0.1rem;\r\n  }\r\n  .switch-btn:hover {\r\n    background: linear-gradient(180deg, #2ca6ff 37%, #00ffb7 100%);\r\n    color: #ffffff;\r\n  }\r\n  .btn-active {\r\n    background: linear-gradient(180deg, #2ca6ff 37%, #00ffb7 100%);\r\n    color: #ffffff;\r\n  }\r\n}\r\n/* 设置滚动条的样式 */\r\n::-webkit-scrollbar {\r\n  width: 0.075rem;\r\n}\r\n/* 滚动槽 */\r\n::-webkit-scrollbar-track {\r\n  -webkit-box-shadow: inset006pxrgba(0, 0, 0, 0.3);\r\n  border-radius: 0.1rem;\r\n}\r\n/* 滚动条滑块 */\r\n::-webkit-scrollbar-thumb {\r\n  border-radius: 0.075rem;\r\n  background: #ebeef5;\r\n  -webkit-box-shadow: inset006pxrgba(0, 0, 0, 0.5);\r\n}\r\n::-webkit-scrollbar-thumb:window-inactive {\r\n  background: #ebeef5;\r\n}\r\n.tree-div {\r\n  height: 4rem;\r\n  overflow: auto;\r\n}\r\n</style>\r\n"]}]}