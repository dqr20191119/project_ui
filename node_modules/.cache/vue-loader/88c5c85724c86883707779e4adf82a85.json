{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\information-search\\project1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\information-search\\project1.vue","mtime":1663229169961},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJ29sL29sLmNzcycNCmltcG9ydCBNYXAgZnJvbSAnb2wvTWFwJw0KaW1wb3J0ICogYXMgb2xDb250cm9sIGZyb20gJ29sL2NvbnRyb2wnDQppbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3Jw0KaW1wb3J0IHsgZ2V0V2lkdGgsIGdldENlbnRlciB9IGZyb20gJ29sL2V4dGVudCcNCmltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZScNCmltcG9ydCBXTVRTIGZyb20gJ29sL3NvdXJjZS9XTVRTJw0KaW1wb3J0IFhZWiBmcm9tICdvbC9zb3VyY2UvWFlaJw0KaW1wb3J0IFdNVFNUaWxlR3JpZCBmcm9tICdvbC90aWxlZ3JpZC9XTVRTJw0KaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnb2wvcHJvai9Qcm9qZWN0aW9uJw0KaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnb2wvcHJvaicNCmltcG9ydCBwcm9qNCBmcm9tICdwcm9qNCcNCmltcG9ydCB7IHJlZ2lzdGVyIH0gZnJvbSAnb2wvcHJvai9wcm9qNCc7DQppbXBvcnQgVmVjdG9yU291cmNlIGZyb20gJ29sL3NvdXJjZS9WZWN0b3InDQppbXBvcnQgeyBUaWxlV01TIH0gZnJvbSAnb2wvc291cmNlJw0KaW1wb3J0IFZlY3RvckxheWVyIGZyb20gJ29sL2xheWVyL1ZlY3RvcicNCmltcG9ydCBGZWF0dXJlIGZyb20gJ29sL0ZlYXR1cmUnDQppbXBvcnQgeyBEcmF3IH0gZnJvbSAnb2wvaW50ZXJhY3Rpb24nDQppbXBvcnQgeyBTdHlsZSwgQ2lyY2xlLCBTdHJva2UsIEZpbGwgfSBmcm9tICdvbC9zcmMvc3R5bGUnDQppbXBvcnQgV0tUIGZyb20gJ29sL2Zvcm1hdC9XS1QnDQppbXBvcnQgR2VvSlNPTiBmcm9tICdvbC9mb3JtYXQvR2VvSlNPTicNCmltcG9ydCBPdmVybGF5IGZyb20gJ29sL092ZXJsYXknDQppbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gImVjaGFydHMiOw0KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJw0KaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0Jw0KaW1wb3J0IExpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9MaW5lU3RyaW5nJzsNCmltcG9ydCBNdWx0aUxpbmVTdHJpbmcgZnJvbSAnb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcnOw0KaW1wb3J0IE11bHRpUG9seWdvbiBmcm9tICdvbC9nZW9tL011bHRpUG9seWdvbic7DQppbXBvcnQgVnVlIGZyb20gJ3Z1ZScNCmltcG9ydCB7IGNsb25lIH0gZnJvbSAiQC91dGlscy9ydW95aSI7DQoNCi8v5Lit5b+D5Z2Q5qCHDQpjb25zdCBjZW50ZXJDb3JkaW5hdGUgPSBbNjU2OTUxLjIyMzc5ODk0LCAzNTU5MTM5LjI2NjI2MzY5XQ0KLy/lnZDmoIflrprkuYkNCnByb2o0LmRlZnMoIkVQU0c6NDU0OCIsICIrcHJvaj10bWVyYyArbGF0XzA9MCArbG9uXzA9MTE3ICtrPTEgK3hfMD01MDAwMDAgK3lfMD0wICtlbGxwcz1HUlM4MCArdW5pdHM9bSArbm9fZGVmcyIpOw0KcmVnaXN0ZXIocHJvajQpOw0KDQovL+WcsOWbvuWIneWni+WMlg0KY29uc3QgdmlldyA9IG5ldyBWaWV3KHsNCiAgY2VudGVyOiB0cmFuc2Zvcm0oY2VudGVyQ29yZGluYXRlLCAnRVBTRzo0NTQ4JywgJ0VQU0c6Mzg1NycpLA0KICBtaW5ab29tOiA0LA0KICBtYXhab29tOiAxOCwNCiAgem9vbTogMTMuNyAvLyDlnLDlm77liJ3lp4vljJbnmoTnvKnmlL7nuqfliKsNCn0pDQoNCg0KLy/pq5jlvrflnLDlm77lm77lsYINCmNvbnN0IGdhb2RlTWFwTGF5ZXIgPSBuZXcgVGlsZUxheWVyKHsNCiAgc291cmNlOiBuZXcgWFlaKHsNCiAgICB6SW5kZXg6IDEsDQogICAgdXJsOiAnaHR0cDovL3dlYnN0MHsxLTR9LmlzLmF1dG9uYXZpLmNvbS9hcHBtYXB0aWxlP2xhbmc9emhfY24mc2l6ZT0xJnNjYWxlPTEmc3R5bGU9NyZ4PXt4fSZ5PXt5fSZ6PXt6fScNCiAgfSkNCn0pOw0KDQoNCg0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlJvYWQiLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWM6ICcxJywNCiAgICAgIHZhbHVlMTogJ3RydWUnLA0KICAgICAgcm9hZFR5cGVSYWRpbzogW10sDQogICAgICByYWRpbzI6IFtdLA0KICAgICAgYWRkRm9ybTogew0KICAgICAgICBzRGVwdE5hbWU6ICcnLA0KICAgICAgICBzRGVwdElkOiAnJw0KICAgICAgfSwNCiAgICAgIHd4TWFwTGF5ZXI6IG51bGwsDQogICAgICBjaGVja2VkTGF5ZXJBcnJheTogW10sDQogICAgICB2ZWN0b3JBcnJheTogW10sDQogICAgICBwb3BEZXRhaWxGbGFnOiBmYWxzZSwNCiAgICAgIGZpbHRlclRyZWVEYXRhOiBbXSwNCiAgICAgIGxheWVyQXJyYXk6IFtdLA0KICAgICAgdHJlZURhdGE6IFsNCiAgICAgICAgew0KICAgICAgICAgIGlkOiA5MCwNCiAgICAgICAgICBsYWJlbDogJ+mhueebrueuoeeQhicsDQogICAgICAgICAgbGF5ZXJOYW1lOiAiVGVzdDpnaF9kbCIsDQogICAgICAgICAgZmlsdGVyS2V5OiAnbGF5ZXInLA0KICAgICAgICAgIGNoaWxkcmVuOiBbew0KICAgICAgICAgICAgaWQ6IDEsDQogICAgICAgICAgICBsYWJlbDogJ+mBk+i3rycsDQogICAgICAgICAgICBjaGlsZHJlbjogW3sNCiAgICAgICAgICAgICAgaWQ6IDExLA0KICAgICAgICAgICAgICBsYWJlbDogJzAx5YyX56uZ5b+r6YCf6LevJywNCiAgICAgICAgICAgICAgbGl0ZXJhbDogJzAx5YyX56uZ5b+r6YCf6LevJywNCiAgICAgICAgICAgICAgZmlsbENvbG9yOiAiI0M2RDdGNSIsDQogICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAiIzhEOTA5MiIsDQogICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgaWQ6IDEyLA0KICAgICAgICAgICAgICBsYWJlbDogJzAy5pyx5a625bGx5rKz6LevJywNCiAgICAgICAgICAgICAgbGl0ZXJhbDogJzAy5pyx5a625bGx5rKz6LevJywNCiAgICAgICAgICAgICAgZmlsbENvbG9yOiAiI0M2RDdGNSIsDQogICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAiIzhEOTA5MiIsDQogICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgaWQ6IDEzLA0KICAgICAgICAgICAgICBsYWJlbDogJzAz56uZ5Y2X5LiA6LevJywNCiAgICAgICAgICAgICAgbGl0ZXJhbDogJzAz56uZ5Y2X5LiA6LevJywNCiAgICAgICAgICAgICAgZmlsbENvbG9yOiAiI0M2RDdGNSIsDQogICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAiIzhEOTA5MiIsDQogICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGlkOiAxNCwNCiAgICAgICAgICAgICAgbGFiZWw6ICcwNOermeWNl+S6jOi3rycsDQogICAgICAgICAgICAgIGxpdGVyYWw6ICcwNOermeWNl+S6jOi3rycsDQogICAgICAgICAgICAgIGZpbGxDb2xvcjogIiNDNkQ3RjUiLA0KICAgICAgICAgICAgICBzdHJva2VDb2xvcjogIiM4RDkwOTIiLA0KICAgICAgICAgICAgICB3aWR0aDogIjEiLA0KDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBpZDogMTUsDQogICAgICAgICAgICAgIGxhYmVsOiAnMDXnq5nopb/ot68nLA0KICAgICAgICAgICAgICBmaWxsQ29sb3I6ICIjQzZEN0Y1IiwNCiAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOEQ5MDkyIiwNCiAgICAgICAgICAgICAgbGl0ZXJhbDogJzA156uZ6KW/6LevJywNCiAgICAgICAgICAgICAgd2lkdGg6ICIxIiwNCg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgaWQ6IDE2LA0KICAgICAgICAgICAgICBsYWJlbDogJzA25raJ5q616IqC54K56YGTJywNCiAgICAgICAgICAgICAgbGl0ZXJhbDogJzA25raJ5q616IqC54K56YGTJywNCiAgICAgICAgICAgICAgZmlsbENvbG9yOiAiI0M2RDdGNSIsDQogICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAiIzhEOTA5MiIsDQogICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGlkOiAxNywNCiAgICAgICAgICAgICAgbGFiZWw6ICcwN+ilv+W/q+e6vycsDQogICAgICAgICAgICAgIGxpdGVyYWw6ICcwN+ilv+W/q+e6vycsDQogICAgICAgICAgICAgIGZpbGxDb2xvcjogIiNDNkQ3RjUiLA0KICAgICAgICAgICAgICBzdHJva2VDb2xvcjogIiM4RDkwOTIiLA0KICAgICAgICAgICAgICB3aWR0aDogIjEiLA0KDQogICAgICAgICAgICB9LCB7DQogICAgICAgICAgICAgIGlkOiAxOCwNCiAgICAgICAgICAgICAgbGFiZWw6ICcwOOa2iemTgeaUr+i3rycsDQogICAgICAgICAgICAgIGxpdGVyYWw6ICcwOOa2iemTgeaUr+i3rycsDQogICAgICAgICAgICAgIGZpbGxDb2xvcjogIiNDNkQ3RjUiLA0KICAgICAgICAgICAgICBzdHJva2VDb2xvcjogIiM4RDkwOTIiLA0KICAgICAgICAgICAgICB3aWR0aDogIjEiLA0KDQogICAgICAgICAgICB9LA0KDQoNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgaWQ6IDIsDQogICAgICAgICAgICAgIGxhYmVsOiAn5rKz6YGTJywNCiAgICAgICAgICAgICAgbGF5ZXJOYW1lOiAiVGVzdDpnaF9oZF92MiIsDQogICAgICAgICAgICAgIGZpbHRlcktleTogJ2xheWVyJywNCiAgICAgICAgICAgICAgY2hpbGRyZW46IFt7DQogICAgICAgICAgICAgICAgaWQ6IDIxLA0KICAgICAgICAgICAgICAgIGxhYmVsOiAnMDHkuK3lv4PmsrMnLA0KICAgICAgICAgICAgICAgIGxpdGVyYWw6ICcwMeS4reW/gycsDQogICAgICAgICAgICAgICAgZmlsbENvbG9yOiAiI2Q5ZjJjZSIsDQogICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOEQ5MDkyIiwNCiAgICAgICAgICAgICAgICB3aWR0aDogIjEiLA0KDQogICAgICAgICAgICAgIH0sIHsNCiAgICAgICAgICAgICAgICBpZDogMjIsDQogICAgICAgICAgICAgICAgbGFiZWw6ICcwMuS4nOS4gOaysycsDQogICAgICAgICAgICAgICAgbGl0ZXJhbDogJzAy5Lic5LiAJywNCiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICIjZDlmMmNlIiwNCiAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogIiM4RDkwOTIiLA0KICAgICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgICAgfV0NCiAgICAgICAgICAgIH1dDQoNCiAgICAgICAgICB9DQoNCg0KDQogICAgICAgICAgICAsIHsNCiAgICAgICAgICAgIGlkOiA0LA0KICAgICAgICAgICAgbGFiZWw6ICfluILmlL/nrqHnur/lt6XnqIsnLA0KICAgICAgICAgICAgY2hpbGRyZW46IFt7DQogICAgICAgICAgICAgIGlkOiA0MSwNCiAgICAgICAgICAgICAgbGFiZWw6ICcwMeW4guaUv+euoee6v+W3peeoiycsDQogICAgICAgICAgICAgIGxheWVyTmFtZTogIlRlc3Q6Z2hfZ3giLA0KICAgICAgICAgICAgICBmaWx0ZXJLZXk6ICdsYXllcicsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiBbew0KICAgICAgICAgICAgICAgIGlkOiA0MTEsDQogICAgICAgICAgICAgICAgbGFiZWw6ICcwMeW4guaUv+euoee6vycsDQogICAgICAgICAgICAgICAgbGl0ZXJhbDogJzAx5biC5pS/566h57q/JywNCiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICIjOTQ5RDQyIiwNCiAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICAgICAgfSwgew0KICAgICAgICAgICAgICAgIGlkOiA0MTIsDQogICAgICAgICAgICAgICAgbGFiZWw6ICfluILmlL/nrqHnur/lt6XnqIvmloflrZcnLA0KICAgICAgICAgICAgICAgIGxpdGVyYWw6ICfluILmlL/nrqHnur/lt6XnqIvmloflrZcnLA0KICAgICAgICAgICAgICAgIGxpdGVyYWw6ICcwMeW4guaUv+euoee6vzInLA0KICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yOiAiIzk0OUQ0MiIsDQogICAgICAgICAgICAgICAgd2lkdGg6ICIxIg0KDQogICAgICAgICAgICAgIH1dDQoNCiAgICAgICAgICAgIH1dDQogICAgICAgICAgfQ0KDQogICAgICAgICAgXQ0KICAgICAgICB9LA0KDQogICAgICAgIHsNCiAgICAgICAgICBpZDogNSwNCiAgICAgICAgICBsYWJlbDogJ+awtOWfnycsDQogICAgICAgICAgZmlsdGVyS2V5OiAnbGF5ZXInLA0KICAgICAgICAgIGxheWVyTmFtZTogIlRlc3Q6Z2hfc3kiLA0KICAgICAgICAgIGZpbGxUeXBsZTogImZpbGwiLA0KICAgICAgICAgIC8vIGRpc3BsYXk6IGZhbHNlLA0KICAgICAgICAgIGNoaWxkcmVuOiBbew0KICAgICAgICAgICAgaWQ6IDUxLA0KICAgICAgICAgICAgbGFiZWw6ICcwMeawtOWfnycsDQogICAgICAgICAgICBsaXRlcmFsOiAnMDHmsLTln58nLA0KICAgICAgICAgICAgZmlsbENvbG9yOiAiI0JFRTRGNyIsDQoNCg0KICAgICAgICAgIH1dDQogICAgICAgIH0sDQoNCg0KICAgICAgICB7DQogICAgICAgICAgaWQ6IDMsDQogICAgICAgICAgbGFiZWw6ICfmsLTnjq/looPmlbTmsrsnLA0KICAgICAgICAgIGZpbHRlcktleTogJ2xheWVyJywNCiAgICAgICAgICBsYXllck5hbWU6ICJUZXN0OmdoX3Noanp6IiwNCiAgICAgICAgICBmaWxsVHlwbGU6ICJmaWxsIiwNCiAgICAgICAgICBjaGlsZHJlbjogW3sNCiAgICAgICAgICAgIGlkOiAzMSwNCiAgICAgICAgICAgIGxhYmVsOiAnMDHmsLTnjq/looPmlbTmsrvlt6XnqIsnLA0KICAgICAgICAgICAgbGl0ZXJhbDogJzAx5rC0546v5aKDJywNCiAgICAgICAgICAgIGZpbGxDb2xvcjogIiNGRkM4RkUiLA0KICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOEQ5MDkyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICB9XQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgaWQ6IDYsDQogICAgICAgICAgbGFiZWw6ICfln7rnoYDorr7mlr0nLA0KICAgICAgICAgIGZpbHRlcktleTogJ2xheWVyJywNCiAgICAgICAgICBsYXllck5hbWU6ICJyb2FkX2FyZWEwODA4IiwNCiAgICAgICAgICBjaGlsZHJlbjogW3sNCiAgICAgICAgICAgIGlkOiA2MSwNCiAgICAgICAgICAgIGxhYmVsOiAnMTItMDHnu5nmsLQnLA0KICAgICAgICAgICAgbGl0ZXJhbDogJzEyLTAx57uZ5rC0JywNCiAgICAgICAgICAgIGZpbGxDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOTQ5RDQyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGlkOiA2MiwNCiAgICAgICAgICAgIGxhYmVsOiAnMTItMDTnh4PmsJTnrqEnLA0KICAgICAgICAgICAgbGl0ZXJhbDogJzEyLTA054eD5rCU566hJywNCiAgICAgICAgICAgIGZpbGxDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOTQ5RDQyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGlkOiA2MywNCiAgICAgICAgICAgIGxhYmVsOiAnMTItMDXnlLXlipstMDEnLA0KICAgICAgICAgICAgbGl0ZXJhbDogJzEyLTA155S15YqbLTAxJywNCiAgICAgICAgICAgIGZpbGxDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOTQ5RDQyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGlkOiA2NCwNCiAgICAgICAgICAgIGxhYmVsOiAnMTItMDbpgJrkv6EnLA0KICAgICAgICAgICAgbGl0ZXJhbDogJzEyLTA26YCa5L+hJywNCiAgICAgICAgICAgIGZpbGxDb2xvcjogIiM5NDlENDIiLA0KICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICIjOTQ5RDQyIiwNCiAgICAgICAgICAgIHdpZHRoOiAiMSIsDQoNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBdDQogICAgICAgIH0NCg0KICAgICAgXSwNCg0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLA0KICAgICAgICBsYWJlbDogJ2xhYmVsJw0KICAgICAgfSwNCiAgICAgIHByb2plY3RSYWRpbzogWyIxIiwgIjIiXSwNCiAgICAgIGdlb0pzb25MaXN0OiB7fSwNCg0KDQoNCiAgICB9DQogIH0sDQogIG1vdW50ZWQgKCkgew0KDQogICAgLy/liJ3lp4vljJblm77lsYIgd21zDQogICAgLy90aGlzLmluaXRMYXllcldtcygpOw0KICAgIC8v5Yid5aeL5YyW5Zu+5bGCIHdmcw0KICAgIHRoaXMuaW5pdExheWVyVG9NYXBXZnModGhpcyk7DQogICAgdGhpcy5hZGRWZWN0b3JMYXllcldmcyh0aGlzKTsNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogIH0sDQoNCiAgY3JlYXRlZCAoKSB7DQogICAgLy/ov4fmu6TkuI3pnIDopoHlsZXnpLrmoJHlvaLoioLngrkNCiAgICB0aGlzLmZpbHRlckRhdGFUcmVlKCk7DQoNCg0KDQogIH0sDQoNCg0KDQogIG1ldGhvZHM6IHsNCg0KICAgIGZpbHRlckRhdGFUcmVlICgpIHsNCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uZGlzcGxheSAhPSBmYWxzZSkgew0KICAgICAgICAgIHRoaXMuZmlsdGVyVHJlZURhdGEucHVzaChpdGVtKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgIH0sDQoNCiAgICBnZXRMYXllck1hcCAoY2hlY2tlZEFycmF5KSB7DQogICAgICBpZiAoY2hlY2tlZEFycmF5ID09IG51bGwpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgICB2YXIgbGF5ZXJNYXAgPSBbXTsNCiAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgdGhpcy5hc3NlbWJsZUxheWVySXRlbXMoaXRlbSwgbnVsbCwgbGF5ZXJNYXAsIGNoZWNrZWRBcnJheSk7DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGxheWVyTWFwOw0KICAgIH0sDQoNCiAgICBhc3NlbWJsZUxheWVySXRlbXMgKGl0ZW0sIGFyciwgbSwgY2hlY2tlZEFycmF5KSB7DQogICAgICB2YXIgbmV3SXRlbSA9IG51bGw7DQogICAgICBpZiAoaXRlbS5sYXllck5hbWUgIT0gbnVsbCkgew0KICAgICAgICB2YXIgbmVlZEFkZCA9IGl0ZW0ubGl0ZXJhbCAhPSBudWxsIHx8IChpdGVtLmNoaWxkcmVuICE9IG51bGwgJiYgaXRlbS5jaGlsZHJlbiAhPSB1bmRlZmluZWQpOw0KICAgICAgICBpZiAoIW5lZWRBZGQpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBsZXQgZXhpc3RJdGVtOw0KICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG0ubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBpZiAobVtqXS5sYXllck5hbWUgPT0gaXRlbS5sYXllck5hbWUpIHsNCiAgICAgICAgICAgIGV4aXN0SXRlbSA9IG1bal07DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoZXhpc3RJdGVtICE9IG51bGwpIHsNCiAgICAgICAgICBhcnIgPSBleGlzdEl0ZW0udHJlZURhdGFJdGVtOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGFyciA9IFtdOw0KICAgICAgICAgIG5ld0l0ZW0gPSB7fTsNCiAgICAgICAgICBuZXdJdGVtLnRyZWVEYXRhSXRlbSA9IGFycjsNCiAgICAgICAgICBuZXdJdGVtLmxheWVyTmFtZSA9IGl0ZW0ubGF5ZXJOYW1lOw0KICAgICAgICAgIG5ld0l0ZW0uZmlsdGVyS2V5ID0gaXRlbS5maWx0ZXJLZXk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLy/pgInkuK3nirbmgIENCiAgICAgIHZhciBpZEluZGV4ID0gY2hlY2tlZEFycmF5LmZpbmRJbmRleChpdGVtMiA9PiB7DQogICAgICAgIHJldHVybiBpdGVtMiA9PSBpdGVtLmlkOw0KICAgICAgfSk7DQoNCiAgICAgIGlmIChpZEluZGV4ICE9IC0xKSB7DQogICAgICAgIGlmIChuZXdJdGVtICE9IG51bGwpIHsNCiAgICAgICAgICBtLnB1c2gobmV3SXRlbSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0ubGl0ZXJhbCAhPSBudWxsKSB7DQogICAgICAgICAgYXJyLnB1c2goaXRlbSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gIT0gbnVsbCAmJiBpdGVtLmNoaWxkcmVuICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChpID0+IHsNCiAgICAgICAgICAgIHRoaXMuYXNzZW1ibGVMYXllckl0ZW1zKGksIGFyciwgbSwgY2hlY2tlZEFycmF5KTsNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCg0KDQoNCiAgICBpbml0V2ZzU3R5bGUgKGZlYXR1cmUsIGl0ZW0pIHsNCg0KICAgICAgbGV0IHN0eWxlcyA9IFtdOw0KICAgICAgLy8g6L+H5ruk5bGe5oCnDQogICAgICB2YXIgZmlsdGVyS2V5ID0gZmVhdHVyZS5nZXQoaXRlbS5maWx0ZXJLZXkpOw0KICAgICAgdmFyIHRyZWVEYXRhSXRlbSA9IGl0ZW0udHJlZURhdGFJdGVtOw0KICAgICAgaWYgKHRyZWVEYXRhSXRlbSA9PSBudWxsIHx8IHRyZWVEYXRhSXRlbSA9PSB1bmRlZmluZWQgfHwgdHJlZURhdGFJdGVtLmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsZXQgaXNFeGlzdCA9IGZhbHNlOzsNCiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0cmVlRGF0YUl0ZW0ubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgICBsZXQgaXRlbTIgPSB0cmVlRGF0YUl0ZW1ba107DQogICAgICAgICAgaWYgKGZpbHRlcktleSAhPSB0cmVlRGF0YUl0ZW1ba10ubGl0ZXJhbCkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlzRXhpc3QgPSB0cnVlOw0KICAgICAgICAgIGxldCBzdHlsZSA9IG5ldyBTdHlsZSgpOw0KICAgICAgICAgIC8v57q/5p2h6aKc6ImyDQogICAgICAgICAgbGV0IHN0cm9rZUNvbG9yID0gaXRlbTIuc3Ryb2tlQ29sb3I7DQogICAgICAgICAgbGV0IHN0cm9rZVdpZHRoID0gaXRlbTIud2lkdGg7DQogICAgICAgICAgbGV0IHN0cm9rZSA9IG51bGw7DQogICAgICAgICAgaWYgKHN0cm9rZUNvbG9yKSB7DQogICAgICAgICAgICBzdHJva2UgPSBuZXcgU3Ryb2tlKHsNCiAgICAgICAgICAgICAgY29sb3I6IHN0cm9rZUNvbG9yLA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHN0cm9rZVdpZHRoKSB7DQogICAgICAgICAgICBpZiAoc3Ryb2tlID09IG51bGwpIHsNCiAgICAgICAgICAgICAgc3Ryb2tlID0gbmV3IFN0cm9rZSh7DQogICAgICAgICAgICAgICAgd2lkdGg6IHN0cm9rZVdpZHRoLA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgc3Ryb2tlLndpZHRoXyA9IHN0cm9rZVdpZHRoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBzdHlsZS5zdHJva2VfID0gc3Ryb2tlOw0KICAgICAgICAgIC8v5aGr5YWF6aKc6ImyDQogICAgICAgICAgaWYgKGl0ZW0yLmZpbGxDb2xvcikgew0KICAgICAgICAgICAgbGV0IGZpbGwgPSBuZXcgRmlsbCh7DQogICAgICAgICAgICAgIGNvbG9yOiBpdGVtMi5maWxsQ29sb3INCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBzdHlsZS5maWxsXyA9IGZpbGw7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgc3R5bGVzLnB1c2goc3R5bGUpOw0KICAgICAgICAgIHJldHVybiBzdHlsZXM7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFpc0V4aXN0KSB7DQogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9LA0KDQoNCg0KICAgIGhhbmRsZUNoZWNrQ2hhbmdlIChkYXRhLCBjaGVja2VkSW5mbykgew0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgbGV0IGhhbGZDaGVja05vZGUgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0SGFsZkNoZWNrZWROb2RlcygpOw0KICAgICAgbGV0IGhhbGZDaGVja0lkcyA9IFtdOw0KICAgICAgaGFsZkNoZWNrTm9kZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBoYWxmQ2hlY2tJZHMucHVzaChpdGVtLmlkKQ0KICAgICAgfSk7DQogICAgICAvL+iOt+WPlumAieS4reS7peWPiuWNiumAieS4reiKgueCuQ0KICAgICAgdmFyIGNoZWNrZWRBcnJheSA9IHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cyhmYWxzZSk7DQogICAgICBjaGVja2VkQXJyYXkgPSBjaGVja2VkQXJyYXkuY29uY2F0KGhhbGZDaGVja0lkcyk7DQogICAgICBsZXQgY2hlY2tlZExheWVyQXJyYXkgPSB0aGlzLmdldExheWVyTWFwKGNoZWNrZWRBcnJheSk7DQogICAgICBsZXQgYWxsTGF5ZXJBcnJheSA9IHRoaXMubGF5ZXJBcnJheTsNCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYWxsTGF5ZXJBcnJheS5sZW5ndGg7IGorKykgew0KICAgICAgICBsZXQgaXRlbSA9IGFsbExheWVyQXJyYXlbal07DQogICAgICAgIGxldCBsYXllck5hbWUgPSBpdGVtLnZhbHVlc18ubmFtZTsNCiAgICAgICAgbGV0IGV4aXN0ID0gZmFsc2U7DQogICAgICAgIC8v5aaC5p6c5YWo6YOo5pyq6YCJ5LitIOmakOiXjw0KICAgICAgICBpZiAoY2hlY2tlZExheWVyQXJyYXkgPT0gbnVsbCB8fCBjaGVja2VkTGF5ZXJBcnJheS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZShmYWxzZSk7DQogICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjaGVja2VkTGF5ZXJBcnJheS5sZW5ndGg7IGsrKykgew0KICAgICAgICAgIGxldCBjaGVja0l0ZW0gPSBjaGVja2VkTGF5ZXJBcnJheVtrXTsNCiAgICAgICAgICBpZiAobGF5ZXJOYW1lID09IGNoZWNrSXRlbS5sYXllck5hbWUpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxheWVyTmFtZSA9PSBjaGVja0l0ZW0ubGF5ZXJOYW1lKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxheWVyTmFtZSk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGVja0l0ZW0ubGF5ZXJOYW1lKTsNCiAgICAgICAgICAgIGV4aXN0ID0gdHJ1ZTsNCiAgICAgICAgICAgIGlmIChjaGVja0l0ZW0udHJlZURhdGFJdGVtID09IG51bGwgfHwgY2hlY2tJdGVtLnRyZWVEYXRhSXRlbS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICBpdGVtLnNldFZpc2libGUoZmFsc2UpOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8v5pu05paw5qC35byPDQogICAgICAgICAgICBpdGVtLnNldFZpc2libGUodHJ1ZSk7DQogICAgICAgICAgICBpdGVtLnNldFN0eWxlKChmZWF0dXJlLCBzb2x1dGlvbikgPT4gew0KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0V2ZzU3R5bGUoZmVhdHVyZSwgY2hlY2tJdGVtKQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoIWV4aXN0KSB7DQogICAgICAgICAgaXRlbS5zZXRWaXNpYmxlKGZhbHNlKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgfSwNCg0KDQoNCg0KICAgIC8vIOWIneWni+WMluWcsOWbvg0KICAgIGluaXRMYXllclRvTWFwV2ZzIChfdGhpcykgew0KICAgICAgY29uc3Qgcm9hZExpbmVzV21zID0gbmV3IFRpbGVXTVMoew0KICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy93bXMnLA0KICAgICAgICBwcm9qZWN0aW9uOiAnRVBTRzozODU3JywNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgJ0xBWUVSUyc6ICdUZXN0OlJvYWRfbGluZXMnLA0KICAgICAgICAgICdWRVJTSU9OJzogJzEuMS4wJw0KDQogICAgICAgIH0sDQogICAgICAgIHNlcnZlclR5cGU6ICdnZW9zZXJ2ZXInDQogICAgICB9KTsNCiAgICAgIC8v6Ieq5a6a5LmJ5Zu+5bGCMQ0KICAgICAgY29uc3Qgcm9hZExpbmVMYXllciA9IG5ldyBUaWxlTGF5ZXIoew0KICAgICAgICBzb3VyY2U6IHJvYWRMaW5lc1dtcywNCiAgICAgICAgekluZGV4OiAzDQogICAgICB9KTsNCiAgICAgIGNvbnN0IG1hcENvbnRhaW5lciA9IF90aGlzLiRyZWZzLm1hcA0KICAgICAgbGV0IGxheWVycyA9IFtnYW9kZU1hcExheWVyLCByb2FkTGluZUxheWVyXTsNCiAgICAgIC8v5bCG5Zu+5bGC5Yqg5YWlTWFwDQogICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKHsNCiAgICAgICAgbGF5ZXJzOiBsYXllcnMsDQogICAgICAgIHRhcmdldDogbWFwQ29udGFpbmVyLA0KICAgICAgICB2aWV3OiB2aWV3DQogICAgICB9KTsNCiAgICAgIC8vIOa3u+WKoOm8oOagh+eCueWHu+S6i+S7tg0KICAgICAgbWFwLm9uKCdjbGljaycsIF90aGlzLm1hcENsaWNrKTsNCiAgICAgIC8vIOS/neWtmOWcsOWbvg0KICAgICAgX3RoaXMubWFwRGF0YSA9IG1hcA0KICAgIH0sDQoNCg0KDQoNCg0KDQoNCg0KDQoNCiAgICBhZGRWZWN0b3JMYXllcldmcyAoX3RoaXMpIHsNCiAgICAgIHZhciBjaGVja2VkQXJyYXkgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q2hlY2tlZEtleXMoZmFsc2UpOw0KICAgICAgbGV0IGNoZWNrZWRMYXllck1hcCA9IHRoaXMuZ2V0TGF5ZXJNYXAoY2hlY2tlZEFycmF5KTsNCiAgICAgIGNoZWNrZWRMYXllck1hcC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9HSVNfQkFTRV9VUkwgKyAnL1Rlc3Qvb3dzP3NlcnZpY2U9V0ZTJnZlcnNpb249MS4wLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBlbmNvZGVVUkkoaXRlbS5sYXllck5hbWUpICsgJyZtYXhGZWF0dXJlcz01MDAwMDAwMDAmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uJTJGanNvbic7DQogICAgICAgIGF4aW9zLmdldCh1cmwsIG51bGwpLnRoZW4oZnVuY3Rpb24gKHJlcykgew0KICAgICAgICAgIHZhciBmZWF0dXJlc0RhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgICBmZWF0dXJlczogKG5ldyBHZW9KU09OKHsgZmVhdHVyZVByb2plY3Rpb246ICdFUFNHOjM4NTcnLCBkYXRhUHJvamVjdGlvbjogJ0VQU0c6NDU0OCcgfSkpLnJlYWRGZWF0dXJlcyhmZWF0dXJlc0RhdGEpDQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICBsZXQgdmVjdG9yTGF5ZXJUbXAgPSBuZXcgVmVjdG9yTGF5ZXIoew0KICAgICAgICAgICAgc291cmNlOiB2ZWN0b3JTb3VyY2UsDQogICAgICAgICAgICBuYW1lOiBpdGVtLmxheWVyTmFtZSwNCiAgICAgICAgICAgIHN0eWxlOiAoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmluaXRXZnNTdHlsZShmZWF0dXJlLCBpdGVtKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQoNCiAgICAgICAgICAvLyAgICBfdGhpcy5tYXBEYXRhLmFkZExheWVyKHZlY3RvckxheWVyVG1wKTsNCiAgICAgICAgICBfdGhpcy5sYXllckFycmF5LnB1c2godmVjdG9yTGF5ZXJUbXApOw0KICAgICAgICB9KQ0KDQogICAgICB9KQ0KDQogICAgICBfdGhpcy5tYXBEYXRhLmFkZExheWVyKF90aGlzLmxheWVyQXJyYXkpOw0KICAgIH0sDQoNCg0KICAgIC8vIOW8ueWHuuahhg0KICAgIGFkZFBvcHVwIChjb29yZGluYXRlLCBmZWF0dXJlKSB7DQogICAgICB0aGlzLnJlbW92ZVBvcHVwKCkNCiAgICAgIC8vIOiOt+WPluW8ueWHuuWxgkRPTQ0KICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpDQogICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cC1jb250ZW50JykNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOWIm+W7uk92ZXJsYXnlvLnlh7rlsYLnu5HlrppET00NCiAgICAgICAgdGhpcy5vdmVybGF5ID0gbmV3IE92ZXJsYXkoew0KICAgICAgICAgIGVsZW1lbnQ6IGNvbnRhaW5lciwNCiAgICAgICAgICBhdXRvUGFuOiB7DQogICAgICAgICAgICBhbmltYXRpb246IHsNCiAgICAgICAgICAgICAgZHVyYXRpb246IDI1MA0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLy8g5re75Yqg5YiwbWFwDQogICAgICAgIHRoaXMubWFwRGF0YS5hZGRPdmVybGF5KHRoaXMub3ZlcmxheSkNCiAgICAgIH0NCiAgICAgIGxldCBmZWF0dXJlVmFsdWVzID0gZmVhdHVyZS52YWx1ZXNfOw0KICAgICAgbGV0IHByb2plY3ROYW1lID0gZmVhdHVyZVZhbHVlcy7pobnnm67lkI0gPT0gbnVsbCA/ICcnIDogZmVhdHVyZVZhbHVlcy7pobnnm67lkI07DQogICAgICBsZXQgcHJvamVjdERlc2MgPSBmZWF0dXJlVmFsdWVzLumhueebruamgiA9PSBudWxsID8gJycgOiBmZWF0dXJlVmFsdWVzLumhueebruamgjsNCiAgICAgIGxldCBzdGFydCA9IGZlYXR1cmVWYWx1ZXMu6LW354K5ID09IG51bGwgPyAnJyA6IGZlYXR1cmVWYWx1ZXMu6LW354K5Ow0KICAgICAgbGV0IGVuZCA9IGZlYXR1cmVWYWx1ZXMu57uI54K5ID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWx1ZXMu57uI54K5Ow0KICAgICAgbGV0IGxlbmd0aCA9IGZlYXR1cmVWYWx1ZXMu6ZW/5bqmID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWx1ZXMu6ZW/5bqmOw0KICAgICAgbGV0IHp0eiA9IGZlYXR1cmVWYWx1ZXMu5oC75oqV6LWEID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWx1ZXMu5oC75oqV6LWEOw0KICAgICAgbGV0IGtjc2pmZmggPSBmZWF0dXJlVmFsdWVzLuWLmOWvn18xID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWx1ZXMu5YuY5a+fXzE7DQogICAgICBsZXQgc3RhdHVzID0gZmVhdHVyZVZhbHVlcy7nm67liY3lt6UgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbHVlcy7nm67liY3lt6U7DQogICAgICBsZXQgYnogPSBmZWF0dXJlVmFsdWVzLuWkh+azqCA9PSBudWxsID8gIiIgOiBmZWF0dXJlVmFsdWVzLuWkh+azqDsNCiAgICAgIC8vIGlmIChwcm9qZWN0TmFtZSA9PSAnJykgew0KICAgICAgLy8gICByZXR1cm47DQogICAgICAvLyB9DQoNCiAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYA0KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9J2NvbG9yOiMxMjE5MjQ7Zm9udC13ZWlnaHQ6IGJvbGQ7d2lkdGg6MTAwJTt6LWluZGV4OjQ7aGVpZ2h0OjQycHg7cGFkZGluZzo2cHg7Zm9udC1zaXplOiAxNXB4Jz5gKyBwcm9qZWN0TmFtZSArIGA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSdmb250LXNpemU6IDEwcHg7d2lkdGg6MTAwJTtsaW5lLWhlaWdodDozMHB4O2hlaWdodDozMTVweDtvdmVyZmxvdy15OiBhdXRvOyc+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7bGluZS1oZWlnaHQ6IDI0cHg7Jz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6IDkwcHg7Ij7pobnnm67mpoLlhrXvvJo8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtaW5kZW50OiAycmVtO2ZvbnQtc2l6ZToxNHB4OyI+YCsgcHJvamVjdERlc2MgKyBgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ncG9wdGFibGUtdGgnIHN0eWxlPSJjb2xvcjojNjQ2NTY2OyI+6LW354K577yaPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweCI+YCsgc3RhcnQgKyBgPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdwb3B0YWJsZS10aCcgc3R5bGU9ImNvbG9yOiM2NDY1NjYiPuebruWJjeW3peS9nOi/m+Wxle+8mjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweCI+YCsgc3RhdHVzICsgYDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdwb3B0YWJsZS10aCcgc3R5bGU9ImNvbG9yOiM2NDY1NjYiPue7iOeCue+8mjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHgiPmArIGVuZCArIGA8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdwb3B0YWJsZS10aCcgc3R5bGU9ImNvbG9yOiM2NDY1NjYiPumVv+W6pi9rbe+8mjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHgiPmArIGxlbmd0aCArIGA8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ncG9wdGFibGUtdGgnIHN0eWxlPSJjb2xvcjojNjQ2NTY2Ij7mgLvmipXotYQv5Lq/5YWD77yaPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweCI+YCsgenR6ICsgYDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdwb3B0YWJsZS10aCcgc3R5bGU9ImNvbG9yOiM2NDY1NjYiPuWLmOWvn+iuvuiuoei0ueWkjeaguO+8mjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4Ij5gKyBrY3NqZmZoICsgYDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSdsaW5lLWhlaWdodDogMjRweDs+DQogICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdwb3B0YWJsZS10aCcgc3R5bGU9ImNvbG9yOiM2NDY1NjYiPuWkh+azqO+8mjwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9InRleHQtaW5kZW50OiAycmVtO2ZvbnQtc2l6ZToxNHB4OyI+YCsgYnogKyBgPC9zcGFuPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgYA0KDQogICAgICAvLyDorr7nva7lvLnlh7rlsYLkvY3nva7ljbPlj6/lh7rnjrANCiAgICAgIHRoaXMub3ZlcmxheS5zZXRQb3NpdGlvbihjb29yZGluYXRlKQ0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgfSwNCg0KICAgIC8vIOa4hemZpOW8ueWHuuahhg0KICAgIHJlbW92ZVBvcHVwICgpIHsNCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHsNCiAgICAgICAgLy8g6K6+572u5L2N572udW5kZWZpbmVk5Y+v6L6+5Yiw6ZqQ6JeP5riF6Zmk5by55Ye65qGGDQogICAgICAgIHRoaXMub3ZlcmxheS5zZXRQb3NpdGlvbih1bmRlZmluZWQpDQogICAgICB9DQogICAgfSwNCg0KDQogICAgc2hvd1N1bW1yeVBvcCAoKSB7DQogICAgICBzaG93U3VtbXJ5RmxhZyA9IHRydWU7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wLXN1bW1yeeKAlGNvbGxhcHNlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3Atc3VtbXJ5JykuY2xhc3NMaXN0LnJlbW92ZSgncG9wc3VtbXJ5LWRvd24tYW5pbWF0aW9uJykNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3Atc3VtbXJ5JykuY2xhc3NMaXN0LnJlbW92ZSgncG9wc3VtbXJ5LXVwLWFuaW1hdGlvbicpDQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wLXN1bW1yeScpLnN0eWxlLmJvdHRvbSA9ICctMjUwcHgnDQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wLXN1bW1yeScpLmNsYXNzTGlzdC5hZGQoJ3BvcHN1bW1yeS11cC1hbmltYXRpb24nKQ0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpZGVTdW1tcnlMaW5rJykuc3R5bGUucmlnaHQgPSAnNjBweCcNCg0KICAgIH0sDQoNCiAgICBoaWRlU3VtbXJ5UG9wICgpIHsNCiAgICAgIHNob3dTdW1tcnlGbGFnID0gZmFsc2U7DQogICAgICAvL+mHjee9ru+8jOWQpuWImeWKqOeUu+aViOaenOWPquinpuWPkeS4gOasoQ0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcC1zdW1tcnknKS5zdHlsZS5ib3R0b20gPSAnMHB4Jw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcC1zdW1tcnknKS5jbGFzc0xpc3QucmVtb3ZlKCdwb3BzdW1tcnktZG93bi1hbmltYXRpb24nKQ0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcC1zdW1tcnknKS5jbGFzc0xpc3QucmVtb3ZlKCdwb3BzdW1tcnktdXAtYW5pbWF0aW9uJykNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3Atc3VtbXJ5JykuY2xhc3NMaXN0LmFkZCgncG9wc3VtbXJ5LWRvd24tYW5pbWF0aW9uJyk7DQogICAgfSwNCg0KDQoNCiAgICAvL+WIoOmZpOmrmOS6ruWbvuWxgg0KICAgIGNsZWFySGlnaGxpZ2h0ICgpIHsNCiAgICAgIGxldCBhcnIgPSB0aGlzLm1hcERhdGEuZ2V0TGF5ZXJzKCkuYXJyYXlfDQogICAgICBsZXQgaGlnaGxpZ2h0TGF5ZXIgPSB7fQ0KICAgICAgYXJyLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLmdldCgiaWQiKSA9PSAiaGlnaGxpZ2h0TGF5ZXIiKSB7DQogICAgICAgICAgaGlnaGxpZ2h0TGF5ZXIgPSBpdGVtDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBpZiAoaGlnaGxpZ2h0TGF5ZXIgJiYgaGlnaGxpZ2h0TGF5ZXIuY2xhc3NOYW1lXykgew0KICAgICAgICB0aGlzLm1hcERhdGEucmVtb3ZlTGF5ZXIoaGlnaGxpZ2h0TGF5ZXIpDQogICAgICB9DQogICAgfSwNCg0KDQogICAgYWRkSGlnaExpZ2h0U3R5bGUgKGNsaWNrRmVhdHVyZSwgdGhpc09iaikgew0KICAgICAgbGV0IGZlYXR1cmVPYmogPSBbXTsNCiAgICAgIGZlYXR1cmVPYmoucHVzaChjbGlja0ZlYXR1cmUpOw0KICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOw0KICAgICAgbGV0IGhpZ2hMaWdodFN0eWxlID0gbmV3IFN0eWxlKHsNCiAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCIsDQogICAgICAgIH0pLA0KICAgICAgICBzdHJva2U6IG5ldyBTdHJva2Uoew0KICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCIsDQogICAgICAgICAgd2lkdGg6IDMuNQ0KICAgICAgICB9KSwNCiAgICAgIH0pDQogICAgICB0aGlzT2JqLmhpZ2hMaWdodExheWVyID0gbmV3IFZlY3RvckxheWVyKHsNCiAgICAgICAgbmFtZTogImRrIiwNCiAgICAgICAgc291cmNlOiBuZXcgVmVjdG9yU291cmNlKHsNCiAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZU9iaiwNCiAgICAgICAgfSksDQogICAgICAgIHN0eWxlOiAoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICByZXR1cm4gaGlnaExpZ2h0U3R5bGU7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzT2JqLmhpZ2hMaWdodExheWVyLnNldCgiaWQiLCAiaGlnaGxpZ2h0TGF5ZXIiKQ0KICAgICAgdGhpcy5tYXBEYXRhLmFkZExheWVyKHRoaXNPYmouaGlnaExpZ2h0TGF5ZXIpDQoNCiAgICB9LA0KDQoNCiAgICBmZWNoRmVhdHVyZUluZm86IGFzeW5jIGZ1bmN0aW9uICh1cmwsIHRoaXNPYmosIGV2dCwgY2xpY2tMYXllcikgew0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KHVybCwgbnVsbCkudGhlbihmdW5jdGlvbiAocmVzKSB7DQogICAgICAgICAgdmFyIG9iakRhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICBpZiAob2JqRGF0YSAmJiBvYmpEYXRhLmZlYXR1cmVzWzBdKSB7DQogICAgICAgICAgICBpZiAodGhpc09iai5wb3BEZXRhaWxGbGFnID09IHRydWUpIHsNCiAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpc09iai5wb3BEZXRhaWxGbGFnID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXNPYmouYWRkUG9wdXAoZXZ0LmNvb3JkaW5hdGUsIG9iakRhdGEuZmVhdHVyZXNbMF0pOw0KICAgICAgICAgICAgLy/orr7nva7pq5jkuq7lm77lsYINCiAgICAgICAgICAgIHRoaXNPYmouYWRkSGlnaExpZ2h0U3R5bGUob2JqRGF0YS5mZWF0dXJlc1swXSwgdGhpc09iaiwgY2xpY2tMYXllcikNCg0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAodGhpc09iai5wb3BEZXRhaWxGbGFnID09IGZhbHNlKSB7DQogICAgICAgICAgICAgIHRoaXNPYmoucmVtb3ZlUG9wdXAoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcikNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy/ljavmmJ/lnLDlm77liIfmjaINCiAgICBzd2l0Y2hDaGFuZ2UgKCkgew0KICAgICAgbGV0IGxheWVyVHlwZVNlbGVjdCA9IHRoaXMudmFsdWUxOw0KICAgICAgLy/ljavmmJ/lnLDlm74NCiAgICAgIGlmIChsYXllclR5cGVTZWxlY3QpIHsNCiAgICAgICAgaWYgKHRoaXMud3hNYXBMYXllciA9PSBudWxsKSB7DQogICAgICAgICAgdGhpcy53eE1hcExheWVyID0gbmV3IFRpbGVMYXllcih7DQogICAgICAgICAgICBzb3VyY2U6IG5ldyBYWVooew0KICAgICAgICAgICAgICB6SW5kZXg6IDAsDQogICAgICAgICAgICAgIGNyb3NzT3JpZ2luOiAiYW5vbnltb3VzIiwNCiAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL3QwLnRpYW5kaXR1Lmdvdi5jbi9pbWdfdy93bXRzP3RrPTEyOTM2NDE2ODU4MGU3ZjBlM2ZmNWJkNzU5ZDQxYTc1JlNFUlZJQ0U9V01UUyZSRVFVRVNUPUdldFRpbGUmVkVSU0lPTj0xLjAuMCZMQVlFUj1pbWcmU1RZTEU9ZGVmYXVsdCZUSUxFTUFUUklYU0VUPXcmVElMRU1BVFJJWD17en0mVElMRVJPVz17eX0mVElMRUNPTD17eH0mRk9STUFUPXRpbGVzJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLm1hcERhdGEuYWRkTGF5ZXIodGhpcy53eE1hcExheWVyKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnd4TWFwTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKQ0KICAgICAgICAgIC8vIHRoaXMud3hNYXBMYXllci5zZXRaSW5kZXgoMSk7DQogICAgICAgICAgZ2FvZGVNYXBMYXllci5zZXRWaXNpYmxlKHRydWUpDQoNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy53eE1hcExheWVyLnNldFZpc2libGUoZmFsc2UpDQogICAgICAgIGdhb2RlTWFwTGF5ZXIuc2V0VmlzaWJsZSh0cnVlKQ0KICAgICAgICAvL2dhb2RlTWFwTGF5ZXIuc2V0WkluZGV4KDApOw0KICAgICAgfQ0KDQogICAgfSwNCg0KDQoNCiAgICAvL+WcsOWbvueCueWHu+S6i+S7tg0KICAgIC8vIG1hcENsaWNrIChldnQpIHsNCiAgICAvLyAgIHRoaXMucmVtb3ZlUG9wdXAoKTsNCiAgICAvLyAgIHRoaXMucG9wRGV0YWlsRmxhZyA9IGZhbHNlOw0KICAgIC8vICAgbGV0IHRoaXNPYmogPSB0aGlzOw0KICAgIC8vICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7DQogICAgLy8gICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMudmVjdG9yQXJyYXkubGVuZ3RoOyBrKyspIHsNCiAgICAvLyAgICAgbGV0IGl0ZW0gPSB0aGlzLnZlY3RvckFycmF5W2tdOw0KICAgIC8vICAgICBsZXQgdmVjdG9yeVRlbXAgPSBpdGVtLnZlY3RvckxheWVyOw0KICAgIC8vICAgICBsZXQgdmlzaWJsZSA9IHZlY3RvcnlUZW1wLnZhbHVlc18udmlzaWJsZTsNCiAgICAvLyAgICAgLy/msLTln5/lm77lsYLkuI3lsZXnpLror6bmg4UNCiAgICAvLyAgICAgaWYgKHRoaXMucG9wRGV0YWlsRmxhZyA9PSB0cnVlIHx8IGl0ZW0uaWQgPT0gNSB8fCAhdmlzaWJsZSkgew0KICAgIC8vICAgICAgIGNvbnRpbnVlOw0KICAgIC8vICAgICB9DQogICAgLy8gICAgIHZhciBmZWF0dXJlVXJsID0gdmVjdG9yeVRlbXAuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZUluZm9VcmwoDQogICAgLy8gICAgICAgZXZ0Wydjb29yZGluYXRlJ10sDQogICAgLy8gICAgICAgdmlld1Jlc29sdXRpb24sDQogICAgLy8gICAgICAgJ0VQU0c6Mzg1NycsDQogICAgLy8gICAgICAgeyAnSU5GT19GT1JNQVQnOiAnYXBwbGljYXRpb24vanNvbicgfQ0KICAgIC8vICAgICApOw0KICAgIC8vICAgICBpZiAoZmVhdHVyZVVybCkgew0KICAgIC8vICAgICAgIHRoaXMuZmVjaEZlYXR1cmVJbmZvKGZlYXR1cmVVcmwsIHRoaXNPYmosIGV2dCwgdmVjdG9yeVRlbXApOw0KICAgIC8vICAgICB9IGVsc2Ugew0KICAgIC8vICAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKTsNCiAgICAvLyAgICAgfQ0KICAgIC8vICAgfQ0KDQogICAgLy8gfSwNCg0KDQogICAgLy8g6byg5qCH54K55Ye75Zyw5Zu+5LqL5Lu2DQogICAgbWFwQ2xpY2sgKGV2dCkgew0KICAgICAgbGV0IHBpeGVsID0gdGhpcy5tYXBEYXRhLmdldEV2ZW50UGl4ZWwoZXZ0Lm9yaWdpbmFsRXZlbnQpOw0KICAgICAgbGV0IGZlYXR1cmUgPSB0aGlzLm1hcERhdGEuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLA0KICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHsNCiAgICAgICAgICByZXR1cm4gZmVhdHVyZTsNCiAgICAgICAgfSk7DQogICAgICBpZiAoZmVhdHVyZSkgew0KICAgICAgICAvL+aNleaNieWIsOimgee0oOWQju+8jOW8ueahhg0KICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IGV2dC5jb29yZGluYXRlDQogICAgICAgIHRoaXMuYWRkUG9wdXAoY29vcmRpbmF0ZSwgZmVhdHVyZSkNCiAgICAgICAgdGhpcy5hZGRIaWdoTGlnaHRTdHlsZShmZWF0dXJlLCB0aGlzKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5yZW1vdmVQb3B1cCgpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgfQ0KfQ0KDQoNCg0KDQoNCg0K"},{"version":3,"sources":["project1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;AAIA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"project1.vue","sourceRoot":"src/views/information-search","sourcesContent":["<template>\r\n  <div id=\"map\" ref=\"map\" style=\"height: 890px\">\r\n    <!--点击查看详情弹框-->\r\n    <div id=\"popup\" class=\"ol-popup\">\r\n      <a\r\n        href=\"#\"\r\n        id=\"popup-closer\"\r\n        class=\"ol-popup-closer\"\r\n        @click=\"removePopup\"\r\n      />\r\n      <div id=\"popup-content\"></div>\r\n    </div>\r\n\r\n    <!--道路选择器-->\r\n    <div id=\"pop-road-selector\" class=\"ol-layer\">\r\n      <div class=\"road-selector-pop\">\r\n        <div class=\"div-switch\">\r\n          <div class=\"switch-title\">背景底图</div>\r\n          <el-switch\r\n            v-model=\"value1\"\r\n            active-color=\"#004AB3\"\r\n            inactive-color=\"#004AB3\"\r\n            active-text=\"卫星地图\"\r\n            inactive-text=\"电子地图\"\r\n            @change=\"switchChange\"\r\n          >\r\n          </el-switch>\r\n        </div>\r\n        <el-collapse accordion class=\"nav-select\" v-model=\"ac\">\r\n          <el-collapse-item name=\"1\">\r\n            <template slot=\"title\"> 显示图层 </template>\r\n            <el-tree\r\n              ref=\"tree\"\r\n              :data=\"filterTreeData\"\r\n              show-checkbox\r\n              node-key=\"id\"\r\n              :default-checked-keys=\"[1, 2, 3, 4, 5, 6]\"\r\n              :props=\"defaultProps\"\r\n              @check=\"handleCheckChange\"\r\n            >\r\n              <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n                <span>\r\n                  {{ node.label }}\r\n                </span>\r\n                <span\r\n                  v-if=\"data.fillColor != null\"\r\n                  class=\"dot\"\r\n                  :style=\"{ background: data.fillColor }\"\r\n                ></span>\r\n                <span\r\n                  v-else\r\n                  class=\"dot\"\r\n                  :style=\"{ background: data.strokeColor }\"\r\n                ></span>\r\n              </span>\r\n            </el-tree>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport Map from 'ol/Map'\r\nimport * as olControl from 'ol/control'\r\nimport View from 'ol/View'\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport { transform } from 'ol/proj'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\nimport Feature from 'ol/Feature'\r\nimport { Draw } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport request from '@/utils/request'\r\nimport LineString from 'ol/geom/LineString';\r\nimport MultiLineString from 'ol/geom/MultiLineString';\r\nimport MultiPolygon from 'ol/geom/MultiPolygon';\r\nimport Vue from 'vue'\r\nimport { clone } from \"@/utils/ruoyi\";\r\n\r\n//中心坐标\r\nconst centerCordinate = [656951.22379894, 3559139.26626369]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\n\r\n//地图初始化\r\nconst view = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 4,\r\n  maxZoom: 18,\r\n  zoom: 13.7 // 地图初始化的缩放级别\r\n})\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    zIndex: 1,\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  name: \"Road\",\r\n  data () {\r\n    return {\r\n      ac: '1',\r\n      value1: 'true',\r\n      roadTypeRadio: [],\r\n      radio2: [],\r\n      addForm: {\r\n        sDeptName: '',\r\n        sDeptId: ''\r\n      },\r\n      wxMapLayer: null,\r\n      checkedLayerArray: [],\r\n      vectorArray: [],\r\n      popDetailFlag: false,\r\n      filterTreeData: [],\r\n      layerArray: [],\r\n      treeData: [\r\n        {\r\n          id: 90,\r\n          label: '项目管理',\r\n          layerName: \"Test:gh_dl\",\r\n          filterKey: 'layer',\r\n          children: [{\r\n            id: 1,\r\n            label: '道路',\r\n            children: [{\r\n              id: 11,\r\n              label: '01北站快速路',\r\n              literal: '01北站快速路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            }, {\r\n              id: 12,\r\n              label: '02朱家山河路',\r\n              literal: '02朱家山河路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            }, {\r\n              id: 13,\r\n              label: '03站南一路',\r\n              literal: '03站南一路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            },\r\n            {\r\n              id: 14,\r\n              label: '04站南二路',\r\n              literal: '04站南二路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            },\r\n            {\r\n              id: 15,\r\n              label: '05站西路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              literal: '05站西路',\r\n              width: \"1\",\r\n\r\n            },\r\n            {\r\n              id: 16,\r\n              label: '06涉段节点道',\r\n              literal: '06涉段节点道',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            },\r\n            {\r\n              id: 17,\r\n              label: '07西快线',\r\n              literal: '07西快线',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            }, {\r\n              id: 18,\r\n              label: '08涉铁支路',\r\n              literal: '08涉铁支路',\r\n              fillColor: \"#C6D7F5\",\r\n              strokeColor: \"#8D9092\",\r\n              width: \"1\",\r\n\r\n            },\r\n\r\n\r\n            {\r\n              id: 2,\r\n              label: '河道',\r\n              layerName: \"Test:gh_hd_v2\",\r\n              filterKey: 'layer',\r\n              children: [{\r\n                id: 21,\r\n                label: '01中心河',\r\n                literal: '01中心',\r\n                fillColor: \"#d9f2ce\",\r\n                strokeColor: \"#8D9092\",\r\n                width: \"1\",\r\n\r\n              }, {\r\n                id: 22,\r\n                label: '02东一河',\r\n                literal: '02东一',\r\n                fillColor: \"#d9f2ce\",\r\n                strokeColor: \"#8D9092\",\r\n                width: \"1\",\r\n\r\n              }]\r\n            }]\r\n\r\n          }\r\n\r\n\r\n\r\n            , {\r\n            id: 4,\r\n            label: '市政管线工程',\r\n            children: [{\r\n              id: 41,\r\n              label: '01市政管线工程',\r\n              layerName: \"Test:gh_gx\",\r\n              filterKey: 'layer',\r\n              children: [{\r\n                id: 411,\r\n                label: '01市政管线',\r\n                literal: '01市政管线',\r\n                fillColor: \"#949D42\",\r\n                strokeColor: \"#949D42\",\r\n                width: \"1\",\r\n\r\n              }, {\r\n                id: 412,\r\n                label: '市政管线工程文字',\r\n                literal: '市政管线工程文字',\r\n                literal: '01市政管线2',\r\n                fillColor: \"#949D42\",\r\n                strokeColor: \"#949D42\",\r\n                width: \"1\"\r\n\r\n              }]\r\n\r\n            }]\r\n          }\r\n\r\n          ]\r\n        },\r\n\r\n        {\r\n          id: 5,\r\n          label: '水域',\r\n          filterKey: 'layer',\r\n          layerName: \"Test:gh_sy\",\r\n          fillTyple: \"fill\",\r\n          // display: false,\r\n          children: [{\r\n            id: 51,\r\n            label: '01水域',\r\n            literal: '01水域',\r\n            fillColor: \"#BEE4F7\",\r\n\r\n\r\n          }]\r\n        },\r\n\r\n\r\n        {\r\n          id: 3,\r\n          label: '水环境整治',\r\n          filterKey: 'layer',\r\n          layerName: \"Test:gh_shjzz\",\r\n          fillTyple: \"fill\",\r\n          children: [{\r\n            id: 31,\r\n            label: '01水环境整治工程',\r\n            literal: '01水环境',\r\n            fillColor: \"#FFC8FE\",\r\n            strokeColor: \"#8D9092\",\r\n            width: \"1\",\r\n\r\n          }]\r\n        },\r\n        {\r\n          id: 6,\r\n          label: '基础设施',\r\n          filterKey: 'layer',\r\n          layerName: \"road_area0808\",\r\n          children: [{\r\n            id: 61,\r\n            label: '12-01给水',\r\n            literal: '12-01给水',\r\n            fillColor: \"#949D42\",\r\n            strokeColor: \"#949D42\",\r\n            width: \"1\",\r\n\r\n          },\r\n          {\r\n            id: 62,\r\n            label: '12-04燃气管',\r\n            literal: '12-04燃气管',\r\n            fillColor: \"#949D42\",\r\n            strokeColor: \"#949D42\",\r\n            width: \"1\",\r\n\r\n          },\r\n          {\r\n            id: 63,\r\n            label: '12-05电力-01',\r\n            literal: '12-05电力-01',\r\n            fillColor: \"#949D42\",\r\n            strokeColor: \"#949D42\",\r\n            width: \"1\",\r\n\r\n          },\r\n          {\r\n            id: 64,\r\n            label: '12-06通信',\r\n            literal: '12-06通信',\r\n            fillColor: \"#949D42\",\r\n            strokeColor: \"#949D42\",\r\n            width: \"1\",\r\n\r\n          }\r\n\r\n          ]\r\n        }\r\n\r\n      ],\r\n\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      projectRadio: [\"1\", \"2\"],\r\n      geoJsonList: {},\r\n\r\n\r\n\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n    //初始化图层 wms\r\n    //this.initLayerWms();\r\n    //初始化图层 wfs\r\n    this.initLayerToMapWfs(this);\r\n    this.addVectorLayerWfs(this);\r\n    document.getElementById('popup').style.display = 'none';\r\n\r\n  },\r\n\r\n  created () {\r\n    //过滤不需要展示树形节点\r\n    this.filterDataTree();\r\n\r\n\r\n\r\n  },\r\n\r\n\r\n\r\n  methods: {\r\n\r\n    filterDataTree () {\r\n      this.treeData.forEach(item => {\r\n        if (item.display != false) {\r\n          this.filterTreeData.push(item);\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    getLayerMap (checkedArray) {\r\n      if (checkedArray == null) {\r\n        return null;\r\n      }\r\n      var layerMap = [];\r\n      this.treeData.forEach(item => {\r\n        this.assembleLayerItems(item, null, layerMap, checkedArray);\r\n      })\r\n      return layerMap;\r\n    },\r\n\r\n    assembleLayerItems (item, arr, m, checkedArray) {\r\n      var newItem = null;\r\n      if (item.layerName != null) {\r\n        var needAdd = item.literal != null || (item.children != null && item.children != undefined);\r\n        if (!needAdd) {\r\n          return;\r\n        }\r\n\r\n        let existItem;\r\n        for (let j = 0; j < m.length; j++) {\r\n          if (m[j].layerName == item.layerName) {\r\n            existItem = m[j];\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (existItem != null) {\r\n          arr = existItem.treeDataItem;\r\n        } else {\r\n          arr = [];\r\n          newItem = {};\r\n          newItem.treeDataItem = arr;\r\n          newItem.layerName = item.layerName;\r\n          newItem.filterKey = item.filterKey;\r\n        }\r\n      }\r\n\r\n      //选中状态\r\n      var idIndex = checkedArray.findIndex(item2 => {\r\n        return item2 == item.id;\r\n      });\r\n\r\n      if (idIndex != -1) {\r\n        if (newItem != null) {\r\n          m.push(newItem);\r\n        }\r\n        if (item.literal != null) {\r\n          arr.push(item);\r\n        }\r\n        if (item.children != null && item.children != undefined) {\r\n          item.children.forEach(i => {\r\n            this.assembleLayerItems(i, arr, m, checkedArray);\r\n          })\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n\r\n    initWfsStyle (feature, item) {\r\n\r\n      let styles = [];\r\n      // 过滤属性\r\n      var filterKey = feature.get(item.filterKey);\r\n      var treeDataItem = item.treeDataItem;\r\n      if (treeDataItem == null || treeDataItem == undefined || treeDataItem.length == 0) {\r\n        return undefined;\r\n      } else {\r\n        let isExist = false;;\r\n        for (let k = 0; k < treeDataItem.length; k++) {\r\n          let item2 = treeDataItem[k];\r\n          if (filterKey != treeDataItem[k].literal) {\r\n            continue;\r\n          }\r\n          isExist = true;\r\n          let style = new Style();\r\n          //线条颜色\r\n          let strokeColor = item2.strokeColor;\r\n          let strokeWidth = item2.width;\r\n          let stroke = null;\r\n          if (strokeColor) {\r\n            stroke = new Stroke({\r\n              color: strokeColor,\r\n            })\r\n          }\r\n          if (strokeWidth) {\r\n            if (stroke == null) {\r\n              stroke = new Stroke({\r\n                width: strokeWidth,\r\n              })\r\n            } else {\r\n              stroke.width_ = strokeWidth;\r\n            }\r\n          }\r\n          style.stroke_ = stroke;\r\n          //填充颜色\r\n          if (item2.fillColor) {\r\n            let fill = new Fill({\r\n              color: item2.fillColor\r\n            })\r\n            style.fill_ = fill;\r\n          }\r\n\r\n          styles.push(style);\r\n          return styles;\r\n        }\r\n        if (!isExist) {\r\n          return undefined;\r\n        }\r\n\r\n      }\r\n\r\n    },\r\n\r\n\r\n\r\n    handleCheckChange (data, checkedInfo) {\r\n      this.clearHighlight();\r\n      this.removePopup();\r\n      let halfCheckNode = this.$refs.tree.getHalfCheckedNodes();\r\n      let halfCheckIds = [];\r\n      halfCheckNode.forEach(item => {\r\n        halfCheckIds.push(item.id)\r\n      });\r\n      //获取选中以及半选中节点\r\n      var checkedArray = this.$refs.tree.getCheckedKeys(false);\r\n      checkedArray = checkedArray.concat(halfCheckIds);\r\n      let checkedLayerArray = this.getLayerMap(checkedArray);\r\n      let allLayerArray = this.layerArray;\r\n      for (let j = 0; j < allLayerArray.length; j++) {\r\n        let item = allLayerArray[j];\r\n        let layerName = item.values_.name;\r\n        let exist = false;\r\n        //如果全部未选中 隐藏\r\n        if (checkedLayerArray == null || checkedLayerArray.length == 0) {\r\n          item.setVisible(false);\r\n          continue;\r\n        }\r\n        for (let k = 0; k < checkedLayerArray.length; k++) {\r\n          let checkItem = checkedLayerArray[k];\r\n          if (layerName == checkItem.layerName) {\r\n            console.log(layerName == checkItem.layerName);\r\n            console.log(layerName);\r\n            console.log(checkItem.layerName);\r\n            exist = true;\r\n            if (checkItem.treeDataItem == null || checkItem.treeDataItem.length == 0) {\r\n              item.setVisible(false);\r\n              break;\r\n            }\r\n            //更新样式\r\n            item.setVisible(true);\r\n            item.setStyle((feature, solution) => {\r\n              return this.initWfsStyle(feature, checkItem)\r\n            })\r\n\r\n          }\r\n        }\r\n        if (!exist) {\r\n          item.setVisible(false);\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n    // 初始化地图\r\n    initLayerToMapWfs (_this) {\r\n      const roadLinesWms = new TileWMS({\r\n        url: process.env.VUE_APP_GIS_BASE_URL + '/wms',\r\n        projection: 'EPSG:3857',\r\n        params: {\r\n          'LAYERS': 'Test:Road_lines',\r\n          'VERSION': '1.1.0'\r\n\r\n        },\r\n        serverType: 'geoserver'\r\n      });\r\n      //自定义图层1\r\n      const roadLineLayer = new TileLayer({\r\n        source: roadLinesWms,\r\n        zIndex: 3\r\n      });\r\n      const mapContainer = _this.$refs.map\r\n      let layers = [gaodeMapLayer, roadLineLayer];\r\n      //将图层加入Map\r\n      const map = new Map({\r\n        layers: layers,\r\n        target: mapContainer,\r\n        view: view\r\n      });\r\n      // 添加鼠标点击事件\r\n      map.on('click', _this.mapClick);\r\n      // 保存地图\r\n      _this.mapData = map\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    addVectorLayerWfs (_this) {\r\n      var checkedArray = this.$refs.tree.getCheckedKeys(false);\r\n      let checkedLayerMap = this.getLayerMap(checkedArray);\r\n      checkedLayerMap.forEach(item => {\r\n        var url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + encodeURI(item.layerName) + '&maxFeatures=500000000&outputFormat=application%2Fjson';\r\n        axios.get(url, null).then(function (res) {\r\n          var featuresData = res.data;\r\n          var vectorSource = new VectorSource({\r\n            features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' })).readFeatures(featuresData)\r\n          });\r\n\r\n          let vectorLayerTmp = new VectorLayer({\r\n            source: vectorSource,\r\n            name: item.layerName,\r\n            style: (feature, solution) => {\r\n              return _this.initWfsStyle(feature, item)\r\n            }\r\n          })\r\n\r\n          //    _this.mapData.addLayer(vectorLayerTmp);\r\n          _this.layerArray.push(vectorLayerTmp);\r\n        })\r\n\r\n      })\r\n\r\n      _this.mapData.addLayer(_this.layerArray);\r\n    },\r\n\r\n\r\n    // 弹出框\r\n    addPopup (coordinate, feature) {\r\n      this.removePopup()\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup')\r\n      let content = document.getElementById('popup-content')\r\n      if (this.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        this.overlay = new Overlay({\r\n          element: container,\r\n          autoPan: {\r\n            animation: {\r\n              duration: 250\r\n            }\r\n          }\r\n        })\r\n        // 添加到map\r\n        this.mapData.addOverlay(this.overlay)\r\n      }\r\n      let featureValues = feature.values_;\r\n      let projectName = featureValues.项目名 == null ? '' : featureValues.项目名;\r\n      let projectDesc = featureValues.项目概 == null ? '' : featureValues.项目概;\r\n      let start = featureValues.起点 == null ? '' : featureValues.起点;\r\n      let end = featureValues.终点 == null ? \"\" : featureValues.终点;\r\n      let length = featureValues.长度 == null ? \"\" : featureValues.长度;\r\n      let ztz = featureValues.总投资 == null ? \"\" : featureValues.总投资;\r\n      let kcsjffh = featureValues.勘察_1 == null ? \"\" : featureValues.勘察_1;\r\n      let status = featureValues.目前工 == null ? \"\" : featureValues.目前工;\r\n      let bz = featureValues.备注 == null ? \"\" : featureValues.备注;\r\n      // if (projectName == '') {\r\n      //   return;\r\n      // }\r\n\r\n      content.innerHTML = `\r\n                      <div style='color:#121924;font-weight: bold;width:100%;z-index:4;height:42px;padding:6px;font-size: 15px'>`+ projectName + `</div>\r\n                      <div style='font-size: 10px;width:100%;line-height:30px;height:315px;overflow-y: auto;'>\r\n                        <div style='margin-top:10px;line-height: 24px;'>\r\n                          <span style=\"color:#646566;width: 90px;\">项目概况：</span>\r\n                          <div style=\"text-indent: 2rem;font-size:14px;\">`+ projectDesc + `</div>\r\n                        </div>\r\n                          <div>\r\n                            <span class='poptable-th' style=\"color:#646566;\">起点：</span>\r\n                            <span style=\"text-align: right;font-size:14px\">`+ start + `</span>\r\n                          </div>\r\n                          <div>\r\n                              <span class='poptable-th' style=\"color:#646566\">目前工作进展：</span>\r\n                              <span style=\"text-align: right;font-size:14px\">`+ status + `</span>\r\n                          </div>\r\n\r\n\r\n                          <div>\r\n                            <span class='poptable-th' style=\"color:#646566\">终点：</span>\r\n                            <span style=\"text-align: right;font-size:14px\">`+ end + `</span>\r\n                          </div>\r\n                          <div>\r\n                            <span class='poptable-th' style=\"color:#646566\">长度/km：</span>\r\n                            <span style=\"text-align: right;font-size:14px\">`+ length + `</span>\r\n                          </div>\r\n\r\n\r\n                          <div>\r\n                            <span class='poptable-th' style=\"color:#646566\">总投资/亿元：</span>\r\n                            <span style=\"text-align: right;font-size:14px\">`+ ztz + `</span>\r\n                          </div>\r\n\r\n                        <div>\r\n                          <span class='poptable-th' style=\"color:#646566\">勘察设计费复核：</span>\r\n                          <span style=\"text-align: right;font-size:14px\">`+ kcsjffh + `</span>\r\n                        </div>\r\n                          <div style='line-height: 24px;>\r\n                          <span class='poptable-th' style=\"color:#646566\">备注：</span>\r\n                          <span style=\"text-indent: 2rem;font-size:14px;\">`+ bz + `</span>\r\n                        </div>\r\n                      </div>\r\n                      `\r\n\r\n      // 设置弹出层位置即可出现\r\n      this.overlay.setPosition(coordinate)\r\n      document.getElementById('popup').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n      }\r\n    },\r\n\r\n\r\n    showSummryPop () {\r\n      showSummryFlag = true;\r\n      document.getElementById('pop-summry—collapse').style.display = 'none';\r\n      document.getElementById('pop-summry').classList.remove('popsummry-down-animation')\r\n      document.getElementById('pop-summry').classList.remove('popsummry-up-animation')\r\n      document.getElementById('pop-summry').style.bottom = '-250px'\r\n      document.getElementById('pop-summry').classList.add('popsummry-up-animation')\r\n      document.getElementById('hideSummryLink').style.right = '60px'\r\n\r\n    },\r\n\r\n    hideSummryPop () {\r\n      showSummryFlag = false;\r\n      //重置，否则动画效果只触发一次\r\n      document.getElementById('pop-summry').style.bottom = '0px'\r\n      document.getElementById('pop-summry').classList.remove('popsummry-down-animation')\r\n      document.getElementById('pop-summry').classList.remove('popsummry-up-animation')\r\n      document.getElementById('pop-summry').classList.add('popsummry-down-animation');\r\n    },\r\n\r\n\r\n\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let highlightLayer = {}\r\n      arr.forEach(item => {\r\n        if (item.get(\"id\") == \"highlightLayer\") {\r\n          highlightLayer = item\r\n        }\r\n      })\r\n      if (highlightLayer && highlightLayer.className_) {\r\n        this.mapData.removeLayer(highlightLayer)\r\n      }\r\n    },\r\n\r\n\r\n    addHighLightStyle (clickFeature, thisObj) {\r\n      let featureObj = [];\r\n      featureObj.push(clickFeature);\r\n      this.clearHighlight();\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\",\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n          width: 3.5\r\n        }),\r\n      })\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        name: \"dk\",\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          return highLightStyle;\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\")\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n\r\n    },\r\n\r\n\r\n    fechFeatureInfo: async function (url, thisObj, evt, clickLayer) {\r\n      try {\r\n        await axios.get(url, null).then(function (res) {\r\n          var objData = res.data;\r\n          if (objData && objData.features[0]) {\r\n            if (thisObj.popDetailFlag == true) {\r\n              return;\r\n            }\r\n            thisObj.popDetailFlag = true;\r\n            thisObj.addPopup(evt.coordinate, objData.features[0]);\r\n            //设置高亮图层\r\n            thisObj.addHighLightStyle(objData.features[0], thisObj, clickLayer)\r\n\r\n          } else {\r\n            if (thisObj.popDetailFlag == false) {\r\n              thisObj.removePopup();\r\n            }\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n\r\n    //卫星地图切换\r\n    switchChange () {\r\n      let layerTypeSelect = this.value1;\r\n      //卫星地图\r\n      if (layerTypeSelect) {\r\n        if (this.wxMapLayer == null) {\r\n          this.wxMapLayer = new TileLayer({\r\n            source: new XYZ({\r\n              zIndex: 0,\r\n              crossOrigin: \"anonymous\",\r\n              url: 'http://t0.tianditu.gov.cn/img_w/wmts?tk=129364168580e7f0e3ff5bd759d41a75&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=tiles'\r\n            })\r\n          });\r\n          this.mapData.addLayer(this.wxMapLayer);\r\n        } else {\r\n          this.wxMapLayer.setVisible(true)\r\n          // this.wxMapLayer.setZIndex(1);\r\n          gaodeMapLayer.setVisible(true)\r\n\r\n        }\r\n      } else {\r\n        this.wxMapLayer.setVisible(false)\r\n        gaodeMapLayer.setVisible(true)\r\n        //gaodeMapLayer.setZIndex(0);\r\n      }\r\n\r\n    },\r\n\r\n\r\n\r\n    //地图点击事件\r\n    // mapClick (evt) {\r\n    //   this.removePopup();\r\n    //   this.popDetailFlag = false;\r\n    //   let thisObj = this;\r\n    //   var viewResolution = view.getResolution();\r\n    //   for (let k = 0; k < this.vectorArray.length; k++) {\r\n    //     let item = this.vectorArray[k];\r\n    //     let vectoryTemp = item.vectorLayer;\r\n    //     let visible = vectoryTemp.values_.visible;\r\n    //     //水域图层不展示详情\r\n    //     if (this.popDetailFlag == true || item.id == 5 || !visible) {\r\n    //       continue;\r\n    //     }\r\n    //     var featureUrl = vectoryTemp.getSource().getFeatureInfoUrl(\r\n    //       evt['coordinate'],\r\n    //       viewResolution,\r\n    //       'EPSG:3857',\r\n    //       { 'INFO_FORMAT': 'application/json' }\r\n    //     );\r\n    //     if (featureUrl) {\r\n    //       this.fechFeatureInfo(featureUrl, thisObj, evt, vectoryTemp);\r\n    //     } else {\r\n    //       this.removePopup();\r\n    //     }\r\n    //   }\r\n\r\n    // },\r\n\r\n\r\n    // 鼠标点击地图事件\r\n    mapClick (evt) {\r\n      let pixel = this.mapData.getEventPixel(evt.originalEvent);\r\n      let feature = this.mapData.forEachFeatureAtPixel(pixel,\r\n        function (feature, layer) {\r\n          return feature;\r\n        });\r\n      if (feature) {\r\n        //捕捉到要素后，弹框\r\n        let coordinate = evt.coordinate\r\n        this.addPopup(coordinate, feature)\r\n        this.addHighLightStyle(feature, this)\r\n      } else {\r\n        this.removePopup();\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.ol-popup {\r\n  position: absolute;\r\n  width: 338px;\r\n  height: 388px;\r\n  opacity: 1;\r\n  bottom: 15px;\r\n  left: -169px;\r\n  padding: 15px 15px 15px 25px;\r\n  background: url(../../assets/images/pop_up_bg.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n#popup-content ::after {\r\n  position: absolute;\r\n  bottom: -15px;\r\n  left: 148px;\r\n  content: '';\r\n  width: 40px;\r\n  height: 15px;\r\n  background: url(../../assets/images/bg_down.png) no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n.ol-popup-closer {\r\n  background: url(../../assets/images/close.png) no-repeat;\r\n  text-decoration: none;\r\n  position: absolute;\r\n  top: 25px;\r\n  width: 16px;\r\n  height: 16px;\r\n  background-size: cover;\r\n  right: 40px;\r\n  z-index: 2000;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n.poptable-th {\r\n  text-align: left;\r\n  color: #646566;\r\n  margin-bottom: 12px;\r\n}\r\n.popTable td {\r\n  font-size: 14px;\r\n}\r\n\r\n#pop-summry {\r\n  width: 100%;\r\n  height: 378px;\r\n  bottom: 0px;\r\n  z-index: 10000;\r\n  border-radius: 40px 40px 0px 0px;\r\n  position: fixed;\r\n  border: 2px solid #fff;\r\n}\r\n::v-deep .el-checkbox {\r\n  position: relative;\r\n  display: block;\r\n\r\n  height: 26px;\r\n}\r\n.el-checkbox-group {\r\n  width: 100%;\r\n}\r\n.colorBox {\r\n  width: 48px;\r\n  height: 12px;\r\n  display: inline-block;\r\n  border-radius: 2px;\r\n  position: absolute;\r\n  right: 10px;\r\n}\r\n.lightGreen {\r\n  background-color: #b1db16;\r\n}\r\n.lightYellow {\r\n  background-color: #ebcc0c;\r\n}\r\n.lightRed {\r\n  background-color: #eb7323;\r\n}\r\n.blue {\r\n  background-color: #1979ff;\r\n}\r\n\r\n.road-selector-pop {\r\n  width: 120px;\r\n  height: 200px;\r\n  z-index: 200000;\r\n  position: fixed;\r\n  margin-left: 70px;\r\n  margin-top: 55px;\r\n  .pop-title {\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n  }\r\n  .div-switch {\r\n    margin: 10px 0 20px 0;\r\n  }\r\n}\r\n.road-selector-color {\r\n  width: 100%;\r\n}\r\n.flex-div {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 25px 32px;\r\n  div {\r\n    width: 33%;\r\n  }\r\n}\r\n/* 悬浮框背景 */\r\n.div-bg {\r\n  background: rgba(255, 255, 255, 0.56);\r\n  box-shadow: 0px 10px 20px 1px rgba(135, 141, 153, 0.1);\r\n  border-radius: 12px 12px 12px 12px;\r\n  height: 270px;\r\n  padding: 20px;\r\n}\r\n.blue-title {\r\n  color: #003f97;\r\n}\r\n.el-collapse-item {\r\n  width: 260px;\r\n  height: 44px;\r\n  opacity: 1;\r\n  ::v-deep .el-collapse-item__header {\r\n    height: 44px;\r\n    padding-left: 10px;\r\n    background: rgba(255, 255, 255, 0.96);\r\n    box-shadow: 0px 5px 10px 1px rgba(180, 190, 204, 0.4);\r\n    border-radius: 8px;\r\n  }\r\n}\r\n::v-deep .el-collapse {\r\n  border: none;\r\n}\r\n::v-deep .el-collapse-item__wrap {\r\n  border-radius: 0 0 8px 8px;\r\n  margin-top: -5px;\r\n}\r\n.dot {\r\n  width: 24px;\r\n  height: 10px;\r\n  border-radius: 2px;\r\n  display: inline-block;\r\n  margin-left: 8px;\r\n}\r\n.div-switch {\r\n  width: 260px;\r\n  background: rgba(255, 255, 255, 0.96);\r\n  box-shadow: 0px 5px 10px 1px rgba(180, 190, 204, 0.4);\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  .switch-title {\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    margin-bottom: 8px;\r\n  }\r\n}\r\n</style>\r\n"]}]}