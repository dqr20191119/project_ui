{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab2-right.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab2-right.vue","mtime":1663479653290},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCAnb2wvb2wuY3NzJw0KaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAnDQppbXBvcnQgKiBhcyBvbENvbnRyb2wgZnJvbSAnb2wvY29udHJvbCcNCmltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnDQppbXBvcnQgeyBnZXRXaWR0aCwgZ2V0Q2VudGVyIH0gZnJvbSAnb2wvZXh0ZW50Jw0KaW1wb3J0IFRpbGVMYXllciBmcm9tICdvbC9sYXllci9UaWxlJw0KaW1wb3J0IFdNVFMgZnJvbSAnb2wvc291cmNlL1dNVFMnDQppbXBvcnQgWFlaIGZyb20gJ29sL3NvdXJjZS9YWVonDQppbXBvcnQgV01UU1RpbGVHcmlkIGZyb20gJ29sL3RpbGVncmlkL1dNVFMnDQppbXBvcnQgUHJvamVjdGlvbiBmcm9tICdvbC9wcm9qL1Byb2plY3Rpb24nDQppbXBvcnQgcHJvajQgZnJvbSAncHJvajQnDQppbXBvcnQgeyByZWdpc3RlciB9IGZyb20gJ29sL3Byb2ovcHJvajQnOw0KaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICdvbC9zb3VyY2UvVmVjdG9yJw0KaW1wb3J0IHsgVGlsZVdNUyB9IGZyb20gJ29sL3NvdXJjZScNCmltcG9ydCBWZWN0b3JMYXllciBmcm9tICdvbC9sYXllci9WZWN0b3InDQppbXBvcnQgRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlJw0KaW1wb3J0IHsgRHJhdyB9IGZyb20gJ29sL2ludGVyYWN0aW9uJw0KaW1wb3J0IHsgU3R5bGUsIENpcmNsZSwgU3Ryb2tlLCBGaWxsLCBJY29uLCBJY29uSW1hZ2UsIEltYWdlLCBUZXh0IH0gZnJvbSAnb2wvc3JjL3N0eWxlJw0KaW1wb3J0IFdLVCBmcm9tICdvbC9mb3JtYXQvV0tUJw0KaW1wb3J0IEdlb0pTT04gZnJvbSAnb2wvZm9ybWF0L0dlb0pTT04nDQppbXBvcnQgT3ZlcmxheSBmcm9tICdvbC9PdmVybGF5Jw0KaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICJlY2hhcnRzIjsNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycNCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcNCmltcG9ydCB0YWIyTGVmdFZ1ZSBmcm9tICcuL3RhYjItbGVmdC52dWUnDQppbXBvcnQgeyBmb3JtYXRGaXhOdW0sIGNvbnZlcnRGZWF0dXJlIH0gZnJvbSAiQC9hcGkvY29tbW9uL2NvbW1vbiI7DQppbXBvcnQgeyBmZWF0dXJlQ29tcGFpcmUgfSBmcm9tICJAL2FwaS9kZWNpc2lvbi9wbGFuZSI7DQppbXBvcnQgKiBhcyB0dXJmIGZyb20gJ0B0dXJmL3R1cmYnOw0KaW1wb3J0IFBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQnOw0KaW1wb3J0IHsgZnJvbUxvbkxhdCwgdG9Mb25MYXQsIHRyYW5zZm9ybUV4dGVudCwgdHJhbnNmb3JtIH0gZnJvbSAnb2wvcHJvaicNCmltcG9ydCBMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTGluZVN0cmluZyc7DQppbXBvcnQgTXVsdGlMaW5lU3RyaW5nIGZyb20gJ29sL2dlb20vTXVsdGlMaW5lU3RyaW5nJzsNCmltcG9ydCB7IGluaXRUcmVlTGlzdCB9IGZyb20gIkAvYXBpL2RlY2lzaW9uLW1hbmFnZS9kZWNpc2lvbiI7DQovL+S4reW/g+WdkOaghw0KY29uc3QgY2VudGVyQ29yZGluYXRlID0gWzY1NjgxMy40NDI1NiwgMzU2MDQzMi45ODI0NV0NCi8v5Z2Q5qCH5a6a5LmJDQpwcm9qNC5kZWZzKCJFUFNHOjQ1NDgiLCAiK3Byb2o9dG1lcmMgK2xhdF8wPTAgK2xvbl8wPTExNyAraz0xICt4XzA9NTAwMDAwICt5XzA9MCArZWxscHM9R1JTODAgK3VuaXRzPW0gK25vX2RlZnMiKTsNCnJlZ2lzdGVyKHByb2o0KTsNCmxldCBuZXdMaXN0ID0gW10NCmxldCBwYXJlbnRWYWw9JycNCi8v5Zyw5Zu+5Yid5aeL5YyWDQpjb25zdCB2aWV3MiA9IG5ldyBWaWV3KHsNCiAgY2VudGVyOiB0cmFuc2Zvcm0oY2VudGVyQ29yZGluYXRlLCAnRVBTRzo0NTQ4JywgJ0VQU0c6Mzg1NycpLA0KICBtaW5ab29tOiAxMCwNCiAgbWF4Wm9vbTogMTgsDQogIHpvb206IDEzLjUvLyDlnLDlm77liJ3lp4vljJbnmoTnvKnmlL7nuqfliKsNCn0pDQoNCg0KLy/pq5jlvrflnLDlm77lm77lsYINCmNvbnN0IGdhb2RlTWFwTGF5ZXIgPSBuZXcgVGlsZUxheWVyKHsNCiAgc291cmNlOiBuZXcgWFlaKHsNCiAgICB1cmw6ICdodHRwOi8vd2Vic3QwezEtNH0uaXMuYXV0b25hdmkuY29tL2FwcG1hcHRpbGU/bGFuZz16aF9jbiZzaXplPTEmc2NsPTImc3R5bGU9NyZ4PXt4fSZ5PXt5fSZ6PXt6fScNCiAgfSkNCn0pOw0KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmlnaHRQbGFuZUxpc3Q6IFtdLA0KICAgICAgcG9wVHJhbnNMaXN0OiBbDQogICAgICAgIHsgbGFiZWw6ICdBQuS6pOmAmumHjycsIHByb3BlcnRpZTogJ2FiX2Zsb3cnLCB1bml0OiAncGN1L2gnLCB0eXBlOiAnaW50JyB9LA0KICAgICAgICB7IGxhYmVsOiAnQkHkuqTpgJrph48nLCBwcm9wZXJ0aWU6ICdiYV9mbG93JywgdW5pdDogJ3BjdS9oJywgdHlwZTogJ2ludCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ+aAu+S6pOmAmumHjycsIHByb3BlcnRpZTogJ3RvdF9mbG93JywgdW5pdDogJ3BjdS9oJywgdHlwZTogJ2ludCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ0FC6aWx5ZKM5bqmJywgcHJvcGVydGllOiAnYWJfdm9jJywgbWF4bGVuZ3RoOiAyLCB0eXBlOiAnZmxvYXQnIH0sDQogICAgICAgIHsgbGFiZWw6ICdCQemlseWSjOW6picsIHByb3BlcnRpZTogJ2JhX3ZvYycsIG1heGxlbmd0aDogMiwgdHlwZTogJ2Zsb2F0JyB9LA0KICAgICAgICB7IGxhYmVsOiAn5pyA5aSn6aWx5ZKM5bqmJywgcHJvcGVydGllOiAnbWF4X3ZvYycsIG1heGxlbmd0aDogMiwgdHlwZTogJ2Zsb2F0JyB9LA0KICAgICAgXSwNCiAgICAgIHJpZ2h0UGxhbmU6ICcnLA0KICAgICAgbGVmdFNlbGVjdGVkUGxhbmU6IG51bGwsDQogICAgICB2ZWN0b3JMYXllcjogbnVsbCwNCiAgICAgIHN0eWxlOiB7DQogICAgICAgIGxpbmVfd2lkdGg6IDMsDQogICAgICAgIGxpbmVfc3Ryb2tlOiAnIzQ1OWM1MCcsDQogICAgICAgIGludGVydmFsOiA0MA0KICAgICAgfSwNCiAgICAgIG1hcDogbnVsbA0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogICAgdGhpcy5pbml0Q29tcG9uZW50SW5mbygpDQogICAgdGhpcy5pbml0TWFwKCk7DQogICAgLy8g6auY5LquDQogICAgdGhpcy4kYmFzLiRvbigiYWRkUmlnaHRIaWdoTGlnaHRTdHlsZSIsIChpLCBqLCBudW0pID0+IHsNCiAgICAgIHRoaXMuYWRkSGlnaExpZ2h0U3R5bGUoaSwgaiwgbnVtKQ0KICAgIH0pDQogICAgLy/muIXpmaTpq5jkuq4NCiAgICB0aGlzLiRiYXMuJG9uKCJjbGVhckhpZ2hsaWdodF9MIiwgKGkpID0+IHsNCiAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKQ0KICAgIH0pDQogICAgdGhpcy5yaWdodFBsYW5lTGlzdCA9IHRoaXMucmlnaHRQbGFuZUxpc3QuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICByZXR1cm4gaXRlbS5iaXpWYWwgPT0gcGFyZW50VmFsDQogICAgfSkNCg0KICAgIHRoaXMuJGJhcy4kb24oImxlZnRQbGFuZUNoYW5nZSIsIChpKSA9PiB7DQogICAgICB0aGlzLnJpZ2h0UGxhbmVMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuZXdMaXN0KSk7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnJpZ2h0UGxhbmVMaXN0KTsNCiAgICAgIHRoaXMucmlnaHRQbGFuZUxpc3QgPSB0aGlzLnJpZ2h0UGxhbmVMaXN0LmZpbHRlcigoaXRlbSkgPT4gew0KICAgICAgICByZXR1cm4gaXRlbS52YWx1ZSAhPSBpICYmIGl0ZW0uYml6VmFsID09IHBhcmVudFZhbA0KICAgICAgfSkNCiAgICAgIHRoaXMucmlnaHRQbGFuZSA9IHRoaXMucmlnaHRQbGFuZUxpc3RbMF0udmFsdWUNCiAgICAgIHRoaXMubGVmdFNlbGVjdGVkUGxhbmU9aQ0KICAgICAgdGhpcy5pbml0VmVjdG9yTGF5ZXIoKQ0KICAgIH0pDQoNCiAgICAvL+aLluWKqOebkeWQrOaWueazlQ0KICAgIHRoaXMuJGJhcy4kb24oImxlZnRQYW5lbERyYWdlQ2hhbmdlIiwgKGNvcmRpbmF0ZSwgem9vbSkgPT4gew0KICAgICAgaWYgKGNvcmRpbmF0ZSAmJiB6b29tKSB7DQogICAgICAgIHRoaXMucmlnaHRDdXJyZW50Q29yZGluYXRlID0gY29yZGluYXRlOw0KICAgICAgICB0aGlzLnJpZ3RodEN1cnJlbnRab29tID0gem9vbTsNCiAgICAgICAgdmlldzIuYW5pbWF0ZSh7DQogICAgICAgICAgY2VudGVyOiBjb3JkaW5hdGUsDQogICAgICAgICAgem9vbTogem9vbSwgLy8g57yp5pS+57qn5YirDQogICAgICAgICAgcm90YXRpb246IHVuZGVmaW5lZCwNCiAgICAgICAgICBkdXJhdGlvbjogMTANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9KQ0KDQogICAgLy/nvKnmlL7nm5HlkKwNCiAgICB0aGlzLiRiYXMuJG9uKCJsZWZ0TW92dmVuZENoYW5nZSIsIChjb3JkaW5hdGUsIHpvb20pID0+IHsNCiAgICAgIGlmIChjb3JkaW5hdGUgJiYgem9vbSkgew0KICAgICAgICB0aGlzLnJpZ2h0Q3VycmVudENvcmRpbmF0ZSA9IGNvcmRpbmF0ZTsNCiAgICAgICAgdGhpcy5yaWd0aHRDdXJyZW50Wm9vbSA9IHpvb207DQogICAgICAgIHZpZXcyLmFuaW1hdGUoew0KICAgICAgICAgIGNlbnRlcjogY29yZGluYXRlLA0KICAgICAgICAgIHpvb206IHpvb20sIC8vIOe8qeaUvue6p+WIqw0KICAgICAgICAgIHJvdGF0aW9uOiB1bmRlZmluZWQsDQogICAgICAgICAgZHVyYXRpb246IDEwDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSkNCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAvL+S6pOmAmuS/oeaBr+eCueWHu+aMiemSrg0KICAgIHdpbmRvdy5wcmV2aWV3MyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvNCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8zJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4zJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG40Jykuc3R5bGUuYmFja2dyb3VuZCA9ICcjRDNENkRCJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvMicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8xJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4xJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4yJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjRDNENkRCJzsNCiAgICB9DQogICAgLy/ln7rmnKzkv6Hmga/ngrnlh7vmjInpkq4NCiAgICB3aW5kb3cucHJldmlldzQgPSBmdW5jdGlvbiAoKSB7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzQnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8zJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuNCcpLnN0eWxlLmJhY2tncm91bmQgPSAnIzAwNEFCMyc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuMycpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRDNENkRCJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvMicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzEnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4yJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4xJykuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNEM0Q2REInOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KDQogICAgYWRkTWFya1RleHRMYXllciAoKSB7DQogICAgICB0aGlzLiRlbWl0KCdhcXVpcmVQb2ludE1hcmtEYXRhJywgdGhpcy5tYXBEYXRhKTsNCiAgICB9LA0KDQogICAgY2hhbmdlQ29tcGFyZUl0ZW1CeUJpelR5cGUgKHBhcmVudFZhbCwgdGhpc18sIGxlZnRQYW5lbCkgew0KICAgICAgcGFyZW50VmFsPXBhcmVudFZhbA0KICAgICAgdGhpc18ucmlnaHRQbGFuZUxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG5ld0xpc3QpKTsNCiAgICAgIHRoaXNfLnJpZ2h0UGxhbmVMaXN0ID0gdGhpc18ucmlnaHRQbGFuZUxpc3QuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmJpelZhbCA9PSBwYXJlbnRWYWwgJiYgaXRlbS52YWx1ZSAhPSBsZWZ0UGFuZWwNCiAgICAgIH0pDQogICAgICB0aGlzXy5yaWdodFBsYW5lID0gdGhpc18ucmlnaHRQbGFuZUxpc3RbMF0udmFsdWUNCiAgICAgIHRoaXNfLmluaXRWZWN0b3JMYXllcigpDQoNCiAgICB9LA0KDQogICAgLy8gZ2V0UG9pbnRzQnlMaW5lIChjb29yZHMsIGRpcikgew0KICAgIC8vICAgbGV0IHRoaXNfID0gdGhpczsNCiAgICAvLyAgIGxldCBzdHlsZXMgPSBbXTsNCiAgICAvLyAgIGxldCBkaXN0YW5jZV8gPSB0aGlzXy5zdHlsZS5pbnRlcnZhbCAvIDI7Ly/pppbkuKrngrnmlL7nva7lnKjot53nprvotbfngrkxLzLpl7TpmpTnmoTkvY3nva4NCiAgICAvLyAgIGxldCBwaXhfc3RhcnQgPSB0aGlzXy5tYXBEYXRhLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY29vcmRzWzBdKQ0KICAgIC8vICAgbGV0IHBpeF9lbmQNCiAgICAvLyAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7DQogICAgLy8gICAgIGxldCBjb29yZF8sIGNvb3JkX3BpeDsNCiAgICAvLyAgICAgbGV0IHN0eWxlXzsNCiAgICAvLyAgICAgcGl4X2VuZCA9IHRoaXNfLm1hcERhdGEuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjb29yZHNbaV0pOw0KICAgIC8vICAgICBsZXQgZGlzX3N0YXJ0MmVuZCA9IE1hdGguc3FydChNYXRoLnBvdygocGl4X3N0YXJ0WzBdIC0gcGl4X2VuZFswXSksIDIpICsgTWF0aC5wb3coKHBpeF9zdGFydFsxXSAtIHBpeF9lbmRbMV0pLCAyKSkgLy8g6K6h566X5pS25bC+5Zyo5bGP5bmV5LiK55qE6Led56a7DQogICAgLy8gICAgIGlmIChkaXNfc3RhcnQyZW5kID4gZGlzdGFuY2VfKSB7IC8vIOi3neemu+Wkp+S6jumXtOmalA0KICAgIC8vICAgICAgIC8vIOiuoeeul+i3neemu+W8gOWni+eCueS9jeeahOWDj+e0oOWAvA0KICAgIC8vICAgICAgIGNvb3JkX3BpeCA9IFsNCiAgICAvLyAgICAgICAgIChkaXN0YW5jZV8gKiAocGl4X2VuZFswXSAtIHBpeF9zdGFydFswXSkpIC8gZGlzX3N0YXJ0MmVuZCArIHBpeF9zdGFydFswXSwNCiAgICAvLyAgICAgICAgIChkaXN0YW5jZV8gKiAocGl4X2VuZFsxXSAtIHBpeF9zdGFydFsxXSkpIC8gZGlzX3N0YXJ0MmVuZCArIHBpeF9zdGFydFsxXQ0KICAgIC8vICAgICAgIF07DQogICAgLy8gICAgICAgLy8g6K6h566X57uP57qs5bqmDQogICAgLy8gICAgICAgY29vcmRfID0gdGhpc18ubWFwRGF0YS5nZXRDb29yZGluYXRlRnJvbVBpeGVsKGNvb3JkX3BpeCk7DQogICAgLy8gICAgICAgdmFyIHJvdGF0aW9uID0gTWF0aC5QSSAvIDIgKyBNYXRoLmF0YW4yKHBpeF9lbmRbMV0gLSBwaXhfc3RhcnRbMV0sIHBpeF9lbmRbMF0gLSBwaXhfc3RhcnRbMF0pOw0KICAgIC8vICAgICAgIGlmIChkaXIgPT0gLTEpIHsNCiAgICAvLyAgICAgICAgIHJvdGF0aW9uID0gcm90YXRpb24gKyBNYXRoLlBJDQogICAgLy8gICAgICAgfQ0KICAgIC8vICAgICAgIC8vIOeUn+aIkOagt+W8jw0KICAgIC8vICAgICAgIHN0eWxlXyA9IG5ldyBTdHlsZSh7DQogICAgLy8gICAgICAgICAvLyDnrq3lpLTngrnnmoTkvY3nva4NCiAgICAvLyAgICAgICAgIGdlb21ldHJ5OiBuZXcgUG9pbnQoY29vcmRfKSwNCiAgICAvLyAgICAgICAgIC8vIOeureWktOeCueeahOagt+W8jw0KICAgIC8vICAgICAgICAgaW1hZ2U6IG5ldyBJY29uKHsNCiAgICAvLyAgICAgICAgICAgc3JjOiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvanVlY2UvdXAxMC0xMC5wbmcnKSwNCiAgICAvLyAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRydWUsDQogICAgLy8gICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbiwNCiAgICAvLyAgICAgICAgICAgc2NhbGU6IHRoaXMuc3R5bGUubGluZV93aWR0aCAvIDUsDQogICAgLy8gICAgICAgICAgIGltZ1NpemU6IFsxMCwgMTBdDQogICAgLy8gICAgICAgICB9KQ0KICAgIC8vICAgICAgIH0pDQogICAgLy8gICAgICAgLy/kuIvmrKHlvqrnjq/lvIDlp4vngrnkuLrlvZPliY3ngrkNCiAgICAvLyAgICAgICBwaXhfc3RhcnQgPSBjb29yZF9waXg7DQogICAgLy8gICAgICAgZGlzdGFuY2VfID0gdGhpc18uc3R5bGUuaW50ZXJ2YWw7DQogICAgLy8gICAgICAgaS0tOw0KICAgIC8vICAgICB9IGVsc2UgaWYgKGRpc19zdGFydDJlbmQgPT0gZGlzdGFuY2VfKSB7Ly8g6Led56a7562J5LqO6Ze06ZqUDQogICAgLy8gICAgICAgdmFyIHJvdGF0aW9uID0gTWF0aC5QSSAvIDIgKyBNYXRoLmF0YW4yKHBpeF9lbmRbMV0gLSBwaXhfc3RhcnRbMV0sIHBpeF9lbmRbMF0gLSBwaXhfc3RhcnRbMF0pDQogICAgLy8gICAgICAgaWYgKGRpciA9PSAtMSkgew0KICAgIC8vICAgICAgICAgcm90YXRpb24gPSByb3RhdGlvbiArIE1hdGguUEkNCiAgICAvLyAgICAgICB9DQogICAgLy8gICAgICAgLy8g55Sf5oiQ5qC35byPDQogICAgLy8gICAgICAgc3R5bGVfID0gbmV3IFN0eWxlKHsNCiAgICAvLyAgICAgICAgIC8vIOeureWktOeCueeahOS9jee9rg0KICAgIC8vICAgICAgICAgZ2VvbWV0cnk6IG5ldyBQb2ludChjb29yZHNbaV0pLA0KICAgIC8vICAgICAgICAgLy8g566t5aS054K555qE5qC35byPDQogICAgLy8gICAgICAgICBpbWFnZTogbmV3IEljb24oew0KICAgIC8vICAgICAgICAgICBzcmM6IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9qdWVjZS91cDEwLTEwLnBuZycpLA0KICAgIC8vICAgICAgICAgICByb3RhdGVXaXRoVmlldzogdHJ1ZSwNCiAgICAvLyAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLA0KICAgIC8vICAgICAgICAgICBzY2FsZTogdGhpcy5zdHlsZS5saW5lX3dpZHRoIC8gNSwNCiAgICAvLyAgICAgICAgICAgaW1nU2l6ZTogWzEwLCAxMF0NCiAgICAvLyAgICAgICAgIH0pDQogICAgLy8gICAgICAgfSkNCiAgICAvLyAgICAgICBwaXhfc3RhcnQgPSBwaXhfZW5kOw0KICAgIC8vICAgICAgIGRpc3RhbmNlXyA9IHRoaXNfLnN0eWxlLmludGVydmFsOw0KICAgIC8vICAgICB9IGVsc2Ugey8v6Led56a75bCP5LqO6Ze06ZqUDQogICAgLy8gICAgICAgZGlzdGFuY2VfID0gZGlzdGFuY2VfIC0gZGlzX3N0YXJ0MmVuZDsNCiAgICAvLyAgICAgICBwaXhfc3RhcnQgPSBwaXhfZW5kOw0KICAgIC8vICAgICB9DQogICAgLy8gICAgIHN0eWxlXyAmJiBzdHlsZXMucHVzaChzdHlsZV8pDQogICAgLy8gICB9DQogICAgLy8gICByZXR1cm4gc3R5bGVzDQogICAgLy8gfSwNCg0KICAgIGdldFBvaW50RXh0ZW50IChuKSB7DQogICAgICBuID0gbiA/IG4gOiAxLjI7DQogICAgICBsZXQgdmlldyA9IHRoaXMubWFwRGF0YS5nZXRWaWV3KCk7DQogICAgICBsZXQgbWFwc2l6ZSA9IHRoaXMubWFwRGF0YS5nZXRTaXplKCkubWFwKGl0XyA9PiB7DQogICAgICAgIHJldHVybiBpdF8gKiBuDQogICAgICB9KTsNCiAgICAgIHJldHVybiB2aWV3LmNhbGN1bGF0ZUV4dGVudChtYXBzaXplKTsNCiAgICB9LA0KDQoNCiAgICBnZXRNaWRkbGVQb2ludCAoY29vcmRzLCBmZWF0dXJlKSB7DQogICAgICB0cnkgew0KICAgICAgICBpZiAoY29vcmRzID09IG51bGwgfHwgY29vcmRzLmxlbmd0aCA9PSAwIHx8IGNvb3JkcyA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA8PSAzKSB7DQogICAgICAgICAgdmFyIHBvaW50X2ZlYXR1cmVzID0gdHVyZi5wb2ludHMoZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKClbMF0pOw0KICAgICAgICAgIHJldHVybiBuZXcgUG9pbnQodHVyZi5jZW50ZXIocG9pbnRfZmVhdHVyZXMpLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCAlIDIgPT0gMCkgew0KICAgICAgICAgIHJldHVybiBuZXcgUG9pbnQoY29vcmRzW2Nvb3Jkcy5sZW5ndGggLyAyXSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gbmV3IFBvaW50KGNvb3Jkc1tNYXRoLmNlaWwoY29vcmRzLmxlbmd0aCAvIDIpXSkNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0NCg0KICAgIH0sDQoNCg0KICAgIGluaUZsb3dPclZvY1RleHQgKGNvb3JkcywgZmVhdHVyZSwgdGhpc18sIHRleHQsIG9mZnNldFgsIG9mZnNldHkpIHsNCiAgICAgIGxldCBjZW50ZXJQb2ludCA9IHRoaXMuZ2V0TWlkZGxlUG9pbnQoY29vcmRzLCBmZWF0dXJlKTsNCiAgICAgIGlmICghY2VudGVyUG9pbnQpIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgICBsZXQgcGl4X3N0YXJ0ID0gdGhpc18ubWFwRGF0YS5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNvb3Jkc1swXSkNCiAgICAgIGxldCBwaXhfZW5kID0gdGhpc18ubWFwRGF0YS5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNlbnRlclBvaW50LmZsYXRDb29yZGluYXRlcyk7DQogICAgICB2YXIgcm90YXRpb24gPSBNYXRoLlBJICsgTWF0aC5hdGFuMihwaXhfZW5kWzFdIC0gcGl4X3N0YXJ0WzFdLCBwaXhfZW5kWzBdIC0gcGl4X3N0YXJ0WzBdKTsNCiAgICAgIGlmIChwaXhfZW5kWzBdID4gcGl4X3N0YXJ0WzBdKSB7DQogICAgICAgIHJvdGF0aW9uID0gcm90YXRpb24gKyBNYXRoLlBJDQogICAgICB9DQogICAgICB0ZXh0ID0gdGV4dCArICIiOw0KICAgICAgbGV0IGNvbG9yID0gdGhpc18uZ2V0Q29sb3JCeUZlYXR1cmUoZmVhdHVyZSk7DQogICAgICByZXR1cm4gdGhpcy5jcmVhdGVUZXh0U3R5bGUoY2VudGVyUG9pbnQsIHJvdGF0aW9uLCB0ZXh0LCBvZmZzZXRYLCBvZmZzZXR5LCBjb2xvcik7DQogICAgfSwNCg0KDQoNCiAgICBpbml0Rmxvd09yVm9jUG9pbnQgKGZlYXR1cmUsIHRoaXNfLCBpc0Zsb3cpIHsNCiAgICAgIGxldCBjb29yZHMgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTsNCiAgICAgIGxldCBzdHlsZXMgPSBbXTsNCiAgICAgIGxldCBleHRlbnRfID0gdGhpc18uZ2V0UG9pbnRFeHRlbnQoKTsNCiAgICAgIGxldCBsaW5lXyA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKGNvb3Jkcyk7DQogICAgICBsZXQgbGluZV9jbGlwX2FyciA9IHR1cmYuYmJveENsaXAobGluZV8sIGV4dGVudF8pDQogICAgICBsZXQgYWJfdGV4dCA9IGlzRmxvdyA/IGZlYXR1cmUuZ2V0KCJhYl9mbG93IikgOiBmZWF0dXJlLmdldCgiYWJfdm9jIik7DQogICAgICBsZXQgYmFfdGV4dCA9IGlzRmxvdyA/IGZlYXR1cmUuZ2V0KCJiYV9mbG93IikgOiBmZWF0dXJlLmdldCgiYmFfdm9jIik7DQogICAgICBpZiAoYWJfdGV4dCAhPSBudWxsICYmIGFiX3RleHQgIT0gJycpIHsNCiAgICAgICAgYWJfdGV4dCA9IGlzRmxvdyA/IE1hdGguZmxvb3IoYWJfdGV4dCkgOiBmb3JtYXRGaXhOdW0oYWJfdGV4dCwgMik7DQogICAgICB9DQogICAgICBpZiAoYmFfdGV4dCAhPSBudWxsICYmIGJhX3RleHQgIT0gJycpIHsNCiAgICAgICAgYmFfdGV4dCA9IGlzRmxvdyA/IE1hdGguZmxvb3IoYmFfdGV4dCkgOiBmb3JtYXRGaXhOdW0oYmFfdGV4dCwgMik7DQogICAgICB9DQoNCiAgICAgIGlmIChsaW5lX2NsaXBfYXJyLmdlb21ldHJ5LnR5cGUgPT0gIkxpbmVTdHJpbmciKSB7DQogICAgICAgIGlmIChhYl90ZXh0ICE9IG51bGwgJiYgYWJfdGV4dCAhPSAnJykgew0KICAgICAgICAgIGxldCBvZmZzZXRYID0gMTU7DQogICAgICAgICAgbGV0IG9mZnNldHkgPSAxNTsNCiAgICAgICAgICBsZXQgc3R5bGVfYWIgPSB0aGlzXy5pbmlGbG93T3JWb2NUZXh0KGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsIGZlYXR1cmUsIHRoaXNfLCBhYl90ZXh0LCBvZmZzZXRYLCBvZmZzZXR5KTsNCiAgICAgICAgICBzdHlsZXMgPSBzdHlsZXMuY29uY2F0KHN0eWxlX2FiKQ0KICAgICAgICB9DQogICAgICAgIGlmIChiYV90ZXh0ICE9IG51bGwgJiYgYmFfdGV4dCAhPSAnJykgew0KICAgICAgICAgIGxldCBvZmZzZXRYID0gLTE1Ow0KICAgICAgICAgIGxldCBvZmZzZXR5ID0gLTE1Ow0KICAgICAgICAgIGxldCBzdHlsZV9iYSA9IHRoaXNfLmluaUZsb3dPclZvY1RleHQobGluZV9jbGlwX2Fyci5nZW9tZXRyeS5jb29yZGluYXRlcywgZmVhdHVyZSwgdGhpc18sIGJhX3RleHQsIG9mZnNldFgsIG9mZnNldHkpOw0KICAgICAgICAgIHN0eWxlcyA9IHN0eWxlcy5jb25jYXQoc3R5bGVfYmEpDQogICAgICAgIH0NCg0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN0eWxlczsNCiAgICB9LA0KDQoNCiAgICBjcmVhdGVUZXh0U3R5bGUgKGNvb3JkaW5hdGUsIHJvYXRpb24sIHRleHQsIG9mZnNldHgsIG9mZnNldHksIGNvbG9yKSB7DQogICAgICBsZXQgc3R5bGVzXyA9IFtdOw0KICAgICAgbGV0IHRleHRfID0gbmV3IFRleHQoew0KICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLA0KICAgICAgICB0ZXh0QmFzZWxpbmU6ICdtaWRkbGUnLA0KICAgICAgICBmb250OiAnbm9ybWFsIDE1cHgg5b6u6L2v6ZuF6buRJywNCiAgICAgICAgdGV4dDogdGV4dCwNCiAgICAgICAgdGV4dEJhc2VsaW5lOiAibWlkZGxlIiwgLy/mlofmnKzln7rnur8NCiAgICAgICAgb2Zmc2V0WTogb2Zmc2V0eCwNCiAgICAgICAgb2Zmc2V0WDogb2Zmc2V0eSwNCiAgICAgICAgZmlsbDogbmV3IEZpbGwoew0KICAgICAgICAgIGNvbG9yOiBjb2xvcg0KICAgICAgICB9KSwNCiAgICAgICAgcm90YXRpb246IHJvYXRpb24sDQogICAgICB9KQ0KICAgICAgbGV0IHN0eWxlXyA9IG5ldyBTdHlsZSh7DQogICAgICAgIGdlb21ldHJ5OiBjb29yZGluYXRlLA0KICAgICAgfSkNCiAgICAgIHN0eWxlXy5zZXRUZXh0KHRleHRfKQ0KICAgICAgc3R5bGVzXy5wdXNoKHN0eWxlXykNCiAgICAgIHJldHVybiBzdHlsZXNfOw0KICAgIH0sDQoNCiAgICBnZXRDb2xvckJ5RmVhdHVyZSAoZmVhdHVyZSkgew0KICAgICAgLy8g6aWx5ZKM5bqmDQogICAgICB2YXIgbWF4X3ZvYyA9IGZlYXR1cmUuZ2V0KCJtYXhfdm9jIik7DQogICAgICB2YXIgY29sb3IgPSB0aGlzLnN0eWxlLmxpbmVfc3Ryb2tlOw0KICAgICAgaWYgKG1heF92b2MgPiAwICYmIG1heF92b2MgPD0gMC4yNSkgew0KICAgICAgICBjb2xvciA9ICcjMTg1ODE3JzsNCiAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDAuMjUgJiYgbWF4X3ZvYyA8PSAwLjUpIHsNCiAgICAgICAgY29sb3IgPSAnIzYxYTQzYSc7DQogICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAwLjUgJiYgbWF4X3ZvYyA8PSAwLjc1KSB7DQogICAgICAgIGNvbG9yID0gJyNjZmUwNWQnOw0KICAgICAgfSBlbHNlIGlmIChtYXhfdm9jID4gMC43NSAmJiBtYXhfdm9jIDw9IDEpIHsNCiAgICAgICAgY29sb3IgPSAnI2Q4Yzk2NCc7DQogICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAxICYmIG1heF92b2MgPD0gMS4yNSkgew0KICAgICAgICBjb2xvciA9ICcjZDc5NTUwJzsNCiAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDEuMjUgJiYgbWF4X3ZvYyA8PSAxLjUpIHsNCiAgICAgICAgY29sb3IgPSAnI2M3NWI0MSc7DQogICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAxLjUgJiYgbWF4X3ZvYyA8PSAxLjc1KSB7DQogICAgICAgIGNvbG9yID0gJyNjNzViNDEnOw0KICAgICAgfSBlbHNlIGlmIChtYXhfdm9jID4gMS43NSkgew0KICAgICAgICBjb2xvciA9ICcjMDAwMDAwJzsNCiAgICAgIH0NCiAgICAgIHJldHVybiBjb2xvcjsNCiAgICB9LA0KDQoNCiAgICBnZXRQb2ludHNTdHlsZSAoZmVhdHVyZSkgew0KICAgICAgbGV0IGNvb3JkcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpOw0KICAgICAgbGV0IHRoaXNfID0gdGhpczsNCiAgICAgIGxldCBzdHlsZXMgPSBbXTsNCiAgICAgIC8vIOaWueWQke+8iDHljZXlkJHvvIwtMeWPjeWQkeWNleWQke+8jDDlj4zlkJHvvIkNCiAgICAgIHZhciBkaXIgPSBmZWF0dXJlLmdldCgiZGlyIik7DQogICAgICAvLyDppbHlkozluqYNCiAgICAgIHZhciBtYXhfdm9jID0gZmVhdHVyZS5nZXQoIm1heF92b2MiKTsNCiAgICAgIC8vIOa1gemHjw0KICAgICAgdmFyIHRvdF9mbG93ID0gZmVhdHVyZS5nZXQoInRvdF9mbG93Iik7DQogICAgICAvLyDpopzoibLpu5jorqTlgLwNCiAgICAgIHZhciBjb2xvciA9IHRoaXMuZ2V0Q29sb3JCeUZlYXR1cmUoZmVhdHVyZSk7DQogICAgICAvLyDnspfnu4bpu5jorqTlgLwNCiAgICAgIHZhciB3aWR0aCA9IHRoaXNfLnN0eWxlLmxpbmVfd2lkdGg7DQoNCiAgICAgIHZhciBwZWMgPSAyOw0KICAgICAgaWYgKHRvdF9mbG93ID4gMCAmJiB0b3RfZmxvdyA8PSAxMjUwKSB7DQogICAgICAgIHdpZHRoID0gMSAqIHBlYzsNCiAgICAgIH0gZWxzZSBpZiAodG90X2Zsb3cgPiAxMjUwICYmIHRvdF9mbG93IDw9IDI1MDApIHsNCiAgICAgICAgd2lkdGggPSAyICogcGVjOw0KICAgICAgfSBlbHNlIGlmICh0b3RfZmxvdyA+PSAyNTAwKSB7DQogICAgICAgIHdpZHRoID0gNCAqIHBlYzsNCiAgICAgIH0NCiAgICAgIHN0eWxlcy5wdXNoKA0KICAgICAgICBuZXcgU3R5bGUoew0KICAgICAgICAgIHN0cm9rZTogbmV3IFN0cm9rZSh7DQogICAgICAgICAgICBjb2xvcjogY29sb3IsDQogICAgICAgICAgICB3aWR0aDogd2lkdGgsDQogICAgICAgICAgfSksDQogICAgICAgIH0pDQogICAgICApDQogICAgICAvLyBsZXQgZXh0ZW50XyA9IHRoaXMuZ2V0UG9pbnRFeHRlbnQoKTsNCiAgICAgIC8vIGxldCBsaW5lXyA9IHR1cmYubXVsdGlMaW5lU3RyaW5nKGNvb3Jkcyk7DQogICAgICAvLyBsZXQgbGluZV9jbGlwX2FyciA9IHR1cmYuYmJveENsaXAobGluZV8sIGV4dGVudF8pDQogICAgICAvLyBpZiAobGluZV9jbGlwX2FyciAmJiBsaW5lX2NsaXBfYXJyLmdlb21ldHJ5KSB7DQogICAgICAvLyAgIGlmIChsaW5lX2NsaXBfYXJyLmdlb21ldHJ5LnR5cGUgPT0gIkxpbmVTdHJpbmciKSB7DQogICAgICAvLyAgICAgbGV0IHN0eWxlXyA9IHRoaXNfLmdldFBvaW50c0J5TGluZShsaW5lX2NsaXBfYXJyLmdlb21ldHJ5LmNvb3JkaW5hdGVzLCBkaXIpOw0KICAgICAgLy8gICAgIGlmIChzdHlsZV8gaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgLy8gICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChzdHlsZV8pDQogICAgICAvLyAgICAgfSBlbHNlIHsNCiAgICAgIC8vICAgICAgIHN0eWxlcy5wdXNoKHN0eWxlXykNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0gZWxzZSBpZiAobGluZV9jbGlwX2Fyci5nZW9tZXRyeS50eXBlID09ICJNdWx0aUxpbmVTdHJpbmciKSB7DQogICAgICAvLyAgICAgbGluZV9jbGlwX2Fyci5nZW9tZXRyeS5jb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkcyA9PiB7DQogICAgICAvLyAgICAgICBsZXQgc3R5bGVfID0gdGhpc18uZ2V0UG9pbnRzQnlMaW5lKGNvb3JkcywgZGlyKQ0KICAgICAgLy8gICAgICAgaWYgKHN0eWxlXyBpbnN0YW5jZW9mIEFycmF5KSB7DQogICAgICAvLyAgICAgICAgIHN0eWxlcyA9IHN0eWxlcy5jb25jYXQoc3R5bGVfKQ0KICAgICAgLy8gICAgICAgfSBlbHNlIHsNCiAgICAgIC8vICAgICAgICAgc3R5bGVzLnB1c2goc3R5bGVfKQ0KICAgICAgLy8gICAgICAgfQ0KICAgICAgLy8gICAgIH0pDQogICAgICAvLyAgIH0NCiAgICAgIC8vIH0NCiAgICAgIHJldHVybiBzdHlsZXMNCiAgICB9LA0KDQogICAgaW5pdFZlY3RvckxheWVyICgpIHsNCiAgICAgIGxldCBwbGFuZUluZm8gPSB0aGlzLnJpZ2h0UGxhbmVMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnZhbHVlID09IHRoaXMucmlnaHRQbGFuZSkNCiAgICAgIC8vIOWIneWni+WMluaLv+WIsOWFrOWFseaVsOaNrg0KICAgICAgdmFyICRtYXAgPSB0aGlzLm1hcERhdGE7DQogICAgICAkbWFwLnJlbW92ZUxheWVyKHRoaXMudmVjdG9yTGF5ZXIpOw0KICAgICAgdmFyICR0aGlzID0gdGhpczsNCiAgICAgIC8vIOivt+axguaVsOaNrg0KICAgICAgdmFyIHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy9UZXN0L293cz9zZXJ2aWNlPVdGUyZ2ZXJzaW9uPTEuMC4wJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgZW5jb2RlVVJJKHBsYW5lSW5mby5sYXllck5hbWUpICsgJyZtYXhGZWF0dXJlcz01MDAwMDAwMDAmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uJTJGanNvbic7DQogICAgICBheGlvcy5nZXQodXJsLCBudWxsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsNCiAgICAgICAgdmFyIGZlYXR1cmVzRGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3RvclNvdXJjZSh7DQogICAgICAgICAgZmVhdHVyZXM6IChuZXcgR2VvSlNPTih7IGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3JywgZGF0YVByb2plY3Rpb246ICdFUFNHOjQ1NDgnIH0pKS5yZWFkRmVhdHVyZXMoZmVhdHVyZXNEYXRhKQ0KICAgICAgICB9KTsNCg0KICAgICAgICAkdGhpcy52ZWN0b3JMYXllciA9IG5ldyBWZWN0b3JMYXllcih7DQogICAgICAgICAgc291cmNlOiB2ZWN0b3JTb3VyY2UsDQogICAgICAgICAgbmFtZTogcGxhbmVJbmZvLmxheWVyTmFtZSwNCiAgICAgICAgICBzdHlsZTogKGZlYXR1cmUsIHNvbHV0aW9uKSA9PiB7DQogICAgICAgICAgICBsZXQgc3R5bGVzID0gJHRoaXMuZ2V0UG9pbnRzU3R5bGUoZmVhdHVyZSk7DQogICAgICAgICAgICAvL+agueaNruaWh+Wtl+aOp+WItuaMiemSruaWsOWinuaWh+Wtl+agt+W8jw0KICAgICAgICAgICAgbGV0IGFjdGl2ZUJ0biA9ICR0aGlzLiRwYXJlbnQuJHBhcmVudC4kcGFyZW50LmFjdGl2ZUJ0bjsNCiAgICAgICAgICAgIGlmIChhY3RpdmVCdG4gIT0gJycgJiYgYWN0aXZlQnRuICE9IDMpIHsNCiAgICAgICAgICAgICAgbGV0IGlzRmxvdyA9IGFjdGl2ZUJ0biA9PSAzOw0KICAgICAgICAgICAgICBsZXQgZmxvd1N0eWxlID0gJHRoaXMuaW5pdEZsb3dPclZvY1BvaW50KGZlYXR1cmUsICR0aGlzLCBpc0Zsb3cpDQogICAgICAgICAgICAgIGlmIChmbG93U3R5bGUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlcy5jb25jYXQoZmxvd1N0eWxlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHN0eWxlczsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgICR0aGlzLm1hcERhdGEuYWRkTGF5ZXIoJHRoaXMudmVjdG9yTGF5ZXIpOw0KDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIOWIneWni+WMluWcsOWbvg0KICAgIGluaXRNYXAgKCkgew0KICAgICAgY29uc3QgbWFwQ29udGFpbmVyID0gdGhpcy4kcmVmcy5tYXAyDQogICAgICAvL+WwhuWbvuWxguWKoOWFpU1hcA0KICAgICAgbGV0IG1hcCA9IG5ldyBNYXAoew0KICAgICAgICBsYXllcnM6IFtnYW9kZU1hcExheWVyXSwNCiAgICAgICAgdGFyZ2V0OiBtYXBDb250YWluZXIsDQogICAgICAgIHZpZXc6IHZpZXcyDQogICAgICB9KTsNCiAgICAgIC8vIOa3u+WKoOm8oOagh+eCueWHu+S6i+S7tg0KICAgICAgbWFwLm9uKCdjbGljaycsIHRoaXMubWFwQ2xpY2spOw0KICAgICAgLy8g5ouW5Yqo55uR5ZCsDQogICAgICBtYXAub24oJ3BvaW50ZXJkcmFnJywgdGhpcy5yaWdodFBvaW50ZXJkcmFnKTsNCiAgICAgIC8vIOe8qeaUvuebkeWQrA0KICAgICAgbWFwLm9uKCdtb3ZlZW5kJywgdGhpcy5yaWdodE1vdnZlbmQpOw0KICAgICAgLy8g5L+d5a2Y5Zyw5Zu+DQogICAgICB0aGlzLm1hcERhdGEgPSBtYXANCiAgICAgIC8v5re75Yqg5paH5a2X5qCH5rOoDQogICAgICB0aGlzLmFkZE1hcmtUZXh0TGF5ZXIoKTsNCiAgICB9LA0KDQogICAgZ2V0UmlnaHRQbGFuZSAoKSB7DQogICAgICByZXR1cm4gdGhpcy5yaWdodFBsYW5lOw0KICAgIH0sDQoNCiAgICBsZWZ0UGxhbmVDaGFuZ2UgKCkgew0KICAgICAgdGhpcy5tYXBEYXRhLnJlbW92ZUxheWVyKHRoaXMudmVjdG9yTGF5ZXIpOw0KICAgICAgdGhpcy5pbml0VmVjdG9yTGF5ZXIoKTsNCiAgICAgIHRoaXMubWFwRGF0YS5hZGRMYXllcih0aGlzLnZlY3RvckxheWVyKTsNCiAgICB9LA0KDQogICAgY2hhbmdlUmlndGhQbGFuZSAoKSB7DQogICAgICB0aGlzLnJlbW92ZVBvcHVwKCk7DQogICAgICB0aGlzLm1hcERhdGEucmVtb3ZlTGF5ZXIodGhpcy52ZWN0b3JMYXllcik7DQogICAgICB0aGlzLmluaXRWZWN0b3JMYXllcigpOw0KICAgICAgdGhpcy5tYXBEYXRhLmFkZExheWVyKHRoaXMudmVjdG9yTGF5ZXIpOw0KICAgICAgdGhpcy4kYmFzLiRlbWl0KCJyaWdodFBsYW5lQ2hhbmdlIiwgdGhpcy5yaWdodFBsYW5lKQ0KICAgIH0sDQoNCiAgICByaWdodFBvaW50ZXJkcmFnICgpIHsNCiAgICAgIHRoaXMucmlnaHRDdXJyZW50Q29yZGluYXRlID0gdmlldzIuZ2V0Q2VudGVyKCk7DQogICAgICB0aGlzLnJpZ3RodEN1cnJlbnRab29tID0gdmlldzIuZ2V0Wm9vbSgpDQogICAgICB0aGlzLiRiYXMuJGVtaXQoInJpZ2h0UGFuZWxEcmFnZUNoYW5nZSIsIHRoaXMucmlnaHRDdXJyZW50Q29yZGluYXRlLCB0aGlzLnJpZ3RodEN1cnJlbnRab29tKQ0KICAgIH0sDQoNCg0KICAgIHJpZ2h0TW92dmVuZCAoKSB7DQogICAgICB0aGlzLnJpZ2h0Q3VycmVudENvcmRpbmF0ZSA9IHZpZXcyLmdldENlbnRlcigpOw0KICAgICAgdGhpcy5yaWd0aHRDdXJyZW50Wm9vbSA9IHZpZXcyLmdldFpvb20oKQ0KICAgICAgdGhpcy4kYmFzLiRlbWl0KCJyaWdodE1vdnZlbmRDaGFuZ2UiLCB0aGlzLnJpZ2h0Q3VycmVudENvcmRpbmF0ZSwgdGhpcy5yaWd0aHRDdXJyZW50Wm9vbSkNCiAgICB9LA0KDQogICAgc2hvd0Zsb3dUZXh0ICh0aGlzXywgaXNGbG93KSB7DQogICAgICB0aGlzXy52ZWN0b3JMYXllci5zZXRTdHlsZSgoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgbGV0IHN0eWxlcyA9IFtdOw0KICAgICAgICBsZXQgcG9pbnRBcnJvd1N0eWxlID0gdGhpc18uZ2V0UG9pbnRzU3R5bGUoZmVhdHVyZSk7DQogICAgICAgIGxldCBmbG93U3R5bGUgPSB0aGlzXy5pbml0Rmxvd09yVm9jUG9pbnQoZmVhdHVyZSwgdGhpc18sIGlzRmxvdykNCiAgICAgICAgaWYgKHBvaW50QXJyb3dTdHlsZSAhPSBudWxsICYmIHBvaW50QXJyb3dTdHlsZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChwb2ludEFycm93U3R5bGUpDQogICAgICAgIH0NCiAgICAgICAgaWYgKGZsb3dTdHlsZSAhPSBudWxsICYmIGZsb3dTdHlsZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChmbG93U3R5bGUpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHN0eWxlczsNCiAgICAgIH0pDQoNCiAgICB9LA0KDQogICAgaGlkZUZsb3dUZXh0ICh0aGlzXykgew0KICAgICAgaWYgKHRoaXNfLnZlY3RvckxheWVyKSB7DQogICAgICAgIHRoaXNfLnZlY3RvckxheWVyLnNldFN0eWxlKG51bGwpOw0KICAgICAgICB0aGlzXy52ZWN0b3JMYXllci5zZXRTdHlsZSgoZmVhdHVyZSwgc29sdXRpb24pID0+IHsNCiAgICAgICAgICBsZXQgc3R5bGVzID0gW107DQogICAgICAgICAgbGV0IHBvaW50QXJyb3dTdHlsZSA9IHRoaXNfLmdldFBvaW50c1N0eWxlKGZlYXR1cmUpOw0KICAgICAgICAgIGlmIChwb2ludEFycm93U3R5bGUgIT0gbnVsbCAmJiBwb2ludEFycm93U3R5bGUubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChwb2ludEFycm93U3R5bGUpDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiBzdHlsZXM7DQogICAgICAgIH0pDQogICAgICB9DQoNCiAgICB9LA0KDQoNCg0KICAgIGFzc2VibGVSaWdodFRyYW5zUG9wQ29udGVudCAoZmVhdHVyZSwgY29tcGFpcmVGZWF0dXJlLCBsYXllcikgew0KICAgICAgbGV0IGNvbXBhaXJlUmVzdWx0ID0ge30NCiAgICAgIGlmIChjb21wYWlyZUZlYXR1cmUgIT0gbnVsbCAmJiBjb21wYWlyZUZlYXR1cmUgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGNvbXBhaXJlUmVzdWx0ID0gZmVhdHVyZUNvbXBhaXJlKGZlYXR1cmUucHJvcGVydGllcywgY29tcGFpcmVGZWF0dXJlLnByb3BlcnRpZXMpOw0KICAgICAgfQ0KICAgICAgbGV0IGRvd25VcmwgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbmF2L2Rvd24ucG5nJyk7DQogICAgICBsZXQgdXBVcmwgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbmF2L3VwLnBuZycpOw0KICAgICAgbGV0IGNvbnRlbnQgPSBgPGRpdiBzdHlsZT0nY29sb3I6IzEyMTkyNDtmb250LXdlaWdodDogYm9sZDt3aWR0aDoxMDAlO3otaW5kZXg6NDtoZWlnaHQ6OTVweDtwYWRkaW5nOjZweDtmb250LXNpemU6IDE1cHgnPmAgKyBsYXllciArIGANCiAgICAgICAgPGRpdiBzdHlsZSA9ICdtYXJnaW4tdG9wOjEwcHgnID48YnV0dG9uIGlkPSdidG4zJyBzdHlsZT0nbWFyZ2luLXJpZ2h0OjEwcHg7Ym9yZGVyOiBub25lO2hlaWdodDogMjhweDtsaW5lLWhlaWdodDogMjhweDtib3JkZXItcmFkaXVzOiA0cHg7d2lkdGg6IDgwcHg7YmFja2dyb3VuZDogIzAwNEFCMztjb2xvcjogI2ZmZmZmZjsnIG9uY2xpY2s9InByZXZpZXczKCkiPuWfuuacrOS/oeaBrzwvYnV0dG9uPg0KICAgICAgICAgICAgPGJ1dHRvbiBpZD0nYnRuNCcgc3R5bGU9ImJvcmRlcjogbm9uZTtoZWlnaHQ6IDI4cHg7bGluZS1oZWlnaHQ6IDI4cHg7Ym9yZGVyLXJhZGl1czogNHB4O3dpZHRoOiA4MHB4O2JhY2tncm91bmQ6ICNEM0Q2REI7Y29sb3I6ICNmZmZmZmY7IiBvbmNsaWNrPSJwcmV2aWV3NCgpIj7kuqTpgJrkv6Hmga88L2J1dHRvbj48L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IHN0eWxlPSdmb250LXNpemU6IDEwcHg7d2lkdGg6MTAwJScgaWQ9J2luZm8zJz5gDQogICAgICB0aGlzLnBvcFRyYW5zTGlzdC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICBsZXQgcHJvcFZhbCA9IGZlYXR1cmUucHJvcGVydGllc1tlbGVtZW50LnByb3BlcnRpZV07DQogICAgICAgIGlmIChwcm9wVmFsICE9IG51bGwpIHsNCiAgICAgICAgICBsZXQgbWF4TGVuID0gZWxlbWVudC5tYXhsZW5ndGg7DQogICAgICAgICAgbGV0IHR5cGUgPSBlbGVtZW50LnR5cGU7DQogICAgICAgICAgLy/moLzlvI/ljJYNCiAgICAgICAgICBpZiAobWF4TGVuICE9IG51bGwgJiYgdHlwZSA9PSAnZmxvYXQnKSB7DQogICAgICAgICAgICBwcm9wVmFsID0gZm9ybWF0Rml4TnVtKHByb3BWYWwsIG1heExlbikNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKHR5cGUgPT0gJ2ludCcpIHsNCiAgICAgICAgICAgIHByb3BWYWwgPSBNYXRoLmZsb29yKHByb3BWYWwpDQogICAgICAgICAgfQ0KICAgICAgICAgIC8v5ou85o6l5Y2V5L2NDQogICAgICAgICAgbGV0IHVuaXQgPSBlbGVtZW50LnVuaXQ7DQogICAgICAgICAgaWYgKHVuaXQgIT0gbnVsbCAmJiBwcm9wVmFsICE9IG51bGwpIHsNCiAgICAgICAgICAgIHByb3BWYWwgPSBwcm9wVmFsICsgIiZuYnNwIiArIHVuaXQ7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHByb3BWYWwgPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBjb250ZW50ID0gY29udGVudCArIGA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPSJjb2xvcjojNjQ2NTY2O3dpZHRoOjQwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBlbGVtZW50LmxhYmVsICsgYDo8L2E+DQogICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+YCsgcHJvcFZhbCArIGA8L2E+YA0KICAgICAgICBpZiAoY29tcGFpcmVSZXN1bHRbZWxlbWVudC5wcm9wZXJ0aWVdID09ICc+Jykgew0KICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgYDxpbWcgc3JjID0gYCArIHVwVXJsICsgYCBzdHlsZSA9ICd3aWR0aDoyMHB4O2hlaWdodDoxOHB4JyAvPmANCiAgICAgICAgfSBlbHNlIGlmIChjb21wYWlyZVJlc3VsdFtlbGVtZW50LnByb3BlcnRpZV0gPT0gJzwnKSB7DQogICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBgPGltZyBzcmMgPSBgICsgZG93blVybCArIGAgc3R5bGUgPSAnd2lkdGg6MjBweDtoZWlnaHQ6MThweCcgLz5gDQogICAgICAgIH0NCiAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyBgPC9kaXY+YA0KICAgICAgfSk7DQogICAgICBjb250ZW50ID0gY29udGVudCArICc8L2Rpdj4nOw0KICAgICAgcmV0dXJuIGNvbnRlbnQ7DQogICAgfSwNCg0KDQoNCg0KDQoNCiAgICAvLyDlvLnlh7rmoYYNCiAgICBhZGRSaWdodFBvcHVwIChjb29yZGluYXRlLCBmZWF0dXJlLCBjb21wYWlyZUZlYXR1cmUpIHsNCiAgICAgIGxldCB0aGlzT2JqID0gdGhpczsNCiAgICAgIHRoaXNPYmoucmVtb3ZlUG9wdXAoKQ0KICAgICAgLy8g6I635Y+W5by55Ye65bGCRE9NDQogICAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwMicpDQogICAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cC1jb250ZW50MicpDQogICAgICBpZiAodGhpc09iai5vdmVybGF5KSB7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDliJvlu7pPdmVybGF55by55Ye65bGC57uR5a6aRE9NDQogICAgICAgIHRoaXNPYmoub3ZlcmxheSA9IG5ldyBPdmVybGF5KHsNCiAgICAgICAgICBlbGVtZW50OiBjb250YWluZXINCiAgICAgICAgfSkNCiAgICAgICAgLy8g5re75Yqg5YiwbWFwDQogICAgICAgIHRoaXNPYmoubWFwRGF0YS5hZGRPdmVybGF5KHRoaXMub3ZlcmxheSkNCg0KICAgICAgfQ0KICAgICAgLy8g6YGT6Lev5L+h5oGvDQogICAgICBsZXQgbGF5ZXIgPSBmZWF0dXJlLnByb3BlcnRpZXMubGF5ZXIgPT0gbnVsbCA/ICIiIDogZmVhdHVyZS5wcm9wZXJ0aWVzLmxheWVyOw0KICAgICAgbGV0IGhhbmRsZSA9IGZlYXR1cmUucHJvcGVydGllcy5oYW5kbGUgPT0gbnVsbCA/ICIiIDogZmVhdHVyZS5wcm9wZXJ0aWVzLmhhbmRsZTsNCiAgICAgIGxldCBsZW5ndGggPSBmZWF0dXJlLnByb3BlcnRpZXMubGVuZ3RoID09IG51bGwgPyAiIiA6IE1hdGguZmxvb3IoZmVhdHVyZS5wcm9wZXJ0aWVzLmxlbmd0aCkgKyAiIG0iOw0KICAgICAgbGV0IGNhcGFjaXR5ID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmNhcGFjaXR5ID09IG51bGwgPyAiIiA6IGZlYXR1cmUucHJvcGVydGllcy5jYXBhY2l0eSArICcgcGN1L2gnOw0KICAgICAgLy8g5pa55ZCR77yIMeWNleWQke+8jC0x5Y+N5ZCR5Y2V5ZCR77yMMOWPjOWQke+8iQ0KICAgICAgbGV0IGRpciA9IGZlYXR1cmUucHJvcGVydGllcy5kaXIgPT0gMSA/ICLljZXlkJEiIDogZmVhdHVyZS5wcm9wZXJ0aWVzLmRpciA9PSAtMSA/ICLlj43lkJHljZXlkJEiIDogZmVhdHVyZS5wcm9wZXJ0aWVzLmRpciA9PSAwID8gIuWPjOWQkSIgOiAnJzsNCiAgICAgIC8v5Lqk6YCa5rWB6YePDQogICAgICBsZXQgdHJhbnNQb3BDb250ZW50ID0gdGhpc09iai5hc3NlYmxlUmlnaHRUcmFuc1BvcENvbnRlbnQoZmVhdHVyZSwgY29tcGFpcmVGZWF0dXJlLCBsYXllcik7DQogICAgICB0cmFuc1BvcENvbnRlbnQgPSB0cmFuc1BvcENvbnRlbnQgKyBgPC9kaXY+DQogICAgICAgICAgPC9kaXY+DQogICAgICAgICAgPGRpdiBzdHlsZT0nZm9udC1zaXplOiAxMHB4O3dpZHRoOjEwMCUnIGlkPSdpbmZvNCc+DQogICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij7pgZPot69JRDo8L2E+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+YCsgaGFuZGxlICsgYDwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAyNnB4O3dpZHRoOjEwMCUiPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+562J57qnOjwvYT4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBsYXllciArIGA8L2E+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImhlaWdodDogMjZweDt3aWR0aDoxMDAlIj4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9ImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPumVv+W6pjo8L2E+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+YCsgbGVuZ3RoICsgYDwvYT4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OiAyNnB4O3dpZHRoOjEwMCUiPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0iY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrOyI+6YCa6KGM6IO95YqbOjwvYT4NCiAgICAgICAgICAgICAgPGEgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5gKyBjYXBhY2l0eSArIGA8L2E+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJSI+DQogICAgICAgICAgICAgIDxhIHN0eWxlPSJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij7mlrnlkJE6PC9hPg0KICAgICAgICAgICAgICA8YSBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jazsiPmArIGRpciArIGA8L2E+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICA8L2Rpdj5gOw0KICAgICAgY29udGVudC5pbm5lckhUTUwgPSB0cmFuc1BvcENvbnRlbnQ7DQogICAgICAvLyDorr7nva7lvLnlh7rlsYLkvY3nva7ljbPlj6/lh7rnjrANCiAgICAgIHRoaXNPYmoub3ZlcmxheS5zZXRQb3NpdGlvbihjb29yZGluYXRlKQ0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8zJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cDInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICB9LA0KDQogICAgLy8g5riF6Zmk5by55Ye65qGGDQogICAgcmVtb3ZlUG9wdXAgKCkgew0KICAgICAgaWYgKHRoaXMub3ZlcmxheSkgew0KICAgICAgICAvLyDorr7nva7kvY3nva51bmRlZmluZWTlj6/ovr7liLDpmpDol4/muIXpmaTlvLnlh7rmoYYNCiAgICAgICAgdGhpcy5vdmVybGF5LnNldFBvc2l0aW9uKHVuZGVmaW5lZCkNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlbW92ZUJ0biAoKSB7DQogICAgICBpZiAodGhpcy5vdmVybGF5KSB7DQogICAgICAgIC8vIOiuvue9ruS9jee9rnVuZGVmaW5lZOWPr+i+vuWIsOmakOiXj+a4hemZpOW8ueWHuuahhg0KICAgICAgICB0aGlzLm92ZXJsYXkuc2V0UG9zaXRpb24odW5kZWZpbmVkKQ0KICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snKSB7DQogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJw0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKQ0KICAgICAgICAvL+a4hemZpOWvuemdoumrmOS6rg0KICAgICAgICB0aGlzLiRiYXMuJGVtaXQoJ2NsZWFySGlnaGxpZ2h0X1knLCAnMScpDQogICAgICB9DQogICAgfSwNCg0KICAgIHBhcnNlRmVhdHVyZURldGFpbCAoZmVhdHVyZVJlc3AsIGZlYXR1cmUpIHsNCiAgICAgIGlmICghZmVhdHVyZVJlc3ApIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICB9DQogICAgICB2YXIganNvbk9iaiA9IEpTT04ucGFyc2UoZmVhdHVyZVJlc3ApOw0KICAgICAgdmFyIGZlYXR1cmVzID0ganNvbk9iai5mZWF0dXJlczsNCiAgICAgIGlmIChmZWF0dXJlcyA9PSBudWxsIHx8IGZlYXR1cmVzLmxlbmd0aCA9PSAwKSB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfQ0KICAgICAgbGV0IGNvbXBhaXJlRmVhdHVyZTsNCiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZmVhdHVyZXMubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSBmZWF0dXJlc1trXS5wcm9wZXJ0aWVzOw0KICAgICAgICBpZiAocHJvcGVydGllcy5sYXllciA9PSBmZWF0dXJlLnByb3BlcnRpZXMubGF5ZXINCiAgICAgICAgICAmJiBmZWF0dXJlLnByb3BlcnRpZXMuaGFuZGxlID09IHByb3BlcnRpZXMuaGFuZGxlKSB7DQogICAgICAgICAgY29tcGFpcmVGZWF0dXJlID0gZmVhdHVyZXNba107DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBjb21wYWlyZUZlYXR1cmU7DQoNCiAgICB9LA0KDQoNCiAgICAvL+agueaNrumBk+i3r0lE5p+l6K+i5a+55q+U5pa55qGI6K+m5oOFDQogICAgYXNzZW1ibGVSaWdodENvbXBhaXJlUG9wIChmZWF0dXJlLCB0aGlzT2JqLCBldnQpIHsNCiAgICAgIGxldCBzZWxlY3RlZFBsYW5lVmFsID0gdGhpc09iai5sZWZ0U2VsZWN0ZWRQbGFuZTsNCiAgICAgIGlmIChzZWxlY3RlZFBsYW5lVmFsID09IG51bGwgfHwgc2VsZWN0ZWRQbGFuZVZhbCA9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgc2VsZWN0ZWRQbGFuZVZhbCA9IDE7DQogICAgICB9DQogICAgICBsZXQgaGFuZGxlID0gZmVhdHVyZS5wcm9wZXJ0aWVzLmhhbmRsZQ0KICAgICAgaWYgKGhhbmRsZSA9PSBudWxsKSB7DQogICAgICAgIHRoaXNPYmouYWRkUmlnaHRQb3B1cChldnQuY29vcmRpbmF0ZSwgZmVhdHVyZSwgbnVsbCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGxldCBsZWZ0TGF5ZXJOYW1lOw0KICAgICAgbmV3TGlzdC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PSBzZWxlY3RlZFBsYW5lVmFsKSB7DQogICAgICAgICAgbGVmdExheWVyTmFtZSA9IGl0ZW0ubGF5ZXJOYW1lDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBpZiAoIWxlZnRMYXllck5hbWUpIHsNCiAgICAgICAgdGhpc09iai5hZGRSaWdodFBvcHVwKGV2dC5jb29yZGluYXRlLCBmZWF0dXJlLCBudWxsKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgbGV0IHByb3BlcnR5TmFtZSA9ICdUZXN0OmhhbmRsZSc7DQogICAgICBsZXQgcmVzcFByb3BlcnRpZXMgPSAnbGF5ZXIsaGFuZGxlLGxlbmd0aCxjYXBhY2l0eSxhYl9mbG93LGJhX2Zsb3csdG90X2Zsb3csYWJfdm9jLGJhX3ZvYyxtYXhfdm9jLGdlb20nOw0KICAgICAgbGV0IHVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfR0lTX0JBU0VfVVJMICsgJy93ZnM/cmVxdWVzdD1HZXRGZWF0dXJlJnZlcnNpb249MS4xLjAmdHlwZU5hbWU9Jw0KICAgICAgICArIGxlZnRMYXllck5hbWUgKyAnJnByb3BlcnR5TmFtZT0nICsgcmVzcFByb3BlcnRpZXMgKyAnJm91dHB1dEZvcm1hdD1KU09OJkZJTFRFUj08RmlsdGVyIHhtbG5zPSJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nYyI+PFByb3BlcnR5SXNFcXVhbFRvPjxQcm9wZXJ0eU5hbWU+Jw0KICAgICAgICArIHByb3BlcnR5TmFtZSArICc8L1Byb3BlcnR5TmFtZT48TGl0ZXJhbD4nICsgaGFuZGxlICsgJzwvTGl0ZXJhbD48L1Byb3BlcnR5SXNFcXVhbFRvPjwvRmlsdGVyPicNCiAgICAgIC8v6K+35rGCdXJs5a+55q+U5pa55qGI6YGT6Lev6K+m5oOFDQogICAgICBmZXRjaCh1cmwpDQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChpbmZvKSB7DQogICAgICAgICAgaWYgKGluZm8gIT0gbnVsbCkgew0KICAgICAgICAgICAgbGV0IGNvbXBhaXJlRmVhdHVyZSA9IHRoaXNPYmoucGFyc2VGZWF0dXJlRGV0YWlsKGluZm8sIGZlYXR1cmUpOw0KICAgICAgICAgICAgdGhpc09iai5hZGRSaWdodFBvcHVwKGV2dC5jb29yZGluYXRlLCBmZWF0dXJlLCBjb21wYWlyZUZlYXR1cmUpOw0KICAgICAgICAgICAgLy/lvLnlh7rlt6bovrnlvLnlh7rmoYYNCiAgICAgICAgICAgIHRoaXNPYmouJGVtaXQoJ2FkZExlZnRQb3B1cEJ5UGFyZW50JywgZXZ0LmNvb3JkaW5hdGUsIGNvbXBhaXJlRmVhdHVyZSwgZmVhdHVyZSk7DQoNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpc09iai5hZGRSaWdodFBvcHVwKGV2dC5jb29yZGluYXRlLCBmZWF0dXJlLCBudWxsKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQoNCg0KICAgIH0sDQoNCg0KDQogICAgLy8g6byg5qCH54K55Ye75Zyw5Zu+5LqL5Lu2DQogICAgbWFwQ2xpY2sgKGV2dCkgew0KICAgICAgbGV0IHBpeGVsID0gdGhpcy5tYXBEYXRhLmdldEV2ZW50UGl4ZWwoZXZ0Lm9yaWdpbmFsRXZlbnQpOw0KICAgICAgbGV0IGZlYXR1cmUgPSB0aGlzLm1hcERhdGEuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLA0KICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSwgbGF5ZXIpIHsNCiAgICAgICAgICByZXR1cm4gZmVhdHVyZTsNCiAgICAgICAgfSk7DQogICAgICBpZiAoZmVhdHVyZSkgew0KICAgICAgICAvL+aNleaNieWIsOimgee0oOWQju+8jOW8ueahhg0KICAgICAgICBsZXQgZmVhdHVyZUNvbnZlcnQgPSBjb252ZXJ0RmVhdHVyZShmZWF0dXJlKTsNCiAgICAgICAgdGhpcy5hZGRIaWdoTGlnaHRTdHlsZShmZWF0dXJlLCB0aGlzLCAnJykNCiAgICAgICAgdGhpcy5hc3NlbWJsZVJpZ2h0Q29tcGFpcmVQb3AoZmVhdHVyZUNvbnZlcnQsIHRoaXMsIGV2dCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnJlbW92ZUJ0bigpOw0KICAgICAgfQ0KDQogICAgfSwNCiAgICBhZGRIaWdoTGlnaHRTdHlsZSAoY2xpY2tGZWF0dXJlLCB0aGlzT2JqLCBudW0pIHsNCiAgICAgIGxldCBmZWF0dXJlT2JqID0gW107DQogICAgICBmZWF0dXJlT2JqLnB1c2goY2xpY2tGZWF0dXJlKTsNCiAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHQoKTsNCiAgICAgIGxldCBoaWdoTGlnaHRTdHlsZSA9IG5ldyBTdHlsZSh7DQogICAgICAgIGZpbGw6IG5ldyBGaWxsKHsNCiAgICAgICAgICBjb2xvcjogIiNmZmZmMDAiLA0KICAgICAgICB9KSwNCiAgICAgICAgc3Ryb2tlOiBuZXcgU3Ryb2tlKHsNCiAgICAgICAgICBjb2xvcjogIiNmZmZmMDAiLA0KICAgICAgICAgIHdpZHRoOiA4DQogICAgICAgIH0pLA0KICAgICAgfSkNCiAgICAgIHRoaXNPYmouaGlnaExpZ2h0TGF5ZXIgPSBuZXcgVmVjdG9yTGF5ZXIoew0KICAgICAgICBuYW1lOiAiZGsiLA0KICAgICAgICBzb3VyY2U6IG5ldyBWZWN0b3JTb3VyY2Uoew0KICAgICAgICAgIGZlYXR1cmVzOiBmZWF0dXJlT2JqLA0KICAgICAgICB9KSwNCiAgICAgICAgc3R5bGU6IChmZWF0dXJlLCBzb2x1dGlvbikgPT4gew0KICAgICAgICAgIHJldHVybiBoaWdoTGlnaHRTdHlsZTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXNPYmouaGlnaExpZ2h0TGF5ZXIuc2V0KCJpZCIsICJoaWdobGlnaHRMYXllciIpDQogICAgICB0aGlzLm1hcERhdGEuYWRkTGF5ZXIodGhpc09iai5oaWdoTGlnaHRMYXllcikNCiAgICAgIGlmIChudW0gPT09ICcnKSB7DQogICAgICAgIC8v5Y+z6L656auY5LquDQogICAgICAgIHRoaXMuJGJhcy4kZW1pdCgiYWRkTGVmdEhpZ2hMaWdodFN0eWxlIiwgY2xpY2tGZWF0dXJlLCB0aGlzT2JqLCAnMScpDQogICAgICB9DQogICAgfSwNCiAgICAvL+WIoOmZpOmrmOS6ruWbvuWxgg0KICAgIGNsZWFySGlnaGxpZ2h0ICgpIHsNCiAgICAgIGxldCBhcnIgPSB0aGlzLm1hcERhdGEuZ2V0TGF5ZXJzKCkuYXJyYXlfDQogICAgICBsZXQgaGlnaGxpZ2h0TGF5ZXIgPSB7fQ0KICAgICAgYXJyLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLmdldCgiaWQiKSA9PSAiaGlnaGxpZ2h0TGF5ZXIiKSB7DQogICAgICAgICAgaGlnaGxpZ2h0TGF5ZXIgPSBpdGVtDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBpZiAoaGlnaGxpZ2h0TGF5ZXIgJiYgaGlnaGxpZ2h0TGF5ZXIuY2xhc3NOYW1lXykgew0KICAgICAgICB0aGlzLm1hcERhdGEucmVtb3ZlTGF5ZXIoaGlnaGxpZ2h0TGF5ZXIpDQogICAgICB9DQogICAgfSwNCiAgICBpbml0Q29tcG9uZW50SW5mbyAoKSB7DQogICAgICBsZXQgcGFyYW0gPSB7fTsNCiAgICAgIHRoaXMub3B0aW9ucz1bXQ0KICAgICAgcGFyYW0uYml6S2V5ID0gJ3BsYW5lX2NvbXBhcmUnDQogICAgICBpbml0VHJlZUxpc3QocGFyYW0pLnRoZW4ocmVzPT4gew0KICAgICAgICBsZXQgcmVzcG9uc2VEYXRhID0gcmVzLmRhdGFbMF0uY2hpbGRyZW47DQogICAgICAgIC8v5Yid5aeL5YyW6aG16Z2i6YCJ5oup6buY6K6k56ys5LiA5LiqDQogICAgICAgIHJlc3BvbnNlRGF0YVsxXS5jaGlsZHJlbi5mb3JFYWNoKHM9PnsNCiAgICAgICAgICB0aGlzLnJpZ2h0UGxhbmVMaXN0LnB1c2goew0KICAgICAgICAgICAgbGF5ZXJOYW1lOiBzLmxheWVyTmFtZSwNCiAgICAgICAgICAgIG5hbWU6cy5uYW1lLCANCiAgICAgICAgICAgIHZhbHVlOiBzLmlkLA0KICAgICAgICAgICAgYml6VmFsOiBzLnBhcmVudElkDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLy9uZXdsaXN0IOiOt+WPluWFqOmDqOeahOaVsOaNriDnrZvpgInnlKgNCiAgICAgICAgcmVzcG9uc2VEYXRhLmZvckVhY2goc3M9PnsNCiAgICAgICAgICBzcy5jaGlsZHJlbi5mb3JFYWNoKHI9PnsNCiAgICAgICAgICAgIG5ld0xpc3QucHVzaCh7DQogICAgICAgICAgICBsYXllck5hbWU6IHIubGF5ZXJOYW1lLA0KICAgICAgICAgICAgbmFtZTpyLm5hbWUsIA0KICAgICAgICAgICAgdmFsdWU6IHIuaWQsDQogICAgICAgICAgICBiaXpWYWw6IHIucGFyZW50SWQsDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgIHBhcmVudFZhbD1yZXNwb25zZURhdGFbMF0uaWQNCiAgICAgIHRoaXMubGVmdFNlbGVjdGVkUGxhbmU9dGhpcy5yaWdodFBsYW5lTGlzdFswXS52YWx1ZQ0KICAgICAgdGhpcy5yaWdodFBsYW5lPXRoaXMucmlnaHRQbGFuZUxpc3RbMV0udmFsdWUNCiAgICAgIC8vIOWIneWni+WMluWbvuWxgg0KICAgICAgdGhpcy5pbml0VmVjdG9yTGF5ZXIoKTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgfQ0KDQoNCn0NCg=="},{"version":3,"sources":["tab2-right.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA","file":"tab2-right.vue","sourceRoot":"src/views/traffic-decision/components","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <!--  -->\r\n    <div class=\"select-div\">\r\n      <div class=\"select-title\">右侧方案</div>\r\n      <div>\r\n        <el-select\r\n          v-model=\"rightPlane\"\r\n          placeholder=\"请选择\"\r\n          @change=\"changeRigthPlane\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in rightPlaneList\"\r\n            :key=\"item.key\"\r\n            :label=\"item.name\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n    <div id=\"map2\" ref=\"map2\" style=\"width: 100%; height: 890px\">\r\n      <!--点击查看详情弹框-->\r\n      <div id=\"popup2\" class=\"ol-popup2\">\r\n        <a\r\n          href=\"#\"\r\n          id=\"popup-closer2\"\r\n          class=\"ol-popup-closer2\"\r\n          @click=\"removeBtn\"\r\n        />\r\n        <div id=\"popup-content2\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport 'ol/ol.css'\r\nimport Map from 'ol/Map'\r\nimport * as olControl from 'ol/control'\r\nimport View from 'ol/View'\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\nimport Feature from 'ol/Feature'\r\nimport { Draw } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill, Icon, IconImage, Image, Text } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport request from '@/utils/request'\r\nimport tab2LeftVue from './tab2-left.vue'\r\nimport { formatFixNum, convertFeature } from \"@/api/common/common\";\r\nimport { featureCompaire } from \"@/api/decision/plane\";\r\nimport * as turf from '@turf/turf';\r\nimport Point from 'ol/geom/Point';\r\nimport { fromLonLat, toLonLat, transformExtent, transform } from 'ol/proj'\r\nimport LineString from 'ol/geom/LineString';\r\nimport MultiLineString from 'ol/geom/MultiLineString';\r\nimport { initTreeList } from \"@/api/decision-manage/decision\";\r\n//中心坐标\r\nconst centerCordinate = [656813.44256, 3560432.98245]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\nlet newList = []\r\nlet parentVal=''\r\n//地图初始化\r\nconst view2 = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 10,\r\n  maxZoom: 18,\r\n  zoom: 13.5// 地图初始化的缩放级别\r\n})\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scl=2&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\n\r\n\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      rightPlaneList: [],\r\n      popTransList: [\r\n        { label: 'AB交通量', propertie: 'ab_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: 'BA交通量', propertie: 'ba_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: '总交通量', propertie: 'tot_flow', unit: 'pcu/h', type: 'int' },\r\n        { label: 'AB饱和度', propertie: 'ab_voc', maxlength: 2, type: 'float' },\r\n        { label: 'BA饱和度', propertie: 'ba_voc', maxlength: 2, type: 'float' },\r\n        { label: '最大饱和度', propertie: 'max_voc', maxlength: 2, type: 'float' },\r\n      ],\r\n      rightPlane: '',\r\n      leftSelectedPlane: null,\r\n      vectorLayer: null,\r\n      style: {\r\n        line_width: 3,\r\n        line_stroke: '#459c50',\r\n        interval: 40\r\n      },\r\n      map: null\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initComponentInfo()\r\n    this.initMap();\r\n    // 高亮\r\n    this.$bas.$on(\"addRightHighLightStyle\", (i, j, num) => {\r\n      this.addHighLightStyle(i, j, num)\r\n    })\r\n    //清除高亮\r\n    this.$bas.$on(\"clearHighlight_L\", (i) => {\r\n      this.clearHighlight()\r\n    })\r\n    this.rightPlaneList = this.rightPlaneList.filter((item) => {\r\n      return item.bizVal == parentVal\r\n    })\r\n\r\n    this.$bas.$on(\"leftPlaneChange\", (i) => {\r\n      this.rightPlaneList = JSON.parse(JSON.stringify(newList));\r\n      console.log(this.rightPlaneList);\r\n      this.rightPlaneList = this.rightPlaneList.filter((item) => {\r\n        return item.value != i && item.bizVal == parentVal\r\n      })\r\n      this.rightPlane = this.rightPlaneList[0].value\r\n      this.leftSelectedPlane=i\r\n      this.initVectorLayer()\r\n    })\r\n\r\n    //拖动监听方法\r\n    this.$bas.$on(\"leftPanelDrageChange\", (cordinate, zoom) => {\r\n      if (cordinate && zoom) {\r\n        this.rightCurrentCordinate = cordinate;\r\n        this.rigthtCurrentZoom = zoom;\r\n        view2.animate({\r\n          center: cordinate,\r\n          zoom: zoom, // 缩放级别\r\n          rotation: undefined,\r\n          duration: 10\r\n        })\r\n      }\r\n    })\r\n\r\n    //缩放监听\r\n    this.$bas.$on(\"leftMovvendChange\", (cordinate, zoom) => {\r\n      if (cordinate && zoom) {\r\n        this.rightCurrentCordinate = cordinate;\r\n        this.rigthtCurrentZoom = zoom;\r\n        view2.animate({\r\n          center: cordinate,\r\n          zoom: zoom, // 缩放级别\r\n          rotation: undefined,\r\n          duration: 10\r\n        })\r\n      }\r\n    })\r\n    document.getElementById('popup2').style.display = 'none';\r\n    //交通信息点击按钮\r\n    window.preview3 = function () {\r\n      document.getElementById('info4').style.display = 'block';\r\n      document.getElementById('info3').style.display = 'none';\r\n      document.getElementById('btn3').style.background = '#004AB3';\r\n      document.getElementById('btn4').style.background = '#D3D6DB';\r\n      document.getElementById('info2').style.display = 'block';\r\n      document.getElementById('info1').style.display = 'none';\r\n      document.getElementById('btn1').style.background = '#004AB3';\r\n      document.getElementById('btn2').style.background = '#D3D6DB';\r\n    }\r\n    //基本信息点击按钮\r\n    window.preview4 = function () {\r\n      document.getElementById('info4').style.display = 'none';\r\n      document.getElementById('info3').style.display = 'block';\r\n      document.getElementById('btn4').style.background = '#004AB3';\r\n      document.getElementById('btn3').style.backgroundColor = '#D3D6DB';\r\n      document.getElementById('info2').style.display = 'none';\r\n      document.getElementById('info1').style.display = 'block';\r\n      document.getElementById('btn2').style.background = '#004AB3';\r\n      document.getElementById('btn1').style.backgroundColor = '#D3D6DB';\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    addMarkTextLayer () {\r\n      this.$emit('aquirePointMarkData', this.mapData);\r\n    },\r\n\r\n    changeCompareItemByBizType (parentVal, this_, leftPanel) {\r\n      parentVal=parentVal\r\n      this_.rightPlaneList = JSON.parse(JSON.stringify(newList));\r\n      this_.rightPlaneList = this_.rightPlaneList.filter((item) => {\r\n        return item.bizVal == parentVal && item.value != leftPanel\r\n      })\r\n      this_.rightPlane = this_.rightPlaneList[0].value\r\n      this_.initVectorLayer()\r\n\r\n    },\r\n\r\n    // getPointsByLine (coords, dir) {\r\n    //   let this_ = this;\r\n    //   let styles = [];\r\n    //   let distance_ = this_.style.interval / 2;//首个点放置在距离起点1/2间隔的位置\r\n    //   let pix_start = this_.mapData.getPixelFromCoordinate(coords[0])\r\n    //   let pix_end\r\n    //   for (let i = 1; i < coords.length; i++) {\r\n    //     let coord_, coord_pix;\r\n    //     let style_;\r\n    //     pix_end = this_.mapData.getPixelFromCoordinate(coords[i]);\r\n    //     let dis_start2end = Math.sqrt(Math.pow((pix_start[0] - pix_end[0]), 2) + Math.pow((pix_start[1] - pix_end[1]), 2)) // 计算收尾在屏幕上的距离\r\n    //     if (dis_start2end > distance_) { // 距离大于间隔\r\n    //       // 计算距离开始点位的像素值\r\n    //       coord_pix = [\r\n    //         (distance_ * (pix_end[0] - pix_start[0])) / dis_start2end + pix_start[0],\r\n    //         (distance_ * (pix_end[1] - pix_start[1])) / dis_start2end + pix_start[1]\r\n    //       ];\r\n    //       // 计算经纬度\r\n    //       coord_ = this_.mapData.getCoordinateFromPixel(coord_pix);\r\n    //       var rotation = Math.PI / 2 + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0]);\r\n    //       if (dir == -1) {\r\n    //         rotation = rotation + Math.PI\r\n    //       }\r\n    //       // 生成样式\r\n    //       style_ = new Style({\r\n    //         // 箭头点的位置\r\n    //         geometry: new Point(coord_),\r\n    //         // 箭头点的样式\r\n    //         image: new Icon({\r\n    //           src: require('@/assets/images/juece/up10-10.png'),\r\n    //           rotateWithView: true,\r\n    //           rotation: rotation,\r\n    //           scale: this.style.line_width / 5,\r\n    //           imgSize: [10, 10]\r\n    //         })\r\n    //       })\r\n    //       //下次循环开始点为当前点\r\n    //       pix_start = coord_pix;\r\n    //       distance_ = this_.style.interval;\r\n    //       i--;\r\n    //     } else if (dis_start2end == distance_) {// 距离等于间隔\r\n    //       var rotation = Math.PI / 2 + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0])\r\n    //       if (dir == -1) {\r\n    //         rotation = rotation + Math.PI\r\n    //       }\r\n    //       // 生成样式\r\n    //       style_ = new Style({\r\n    //         // 箭头点的位置\r\n    //         geometry: new Point(coords[i]),\r\n    //         // 箭头点的样式\r\n    //         image: new Icon({\r\n    //           src: require('@/assets/images/juece/up10-10.png'),\r\n    //           rotateWithView: true,\r\n    //           rotation: rotation,\r\n    //           scale: this.style.line_width / 5,\r\n    //           imgSize: [10, 10]\r\n    //         })\r\n    //       })\r\n    //       pix_start = pix_end;\r\n    //       distance_ = this_.style.interval;\r\n    //     } else {//距离小于间隔\r\n    //       distance_ = distance_ - dis_start2end;\r\n    //       pix_start = pix_end;\r\n    //     }\r\n    //     style_ && styles.push(style_)\r\n    //   }\r\n    //   return styles\r\n    // },\r\n\r\n    getPointExtent (n) {\r\n      n = n ? n : 1.2;\r\n      let view = this.mapData.getView();\r\n      let mapsize = this.mapData.getSize().map(it_ => {\r\n        return it_ * n\r\n      });\r\n      return view.calculateExtent(mapsize);\r\n    },\r\n\r\n\r\n    getMiddlePoint (coords, feature) {\r\n      try {\r\n        if (coords == null || coords.length == 0 || coords == undefined) {\r\n          return null;\r\n        }\r\n        if (coords.length <= 3) {\r\n          var point_features = turf.points(feature.getGeometry().getCoordinates()[0]);\r\n          return new Point(turf.center(point_features).geometry.coordinates);\r\n        }\r\n        if (coords.length % 2 == 0) {\r\n          return new Point(coords[coords.length / 2])\r\n        } else {\r\n          return new Point(coords[Math.ceil(coords.length / 2)])\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n\r\n    },\r\n\r\n\r\n    iniFlowOrVocText (coords, feature, this_, text, offsetX, offsety) {\r\n      let centerPoint = this.getMiddlePoint(coords, feature);\r\n      if (!centerPoint) {\r\n        return null;\r\n      }\r\n      let pix_start = this_.mapData.getPixelFromCoordinate(coords[0])\r\n      let pix_end = this_.mapData.getPixelFromCoordinate(centerPoint.flatCoordinates);\r\n      var rotation = Math.PI + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0]);\r\n      if (pix_end[0] > pix_start[0]) {\r\n        rotation = rotation + Math.PI\r\n      }\r\n      text = text + \"\";\r\n      let color = this_.getColorByFeature(feature);\r\n      return this.createTextStyle(centerPoint, rotation, text, offsetX, offsety, color);\r\n    },\r\n\r\n\r\n\r\n    initFlowOrVocPoint (feature, this_, isFlow) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let styles = [];\r\n      let extent_ = this_.getPointExtent();\r\n      let line_ = turf.multiLineString(coords);\r\n      let line_clip_arr = turf.bboxClip(line_, extent_)\r\n      let ab_text = isFlow ? feature.get(\"ab_flow\") : feature.get(\"ab_voc\");\r\n      let ba_text = isFlow ? feature.get(\"ba_flow\") : feature.get(\"ba_voc\");\r\n      if (ab_text != null && ab_text != '') {\r\n        ab_text = isFlow ? Math.floor(ab_text) : formatFixNum(ab_text, 2);\r\n      }\r\n      if (ba_text != null && ba_text != '') {\r\n        ba_text = isFlow ? Math.floor(ba_text) : formatFixNum(ba_text, 2);\r\n      }\r\n\r\n      if (line_clip_arr.geometry.type == \"LineString\") {\r\n        if (ab_text != null && ab_text != '') {\r\n          let offsetX = 15;\r\n          let offsety = 15;\r\n          let style_ab = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ab_text, offsetX, offsety);\r\n          styles = styles.concat(style_ab)\r\n        }\r\n        if (ba_text != null && ba_text != '') {\r\n          let offsetX = -15;\r\n          let offsety = -15;\r\n          let style_ba = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ba_text, offsetX, offsety);\r\n          styles = styles.concat(style_ba)\r\n        }\r\n\r\n      }\r\n      return styles;\r\n    },\r\n\r\n\r\n    createTextStyle (coordinate, roation, text, offsetx, offsety, color) {\r\n      let styles_ = [];\r\n      let text_ = new Text({\r\n        textAlign: 'center',\r\n        textBaseline: 'middle',\r\n        font: 'normal 15px 微软雅黑',\r\n        text: text,\r\n        textBaseline: \"middle\", //文本基线\r\n        offsetY: offsetx,\r\n        offsetX: offsety,\r\n        fill: new Fill({\r\n          color: color\r\n        }),\r\n        rotation: roation,\r\n      })\r\n      let style_ = new Style({\r\n        geometry: coordinate,\r\n      })\r\n      style_.setText(text_)\r\n      styles_.push(style_)\r\n      return styles_;\r\n    },\r\n\r\n    getColorByFeature (feature) {\r\n      // 饱和度\r\n      var max_voc = feature.get(\"max_voc\");\r\n      var color = this.style.line_stroke;\r\n      if (max_voc > 0 && max_voc <= 0.25) {\r\n        color = '#185817';\r\n      } else if (max_voc > 0.25 && max_voc <= 0.5) {\r\n        color = '#61a43a';\r\n      } else if (max_voc > 0.5 && max_voc <= 0.75) {\r\n        color = '#cfe05d';\r\n      } else if (max_voc > 0.75 && max_voc <= 1) {\r\n        color = '#d8c964';\r\n      } else if (max_voc > 1 && max_voc <= 1.25) {\r\n        color = '#d79550';\r\n      } else if (max_voc > 1.25 && max_voc <= 1.5) {\r\n        color = '#c75b41';\r\n      } else if (max_voc > 1.5 && max_voc <= 1.75) {\r\n        color = '#c75b41';\r\n      } else if (max_voc > 1.75) {\r\n        color = '#000000';\r\n      }\r\n      return color;\r\n    },\r\n\r\n\r\n    getPointsStyle (feature) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let this_ = this;\r\n      let styles = [];\r\n      // 方向（1单向，-1反向单向，0双向）\r\n      var dir = feature.get(\"dir\");\r\n      // 饱和度\r\n      var max_voc = feature.get(\"max_voc\");\r\n      // 流量\r\n      var tot_flow = feature.get(\"tot_flow\");\r\n      // 颜色默认值\r\n      var color = this.getColorByFeature(feature);\r\n      // 粗细默认值\r\n      var width = this_.style.line_width;\r\n\r\n      var pec = 2;\r\n      if (tot_flow > 0 && tot_flow <= 1250) {\r\n        width = 1 * pec;\r\n      } else if (tot_flow > 1250 && tot_flow <= 2500) {\r\n        width = 2 * pec;\r\n      } else if (tot_flow >= 2500) {\r\n        width = 4 * pec;\r\n      }\r\n      styles.push(\r\n        new Style({\r\n          stroke: new Stroke({\r\n            color: color,\r\n            width: width,\r\n          }),\r\n        })\r\n      )\r\n      // let extent_ = this.getPointExtent();\r\n      // let line_ = turf.multiLineString(coords);\r\n      // let line_clip_arr = turf.bboxClip(line_, extent_)\r\n      // if (line_clip_arr && line_clip_arr.geometry) {\r\n      //   if (line_clip_arr.geometry.type == \"LineString\") {\r\n      //     let style_ = this_.getPointsByLine(line_clip_arr.geometry.coordinates, dir);\r\n      //     if (style_ instanceof Array) {\r\n      //       styles = styles.concat(style_)\r\n      //     } else {\r\n      //       styles.push(style_)\r\n      //     }\r\n      //   } else if (line_clip_arr.geometry.type == \"MultiLineString\") {\r\n      //     line_clip_arr.geometry.coordinates.forEach(coords => {\r\n      //       let style_ = this_.getPointsByLine(coords, dir)\r\n      //       if (style_ instanceof Array) {\r\n      //         styles = styles.concat(style_)\r\n      //       } else {\r\n      //         styles.push(style_)\r\n      //       }\r\n      //     })\r\n      //   }\r\n      // }\r\n      return styles\r\n    },\r\n\r\n    initVectorLayer () {\r\n      let planeInfo = this.rightPlaneList.find(item => item.value == this.rightPlane)\r\n      // 初始化拿到公共数据\r\n      var $map = this.mapData;\r\n      $map.removeLayer(this.vectorLayer);\r\n      var $this = this;\r\n      // 请求数据\r\n      var url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + encodeURI(planeInfo.layerName) + '&maxFeatures=500000000&outputFormat=application%2Fjson';\r\n      axios.get(url, null).then(function (res) {\r\n        var featuresData = res.data;\r\n        var vectorSource = new VectorSource({\r\n          features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' })).readFeatures(featuresData)\r\n        });\r\n\r\n        $this.vectorLayer = new VectorLayer({\r\n          source: vectorSource,\r\n          name: planeInfo.layerName,\r\n          style: (feature, solution) => {\r\n            let styles = $this.getPointsStyle(feature);\r\n            //根据文字控制按钮新增文字样式\r\n            let activeBtn = $this.$parent.$parent.$parent.activeBtn;\r\n            if (activeBtn != '' && activeBtn != 3) {\r\n              let isFlow = activeBtn == 3;\r\n              let flowStyle = $this.initFlowOrVocPoint(feature, $this, isFlow)\r\n              if (flowStyle != null) {\r\n                styles = styles.concat(flowStyle);\r\n              }\r\n            }\r\n            return styles;\r\n          }\r\n        })\r\n        $this.mapData.addLayer($this.vectorLayer);\r\n\r\n      });\r\n    },\r\n    // 初始化地图\r\n    initMap () {\r\n      const mapContainer = this.$refs.map2\r\n      //将图层加入Map\r\n      let map = new Map({\r\n        layers: [gaodeMapLayer],\r\n        target: mapContainer,\r\n        view: view2\r\n      });\r\n      // 添加鼠标点击事件\r\n      map.on('click', this.mapClick);\r\n      // 拖动监听\r\n      map.on('pointerdrag', this.rightPointerdrag);\r\n      // 缩放监听\r\n      map.on('moveend', this.rightMovvend);\r\n      // 保存地图\r\n      this.mapData = map\r\n      //添加文字标注\r\n      this.addMarkTextLayer();\r\n    },\r\n\r\n    getRightPlane () {\r\n      return this.rightPlane;\r\n    },\r\n\r\n    leftPlaneChange () {\r\n      this.mapData.removeLayer(this.vectorLayer);\r\n      this.initVectorLayer();\r\n      this.mapData.addLayer(this.vectorLayer);\r\n    },\r\n\r\n    changeRigthPlane () {\r\n      this.removePopup();\r\n      this.mapData.removeLayer(this.vectorLayer);\r\n      this.initVectorLayer();\r\n      this.mapData.addLayer(this.vectorLayer);\r\n      this.$bas.$emit(\"rightPlaneChange\", this.rightPlane)\r\n    },\r\n\r\n    rightPointerdrag () {\r\n      this.rightCurrentCordinate = view2.getCenter();\r\n      this.rigthtCurrentZoom = view2.getZoom()\r\n      this.$bas.$emit(\"rightPanelDrageChange\", this.rightCurrentCordinate, this.rigthtCurrentZoom)\r\n    },\r\n\r\n\r\n    rightMovvend () {\r\n      this.rightCurrentCordinate = view2.getCenter();\r\n      this.rigthtCurrentZoom = view2.getZoom()\r\n      this.$bas.$emit(\"rightMovvendChange\", this.rightCurrentCordinate, this.rigthtCurrentZoom)\r\n    },\r\n\r\n    showFlowText (this_, isFlow) {\r\n      this_.vectorLayer.setStyle((feature, solution) => {\r\n        let styles = [];\r\n        let pointArrowStyle = this_.getPointsStyle(feature);\r\n        let flowStyle = this_.initFlowOrVocPoint(feature, this_, isFlow)\r\n        if (pointArrowStyle != null && pointArrowStyle.length > 0) {\r\n          styles = styles.concat(pointArrowStyle)\r\n        }\r\n        if (flowStyle != null && flowStyle.length > 0) {\r\n          styles = styles.concat(flowStyle)\r\n        }\r\n        return styles;\r\n      })\r\n\r\n    },\r\n\r\n    hideFlowText (this_) {\r\n      if (this_.vectorLayer) {\r\n        this_.vectorLayer.setStyle(null);\r\n        this_.vectorLayer.setStyle((feature, solution) => {\r\n          let styles = [];\r\n          let pointArrowStyle = this_.getPointsStyle(feature);\r\n          if (pointArrowStyle != null && pointArrowStyle.length > 0) {\r\n            styles = styles.concat(pointArrowStyle)\r\n          }\r\n          return styles;\r\n        })\r\n      }\r\n\r\n    },\r\n\r\n\r\n\r\n    assebleRightTransPopContent (feature, compaireFeature, layer) {\r\n      let compaireResult = {}\r\n      if (compaireFeature != null && compaireFeature != undefined) {\r\n        compaireResult = featureCompaire(feature.properties, compaireFeature.properties);\r\n      }\r\n      let downUrl = require('@/assets/images/nav/down.png');\r\n      let upUrl = require('@/assets/images/nav/up.png');\r\n      let content = `<div style='color:#121924;font-weight: bold;width:100%;z-index:4;height:95px;padding:6px;font-size: 15px'>` + layer + `\r\n        <div style = 'margin-top:10px' ><button id='btn3' style='margin-right:10px;border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #004AB3;color: #ffffff;' onclick=\"preview3()\">基本信息</button>\r\n            <button id='btn4' style=\"border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #D3D6DB;color: #ffffff;\" onclick=\"preview4()\">交通信息</button></div>\r\n            </div>\r\n        <div style='font-size: 10px;width:100%' id='info3'>`\r\n      this.popTransList.forEach(element => {\r\n        let propVal = feature.properties[element.propertie];\r\n        if (propVal != null) {\r\n          let maxLen = element.maxlength;\r\n          let type = element.type;\r\n          //格式化\r\n          if (maxLen != null && type == 'float') {\r\n            propVal = formatFixNum(propVal, maxLen)\r\n          }\r\n          if (type == 'int') {\r\n            propVal = Math.floor(propVal)\r\n          }\r\n          //拼接单位\r\n          let unit = element.unit;\r\n          if (unit != null && propVal != null) {\r\n            propVal = propVal + \"&nbsp\" + unit;\r\n          }\r\n        } else {\r\n          propVal = '';\r\n        }\r\n        content = content + `<div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:40%;display: inline-block;\">`+ element.label + `:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ propVal + `</a>`\r\n        if (compaireResult[element.propertie] == '>') {\r\n          content = content + `<img src = ` + upUrl + ` style = 'width:20px;height:18px' />`\r\n        } else if (compaireResult[element.propertie] == '<') {\r\n          content = content + `<img src = ` + downUrl + ` style = 'width:20px;height:18px' />`\r\n        }\r\n        content = content + `</div>`\r\n      });\r\n      content = content + '</div>';\r\n      return content;\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // 弹出框\r\n    addRightPopup (coordinate, feature, compaireFeature) {\r\n      let thisObj = this;\r\n      thisObj.removePopup()\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup2')\r\n      let content = document.getElementById('popup-content2')\r\n      if (thisObj.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        thisObj.overlay = new Overlay({\r\n          element: container\r\n        })\r\n        // 添加到map\r\n        thisObj.mapData.addOverlay(this.overlay)\r\n\r\n      }\r\n      // 道路信息\r\n      let layer = feature.properties.layer == null ? \"\" : feature.properties.layer;\r\n      let handle = feature.properties.handle == null ? \"\" : feature.properties.handle;\r\n      let length = feature.properties.length == null ? \"\" : Math.floor(feature.properties.length) + \" m\";\r\n      let capacity = feature.properties.capacity == null ? \"\" : feature.properties.capacity + ' pcu/h';\r\n      // 方向（1单向，-1反向单向，0双向）\r\n      let dir = feature.properties.dir == 1 ? \"单向\" : feature.properties.dir == -1 ? \"反向单向\" : feature.properties.dir == 0 ? \"双向\" : '';\r\n      //交通流量\r\n      let transPopContent = thisObj.assebleRightTransPopContent(feature, compaireFeature, layer);\r\n      transPopContent = transPopContent + `</div>\r\n          </div>\r\n          <div style='font-size: 10px;width:100%' id='info4'>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">道路ID:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ handle + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">等级:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ layer + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">长度:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ length + `</a>\r\n            </div>\r\n            <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">通行能力:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ capacity + `</a>\r\n            </div>\r\n             <div style=\"height: 26px;width:100%\">\r\n              <a style=\"color:#646566;width:45%;display: inline-block;\">方向:</a>\r\n              <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ dir + `</a>\r\n            </div>\r\n          </div>`;\r\n      content.innerHTML = transPopContent;\r\n      // 设置弹出层位置即可出现\r\n      thisObj.overlay.setPosition(coordinate)\r\n      document.getElementById('info3').style.display = 'none';\r\n      document.getElementById('popup2').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n      }\r\n    },\r\n    removeBtn () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n        if (document.getElementById('popup').style.display == 'block') {\r\n          document.getElementById('popup').style.display = 'none'\r\n        }\r\n        this.clearHighlight()\r\n        //清除对面高亮\r\n        this.$bas.$emit('clearHighlight_Y', '1')\r\n      }\r\n    },\r\n\r\n    parseFeatureDetail (featureResp, feature) {\r\n      if (!featureResp) {\r\n        return null;\r\n      }\r\n      var jsonObj = JSON.parse(featureResp);\r\n      var features = jsonObj.features;\r\n      if (features == null || features.length == 0) {\r\n        return null;\r\n      }\r\n      let compaireFeature;\r\n      for (let k = 0; k < features.length; k++) {\r\n        let properties = features[k].properties;\r\n        if (properties.layer == feature.properties.layer\r\n          && feature.properties.handle == properties.handle) {\r\n          compaireFeature = features[k];\r\n          break;\r\n        }\r\n      }\r\n      return compaireFeature;\r\n\r\n    },\r\n\r\n\r\n    //根据道路ID查询对比方案详情\r\n    assembleRightCompairePop (feature, thisObj, evt) {\r\n      let selectedPlaneVal = thisObj.leftSelectedPlane;\r\n      if (selectedPlaneVal == null || selectedPlaneVal == undefined) {\r\n        selectedPlaneVal = 1;\r\n      }\r\n      let handle = feature.properties.handle\r\n      if (handle == null) {\r\n        thisObj.addRightPopup(evt.coordinate, feature, null);\r\n        return;\r\n      }\r\n      let leftLayerName;\r\n      newList.forEach(item => {\r\n        if (item.value == selectedPlaneVal) {\r\n          leftLayerName = item.layerName\r\n        }\r\n      })\r\n      if (!leftLayerName) {\r\n        thisObj.addRightPopup(evt.coordinate, feature, null);\r\n        return;\r\n      }\r\n      let propertyName = 'Test:handle';\r\n      let respProperties = 'layer,handle,length,capacity,ab_flow,ba_flow,tot_flow,ab_voc,ba_voc,max_voc,geom';\r\n      let url = process.env.VUE_APP_GIS_BASE_URL + '/wfs?request=GetFeature&version=1.1.0&typeName='\r\n        + leftLayerName + '&propertyName=' + respProperties + '&outputFormat=JSON&FILTER=<Filter xmlns=\"http://www.opengis.net/ogc\"><PropertyIsEqualTo><PropertyName>'\r\n        + propertyName + '</PropertyName><Literal>' + handle + '</Literal></PropertyIsEqualTo></Filter>'\r\n      //请求url对比方案道路详情\r\n      fetch(url)\r\n        .then(function (response) {\r\n          return response.text();\r\n        })\r\n        .then(function (info) {\r\n          if (info != null) {\r\n            let compaireFeature = thisObj.parseFeatureDetail(info, feature);\r\n            thisObj.addRightPopup(evt.coordinate, feature, compaireFeature);\r\n            //弹出左边弹出框\r\n            thisObj.$emit('addLeftPopupByParent', evt.coordinate, compaireFeature, feature);\r\n\r\n          } else {\r\n            thisObj.addRightPopup(evt.coordinate, feature, null);\r\n          }\r\n        })\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    // 鼠标点击地图事件\r\n    mapClick (evt) {\r\n      let pixel = this.mapData.getEventPixel(evt.originalEvent);\r\n      let feature = this.mapData.forEachFeatureAtPixel(pixel,\r\n        function (feature, layer) {\r\n          return feature;\r\n        });\r\n      if (feature) {\r\n        //捕捉到要素后，弹框\r\n        let featureConvert = convertFeature(feature);\r\n        this.addHighLightStyle(feature, this, '')\r\n        this.assembleRightCompairePop(featureConvert, this, evt);\r\n      } else {\r\n        this.removeBtn();\r\n      }\r\n\r\n    },\r\n    addHighLightStyle (clickFeature, thisObj, num) {\r\n      let featureObj = [];\r\n      featureObj.push(clickFeature);\r\n      this.clearHighlight();\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\",\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n          width: 8\r\n        }),\r\n      })\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        name: \"dk\",\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          return highLightStyle;\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\")\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n      if (num === '') {\r\n        //右边高亮\r\n        this.$bas.$emit(\"addLeftHighLightStyle\", clickFeature, thisObj, '1')\r\n      }\r\n    },\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let highlightLayer = {}\r\n      arr.forEach(item => {\r\n        if (item.get(\"id\") == \"highlightLayer\") {\r\n          highlightLayer = item\r\n        }\r\n      })\r\n      if (highlightLayer && highlightLayer.className_) {\r\n        this.mapData.removeLayer(highlightLayer)\r\n      }\r\n    },\r\n    initComponentInfo () {\r\n      let param = {};\r\n      this.options=[]\r\n      param.bizKey = 'plane_compare'\r\n      initTreeList(param).then(res=> {\r\n        let responseData = res.data[0].children;\r\n        //初始化页面选择默认第一个\r\n        responseData[1].children.forEach(s=>{\r\n          this.rightPlaneList.push({\r\n            layerName: s.layerName,\r\n            name:s.name, \r\n            value: s.id,\r\n            bizVal: s.parentId\r\n          })\r\n        })\r\n        //newlist 获取全部的数据 筛选用\r\n        responseData.forEach(ss=>{\r\n          ss.children.forEach(r=>{\r\n            newList.push({\r\n            layerName: r.layerName,\r\n            name:r.name, \r\n            value: r.id,\r\n            bizVal: r.parentId,\r\n          })\r\n        })\r\n        })\r\n      parentVal=responseData[0].id\r\n      this.leftSelectedPlane=this.rightPlaneList[0].value\r\n      this.rightPlane=this.rightPlaneList[1].value\r\n      // 初始化图层\r\n      this.initVectorLayer();\r\n      });\r\n    },\r\n\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '~@/assets/styles/popup.scss';\r\n@import '~@/assets/styles/traffic.scss';\r\n.content {\r\n  position: relative;\r\n}\r\n.select-div {\r\n  left: 28px;\r\n  top: 70px;\r\n  padding: 10px 16px 0 16px;\r\n}\r\n</style>\r\n"]}]}