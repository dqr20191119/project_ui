{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\scollDiv.vue?vue&type=style&index=0&id=4964797c&lang=scss&scoped=true&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\scollDiv.vue","mtime":1663479653289},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1663230084856},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1663230088519},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1663230086089},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1663230084018},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmxlZnQtcmlnaHQtc3dpcGVyLXNjcm9sbC1ib3ggew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIHdpZHRoOiAxMDAlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zczsNCiAgLnNjcm9sbC1pY29uIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgdG9wOiAwOw0KICAgIHdpZHRoOiAwLjQzNzVyZW07DQogICAgaGVpZ2h0OiAwLjQzNzVyZW07DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIHotaW5kZXg6IDk7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYigxMDIsIDE2NiwgMjU1KTsNCiAgICBiYWNrZ3JvdW5kOiByZ2IoMTAyLCAxNjYsIDI1NSwwLjIpOw0KICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICBpIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHRvcDogMDsNCiAgICAgIHdpZHRoOiAwLjMxMjVyZW07DQogICAgICBoZWlnaHQ6IDAuMzEyNXJlbTsNCiAgICB9DQogICAgJi5sZWZ0LWljb24gew0KICAgICAgaSB7DQogICAgICAgIGxlZnQ6IDAuMDM3NXJlbTsNCiAgICAgICAgdG9wOiAwLjAzNzVyZW07DQogICAgICAgIGJhY2tncm91bmQ6ICB1cmwoIn5AL2Fzc2V0cy9pbWFnZXMvbGVmdF8uc3ZnIikgMCAwIG5vLXJlcGVhdDsNCiAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJTsNCiAgICAgIH0NCiAgICB9DQogICAgJi5yaWdodC1pY29uIHsNCiAgICAgICAgcmlnaHQ6MDsNCiAgICAgICANCiAgICAgIGkgew0KICAgICAgICByaWdodDogMC4wMzc1cmVtOw0KICAgICAgICB0b3A6IDAuMDM3NXJlbTsNCiAgICAgICAgYmFja2dyb3VuZDogdXJsKCJ+QC9hc3NldHMvaW1hZ2VzL3JpZ2h0Xy5zdmciKSAwIDAgbm8tcmVwZWF0Ow0KICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAxMDAlOw0KICAgICAgfQ0KICAgIH0NCiAgfSAgIA0KICAuc3dpcGVyLXNjcm9sbC1jb250ZW50IHsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsNCiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["scollDiv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scollDiv.vue","sourceRoot":"src/views/traffic-decision/components","sourcesContent":["<template>\r\n<!-- 文本超出，左右按钮滚动 -->\r\n<div ref=\"swiperScroll\" class=\"left-right-swiper-scroll-box\">\r\n  <!-- 左边按钮 -->\r\n  <div v-show=\"showLeftIcon\" @click=\"handleLeftClick\" class=\"scroll-icon left-icon\">\r\n    <i ></i>\r\n  </div>\r\n  <!-- 中间滚动区域 -->\r\n  <div ref=\"swiperScrollContent\" class=\"swiper-scroll-content\">\r\n    <slot></slot>\r\n  </div>\r\n  <!-- 右边按钮 -->\r\n  <div v-show=\"showRightIcon\" @click=\"handleRightClick\" class=\"scroll-icon right-icon\">\r\n    <i ></i>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'leftRightSwiperScroll',\r\n  props: {\r\n    swiperList: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showRightIcon: false, // 是否显示右箭头\r\n      swiperScrollWidth: 0, // 盒子的宽度\r\n      swiperScrollContentWidth: 0, // 内容的宽度\r\n      maxClickNum: 0, // 最大点击次数\r\n      lastLeft: 0, // 上次滑动距离\r\n      clickNum: 0, // 点击次数\r\n      childrenList: [] // 传进来的子元素\r\n    }\r\n  },\r\n  computed: {\r\n    showLeftIcon() {\r\n      return this.clickNum > 0\r\n    }\r\n  },\r\n  mounted() {\r\n    // 获取 HTMLCollection 转为 数组\r\n    this.childrenList = [...this.$refs.swiperScrollContent.children];\r\n    // 盒子的宽度\r\n    this.swiperScrollWidth = this.$refs.swiperScroll.getBoundingClientRect().width;\r\n    // 内容的宽度\r\n    this.swiperScrollContentWidth = this.$refs.swiperScrollContent.getBoundingClientRect().width;\r\n    // 比较盒子的宽度,跟内容的宽度：判断是否需要展示右边的按钮\r\n    console.log(this.swiperScrollWidth+ '+' +this.swiperScrollContentWidth)\r\n    if(this.swiperScrollWidth < this.swiperScrollContentWidth) {\r\n      this.showRightIcon = true;\r\n       debugger\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击右箭头（左侧滚动）\r\n    handleRightClick() {\r\n      // 如果点击次数小于数组长度-1时，执行左滑动效果。\r\n      if (this.clickNum < this.childrenList.length - 1) {\r\n        // 获取当前元素宽度\r\n        let width = this.childrenList[this.clickNum].getBoundingClientRect().width;\r\n        console.log(this.childrenList[this.clickNum], this.childrenList[this.clickNum].getBoundingClientRect());\r\n        // 获取最后一个元素距离左侧的距离\r\n        let lastItemOffsetLeft = this.childrenList[this.childrenList.length - 1].offsetLeft;\r\n        // 获取最后一个元素宽度\r\n        let lastWidth = this.childrenList[this.childrenList.length - 1].getBoundingClientRect().width;\r\n        console.log('lastItemOffsetLeft-->', lastItemOffsetLeft, this.childrenList[this.childrenList.length - 1].getBoundingClientRect());\r\n        // 获取可视区域宽度\r\n        const lookWidth = this.$refs.swiperScroll.clientWidth;\r\n        console.log('获取可视区域宽度-->lookWidth', lookWidth);\r\n        // 如果最后一个元素距离左侧的距离+自身的宽度大于可视距离，表示最后一个元素没有出现，执行滚动效果\r\n        if (lastItemOffsetLeft + lastWidth > lookWidth) {\r\n          // 滚动距离（元素的magin-left值） = 负的它自己的长度 + 上一次滑动的距离\r\n          this.$refs.swiperScrollContent.style.marginLeft = `${-width + this.lastLeft}px`;\r\n          this.lastLeft = -width + this.lastLeft;\r\n          // 点击次数+1\r\n          this.clickNum++;\r\n          // 记录到最后一个元素出现在可视区域时，点击次数的最大值。用于后面点击左侧箭头时判断右侧箭头的显示\r\n          this.maxClickNum = this.clickNum;\r\n        }\r\n        // 如果最后一个元素距离左侧的距离小于于可视距离，需要隐藏右侧箭头\r\n        let timer = setTimeout(() => {\r\n          // 重新：获取最后一个元素距离左侧的距离\r\n          let lastItemOffsetLeft2 = this.childrenList[this.childrenList.length - 1].offsetLeft;\r\n          console.log('lastItemOffsetLeft2-新的->', lastItemOffsetLeft2);\r\n          if(lastItemOffsetLeft2 + lastWidth <= lookWidth) {\r\n            this.showRightIcon = false;\r\n          }\r\n          clearTimeout(timer);\r\n        }, 200);\r\n      }\r\n    },\r\n    // 点击左箭头（右侧滚动）\r\n    handleLeftClick() {\r\n      // 当点击次数大于0时才触发，这样当点击次数clickNum等于1的到时候，clickNum--等于0.根据计算属性的判断会隐藏掉左箭头\r\n      if (this.clickNum > 0) {\r\n        // 获取当前元素宽度\r\n        let width = this.childrenList[this.clickNum - 1].getBoundingClientRect().width;\r\n        // 公示：滚动距离（元素的magin-left值） = 它自己的长度 + 上一次滑动的距离\r\n        this.$refs.swiperScrollContent.style.marginLeft = `${this.lastLeft + width}px`\r\n        this.lastLeft = width + this.lastLeft;\r\n        // 点击次数-1\r\n        this.clickNum--;\r\n        // 如果点击次数小于最大点击次数，说明最后一个元素已经不在可是区域内了，显示右箭头\r\n        if (this.clickNum < this.maxClickNum) {\r\n          this.showRightIcon = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.left-right-swiper-scroll-box {\r\n  position: relative;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  transition: all 0.3s;\r\n  .scroll-icon {\r\n    position: absolute;\r\n    top: 0;\r\n    width: 0.4375rem;\r\n    height: 0.4375rem;\r\n    text-align: center;\r\n    z-index: 9;\r\n    cursor: pointer;\r\n    border: 1px solid rgb(102, 166, 255);\r\n    background: rgb(102, 166, 255,0.2);\r\n    border-radius: 50%;\r\n    i {\r\n      position: absolute;\r\n      top: 0;\r\n      width: 0.3125rem;\r\n      height: 0.3125rem;\r\n    }\r\n    &.left-icon {\r\n      i {\r\n        left: 0.0375rem;\r\n        top: 0.0375rem;\r\n        background:  url(\"~@/assets/images/left_.svg\") 0 0 no-repeat;\r\n         background-size: 100%;\r\n      }\r\n    }\r\n    &.right-icon {\r\n        right:0;\r\n       \r\n      i {\r\n        right: 0.0375rem;\r\n        top: 0.0375rem;\r\n        background: url(\"~@/assets/images/right_.svg\") 0 0 no-repeat;\r\n         background-size: 100%;\r\n      }\r\n    }\r\n  }   \r\n  .swiper-scroll-content {\r\n    transition: all 0.3s;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n</style>\r\n"]}]}