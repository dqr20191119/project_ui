{"remainingRequest":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab3.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\proj\\project_manage\\project-ui\\src\\views\\traffic-decision\\components\\tab3.vue","mtime":1663479653291},{"path":"D:\\work\\proj\\project_manage\\project-ui\\babel.config.js","mtime":1663229169808},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1663230086097},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663230084016},{"path":"D:\\work\\proj\\project_manage\\project-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1663230087832}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiRDovd29yay9wcm9qL3Byb2plY3RfbWFuYWdlL3Byb2plY3QtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyIpLmRlZmF1bHQ7Cgp2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoIkQ6L3dvcmsvcHJvai9wcm9qZWN0X21hbmFnZS9wcm9qZWN0LXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi93b3JrL3Byb2ovcHJvamVjdF9tYW5hZ2UvcHJvamVjdC11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eS5qcyIpKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKCnZhciBfbmF2X2JhciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi4vLi4vY29tcG9uZW50cy9uYXZfYmFyLnZ1ZSIpKTsKCnZhciBfcGllX2NoYXJ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3BpZV9jaGFydC52dWUiKSk7Cgp2YXIgX2Jhcl9jaGFydF9oID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2Jhcl9jaGFydF9oLnZ1ZSIpKTsKCnZhciBfYmFyX2NoYXJ0X3YgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vYmFyX2NoYXJ0X3YudnVlIikpOwoKcmVxdWlyZSgib2wvb2wuY3NzIik7Cgp2YXIgX01hcCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgib2wvTWFwIikpOwoKdmFyIG9sQ29udHJvbCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIm9sL2NvbnRyb2wiKSk7Cgp2YXIgX1ZpZXcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm9sL1ZpZXciKSk7Cgp2YXIgX2V4dGVudCA9IHJlcXVpcmUoIm9sL2V4dGVudCIpOwoKdmFyIF9UaWxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJvbC9sYXllci9UaWxlIikpOwoKdmFyIF9XTVRTID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJvbC9zb3VyY2UvV01UUyIpKTsKCnZhciBfWFlaID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJvbC9zb3VyY2UvWFlaIikpOwoKdmFyIF9XTVRTMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgib2wvdGlsZWdyaWQvV01UUyIpKTsKCnZhciBfUHJvamVjdGlvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgib2wvcHJvai9Qcm9qZWN0aW9uIikpOwoKdmFyIF9wcm9qID0gcmVxdWlyZSgib2wvcHJvaiIpOwoKdmFyIF9wcm9qMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgicHJvajQiKSk7Cgp2YXIgX3Byb2ozID0gcmVxdWlyZSgib2wvcHJvai9wcm9qNCIpOwoKdmFyIF9WZWN0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm9sL3NvdXJjZS9WZWN0b3IiKSk7Cgp2YXIgX3NvdXJjZSA9IHJlcXVpcmUoIm9sL3NvdXJjZSIpOwoKdmFyIF9WZWN0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJvbC9sYXllci9WZWN0b3IiKSk7Cgp2YXIgX0ZlYXR1cmUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm9sL0ZlYXR1cmUiKSk7Cgp2YXIgX2ludGVyYWN0aW9uID0gcmVxdWlyZSgib2wvaW50ZXJhY3Rpb24iKTsKCnZhciBfc3R5bGUyID0gcmVxdWlyZSgib2wvc3JjL3N0eWxlIik7Cgp2YXIgX1dLVCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgib2wvZm9ybWF0L1dLVCIpKTsKCnZhciBfR2VvSlNPTiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgib2wvZm9ybWF0L0dlb0pTT04iKSk7Cgp2YXIgX092ZXJsYXkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIm9sL092ZXJsYXkiKSk7Cgp2YXIgZWNoYXJ0cyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoImVjaGFydHMiKSk7Cgp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKCnZhciBfcmVxdWVzdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9yZXF1ZXN0IikpOwoKdmFyIF9jb21tb24gPSByZXF1aXJlKCJAL2FwaS9jb21tb24vY29tbW9uIik7Cgp2YXIgdHVyZiA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoIkB0dXJmL3R1cmYiKSk7Cgp2YXIgX1BvaW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJvbC9nZW9tL1BvaW50IikpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy/kuK3lv4PlnZDmoIcKdmFyIGNlbnRlckNvcmRpbmF0ZSA9IFs2NTY4MTMuNDQyNTYsIDM1NjA0MzIuOTgyNDVdOyAvL+WdkOagh+WumuS5iQoKX3Byb2oyLmRlZmF1bHQuZGVmcygiRVBTRzo0NTQ4IiwgIitwcm9qPXRtZXJjICtsYXRfMD0wICtsb25fMD0xMTcgK2s9MSAreF8wPTUwMDAwMCAreV8wPTAgK2VsbHBzPUdSUzgwICt1bml0cz1tICtub19kZWZzIik7CgooMCwgX3Byb2ozLnJlZ2lzdGVyKShfcHJvajIuZGVmYXVsdCk7CnZhciBsYXllck5hbWUgPSAnVGVzdDpwbGFuZTFfdjInOyAvL+WcsOWbvuWIneWni+WMlgoKdmFyIHZpZXcgPSBuZXcgX1ZpZXcuZGVmYXVsdCh7CiAgY2VudGVyOiAoMCwgX3Byb2oudHJhbnNmb3JtKShjZW50ZXJDb3JkaW5hdGUsICdFUFNHOjQ1NDgnLCAnRVBTRzozODU3JyksCiAgbWluWm9vbTogNCwKICBtYXhab29tOiAxOCwKICB6b29tOiAxNCAvLyDlnLDlm77liJ3lp4vljJbnmoTnvKnmlL7nuqfliKsKCn0pOyAvL+mrmOW+t+WcsOWbvuWbvuWxggoKdmFyIGdhb2RlTWFwTGF5ZXIgPSBuZXcgX1RpbGUuZGVmYXVsdCh7CiAgc291cmNlOiBuZXcgX1hZWi5kZWZhdWx0KHsKICAgIHVybDogJ2h0dHA6Ly93ZWJzdDB7MS00fS5pcy5hdXRvbmF2aS5jb20vYXBwbWFwdGlsZT9sYW5nPXpoX2NuJnNpemU9MSZzY2w9MiZzdHlsZT03Jng9e3h9Jnk9e3l9Jno9e3p9JwogIH0pCn0pOwp2YXIgX2RlZmF1bHQgPSB7CiAgY29tcG9uZW50czogewogICAgbmF2X2JhcjogX25hdl9iYXIuZGVmYXVsdCwKICAgIHBpZV9jaGFydFZ1ZTogX3BpZV9jaGFydC5kZWZhdWx0LAogICAgQmFyX2NoYXJ0X3Y6IF9iYXJfY2hhcnRfdi5kZWZhdWx0LAogICAgYmFyX2NoYXJ0X2g6IF9iYXJfY2hhcnRfaC5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmF2TGlzdDogWyfkuqTpgJrlhrPnrZYnLCAn5LyY5YyW5bu66K6uJ10sCiAgICAgIHNob3cxOiBmYWxzZSwKICAgICAgc2hvdzI6IHRydWUsCiAgICAgIHZlY3RvckxheWVyOiBudWxsLAogICAgICBvcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAnMScsCiAgICAgICAgbGFiZWw6ICfpm4bnlo/ov5DmlrnmoYgnCiAgICAgIH1dLAogICAgICB2YWx1ZTogJzEnLAogICAgICB2YWx1ZTE6IGZhbHNlLAogICAgICAvL+WbvuS+izEKICAgICAgc3R5bGU6IHsKICAgICAgICBsaW5lX3dpZHRoOiAzLAogICAgICAgIGxpbmVfc3Ryb2tlOiAnIzQ1OWM1MCcsCiAgICAgICAgaW50ZXJ2YWw6IDQwCiAgICAgIH0sCiAgICAgIGxlZ2VuZDFMaXN0OiBbewogICAgICAgIHRleHQ6ICcwLjAwLTAuMjUnLAogICAgICAgIGNvbG9yOiAnI0IxREIxNicKICAgICAgfSwgewogICAgICAgIHRleHQ6ICcwLjI1LTAuNTAnLAogICAgICAgIGNvbG9yOiAnI0VCQ0MwQycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICcwLjUwLTAuNzUnLAogICAgICAgIGNvbG9yOiAnI0VCNzMyMycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICcwLjc1LTEuMDAnLAogICAgICAgIGNvbG9yOiAnIzY2QTZGRicKICAgICAgfSwgewogICAgICAgIHRleHQ6ICcxLjAwLTEuMjUnLAogICAgICAgIGNvbG9yOiAnIzE5NzlGRicKICAgICAgfSwgewogICAgICAgIHRleHQ6ICc+PTEuMjUnLAogICAgICAgIGNvbG9yOiAnIzBDRTdGNScKICAgICAgfV0sCiAgICAgIC8v5Zu+5L6LMgogICAgICBsZWdlbmQyTGlzdDogW3sKICAgICAgICB0ZXh0OiAnMC02MDAnLAogICAgICAgIGNvbG9yOiAnIzdFNTlFQicsCiAgICAgICAgaGVpZ2h0OiAnMnB4JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJzYwMC0xNTAwJywKICAgICAgICBjb2xvcjogJyM3RTU5RUInLAogICAgICAgIGhlaWdodDogJzRweCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICcxNTAwLTMwMDAnLAogICAgICAgIGNvbG9yOiAnIzdFNTlFQicsCiAgICAgICAgaGVpZ2h0OiAnNnB4JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJzMwMDAtNTAwMCcsCiAgICAgICAgY29sb3I6ICcjN0U1OUVCJywKICAgICAgICBoZWlnaHQ6ICc4cHgnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnNTAwMOS7peS4iicsCiAgICAgICAgY29sb3I6ICcjN0U1OUVCJywKICAgICAgICBoZWlnaHQ6ICcxMHB4JwogICAgICB9XSwKICAgICAgLy/ppbzlm77mlbDmja4KICAgICAgcGllRGF0YTogewogICAgICAgIG5hbWU6ICfkuqTpgJrph4/lr7nmr5QnLAogICAgICAgIGRhdGE6IFt7CiAgICAgICAgICB2YWx1ZTogMTA0OCwKICAgICAgICAgIG5hbWU6ICflu7rorr7liY0nCiAgICAgICAgfSwgewogICAgICAgICAgdmFsdWU6IDczNSwKICAgICAgICAgIG5hbWU6ICflu7rorr7lkI4nCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgLy/mn7Hnirblm74g5qiq5ZCRCiAgICAgIGJhckRhdGE6IHsKICAgICAgICBuYW1lOiAn6L2m6L6G5bmz5Z2H6KGM6am26YCf5bqmJywKICAgICAgICBsZW5nZWQ6IFsn5bu66K6+5YmNJywgJ+W7uuiuvuWQjiddLAogICAgICAgIGRhdGE6IFsnNTAwJywgJzk5J10KICAgICAgfSwKICAgICAgLy/mn7Hnirblm74g56uW5ZCRCiAgICAgIGJhckRhdGEyOiB7CiAgICAgICAgbmFtZTogJ+i9pui+huW5s+Wdh+W7tuivr+aXtumXtCcsCiAgICAgICAgbGVuZ2VkOiBbJ+W7uuiuvuWJjScsICflu7rorr7lkI4nXSwKICAgICAgICBkYXRhOiBbJzIwMCcsICcxMjknXQogICAgICB9LAogICAgICAvL+ihqOagvCDmlbDmja4KICAgICAgdGFibGVEYXRhOiBbewogICAgICAgIHByb2plY3Q6ICfpm4bnlo/ov5DmlrnmoYgnLAogICAgICAgIHByb2dyYW1tZTogJ+aWueahiDInCiAgICAgIH0sIHsKICAgICAgICBwcm9qZWN0OiAnLi4uLi4uJywKICAgICAgICBwcm9ncmFtbWU6ICcuLi4uLi4nCiAgICAgIH0sIHsKICAgICAgICBwcm9qZWN0OiAnLi4uLi4uJywKICAgICAgICBwcm9ncmFtbWU6ICcuLi4uLi4nCiAgICAgIH1dLAogICAgICBjb250ZW50OiAn6YeH55So55u45bqU5pa55qGI57uE5ZCI5ZCO5pS26LS556uZ5bmz5Z2H5o6S6Zif5pe26Ze05YeP5bCRNSXot6/nvZHmlbTkvZPpgJrooYzmlYjnjofmj5DljYcxMCUuLi4uLi4nLAogICAgICBhY3RpdmVCdG46ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdFZlY3RvckxheWVyKHRoaXMpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy/kuqTpgJrkv6Hmga/ngrnlh7vmjInpkq4KCiAgICB3aW5kb3cucHJldmlldzEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvMicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mbzEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuMScpLnN0eWxlLmJhY2tncm91bmQgPSAnIzAwNEFCMyc7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4yJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjRDNENkRCJzsKICAgIH07IC8v5Z+65pys5L+h5oGv54K55Ye75oyJ6ZKuCgoKICAgIHdpbmRvdy5wcmV2aWV3MiA9IGZ1bmN0aW9uICgpIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8yJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8xJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4yJykuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA0QUIzJzsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bjEnKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0QzRDZEQic7CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlTWFwOiBmdW5jdGlvbiBjaGFuZ2VNYXAobnVtKSB7CiAgICAgIHRoaXMuYWN0aXZlQnRuID0gbnVtOwogICAgICB2YXIgdGhpc18gPSB0aGlzOwogICAgICB0aGlzLnZlY3RvckxheWVyLnNldFN0eWxlKGZ1bmN0aW9uIChmZWF0dXJlLCByZXMpIHsKICAgICAgICByZXR1cm4gdGhpc18uc2V0Q3VycmVudFN0eWxlKGZlYXR1cmUpOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93Q2xpY2s6IGZ1bmN0aW9uIHNob3dDbGljaygpIHsKICAgICAgdGhpcy5zaG93MSA9IHRydWU7CiAgICAgIHRoaXMuc2hvdzIgPSBmYWxzZTsKICAgIH0sCiAgICBoaWRlQ2xpY2s6IGZ1bmN0aW9uIGhpZGVDbGljaygpIHsKICAgICAgdGhpcy5zaG93MiA9IHRydWU7CiAgICAgIHRoaXMuc2hvdzEgPSBmYWxzZTsKICAgIH0sCiAgICBnZXRQb2ludEV4dGVudDogZnVuY3Rpb24gZ2V0UG9pbnRFeHRlbnQobikgewogICAgICBuID0gbiA/IG4gOiAxLjI7CiAgICAgIHZhciB2aWV3ID0gdGhpcy5tYXBEYXRhLmdldFZpZXcoKTsKICAgICAgdmFyIG1hcHNpemUgPSB0aGlzLm1hcERhdGEuZ2V0U2l6ZSgpLm1hcChmdW5jdGlvbiAoaXRfKSB7CiAgICAgICAgcmV0dXJuIGl0XyAqIG47CiAgICAgIH0pOwogICAgICByZXR1cm4gdmlldy5jYWxjdWxhdGVFeHRlbnQobWFwc2l6ZSk7CiAgICB9LAogICAgZ2V0TWlkZGxlUG9pbnQ6IGZ1bmN0aW9uIGdldE1pZGRsZVBvaW50KGNvb3JkcywgZmVhdHVyZSkgewogICAgICB0cnkgewogICAgICAgIGlmIChjb29yZHMgPT0gbnVsbCB8fCBjb29yZHMubGVuZ3RoID09IDAgfHwgY29vcmRzID09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA8PSAzKSB7CiAgICAgICAgICB2YXIgcG9pbnRfZmVhdHVyZXMgPSB0dXJmLnBvaW50cyhmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKVswXSk7CiAgICAgICAgICByZXR1cm4gbmV3IF9Qb2ludC5kZWZhdWx0KHR1cmYuY2VudGVyKHBvaW50X2ZlYXR1cmVzKS5nZW9tZXRyeS5jb29yZGluYXRlcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCAlIDIgPT0gMCkgewogICAgICAgICAgcmV0dXJuIG5ldyBfUG9pbnQuZGVmYXVsdChjb29yZHNbY29vcmRzLmxlbmd0aCAvIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIG5ldyBfUG9pbnQuZGVmYXVsdChjb29yZHNbTWF0aC5jZWlsKGNvb3Jkcy5sZW5ndGggLyAyKV0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfSwKICAgIGluaUZsb3dPclZvY1RleHQ6IGZ1bmN0aW9uIGluaUZsb3dPclZvY1RleHQoY29vcmRzLCBmZWF0dXJlLCB0aGlzXywgdGV4dCwgb2Zmc2V0WCwgb2Zmc2V0eSkgewogICAgICB2YXIgY2VudGVyUG9pbnQgPSB0aGlzLmdldE1pZGRsZVBvaW50KGNvb3JkcywgZmVhdHVyZSk7CgogICAgICBpZiAoIWNlbnRlclBvaW50KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBwaXhfc3RhcnQgPSB0aGlzXy5tYXBEYXRhLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY29vcmRzWzBdKTsKICAgICAgdmFyIHBpeF9lbmQgPSB0aGlzXy5tYXBEYXRhLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY2VudGVyUG9pbnQuZmxhdENvb3JkaW5hdGVzKTsKICAgICAgdmFyIHJvdGF0aW9uID0gTWF0aC5QSSArIE1hdGguYXRhbjIocGl4X2VuZFsxXSAtIHBpeF9zdGFydFsxXSwgcGl4X2VuZFswXSAtIHBpeF9zdGFydFswXSk7CgogICAgICBpZiAocGl4X2VuZFswXSA+IHBpeF9zdGFydFswXSkgewogICAgICAgIHJvdGF0aW9uID0gcm90YXRpb24gKyBNYXRoLlBJOwogICAgICB9CgogICAgICB0ZXh0ID0gdGV4dCArICIiOwogICAgICB2YXIgY29sb3IgPSB0aGlzXy5nZXRDb2xvcihmZWF0dXJlKTsKICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVGV4dFN0eWxlKGNlbnRlclBvaW50LCByb3RhdGlvbiwgdGV4dCwgb2Zmc2V0WCwgb2Zmc2V0eSwgY29sb3IpOwogICAgfSwKICAgIGluaXRGbG93T3JWb2NQb2ludDogZnVuY3Rpb24gaW5pdEZsb3dPclZvY1BvaW50KGZlYXR1cmUsIHRoaXNfLCBpc0Zsb3cpIHsKICAgICAgdmFyIGNvb3JkcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpOwogICAgICB2YXIgc3R5bGVzID0gW107CiAgICAgIHZhciBleHRlbnRfID0gdGhpc18uZ2V0UG9pbnRFeHRlbnQoKTsKICAgICAgdmFyIGxpbmVfID0gdHVyZi5tdWx0aUxpbmVTdHJpbmcoY29vcmRzKTsKICAgICAgdmFyIGxpbmVfY2xpcF9hcnIgPSB0dXJmLmJib3hDbGlwKGxpbmVfLCBleHRlbnRfKTsKICAgICAgdmFyIGFiX3RleHQgPSBpc0Zsb3cgPyBmZWF0dXJlLmdldCgiYWJfZmxvdyIpIDogZmVhdHVyZS5nZXQoImFiX3ZvYyIpOwogICAgICB2YXIgYmFfdGV4dCA9IGlzRmxvdyA/IGZlYXR1cmUuZ2V0KCJiYV9mbG93IikgOiBmZWF0dXJlLmdldCgiYmFfdm9jIik7CgogICAgICBpZiAoYWJfdGV4dCAhPSBudWxsICYmIGFiX3RleHQgIT0gJycpIHsKICAgICAgICBhYl90ZXh0ID0gaXNGbG93ID8gTWF0aC5mbG9vcihhYl90ZXh0KSA6ICgwLCBfY29tbW9uLmZvcm1hdEZpeE51bSkoYWJfdGV4dCwgMik7CiAgICAgIH0KCiAgICAgIGlmIChiYV90ZXh0ICE9IG51bGwgJiYgYmFfdGV4dCAhPSAnJykgewogICAgICAgIGJhX3RleHQgPSBpc0Zsb3cgPyBNYXRoLmZsb29yKGJhX3RleHQpIDogKDAsIF9jb21tb24uZm9ybWF0Rml4TnVtKShiYV90ZXh0LCAyKTsKICAgICAgfQoKICAgICAgaWYgKGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkudHlwZSA9PSAiTGluZVN0cmluZyIpIHsKICAgICAgICBpZiAoYWJfdGV4dCAhPSBudWxsICYmIGFiX3RleHQgIT0gJycpIHsKICAgICAgICAgIHZhciBvZmZzZXRYID0gMTU7CiAgICAgICAgICB2YXIgb2Zmc2V0eSA9IDE1OwogICAgICAgICAgdmFyIHN0eWxlX2FiID0gdGhpc18uaW5pRmxvd09yVm9jVGV4dChsaW5lX2NsaXBfYXJyLmdlb21ldHJ5LmNvb3JkaW5hdGVzLCBmZWF0dXJlLCB0aGlzXywgYWJfdGV4dCwgb2Zmc2V0WCwgb2Zmc2V0eSk7CiAgICAgICAgICBzdHlsZXMgPSBzdHlsZXMuY29uY2F0KHN0eWxlX2FiKTsKICAgICAgICB9CgogICAgICAgIGlmIChiYV90ZXh0ICE9IG51bGwgJiYgYmFfdGV4dCAhPSAnJykgewogICAgICAgICAgdmFyIF9vZmZzZXRYID0gLTE1OwoKICAgICAgICAgIHZhciBfb2Zmc2V0eSA9IC0xNTsKCiAgICAgICAgICB2YXIgc3R5bGVfYmEgPSB0aGlzXy5pbmlGbG93T3JWb2NUZXh0KGxpbmVfY2xpcF9hcnIuZ2VvbWV0cnkuY29vcmRpbmF0ZXMsIGZlYXR1cmUsIHRoaXNfLCBiYV90ZXh0LCBfb2Zmc2V0WCwgX29mZnNldHkpOwogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChzdHlsZV9iYSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gc3R5bGVzOwogICAgfSwKICAgIGNyZWF0ZVRleHRTdHlsZTogZnVuY3Rpb24gY3JlYXRlVGV4dFN0eWxlKGNvb3JkaW5hdGUsIHJvYXRpb24sIHRleHQsIG9mZnNldHgsIG9mZnNldHksIGNvbG9yKSB7CiAgICAgIHZhciBfVGV4dDsKCiAgICAgIHZhciBzdHlsZXNfID0gW107CiAgICAgIHZhciB0ZXh0XyA9IG5ldyBfc3R5bGUyLlRleHQoKF9UZXh0ID0gewogICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJywKICAgICAgICBmb250OiAnbm9ybWFsIDE1cHgg5b6u6L2v6ZuF6buRJywKICAgICAgICB0ZXh0OiB0ZXh0CiAgICAgIH0sICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9UZXh0LCAidGV4dEJhc2VsaW5lIiwgIm1pZGRsZSIpLCAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KShfVGV4dCwgIm9mZnNldFkiLCBvZmZzZXR4KSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkoX1RleHQsICJvZmZzZXRYIiwgb2Zmc2V0eSksICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9UZXh0LCAiZmlsbCIsIG5ldyBfc3R5bGUyLkZpbGwoewogICAgICAgIGNvbG9yOiBjb2xvcgogICAgICB9KSksICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKF9UZXh0LCAicm90YXRpb24iLCByb2F0aW9uKSwgX1RleHQpKTsKICAgICAgdmFyIHN0eWxlXyA9IG5ldyBfc3R5bGUyLlN0eWxlKHsKICAgICAgICBnZW9tZXRyeTogY29vcmRpbmF0ZQogICAgICB9KTsKICAgICAgc3R5bGVfLnNldFRleHQodGV4dF8pOwogICAgICBzdHlsZXNfLnB1c2goc3R5bGVfKTsKICAgICAgcmV0dXJuIHN0eWxlc187CiAgICB9LAogICAgZ2V0Q29sb3I6IGZ1bmN0aW9uIGdldENvbG9yKGZlYXR1cmUpIHsKICAgICAgdmFyIG1heF92b2MgPSBmZWF0dXJlLmdldCgibWF4X3ZvYyIpOwogICAgICB2YXIgY29sb3IgPSB0aGlzLnN0eWxlLmxpbmVfc3Ryb2tlOwogICAgICB2YXIgc3dpdGNoQ29sb3IgPSB0aGlzLnZhbHVlMTsKCiAgICAgIGlmICghc3dpdGNoQ29sb3IpIHsKICAgICAgICBpZiAobWF4X3ZvYyA+IDAgJiYgbWF4X3ZvYyA8PSAwLjI1KSB7CiAgICAgICAgICBjb2xvciA9ICcjYjFkYjE2JzsKICAgICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAwLjI1ICYmIG1heF92b2MgPD0gMC41KSB7CiAgICAgICAgICBjb2xvciA9ICcjZWJjYzBjJzsKICAgICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAwLjUgJiYgbWF4X3ZvYyA8PSAwLjc1KSB7CiAgICAgICAgICBjb2xvciA9ICcjZWI3MzIzJzsKICAgICAgICB9IGVsc2UgaWYgKG1heF92b2MgPiAwLjc1ICYmIG1heF92b2MgPD0gMSkgewogICAgICAgICAgY29sb3IgPSAnIzY2YTZmZic7CiAgICAgICAgfSBlbHNlIGlmIChtYXhfdm9jID4gMSAmJiBtYXhfdm9jIDw9IDEuMjUpIHsKICAgICAgICAgIGNvbG9yID0gJyMxOTc5ZmYnOwogICAgICAgIH0gZWxzZSBpZiAobWF4X3ZvYyA+IDEuMjUpIHsKICAgICAgICAgIGNvbG9yID0gJyMwY2U3ZjUnOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb2xvciA9ICcjN0U1OUVCJzsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbG9yOwogICAgfSwKICAgIGluaXRWb2NTdHlsZTogZnVuY3Rpb24gaW5pdFZvY1N0eWxlKGZlYXR1cmUpIHsKICAgICAgdmFyIGNvb3JkcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpOwogICAgICB2YXIgdGhpc18gPSB0aGlzOwogICAgICB2YXIgc3R5bGVzID0gW107IC8vIOaWueWQke+8iDHljZXlkJHvvIwtMeWPjeWQkeWNleWQke+8jDDlj4zlkJHvvIkKCiAgICAgIHZhciBkaXIgPSBmZWF0dXJlLmdldCgiZGlyIik7IC8vIOmlseWSjOW6pgoKICAgICAgdmFyIG1heF92b2MgPSBmZWF0dXJlLmdldCgibWF4X3ZvYyIpOyAvLyDmtYHph48KCiAgICAgIHZhciB0b3RfZmxvdyA9IGZlYXR1cmUuZ2V0KCJ0b3RfZmxvdyIpOyAvLyDpopzoibLpu5jorqTlgLwKCiAgICAgIHZhciBjb2xvciA9IHRoaXNfLmdldENvbG9yKGZlYXR1cmUpOwogICAgICB2YXIgd2lkdGggPSB0aGlzXy5zdHlsZS5saW5lX3dpZHRoOwogICAgICBzdHlsZXMucHVzaChuZXcgX3N0eWxlMi5TdHlsZSh7CiAgICAgICAgc3Ryb2tlOiBuZXcgX3N0eWxlMi5TdHJva2UoewogICAgICAgICAgY29sb3I6IGNvbG9yLAogICAgICAgICAgd2lkdGg6IHdpZHRoCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICByZXR1cm4gc3R5bGVzOwogICAgfSwKICAgIC8v5Yid5aeL5YyW6Lev572R5rWB6YeP5qC35byPCiAgICBpbml0Rmxvd1N0eWxlOiBmdW5jdGlvbiBpbml0Rmxvd1N0eWxlKGZlYXR1cmUpIHsKICAgICAgdmFyIGNvb3JkcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpOwogICAgICB2YXIgdGhpc18gPSB0aGlzOwogICAgICB2YXIgc3R5bGVzID0gW107CiAgICAgIHZhciB0b3RfZmxvdyA9IGZlYXR1cmUuZ2V0KCJ0b3RfZmxvdyIpOwogICAgICB2YXIgcGVjID0gMTsKICAgICAgdmFyIHdpZHRoID0gdGhpc18uc3R5bGUubGluZV93aWR0aDsKCiAgICAgIGlmICh0b3RfZmxvdyA+IDAgJiYgdG90X2Zsb3cgPD0gNjAwKSB7CiAgICAgICAgd2lkdGggPSAyICogcGVjOwogICAgICB9IGVsc2UgaWYgKHRvdF9mbG93ID4gNjAwICYmIHRvdF9mbG93IDw9IDE1MDApIHsKICAgICAgICB3aWR0aCA9IDQgKiBwZWM7CiAgICAgIH0gZWxzZSBpZiAodG90X2Zsb3cgPiAxNTAwICYmIHRvdF9mbG93IDw9IDMwMDApIHsKICAgICAgICB3aWR0aCA9IDYgKiBwZWM7CiAgICAgIH0gZWxzZSBpZiAodG90X2Zsb3cgPiAzMDAwICYmIHRvdF9mbG93IDw9IDUwMDApIHsKICAgICAgICB3aWR0aCA9IDggKiBwZWM7CiAgICAgIH0gZWxzZSBpZiAodG90X2Zsb3cgPiA1MDAwKSB7CiAgICAgICAgd2lkdGggPSAxMCAqIHBlYzsKICAgICAgfQoKICAgICAgdmFyIGNvbG9yID0gdGhpc18uZ2V0Q29sb3IoZmVhdHVyZSk7CiAgICAgIHN0eWxlcy5wdXNoKG5ldyBfc3R5bGUyLlN0eWxlKHsKICAgICAgICBzdHJva2U6IG5ldyBfc3R5bGUyLlN0cm9rZSh7CiAgICAgICAgICBjb2xvcjogY29sb3IsCiAgICAgICAgICB3aWR0aDogd2lkdGgKICAgICAgICB9KQogICAgICB9KSk7CiAgICAgIHJldHVybiBzdHlsZXM7CiAgICB9LAogICAgc3dpdGNoQ2hhbmdlOiBmdW5jdGlvbiBzd2l0Y2hDaGFuZ2UoKSB7CiAgICAgIHZhciB0aGlzXyA9IHRoaXM7CiAgICAgIHRoaXMudmVjdG9yTGF5ZXIuc2V0U3R5bGUoZnVuY3Rpb24gKGZlYXR1cmUsIHJlcykgewogICAgICAgIHJldHVybiB0aGlzXy5zZXRDdXJyZW50U3R5bGUoZmVhdHVyZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldEN1cnJlbnRTdHlsZTogZnVuY3Rpb24gc2V0Q3VycmVudFN0eWxlKGZlYXR1cmUpIHsKICAgICAgdmFyIHRoaXNfID0gdGhpczsgLy/lvIDlhbPmjqfliLbmoLflvI8KCiAgICAgIHZhciBjaGFuZ2VWYWwgPSB0aGlzLnZhbHVlMTsKICAgICAgdmFyIHN0eWxlcyA9IFtdOwoKICAgICAgaWYgKCFjaGFuZ2VWYWwpIHsKICAgICAgICBzdHlsZXMgPSBzdHlsZXMuY29uY2F0KHRoaXNfLmluaXRWb2NTdHlsZShmZWF0dXJlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdCh0aGlzXy5pbml0Rmxvd1N0eWxlKGZlYXR1cmUpKTsKICAgICAgfSAvL+makOiXj+aWh+WtlyDmmL7npLrmloflrZfmoLflvI8KCgogICAgICB2YXIgYWN0aXZlQnRuID0gdGhpcy5hY3RpdmVCdG47CgogICAgICBpZiAoYWN0aXZlQnRuID09IDEpIHsKICAgICAgICB2YXIgc3R5bGUgPSB0aGlzXy5pbml0Rmxvd09yVm9jUG9pbnQoZmVhdHVyZSwgdGhpc18sIGZhbHNlKTsKCiAgICAgICAgaWYgKHN0eWxlKSB7CiAgICAgICAgICBzdHlsZXMgPSBzdHlsZXMuY29uY2F0KHN0eWxlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQnRuID09IDIpIHsKICAgICAgICB2YXIgX3N0eWxlID0gdGhpc18uaW5pdEZsb3dPclZvY1BvaW50KGZlYXR1cmUsIHRoaXNfLCB0cnVlKTsKCiAgICAgICAgaWYgKF9zdHlsZSkgewogICAgICAgICAgc3R5bGVzID0gc3R5bGVzLmNvbmNhdChfc3R5bGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHN0eWxlczsKICAgIH0sCiAgICBhZGRIaWdoTGlnaHRTdHlsZTogZnVuY3Rpb24gYWRkSGlnaExpZ2h0U3R5bGUoY2xpY2tGZWF0dXJlLCB0aGlzT2JqKSB7CiAgICAgIHZhciBmZWF0dXJlT2JqID0gW107CiAgICAgIGZlYXR1cmVPYmoucHVzaChjbGlja0ZlYXR1cmUpOwogICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0KCk7CiAgICAgIHZhciBoaWdoTGlnaHRTdHlsZSA9IG5ldyBfc3R5bGUyLlN0eWxlKHsKICAgICAgICBmaWxsOiBuZXcgX3N0eWxlMi5GaWxsKHsKICAgICAgICAgIGNvbG9yOiAiI2ZmZmYwMCIKICAgICAgICB9KSwKICAgICAgICBzdHJva2U6IG5ldyBfc3R5bGUyLlN0cm9rZSh7CiAgICAgICAgICBjb2xvcjogIiNmZmZmMDAiLAogICAgICAgICAgd2lkdGg6IDgKICAgICAgICB9KQogICAgICB9KTsKICAgICAgdGhpc09iai5oaWdoTGlnaHRMYXllciA9IG5ldyBfVmVjdG9yMi5kZWZhdWx0KHsKICAgICAgICBuYW1lOiAiZGsiLAogICAgICAgIHNvdXJjZTogbmV3IF9WZWN0b3IuZGVmYXVsdCh7CiAgICAgICAgICBmZWF0dXJlczogZmVhdHVyZU9iagogICAgICAgIH0pLAogICAgICAgIHN0eWxlOiBmdW5jdGlvbiBzdHlsZShmZWF0dXJlLCBzb2x1dGlvbikgewogICAgICAgICAgcmV0dXJuIGhpZ2hMaWdodFN0eWxlOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXNPYmouaGlnaExpZ2h0TGF5ZXIuc2V0KCJpZCIsICJoaWdobGlnaHRMYXllciIpOwogICAgICB0aGlzLm1hcERhdGEuYWRkTGF5ZXIodGhpc09iai5oaWdoTGlnaHRMYXllcik7CiAgICB9LAogICAgLy/liKDpmaTpq5jkuq7lm77lsYIKICAgIGNsZWFySGlnaGxpZ2h0OiBmdW5jdGlvbiBjbGVhckhpZ2hsaWdodCgpIHsKICAgICAgdmFyIGFyciA9IHRoaXMubWFwRGF0YS5nZXRMYXllcnMoKS5hcnJheV87CiAgICAgIHZhciBoaWdobGlnaHRMYXllciA9IHt9OwogICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLmdldCgiaWQiKSA9PSAiaGlnaGxpZ2h0TGF5ZXIiKSB7CiAgICAgICAgICBoaWdobGlnaHRMYXllciA9IGl0ZW07CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChoaWdobGlnaHRMYXllciAmJiBoaWdobGlnaHRMYXllci5jbGFzc05hbWVfKSB7CiAgICAgICAgdGhpcy5tYXBEYXRhLnJlbW92ZUxheWVyKGhpZ2hsaWdodExheWVyKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIneWni+WMluWcsOWbvgogICAgYWRkTGF5ZXJUb01hcDogZnVuY3Rpb24gYWRkTGF5ZXJUb01hcCgpIHsKICAgICAgdmFyIG1hcENvbnRhaW5lciA9IHRoaXMuJHJlZnMubWFwOyAvL+WwhuWbvuWxguWKoOWFpU1hcAoKICAgICAgdmFyIG1hcCA9IG5ldyBfTWFwLmRlZmF1bHQoewogICAgICAgIGxheWVyczogW2dhb2RlTWFwTGF5ZXIsIHRoaXMudmVjdG9yTGF5ZXJdLAogICAgICAgIHRhcmdldDogbWFwQ29udGFpbmVyLAogICAgICAgIHZpZXc6IHZpZXcKICAgICAgfSk7IC8vIOa3u+WKoOm8oOagh+eCueWHu+S6i+S7tgoKICAgICAgbWFwLm9uKCdjbGljaycsIHRoaXMubWFwQ2xpY2spOyAvLyDkv53lrZjlnLDlm74KCiAgICAgIHRoaXMubWFwRGF0YSA9IG1hcDsKICAgIH0sCiAgICBpbml0VmVjdG9yTGF5ZXI6IGZ1bmN0aW9uIGluaXRWZWN0b3JMYXllcihfdGhpcykgewogICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9HSVNfQkFTRV9VUkwgKyAnL1Rlc3Qvb3dzP3NlcnZpY2U9V0ZTJnZlcnNpb249MS4wLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBlbmNvZGVVUkkobGF5ZXJOYW1lKSArICcmbWF4RmVhdHVyZXM9NTAwMDAwMDAwJm91dHB1dEZvcm1hdD1hcHBsaWNhdGlvbiUyRmpzb24nOwoKICAgICAgX2F4aW9zLmRlZmF1bHQuZ2V0KHVybCwgbnVsbCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGZlYXR1cmVzRGF0YSA9IHJlcy5kYXRhOwogICAgICAgIHZhciB2ZWN0b3JTb3VyY2UgPSBuZXcgX1ZlY3Rvci5kZWZhdWx0KHsKICAgICAgICAgIGZlYXR1cmVzOiBuZXcgX0dlb0pTT04uZGVmYXVsdCh7CiAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiAnRVBTRzozODU3JywKICAgICAgICAgICAgZGF0YVByb2plY3Rpb246ICdFUFNHOjQ1NDgnCiAgICAgICAgICB9KS5yZWFkRmVhdHVyZXMoZmVhdHVyZXNEYXRhKQogICAgICAgIH0pOwogICAgICAgIF90aGlzLnZlY3RvckxheWVyID0gbmV3IF9WZWN0b3IyLmRlZmF1bHQoewogICAgICAgICAgc291cmNlOiB2ZWN0b3JTb3VyY2UsCiAgICAgICAgICBzdHlsZTogZnVuY3Rpb24gc3R5bGUoZmVhdHVyZSwgc29sdXRpb24pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmluaXRWb2NTdHlsZShmZWF0dXJlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMuYWRkTGF5ZXJUb01hcCgpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlvLnlh7rmoYYKICAgIGFkZFBvcHVwOiBmdW5jdGlvbiBhZGRQb3B1cChjb29yZGluYXRlLCBmZWF0dXJlKSB7CiAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKTsgLy8g6I635Y+W5by55Ye65bGCRE9NCgogICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwJyk7CiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcHVwLWNvbnRlbnQnKTsKCiAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHt9IGVsc2UgewogICAgICAgIC8vIOWIm+W7uk92ZXJsYXnlvLnlh7rlsYLnu5HlrppET00KICAgICAgICB0aGlzLm92ZXJsYXkgPSBuZXcgX092ZXJsYXkuZGVmYXVsdCh7CiAgICAgICAgICBlbGVtZW50OiBjb250YWluZXIsCiAgICAgICAgICBhdXRvUGFuOiB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogewogICAgICAgICAgICAgIGR1cmF0aW9uOiAyNTAKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOyAvLyDmt7vliqDliLBtYXAKCiAgICAgICAgdGhpcy5tYXBEYXRhLmFkZE92ZXJsYXkodGhpcy5vdmVybGF5KTsKICAgICAgfSAvLyDlvLnlh7rlsYLlhoXlrrkKICAgICAgLy8g6YGT6Lev5L+h5oGvCgoKICAgICAgdmFyIGZlYXR1cmVWYWwgPSBmZWF0dXJlLnZhbHVlc187CiAgICAgIHZhciBsYXllciA9IGZlYXR1cmVWYWwubGF5ZXIgPT0gbnVsbCA/ICIiIDogZmVhdHVyZVZhbC5sYXllcjsKICAgICAgdmFyIGhhbmRsZSA9IGZlYXR1cmVWYWwuaGFuZGxlID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWwuaGFuZGxlOwogICAgICB2YXIgbGVuZ3RoID0gZmVhdHVyZVZhbC5sZW5ndGggPT0gbnVsbCA/ICIiIDogTWF0aC5mbG9vcihmZWF0dXJlVmFsLmxlbmd0aCkgKyAiIG0iOwogICAgICB2YXIgY2FwYWNpdHkgPSBmZWF0dXJlVmFsLmNhcGFjaXR5ID09IG51bGwgPyAiIiA6IGZlYXR1cmVWYWwuY2FwYWNpdHkgKyAnIHBjdS9oJzsKICAgICAgdmFyIGFiRmxvdyA9IGZlYXR1cmVWYWwuYWJfZmxvdyA9PSBudWxsID8gIiIgOiBNYXRoLmZsb29yKGZlYXR1cmVWYWwuYWJfZmxvdykgKyAncGN1L2gnOwogICAgICB2YXIgYmFGbG93ID0gZmVhdHVyZVZhbC5iYV9mbG93ID09IG51bGwgPyAiIiA6IE1hdGguZmxvb3IoZmVhdHVyZVZhbC5iYV9mbG93KSArICcgcGN1L2gnOwogICAgICB2YXIgdG90YWxGbG93ID0gZmVhdHVyZVZhbC50b3RfZmxvdyA9PSBudWxsID8gIiIgOiBNYXRoLmZsb29yKGZlYXR1cmVWYWwudG90X2Zsb3cpICsgJ3BjdS9oJzsKICAgICAgdmFyIGFiVm9jID0gZmVhdHVyZVZhbC5hYl92b2MgPT0gbnVsbCA/ICIiIDogKDAsIF9jb21tb24uZm9ybWF0Rml4TnVtKShmZWF0dXJlVmFsLmFiX3ZvYywgMik7CiAgICAgIHZhciBiYVZvYyA9IGZlYXR1cmVWYWwuYmFfdm9jID09IG51bGwgPyAiIiA6ICgwLCBfY29tbW9uLmZvcm1hdEZpeE51bSkoZmVhdHVyZVZhbC5iYV92b2MsIDIpOwogICAgICB2YXIgbWF4Vm9jID0gZmVhdHVyZVZhbC5tYXhfdm9jID09IG51bGwgPyAiIiA6ICgwLCBfY29tbW9uLmZvcm1hdEZpeE51bSkoZmVhdHVyZVZhbC5tYXhfdm9jLCAyKTsKICAgICAgY29udGVudC5pbm5lckhUTUwgPSAiXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPSdjb2xvcjojMTIxOTI0O2ZvbnQtd2VpZ2h0OiBib2xkO3dpZHRoOjEwMCU7ei1pbmRleDo0O2hlaWdodDo5NXB4O3BhZGRpbmc6NnB4O2ZvbnQtc2l6ZTogMTVweCc+IiArIGxheWVyICsgIlxuICAgICAgICAgICAgPGRpdiBzdHlsZT0nbWFyZ2luLXRvcDoxMHB4Jz48YnV0dG9uIGlkPSdidG4xJyBzdHlsZT0nbWFyZ2luLXJpZ2h0OjEwcHg7Ym9yZGVyOiBub25lO2hlaWdodDogMjhweDtsaW5lLWhlaWdodDogMjhweDtib3JkZXItcmFkaXVzOiA0cHg7d2lkdGg6IDgwcHg7YmFja2dyb3VuZDogIzAwNEFCMztjb2xvcjogI2ZmZmZmZjsnIG9uY2xpY2s9XCJwcmV2aWV3MSgpXCI+XHU1N0ZBXHU2NzJDXHU0RkUxXHU2MDZGPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPSdidG4yJyBzdHlsZT1cImJvcmRlcjogbm9uZTtoZWlnaHQ6IDI4cHg7bGluZS1oZWlnaHQ6IDI4cHg7Ym9yZGVyLXJhZGl1czogNHB4O3dpZHRoOiA4MHB4O2JhY2tncm91bmQ6ICNEM0Q2REI7Y29sb3I6ICNmZmZmZmY7XCIgb25jbGljaz1cInByZXZpZXcyKClcIj5cdTRFQTRcdTkwMUFcdTRGRTFcdTYwNkY8L2J1dHRvbj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBzdHlsZT0nZm9udC1zaXplOiAxMHB4O3dpZHRoOjEwMCUnIGlkPSdpbmZvMSc+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMjZweDt3aWR0aDoxMDAlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwiY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPkFCXHU0RUE0XHU5MDFBXHU5MUNGOjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPiIgKyBhYkZsb3cgKyAiPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5CQVx1NEVBNFx1OTAxQVx1OTFDRjo8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj4iICsgYmFGbG93ICsgIjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAyNnB4O3dpZHRoOjEwMCVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9XCJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCI+XHU2MDNCXHU0RUE0XHU5MDFBXHU5MUNGOjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPiIgKyB0b3RhbEZsb3cgKyAiPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5BQlx1OTk3MVx1NTQ4Q1x1NUVBNjo8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj4iICsgYWJWb2MgKyAiPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5CQVx1OTk3MVx1NTQ4Q1x1NUVBNjo8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj4iICsgYmFWb2MgKyAiPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cdTY3MDBcdTU5MjdcdTk5NzFcdTU0OENcdTVFQTY6PC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCI+IiArIG1heFZvYyArICI8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9J2ZvbnQtc2l6ZTogMTBweDt3aWR0aDoxMDAlJyBpZD0naW5mbzInPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cdTkwNTNcdThERUZJRDo8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj4iICsgaGFuZGxlICsgIjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAyNnB4O3dpZHRoOjEwMCVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9XCJjb2xvcjojNjQ2NTY2O3dpZHRoOjQ1JTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCI+XHU3QjQ5XHU3RUE3OjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodDtmb250LXNpemU6MTRweDt3aWR0aDo1MCU7ZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPiIgKyBsYXllciArICI8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMjZweDt3aWR0aDoxMDAlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwiY29sb3I6IzY0NjU2Njt3aWR0aDo0NSU7ZGlzcGxheTogaW5saW5lLWJsb2NrO1wiPlx1OTU3Rlx1NUVBNjo8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxhIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHQ7Zm9udC1zaXplOjE0cHg7d2lkdGg6NTAlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj4iICsgbGVuZ3RoICsgIjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDI2cHg7d2lkdGg6MTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cImNvbG9yOiM2NDY1NjY7d2lkdGg6NDUlO2Rpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cdTkwMUFcdTg4NENcdTgwRkRcdTUyOUI6PC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0O2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjUwJTtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCI+IiArIGNhcGFjaXR5ICsgIjwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgIjsgLy8g6K6+572u5by55Ye65bGC5L2N572u5Y2z5Y+v5Ye6546wCgogICAgICB0aGlzLm92ZXJsYXkuc2V0UG9zaXRpb24oY29vcmRpbmF0ZSk7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmZvMScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgfSwKICAgIC8vIOa4hemZpOW8ueWHuuahhgogICAgcmVtb3ZlUG9wdXA6IGZ1bmN0aW9uIHJlbW92ZVBvcHVwKCkgewogICAgICBpZiAodGhpcy5vdmVybGF5KSB7CiAgICAgICAgLy8g6K6+572u5L2N572udW5kZWZpbmVk5Y+v6L6+5Yiw6ZqQ6JeP5riF6Zmk5by55Ye65qGGCiAgICAgICAgdGhpcy5vdmVybGF5LnNldFBvc2l0aW9uKHVuZGVmaW5lZCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpvKDmoIfngrnlh7vlnLDlm77kuovku7YKICAgIG1hcENsaWNrOiBmdW5jdGlvbiBtYXBDbGljayhldnQpIHsKICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodCgpOwogICAgICB2YXIgcGl4ZWwgPSB0aGlzLm1hcERhdGEuZ2V0RXZlbnRQaXhlbChldnQub3JpZ2luYWxFdmVudCk7CiAgICAgIHZhciBmZWF0dXJlID0gdGhpcy5tYXBEYXRhLmZvckVhY2hGZWF0dXJlQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24gKGZlYXR1cmUsIGxheWVyKSB7CiAgICAgICAgcmV0dXJuIGZlYXR1cmU7CiAgICAgIH0pOwoKICAgICAgaWYgKGZlYXR1cmUpIHsKICAgICAgICAvL+aNleaNieWIsOimgee0oOWQju+8jOW8ueahhgogICAgICAgIHZhciBjb29yZGluYXRlID0gZXZ0LmNvb3JkaW5hdGU7CiAgICAgICAgdGhpcy5hZGRQb3B1cChjb29yZGluYXRlLCBmZWF0dXJlKTsKICAgICAgICB0aGlzLmFkZEhpZ2hMaWdodFN0eWxlKGZlYXR1cmUsIHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVtb3ZlUG9wdXAoKTsKICAgICAgfQogICAgfSAvLyDpvKDmoIfngrnlh7vlnLDlm77kuovku7YKICAgIC8v5Zyw5Zu+54K55Ye75LqL5Lu2CiAgICAvLyBtYXBDbGljayAoZXZ0KSB7CiAgICAvLyAgIHRoaXMucmVtb3ZlUG9wdXAoKTsKICAgIC8vICAgbGV0IHRoaXNPYmogPSB0aGlzOwogICAgLy8gICB2YXIgdmlld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTsKICAgIC8vICAgdmFyIGZlYXR1cmVVcmwgPSB0aGlzLnZlY3RvckxheWVyLmdldFNvdXJjZSgpLmdldEZlYXR1cmVJbmZvVXJsKAogICAgLy8gICAgIGV2dFsnY29vcmRpbmF0ZSddLAogICAgLy8gICAgIHZpZXdSZXNvbHV0aW9uLAogICAgLy8gICAgICdFUFNHOjM4NTcnLAogICAgLy8gICAgIHsgJ0lORk9fRk9STUFUJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0KICAgIC8vICAgKTsKICAgIC8vICAgaWYgKGZlYXR1cmVVcmwpIHsKICAgIC8vICAgICBmZXRjaChmZWF0dXJlVXJsKQogICAgLy8gICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAvLyAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7CiAgICAvLyAgICAgICB9KQogICAgLy8gICAgICAgLnRoZW4oZnVuY3Rpb24gKGluZm8pIHsKICAgIC8vICAgICAgICAgdmFyIG9iakRhdGEgPSBKU09OLnBhcnNlKGluZm8pOwogICAgLy8gICAgICAgICBpZiAob2JqRGF0YSAmJiBvYmpEYXRhLmZlYXR1cmVzWzBdKSB7CiAgICAvLyAgICAgICAgICAgdGhpc09iai5hZGRQb3B1cChldnQuY29vcmRpbmF0ZSwgb2JqRGF0YS5mZWF0dXJlc1swXSk7CiAgICAvLyAgICAgICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgICAgdGhpc09iai5yZW1vdmVQb3B1cCgpOwogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9KTsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICB0aGlzLnJlbW92ZVBvcHVwKCk7CiAgICAvLyAgIH0KICAgIC8vIH0sCgogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAqIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AACA,oD,CACA;;AACAA;;AACA;AACA,iC,CACA;;AACA;EACAC,uEADA;EAEAC,UAFA;EAGAC,WAHA;EAIAC,QAJA,CAIA;;AAJA,G,CAQA;;AACA;EACAC;IACAC;EADA;AADA;eAKA;EACAC;IACAC,yBADA;IAEAC,gCAFA;IAGAC,iCAHA;IAIAC;EAJA,CADA;EAOAC,IAPA,kBAOA;IACA;MACAC,yBADA;MAEAC,YAFA;MAGAC,WAHA;MAIAC,iBAJA;MAKAC;QACAC,UADA;QAEAC;MAFA,EALA;MASAD,UATA;MAUAE,aAVA;MAWA;MACAC;QACAC,aADA;QAEAC,sBAFA;QAGAC;MAHA,CAZA;MAiBAC,cACA;QACAC,iBADA;QAEAC;MAFA,CADA,EAKA;QACAD,iBADA;QAEAC;MAFA,CALA,EAQA;QACAD,iBADA;QAEAC;MAFA,CARA,EAWA;QACAD,iBADA;QAEAC;MAFA,CAXA,EAcA;QACAD,iBADA;QAEAC;MAFA,CAdA,EAiBA;QACAD,cADA;QAEAC;MAFA,CAjBA,CAjBA;MAuCA;MACAC,cACA;QACAF,aADA;QAEAC,gBAFA;QAGAE;MAHA,CADA,EAMA;QACAH,gBADA;QAEAC,gBAFA;QAGAE;MAHA,CANA,EAUA;QACAH,iBADA;QAEAC,gBAFA;QAGAE;MAHA,CAVA,EAcA;QACAH,iBADA;QAEAC,gBAFA;QAGAE;MAHA,CAdA,EAkBA;QACAH,cADA;QAEAC,gBAFA;QAGAE;MAHA,CAlBA,CAxCA;MAgEA;MACAC;QACAC,aADA;QAEAnB,OACA;UAAAM;UAAAa;QAAA,CADA,EAEA;UAAAb;UAAAa;QAAA,CAFA;MAFA,CAjEA;MAwEA;MACAC;QACAD,gBADA;QAEAE,sBAFA;QAGArB;MAHA,CAzEA;MA8EA;MACAsB;QACAH,gBADA;QAEAE,sBAFA;QAGArB;MAHA,CA/EA;MAoFA;MACAuB,YACA;QACAC,gBADA;QAEAC;MAFA,CADA,EAKA;QACAD,iBADA;QAEAC;MAFA,CALA,EASA;QACAD,iBADA;QAEAC;MAFA,CATA,CArFA;MAmGAC,oDAnGA;MAoGAC;IApGA;EAuGA,CA/GA;EAgHAC,OAhHA,qBAgHA;IACA;IACAC,wDAFA,CAGA;;IACAC;MACAD;MACAA;MACAA;MACAA;IACA,CALA,CAJA,CAUA;;;IACAC;MACAD;MACAA;MACAA;MACAA;IACA,CALA;EAMA,CAjIA;EAkIAE;IAGAC,SAHA,qBAGAC,GAHA,EAGA;MACA;MACA;MACA;QACA;MACA,CAFA;IAGA,CATA;IAYAC,SAZA,uBAYA;MACA;MACA;IACA,CAfA;IAgBAC,SAhBA,uBAgBA;MACA;MACA;IACA,CAnBA;IAqBAC,cArBA,0BAqBAC,CArBA,EAqBA;MACAA;MACA;MACA;QACA;MACA,CAFA;MAGA;IACA,CA5BA;IA+BAC,cA/BA,0BA+BAC,MA/BA,EA+BAC,OA/BA,EA+BA;MACA;QACA;UACA;QACA;;QACA;UACA;UACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA;MACA,CAbA,CAaA;QACAC;MACA;IAEA,CAjDA;IAoDAC,gBApDA,4BAoDAH,MApDA,EAoDAC,OApDA,EAoDAG,KApDA,EAoDA7B,IApDA,EAoDA8B,OApDA,EAoDAC,OApDA,EAoDA;MACA;;MACA;QACA;MACA;;MACA;MACA;MACA;;MACA;QACAC;MACA;;MACAhC;MACA;MACA;IACA,CAlEA;IAsEAiC,kBAtEA,8BAsEAP,OAtEA,EAsEAG,KAtEA,EAsEAK,MAtEA,EAsEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACAC;MACA;;MACA;QACAC;MACA;;MAEA;QACA;UACA;UACA;UACA;UACAC;QACA;;QACA;UACA;;UACA;;UACA;UACAA;QACA;MAEA;;MACA;IACA,CArGA;IAwGAC,eAxGA,2BAwGAC,UAxGA,EAwGAC,OAxGA,EAwGAxC,IAxGA,EAwGAyC,OAxGA,EAwGAV,OAxGA,EAwGA9B,KAxGA,EAwGA;MAAA;;MACA;MACA;QACAyC,mBADA;QAEAC,sBAFA;QAGAC,wBAHA;QAIA5C;MAJA,wDAKA,QALA,mDAMAyC,OANA,mDAOAV,OAPA,gDAQA;QACA9B;MADA,EARA,oDAWAuC,OAXA;MAaA;QACAK;MADA;MAGAC;MACAC;MACA;IACA,CA7HA;IAgIAC,QAhIA,oBAgIAtB,OAhIA,EAgIA;MACA;MACA;MACA;;MACA;QACA;UACAzB;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;MACA,CAdA,MAcA;QACAA;MACA;;MACA;IACA,CAtJA;IAyJAgD,YAzJA,wBAyJAvB,OAzJA,EAyJA;MACA;MACA;MACA,gBAHA,CAIA;;MACA,6BALA,CAMA;;MACA,qCAPA,CAQA;;MACA,uCATA,CAUA;;MACA;MACA;MACAW,YACA;QACAa;UACAjD,YADA;UAEAkD;QAFA;MADA,EADA;MASA;IACA,CAhLA;IAmLA;IACAC,aApLA,yBAoLA1B,OApLA,EAoLA;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACAyB;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MACA;MACAd,YACA;QACAa;UACAjD,YADA;UAEAkD;QAFA;MADA,EADA;MAQA;IAEA,CAjNA;IAmNAE,YAnNA,0BAmNA;MACA;MACA;QACA;MACA,CAFA;IAGA,CAxNA;IA0NAC,eA1NA,2BA0NA5B,OA1NA,EA0NA;MACA,iBADA,CAEA;;MACA;MACA;;MACA;QACAW;MACA,CAFA,MAEA;QACAA;MACA,CATA,CAUA;;;MACA;;MACA;QACA;;QACA;UACAA;QACA;MACA,CALA,MAKA;QACA;;QACA;UACAA;QACA;MACA;;MACA;IACA,CAlPA;IAoPAkB,iBApPA,6BAoPAC,YApPA,EAoPAC,OApPA,EAoPA;MACA;MACAC;MACA;MACA;QACAC;UACA1D;QADA,EADA;QAIAiD;UACAjD,gBADA;UAEAkD;QAFA;MAJA;MASAM;QACApD,UADA;QAEA1B;UACAiF;QADA,EAFA;QAKAjE;UACA;QACA;MAPA;MASA8D;MACA;IACA,CA5QA;IA8QA;IACAI,cA/QA,4BA+QA;MACA;MACA;MACAC;QACA;UACAC;QACA;MACA,CAJA;;MAKA;QACA;MACA;IACA,CA1RA;IAkSA;IACAC,aAnSA,2BAmSA;MACA,kCADA,CAEA;;MACA;QACAC,yCADA;QAEAC,oBAFA;QAGAC;MAHA,GAHA,CAQA;;MACAC,+BATA,CAUA;;MACA;IACA,CA/SA;IAiTAC,eAjTA,2BAiTAC,KAjTA,EAiTA;MACA;;MACAC;QACA;QACA;UACAX;YAAAY;YAAAC;UAAA;QADA;QAIAH;UACA3F,oBADA;UAEAgB;YACA;UACA;QAJA;;QAMA2E;MAEA,CAdA;IAeA,CAlUA;IAuUA;IACAI,QAxUA,oBAwUAnC,UAxUA,EAwUAb,OAxUA,EAwUA;MACA,mBADA,CAEA;;MACA;MACA;;MACA,mBACA,CADA,MACA;QACA;QACA;UACAiD,kBADA;UAEAC;YACAC;cACAC;YADA;UADA;QAFA,GAFA,CAUA;;QACA;MACA,CAlBA,CAmBA;MACA;;;MACA;MACA;MACA;MACA;MACA;MAGA;MACA;MACA;MAEA;MACA;MACA;MAGAlE,iJACAmE,KADA,2zBAQAC,MARA,6SAYAC,MAZA,iTAgBAC,SAhBA,6SAoBAC,KApBA,6SAwBAC,KAxBA,uTA4BAC,MA5BA,4XAkCAC,MAlCA,qSAsCAP,KAtCA,qSA0CAQ,MA1CA,kUA+CAC,QA/CA,oEArCA,CAwFA;;MACA;MACAzE;MACAA;IACA,CApaA;IAsaA;IACA0E,WAvaA,yBAuaA;MACA;QACA;QACA;MACA;IACA,CA5aA;IA8aA;IACAC,QA/aA,oBA+aAC,GA/aA,EA+aA;MACA;MACA;MACA,wDACA;QACA;MACA,CAHA;;MAIA;QACA;QACA;QACA;QACA;MACA,CALA,MAKA;QACA;MACA;IACA,CA9bA,CAicA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;;EA/dA;AAlIA,C","names":["proj4","center","minZoom","maxZoom","zoom","source","url","components","nav_bar","pie_chartVue","Bar_chart_v","bar_chart_h","data","navList","show1","show2","vectorLayer","options","value","label","value1","style","line_width","line_stroke","interval","legend1List","text","color","legend2List","height","pieData","name","barData","lenged","barData2","tableData","project","programme","content","activeBtn","mounted","document","window","methods","changeMap","num","showClick","hideClick","getPointExtent","n","getMiddlePoint","coords","feature","console","iniFlowOrVocText","this_","offsetX","offsety","rotation","initFlowOrVocPoint","isFlow","ab_text","ba_text","styles","createTextStyle","coordinate","roation","offsetx","textAlign","textBaseline","font","geometry","style_","styles_","getColor","initVocStyle","stroke","width","initFlowStyle","switchChange","setCurrentStyle","addHighLightStyle","clickFeature","thisObj","featureObj","fill","features","clearHighlight","arr","highlightLayer","addLayerToMap","layers","target","view","map","initVectorLayer","_this","axios","featureProjection","dataProjection","addPopup","element","autoPan","animation","duration","layer","abFlow","baFlow","totalFlow","abVoc","baVoc","maxVoc","handle","length","capacity","removePopup","mapClick","evt"],"sourceRoot":"src/views/traffic-decision/components","sources":["tab3.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <nav_bar :navList=\"navList\"></nav_bar>\r\n    <div class=\"road-selector-pop\">\r\n      <div class=\"lenged-title\">道路样式</div>\r\n      <el-switch\r\n        class=\"div-switch\"\r\n        v-model=\"value1\"\r\n        active-color=\"#004AB3\"\r\n        inactive-color=\"#004AB3\"\r\n        inactive-text=\"路网饱和度\"\r\n        active-text=\"路网流量\"\r\n        @change=\"switchChange\"\r\n      >\r\n      </el-switch>\r\n      <!--图例 路网饱和度 -->\r\n      <div class=\"lenged1\" v-show=\"value1 == false\">\r\n        <div\r\n          v-for=\"(item, index) in legend1List\"\r\n          :key=\"index\"\r\n          class=\"lenged-item\"\r\n        >\r\n          <div class=\"dot\" :style=\"{ background: item.color }\"></div>\r\n          <div class=\"dot-text\">{{ item.text }}</div>\r\n        </div>\r\n      </div>\r\n      <!--图例 路网流量 -->\r\n      <div class=\"lenged2\" v-show=\"value1 == true\">\r\n        <div\r\n          v-for=\"(item, index) in legend2List\"\r\n          :key=\"index\"\r\n          class=\"lenged-item\"\r\n        >\r\n          <div\r\n            class=\"lin-dot\"\r\n            :style=\"{ background: item.color, height: item.height }\"\r\n          ></div>\r\n          <div class=\"dot-text\">{{ item.text }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 悬浮框 -->\r\n    <transition name=\"move\">\r\n      <div class=\"drawer-btn\" @click=\"showClick\" v-show=\"show2\">\r\n        优化建议 <img src=\"~@/assets/images/arrow-up.png\" class=\"jt-icon\" />\r\n      </div>\r\n    </transition>\r\n    <transition name=\"move\">\r\n      <div class=\"drawer-div\" v-show=\"show1\">\r\n        <div class=\"drawer-btn2\" @click=\"hideClick\">\r\n          优化建议 <img src=\"~@/assets/images/arrow-down.png\" class=\"jt-icon\" />\r\n        </div>\r\n        <div class=\"box-content\">\r\n          <div class=\"flex-box box1\">\r\n            <div>\r\n              <div class=\"box1-title\">推荐方案</div>\r\n              <el-table :data=\"tableData\" style=\"width: 100%; margin-top: 12px\">\r\n                <el-table-column\r\n                  prop=\"project\"\r\n                  label=\"对比项目\"\r\n                  :show-overflow-tooltip=\"true\"\r\n                >\r\n                </el-table-column>\r\n                <el-table-column\r\n                  prop=\"programme\"\r\n                  :show-overflow-tooltip=\"true\"\r\n                  label=\"推荐方案\"\r\n                >\r\n                </el-table-column>\r\n              </el-table>\r\n            </div>\r\n            <div class=\"summary-div\">\r\n              <div class=\"summary-title\">结论阐述</div>\r\n              <div class=\"summary-div\">{{ content }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex-box\">\r\n            <div class=\"box1-title\">建设前后对比</div>\r\n            <div>\r\n              <div class=\"box-div box2\">\r\n                <bar_chart_h :barData=\"barData2\"></bar_chart_h>\r\n              </div>\r\n              <div class=\"box-div box3\">\r\n                <bar_chart_v :barData=\"barData\"></bar_chart_v>\r\n              </div>\r\n              <div class=\"box-div box4\">\r\n                <pie_chart-vue :pieData=\"pieData\"></pie_chart-vue>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n    <!-- 地图 -->\r\n    <div id=\"map\" ref=\"map\">\r\n      <!--点击查看详情弹框-->\r\n      <div id=\"popup\" class=\"ol-popup2\">\r\n        <a\r\n          href=\"#\"\r\n          id=\"popup-closer\"\r\n          class=\"ol-popup-closer2\"\r\n          @click=\"removePopup\"\r\n        />\r\n        <div id=\"popup-content\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"change-div\">\r\n      <div\r\n        class=\"switch-btn left-btn\"\r\n        @click=\"changeMap(1)\"\r\n        :class=\"{ 'btn-active': activeBtn == 1 }\"\r\n      >\r\n        路网饱和度\r\n      </div>\r\n      <div\r\n        class=\"switch-btn\"\r\n        @click=\"changeMap(2)\"\r\n        :class=\"{ 'btn-active': activeBtn == 2 }\"\r\n      >\r\n        路网流量\r\n      </div>\r\n      <div\r\n        class=\"switch-btn right-btn\"\r\n        @click=\"changeMap(3)\"\r\n        :class=\"{ 'btn-active': activeBtn == 3 }\"\r\n      >\r\n        隐藏数值\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport nav_bar from '../../components/nav_bar.vue'\r\nimport pie_chartVue from './pie_chart.vue'\r\nimport bar_chart_h from './bar_chart_h.vue'\r\nimport Bar_chart_v from './bar_chart_v.vue'\r\nimport 'ol/ol.css'\r\nimport Map from 'ol/Map'\r\nimport * as olControl from 'ol/control'\r\nimport View from 'ol/View'\r\nimport { getWidth, getCenter } from 'ol/extent'\r\nimport TileLayer from 'ol/layer/Tile'\r\nimport WMTS from 'ol/source/WMTS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\r\nimport Projection from 'ol/proj/Projection'\r\nimport { transform } from 'ol/proj'\r\nimport proj4 from 'proj4'\r\nimport { register } from 'ol/proj/proj4';\r\nimport VectorSource from 'ol/source/Vector'\r\nimport { TileWMS } from 'ol/source'\r\nimport VectorLayer from 'ol/layer/Vector'\r\nimport Feature from 'ol/Feature'\r\nimport { Draw } from 'ol/interaction'\r\nimport { Style, Circle, Stroke, Fill, Icon, IconImage, Image, Text } from 'ol/src/style'\r\nimport WKT from 'ol/format/WKT'\r\nimport GeoJSON from 'ol/format/GeoJSON'\r\nimport Overlay from 'ol/Overlay'\r\nimport * as echarts from \"echarts\";\r\nimport axios from 'axios'\r\nimport request from '@/utils/request'\r\nimport { formatFixNum } from \"@/api/common/common\";\r\nimport * as turf from '@turf/turf';\r\nimport Point from 'ol/geom/Point';\r\n\r\n\r\n\r\n//中心坐标\r\nconst centerCordinate = [656813.44256, 3560432.98245]\r\n//坐标定义\r\nproj4.defs(\"EPSG:4548\", \"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs\");\r\nregister(proj4);\r\nconst layerName = 'Test:plane1_v2';\r\n//地图初始化\r\nconst view = new View({\r\n  center: transform(centerCordinate, 'EPSG:4548', 'EPSG:3857'),\r\n  minZoom: 4,\r\n  maxZoom: 18,\r\n  zoom: 14// 地图初始化的缩放级别\r\n})\r\n\r\n\r\n//高德地图图层\r\nconst gaodeMapLayer = new TileLayer({\r\n  source: new XYZ({\r\n    url: 'http://webst0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scl=2&style=7&x={x}&y={y}&z={z}'\r\n  })\r\n});\r\nexport default {\r\n  components: {\r\n    nav_bar,\r\n    pie_chartVue,\r\n    Bar_chart_v,\r\n    bar_chart_h\r\n  },\r\n  data () {\r\n    return {\r\n      navList: ['交通决策', '优化建议'],\r\n      show1: false,\r\n      show2: true,\r\n      vectorLayer: null,\r\n      options: [{\r\n        value: '1',\r\n        label: '集疏运方案'\r\n      }],\r\n      value: '1',\r\n      value1: false,\r\n      //图例1\r\n      style: {\r\n        line_width: 3,\r\n        line_stroke: '#459c50',\r\n        interval: 40\r\n      },\r\n      legend1List: [\r\n        {\r\n          text: '0.00-0.25',\r\n          color: '#B1DB16'\r\n        },\r\n        {\r\n          text: '0.25-0.50',\r\n          color: '#EBCC0C'\r\n        }, {\r\n          text: '0.50-0.75',\r\n          color: '#EB7323'\r\n        }, {\r\n          text: '0.75-1.00',\r\n          color: '#66A6FF'\r\n        }, {\r\n          text: '1.00-1.25',\r\n          color: '#1979FF'\r\n        }, {\r\n          text: '>=1.25',\r\n          color: '#0CE7F5'\r\n        },\r\n      ],\r\n      //图例2\r\n      legend2List: [\r\n        {\r\n          text: '0-600',\r\n          color: '#7E59EB',\r\n          height: '2px'\r\n        },\r\n        {\r\n          text: '600-1500',\r\n          color: '#7E59EB',\r\n          height: '4px'\r\n        }, {\r\n          text: '1500-3000',\r\n          color: '#7E59EB',\r\n          height: '6px'\r\n        }, {\r\n          text: '3000-5000',\r\n          color: '#7E59EB',\r\n          height: '8px'\r\n        }, {\r\n          text: '5000以上',\r\n          color: '#7E59EB',\r\n          height: '10px'\r\n        }\r\n      ],\r\n      //饼图数据\r\n      pieData: {\r\n        name: '交通量对比',\r\n        data: [\r\n          { value: 1048, name: '建设前' },\r\n          { value: 735, name: '建设后' }\r\n        ]\r\n      },\r\n      //柱状图 横向\r\n      barData: {\r\n        name: '车辆平均行驶速度',\r\n        lenged: ['建设前', '建设后'],\r\n        data: ['500', '99'],\r\n      },\r\n      //柱状图 竖向\r\n      barData2: {\r\n        name: '车辆平均延误时间',\r\n        lenged: ['建设前', '建设后'],\r\n        data: ['200', '129'],\r\n      },\r\n      //表格 数据\r\n      tableData: [\r\n        {\r\n          project: '集疏运方案',\r\n          programme: '方案2'\r\n        },\r\n        {\r\n          project: '......',\r\n          programme: '......'\r\n        },\r\n        {\r\n          project: '......',\r\n          programme: '......'\r\n        }\r\n      ],\r\n      content: '采用相应方案组合后收费站平均排队时间减少5%路网整体通行效率提升10%......',\r\n      activeBtn: ''\r\n\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initVectorLayer(this);\r\n    document.getElementById('popup').style.display = 'none';\r\n    //交通信息点击按钮\r\n    window.preview1 = function () {\r\n      document.getElementById('info2').style.display = 'block';\r\n      document.getElementById('info1').style.display = 'none';\r\n      document.getElementById('btn1').style.background = '#004AB3';\r\n      document.getElementById('btn2').style.background = '#D3D6DB';\r\n    }\r\n    //基本信息点击按钮\r\n    window.preview2 = function () {\r\n      document.getElementById('info2').style.display = 'none';\r\n      document.getElementById('info1').style.display = 'block';\r\n      document.getElementById('btn2').style.background = '#004AB3';\r\n      document.getElementById('btn1').style.backgroundColor = '#D3D6DB';\r\n    }\r\n  },\r\n  methods: {\r\n\r\n\r\n    changeMap (num) {\r\n      this.activeBtn = num;\r\n      let this_ = this;\r\n      this.vectorLayer.setStyle(function (feature, res) {\r\n        return this_.setCurrentStyle(feature)\r\n      });\r\n    },\r\n\r\n\r\n    showClick () {\r\n      this.show1 = true\r\n      this.show2 = false\r\n    },\r\n    hideClick () {\r\n      this.show2 = true\r\n      this.show1 = false\r\n    },\r\n\r\n    getPointExtent (n) {\r\n      n = n ? n : 1.2;\r\n      let view = this.mapData.getView();\r\n      let mapsize = this.mapData.getSize().map(it_ => {\r\n        return it_ * n\r\n      });\r\n      return view.calculateExtent(mapsize);\r\n    },\r\n\r\n\r\n    getMiddlePoint (coords, feature) {\r\n      try {\r\n        if (coords == null || coords.length == 0 || coords == undefined) {\r\n          return null;\r\n        }\r\n        if (coords.length <= 3) {\r\n          var point_features = turf.points(feature.getGeometry().getCoordinates()[0]);\r\n          return new Point(turf.center(point_features).geometry.coordinates);\r\n        }\r\n        if (coords.length % 2 == 0) {\r\n          return new Point(coords[coords.length / 2])\r\n        } else {\r\n          return new Point(coords[Math.ceil(coords.length / 2)])\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n\r\n    },\r\n\r\n\r\n    iniFlowOrVocText (coords, feature, this_, text, offsetX, offsety) {\r\n      let centerPoint = this.getMiddlePoint(coords, feature);\r\n      if (!centerPoint) {\r\n        return null;\r\n      }\r\n      let pix_start = this_.mapData.getPixelFromCoordinate(coords[0])\r\n      let pix_end = this_.mapData.getPixelFromCoordinate(centerPoint.flatCoordinates);\r\n      var rotation = Math.PI + Math.atan2(pix_end[1] - pix_start[1], pix_end[0] - pix_start[0]);\r\n      if (pix_end[0] > pix_start[0]) {\r\n        rotation = rotation + Math.PI\r\n      }\r\n      text = text + \"\";\r\n      let color = this_.getColor(feature);\r\n      return this.createTextStyle(centerPoint, rotation, text, offsetX, offsety, color);\r\n    },\r\n\r\n\r\n\r\n    initFlowOrVocPoint (feature, this_, isFlow) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let styles = [];\r\n      let extent_ = this_.getPointExtent();\r\n      let line_ = turf.multiLineString(coords);\r\n      let line_clip_arr = turf.bboxClip(line_, extent_)\r\n      let ab_text = isFlow ? feature.get(\"ab_flow\") : feature.get(\"ab_voc\");\r\n      let ba_text = isFlow ? feature.get(\"ba_flow\") : feature.get(\"ba_voc\");\r\n      if (ab_text != null && ab_text != '') {\r\n        ab_text = isFlow ? Math.floor(ab_text) : formatFixNum(ab_text, 2);\r\n      }\r\n      if (ba_text != null && ba_text != '') {\r\n        ba_text = isFlow ? Math.floor(ba_text) : formatFixNum(ba_text, 2);\r\n      }\r\n\r\n      if (line_clip_arr.geometry.type == \"LineString\") {\r\n        if (ab_text != null && ab_text != '') {\r\n          let offsetX = 15;\r\n          let offsety = 15;\r\n          let style_ab = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ab_text, offsetX, offsety);\r\n          styles = styles.concat(style_ab)\r\n        }\r\n        if (ba_text != null && ba_text != '') {\r\n          let offsetX = -15;\r\n          let offsety = -15;\r\n          let style_ba = this_.iniFlowOrVocText(line_clip_arr.geometry.coordinates, feature, this_, ba_text, offsetX, offsety);\r\n          styles = styles.concat(style_ba)\r\n        }\r\n\r\n      }\r\n      return styles;\r\n    },\r\n\r\n\r\n    createTextStyle (coordinate, roation, text, offsetx, offsety, color) {\r\n      let styles_ = [];\r\n      let text_ = new Text({\r\n        textAlign: 'center',\r\n        textBaseline: 'middle',\r\n        font: 'normal 15px 微软雅黑',\r\n        text: text,\r\n        textBaseline: \"middle\", //文本基线\r\n        offsetY: offsetx,\r\n        offsetX: offsety,\r\n        fill: new Fill({\r\n          color: color\r\n        }),\r\n        rotation: roation,\r\n      })\r\n      let style_ = new Style({\r\n        geometry: coordinate,\r\n      })\r\n      style_.setText(text_)\r\n      styles_.push(style_)\r\n      return styles_;\r\n    },\r\n\r\n\r\n    getColor (feature) {\r\n      var max_voc = feature.get(\"max_voc\");\r\n      var color = this.style.line_stroke;\r\n      let switchColor = this.value1;\r\n      if (!switchColor) {\r\n        if (max_voc > 0 && max_voc <= 0.25) {\r\n          color = '#b1db16';\r\n        } else if (max_voc > 0.25 && max_voc <= 0.5) {\r\n          color = '#ebcc0c';\r\n        } else if (max_voc > 0.5 && max_voc <= 0.75) {\r\n          color = '#eb7323';\r\n        } else if (max_voc > 0.75 && max_voc <= 1) {\r\n          color = '#66a6ff';\r\n        } else if (max_voc > 1 && max_voc <= 1.25) {\r\n          color = '#1979ff';\r\n        } else if (max_voc > 1.25) {\r\n          color = '#0ce7f5';\r\n        }\r\n      } else {\r\n        color = '#7E59EB';\r\n      }\r\n      return color;\r\n    },\r\n\r\n\r\n    initVocStyle (feature) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let this_ = this;\r\n      let styles = [];\r\n      // 方向（1单向，-1反向单向，0双向）\r\n      var dir = feature.get(\"dir\");\r\n      // 饱和度\r\n      var max_voc = feature.get(\"max_voc\");\r\n      // 流量\r\n      var tot_flow = feature.get(\"tot_flow\");\r\n      // 颜色默认值\r\n      var color = this_.getColor(feature);\r\n      var width = this_.style.line_width;\r\n      styles.push(\r\n        new Style({\r\n          stroke: new Stroke({\r\n            color: color,\r\n            width: width,\r\n          }),\r\n        })\r\n      )\r\n\r\n      return styles;\r\n    },\r\n\r\n\r\n    //初始化路网流量样式\r\n    initFlowStyle (feature) {\r\n      let coords = feature.getGeometry().getCoordinates();\r\n      let this_ = this;\r\n      let styles = [];\r\n      var tot_flow = feature.get(\"tot_flow\");\r\n      var pec = 1;\r\n      var width = this_.style.line_width;\r\n      if (tot_flow > 0 && tot_flow <= 600) {\r\n        width = 2 * pec;\r\n      } else if (tot_flow > 600 && tot_flow <= 1500) {\r\n        width = 4 * pec;\r\n      } else if (tot_flow > 1500 && tot_flow <= 3000) {\r\n        width = 6 * pec;\r\n      } else if (tot_flow > 3000 && tot_flow <= 5000) {\r\n        width = 8 * pec;\r\n      } else if (tot_flow > 5000) {\r\n        width = 10 * pec;\r\n      }\r\n      var color = this_.getColor(feature);\r\n      styles.push(\r\n        new Style({\r\n          stroke: new Stroke({\r\n            color: color,\r\n            width: width,\r\n          }),\r\n        })\r\n      )\r\n      return styles;\r\n\r\n    },\r\n\r\n    switchChange () {\r\n      let this_ = this;\r\n      this.vectorLayer.setStyle(function (feature, res) {\r\n        return this_.setCurrentStyle(feature)\r\n      });\r\n    },\r\n\r\n    setCurrentStyle (feature) {\r\n      let this_ = this;\r\n      //开关控制样式\r\n      let changeVal = this.value1;\r\n      let styles = [];\r\n      if (!changeVal) {\r\n        styles = styles.concat(this_.initVocStyle(feature));\r\n      } else {\r\n        styles = styles.concat(this_.initFlowStyle(feature));\r\n      }\r\n      //隐藏文字 显示文字样式\r\n      let activeBtn = this.activeBtn;\r\n      if (activeBtn == 1) {\r\n        let style = this_.initFlowOrVocPoint(feature, this_, false);\r\n        if (style) {\r\n          styles = styles.concat(style)\r\n        }\r\n      } else if (activeBtn == 2) {\r\n        let style = this_.initFlowOrVocPoint(feature, this_, true);\r\n        if (style) {\r\n          styles = styles.concat(style)\r\n        }\r\n      }\r\n      return styles;\r\n    },\r\n\r\n    addHighLightStyle (clickFeature, thisObj) {\r\n      let featureObj = [];\r\n      featureObj.push(clickFeature);\r\n      this.clearHighlight();\r\n      let highLightStyle = new Style({\r\n        fill: new Fill({\r\n          color: \"#ffff00\",\r\n        }),\r\n        stroke: new Stroke({\r\n          color: \"#ffff00\",\r\n          width: 8\r\n        }),\r\n      })\r\n      thisObj.highLightLayer = new VectorLayer({\r\n        name: \"dk\",\r\n        source: new VectorSource({\r\n          features: featureObj,\r\n        }),\r\n        style: (feature, solution) => {\r\n          return highLightStyle;\r\n        }\r\n      })\r\n      thisObj.highLightLayer.set(\"id\", \"highlightLayer\")\r\n      this.mapData.addLayer(thisObj.highLightLayer)\r\n    },\r\n\r\n    //删除高亮图层\r\n    clearHighlight () {\r\n      let arr = this.mapData.getLayers().array_\r\n      let highlightLayer = {}\r\n      arr.forEach(item => {\r\n        if (item.get(\"id\") == \"highlightLayer\") {\r\n          highlightLayer = item\r\n        }\r\n      })\r\n      if (highlightLayer && highlightLayer.className_) {\r\n        this.mapData.removeLayer(highlightLayer)\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // 初始化地图\r\n    addLayerToMap () {\r\n      const mapContainer = this.$refs.map\r\n      //将图层加入Map\r\n      const map = new Map({\r\n        layers: [gaodeMapLayer, this.vectorLayer],\r\n        target: mapContainer,\r\n        view: view\r\n      });\r\n      // 添加鼠标点击事件\r\n      map.on('click', this.mapClick);\r\n      // 保存地图\r\n      this.mapData = map\r\n    },\r\n\r\n    initVectorLayer (_this) {\r\n      var url = process.env.VUE_APP_GIS_BASE_URL + '/Test/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=' + encodeURI(layerName) + '&maxFeatures=500000000&outputFormat=application%2Fjson';\r\n      axios.get(url, null).then(function (res) {\r\n        var featuresData = res.data;\r\n        var vectorSource = new VectorSource({\r\n          features: (new GeoJSON({ featureProjection: 'EPSG:3857', dataProjection: 'EPSG:4548' })).readFeatures(featuresData)\r\n        });\r\n\r\n        _this.vectorLayer = new VectorLayer({\r\n          source: vectorSource,\r\n          style: (feature, solution) => {\r\n            return _this.initVocStyle(feature)\r\n          }\r\n        })\r\n        _this.addLayerToMap();\r\n\r\n      })\r\n    },\r\n\r\n\r\n\r\n\r\n    // 弹出框\r\n    addPopup (coordinate, feature) {\r\n      this.removePopup()\r\n      // 获取弹出层DOM\r\n      let container = document.getElementById('popup')\r\n      let content = document.getElementById('popup-content')\r\n      if (this.overlay) {\r\n      } else {\r\n        // 创建Overlay弹出层绑定DOM\r\n        this.overlay = new Overlay({\r\n          element: container,\r\n          autoPan: {\r\n            animation: {\r\n              duration: 250\r\n            }\r\n          }\r\n        })\r\n        // 添加到map\r\n        this.mapData.addOverlay(this.overlay)\r\n      }\r\n      // 弹出层内容\r\n      // 道路信息\r\n      let featureVal = feature.values_;\r\n      let layer = featureVal.layer == null ? \"\" : featureVal.layer;\r\n      let handle = featureVal.handle == null ? \"\" : featureVal.handle;\r\n      let length = featureVal.length == null ? \"\" : Math.floor(featureVal.length) + \" m\";\r\n      let capacity = featureVal.capacity == null ? \"\" : featureVal.capacity + ' pcu/h';\r\n\r\n\r\n      let abFlow = featureVal.ab_flow == null ? \"\" : Math.floor(featureVal.ab_flow) + 'pcu/h';\r\n      let baFlow = featureVal.ba_flow == null ? \"\" : Math.floor(featureVal.ba_flow) + ' pcu/h';\r\n      let totalFlow = featureVal.tot_flow == null ? \"\" : Math.floor(featureVal.tot_flow) + 'pcu/h';\r\n\r\n      let abVoc = featureVal.ab_voc == null ? \"\" : formatFixNum(featureVal.ab_voc, 2);\r\n      let baVoc = featureVal.ba_voc == null ? \"\" : formatFixNum(featureVal.ba_voc, 2);\r\n      let maxVoc = featureVal.max_voc == null ? \"\" : formatFixNum(featureVal.max_voc, 2);\r\n\r\n\r\n      content.innerHTML = `\r\n            <div style='color:#121924;font-weight: bold;width:100%;z-index:4;height:95px;padding:6px;font-size: 15px'>`+ layer + `\r\n            <div style='margin-top:10px'><button id='btn1' style='margin-right:10px;border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #004AB3;color: #ffffff;' onclick=\"preview1()\">基本信息</button>\r\n            <button id='btn2' style=\"border: none;height: 28px;line-height: 28px;border-radius: 4px;width: 80px;background: #D3D6DB;color: #ffffff;\" onclick=\"preview2()\">交通信息</button></div>\r\n            </div>\r\n            <div style='font-size: 10px;width:100%' id='info1'>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">AB交通量:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ abFlow + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">BA交通量:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ baFlow + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">总交通量:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ totalFlow + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">AB饱和度:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ abVoc + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">BA饱和度:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ baVoc + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">最大饱和度:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ maxVoc + `</a>\r\n                </div>\r\n            </div>\r\n            <div style='font-size: 10px;width:100%' id='info2'>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">道路ID:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ handle + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">等级:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ layer + `</a>\r\n                </div>\r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">长度:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ length + `</a>\r\n                </div>\r\n               \r\n                <div style=\"height: 26px;width:100%\">\r\n                    <a style=\"color:#646566;width:45%;display: inline-block;\">通行能力:</a>\r\n                    <a style=\"text-align: right;font-size:14px;width:50%;display: inline-block;\">`+ capacity + `</a>\r\n                </div>\r\n            </div>\r\n            `\r\n      // 设置弹出层位置即可出现\r\n      this.overlay.setPosition(coordinate)\r\n      document.getElementById('info1').style.display = 'none';\r\n      document.getElementById('popup').style.display = 'block';\r\n    },\r\n\r\n    // 清除弹出框\r\n    removePopup () {\r\n      if (this.overlay) {\r\n        // 设置位置undefined可达到隐藏清除弹出框\r\n        this.overlay.setPosition(undefined)\r\n      }\r\n    },\r\n\r\n    // 鼠标点击地图事件\r\n    mapClick (evt) {\r\n      this.clearHighlight();\r\n      let pixel = this.mapData.getEventPixel(evt.originalEvent);\r\n      let feature = this.mapData.forEachFeatureAtPixel(pixel,\r\n        function (feature, layer) {\r\n          return feature;\r\n        });\r\n      if (feature) {\r\n        //捕捉到要素后，弹框\r\n        let coordinate = evt.coordinate\r\n        this.addPopup(coordinate, feature)\r\n        this.addHighLightStyle(feature, this)\r\n      } else {\r\n        this.removePopup();\r\n      }\r\n    },\r\n\r\n\r\n    // 鼠标点击地图事件\r\n    //地图点击事件\r\n    // mapClick (evt) {\r\n    //   this.removePopup();\r\n    //   let thisObj = this;\r\n    //   var viewResolution = view.getResolution();\r\n    //   var featureUrl = this.vectorLayer.getSource().getFeatureInfoUrl(\r\n    //     evt['coordinate'],\r\n    //     viewResolution,\r\n    //     'EPSG:3857',\r\n    //     { 'INFO_FORMAT': 'application/json' }\r\n    //   );\r\n    //   if (featureUrl) {\r\n    //     fetch(featureUrl)\r\n    //       .then(function (response) {\r\n    //         return response.text();\r\n    //       })\r\n    //       .then(function (info) {\r\n    //         var objData = JSON.parse(info);\r\n    //         if (objData && objData.features[0]) {\r\n\r\n    //           thisObj.addPopup(evt.coordinate, objData.features[0]);\r\n    //         } else {\r\n    //           thisObj.removePopup();\r\n    //         }\r\n\r\n    //       });\r\n    //   } else {\r\n    //     this.removePopup();\r\n    //   }\r\n    // },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~@/assets/styles/draws.scss';\r\n@import '~@/assets/styles/popup.scss';\r\n@import '~@/assets/styles/traffic.scss';\r\n.change-div {\r\n  position: absolute;\r\n  right: 4rem;\r\n  top: 0.5rem;\r\n  z-index: 999;\r\n  .switch-btn {\r\n    display: inline-block;\r\n    width: 1.2875rem;\r\n    height: 0.475rem;\r\n    text-align: center;\r\n    background: #004ab3;\r\n    box-sizing: border-box;\r\n    border: 0.025rem solid #004ab3;\r\n    font-size: 0.175rem;\r\n    font-weight: bold;\r\n    line-height: 0.4375rem;\r\n    color: #ffffff;\r\n    cursor: pointer;\r\n    box-shadow: 0 0.125rem 0.25rem 0.0125rem rgb(138 144 153 / 40%);\r\n  }\r\n  .left-btn {\r\n    border-radius: 0.2375rem 0 0 0.2375rem;\r\n    margin-right: 0.1rem;\r\n  }\r\n  .right-btn {\r\n    border-radius: 0 0.2375rem 0.2375rem 0;\r\n    margin-left: 0.1rem;\r\n  }\r\n  .switch-btn:hover {\r\n    background: linear-gradient(180deg, #2ca6ff 37%, #00ffb7 100%);\r\n    color: #ffffff;\r\n  }\r\n  .btn-active {\r\n    background: linear-gradient(180deg, #2ca6ff 37%, #00ffb7 100%);\r\n    color: #ffffff;\r\n  }\r\n}\r\n</style>"]}]}